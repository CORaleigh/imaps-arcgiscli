(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[2200,1012,995],{71012:(t,e,i)=>{"use strict";i.d(e,{b:()=>r,c:()=>s,g:()=>n});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return r(null==e&&i.path)}},i.exports),i.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},5627:(t,e,i)=>{"use strict";i.d(e,{b:()=>a,l:()=>s,o:()=>r});var n=i(71012),s=(0,n.c)((function(t){var e;void 0!==(e=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(t.exports=e)})),r=(0,n.c)((function(t){var e;void 0!==(e=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"])&&(t.exports=e)})),a=(0,n.c)((function(t){var e;void 0!==(e=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"])&&(t.exports=e)}))},98501:(t,e,i)=>{"use strict";i.d(e,{a:()=>o,b:()=>_,c:()=>c,f:()=>s,i:()=>a,j:()=>u,m:()=>l,n:()=>d,r:()=>h,s:()=>r});var n=i(60418);function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function r(t,e,i,n,s,r,a,l,o,h){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=r,t[5]=a,t[6]=l,t[7]=o,t[8]=h,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function l(t,e,i){const n=e[0],s=e[1],r=e[2],a=e[3],l=e[4],o=e[5],h=e[6],c=e[7],u=e[8],_=i[0],d=i[1],f=i[2],g=i[3],p=i[4],T=i[5],E=i[6],m=i[7],b=i[8];return t[0]=_*n+d*a+f*h,t[1]=_*s+d*l+f*c,t[2]=_*r+d*o+f*u,t[3]=g*n+p*a+T*h,t[4]=g*s+p*l+T*c,t[5]=g*r+p*o+T*u,t[6]=E*n+m*a+b*h,t[7]=E*s+m*l+b*c,t[8]=E*r+m*o+b*u,t}function o(t,e,i){const n=e[0],s=e[1],r=e[2],a=e[3],l=e[4],o=e[5],h=e[6],c=e[7],u=e[8],_=i[0],d=i[1];return t[0]=n,t[1]=s,t[2]=r,t[3]=a,t[4]=l,t[5]=o,t[6]=_*n+d*a+h,t[7]=_*s+d*l+c,t[8]=_*r+d*o+u,t}function h(t,e,i){const n=e[0],s=e[1],r=e[2],a=e[3],l=e[4],o=e[5],h=e[6],c=e[7],u=e[8],_=Math.sin(i),d=Math.cos(i);return t[0]=d*n+_*a,t[1]=d*s+_*l,t[2]=d*r+_*o,t[3]=d*a-_*n,t[4]=d*l-_*s,t[5]=d*o-_*r,t[6]=h,t[7]=c,t[8]=u,t}function c(t,e,i){const n=i[0],s=i[1],r=i[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=r*e[6],t[7]=r*e[7],t[8]=r*e[8],t}function u(t,e,i){const n=i[0],s=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function _(t,e){const i=e[0],n=e[1],s=e[2],r=e[4],a=e[5],l=e[6],o=e[8],h=e[9],c=e[10],u=c*a-l*h,_=-c*r+l*o,d=h*r-a*o,f=i*u+n*_+s*d;if(!f)return null;const g=1/f;return t[0]=u*g,t[1]=(-c*n+s*h)*g,t[2]=(l*n-s*a)*g,t[3]=_*g,t[4]=(c*i-s*o)*g,t[5]=(-l*i+s*r)*g,t[6]=d*g,t[7]=(-h*i+n*o)*g,t[8]=(a*i-n*r)*g,t}function d(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],a=e[4],l=e[5],o=e[6],h=e[7],c=e[8],u=e[9],_=e[10],d=e[11],f=e[12],g=e[13],p=e[14],T=e[15],E=i*l-n*a,m=i*o-s*a,b=i*h-r*a,x=n*o-s*l,M=n*h-r*l,F=s*h-r*o,S=c*g-u*f,A=c*p-_*f,R=c*T-d*f,v=u*p-_*g,C=u*T-d*g,D=_*T-d*p;let w=E*D-m*C+b*v+x*R-M*A+F*S;return w?(w=1/w,t[0]=(l*D-o*C+h*v)*w,t[1]=(o*R-a*D-h*A)*w,t[2]=(a*C-l*R+h*S)*w,t[3]=(s*C-n*D-r*v)*w,t[4]=(i*D-s*R+r*A)*w,t[5]=(n*R-i*C-r*S)*w,t[6]=(g*F-p*M+T*x)*w,t[7]=(p*b-f*F-T*m)*w,t[8]=(f*M-g*b+T*E)*w,t):null}function f(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}let g=l,p=f;Object.freeze({__proto__:null,fromMat4:s,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},set:r,identity:a,transpose:function(t,e){if(t===e){const i=e[1],n=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],a=e[4],l=e[5],o=e[6],h=e[7],c=e[8],u=c*a-l*h,_=-c*r+l*o,d=h*r-a*o;let f=i*u+n*_+s*d;return f?(f=1/f,t[0]=u*f,t[1]=(-c*n+s*h)*f,t[2]=(l*n-s*a)*f,t[3]=_*f,t[4]=(c*i-s*o)*f,t[5]=(-l*i+s*r)*f,t[6]=d*f,t[7]=(-h*i+n*o)*f,t[8]=(a*i-n*r)*f,t):null},adjoint:function(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],a=e[4],l=e[5],o=e[6],h=e[7],c=e[8];return t[0]=a*c-l*h,t[1]=s*h-n*c,t[2]=n*l-s*a,t[3]=l*o-r*c,t[4]=i*c-s*o,t[5]=s*r-i*l,t[6]=r*h-a*o,t[7]=n*o-i*h,t[8]=i*a-n*r,t},determinant:function(t){const e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],l=t[6],o=t[7],h=t[8];return e*(h*r-a*o)+i*(-h*s+a*l)+n*(o*s-r*l)},multiply:l,translate:o,rotate:h,scale:c,scaleByVec2:u,fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation:function(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat:function(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],a=i+i,l=n+n,o=s+s,h=i*a,c=n*a,u=n*l,_=s*a,d=s*l,f=s*o,g=r*a,p=r*l,T=r*o;return t[0]=1-u-f,t[3]=c-T,t[6]=_+p,t[1]=c+T,t[4]=1-h-f,t[7]=d-g,t[2]=_-p,t[5]=d+g,t[8]=1-h-u,t},normalFromMat4Legacy:_,normalFromMat4:d,projection:function(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t},subtract:f,multiplyScalar:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t},multiplyScalarAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals:function(t,e){const i=t[0],s=t[1],r=t[2],a=t[3],l=t[4],o=t[5],h=t[6],c=t[7],u=t[8],_=e[0],d=e[1],f=e[2],g=e[3],p=e[4],T=e[5],E=e[6],m=e[7],b=e[8];return Math.abs(i-_)<=n.E*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-d)<=n.E*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(r-f)<=n.E*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-g)<=n.E*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-p)<=n.E*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(o-T)<=n.E*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(h-E)<=n.E*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(c-m)<=n.E*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(u-b)<=n.E*Math.max(1,Math.abs(u),Math.abs(b))},mul:g,sub:p})},14286:(t,e,i)=>{"use strict";i.d(e,{a:()=>c,b:()=>A,c:()=>s,d:()=>l,e:()=>T,f:()=>m,g:()=>E,h:()=>a,i:()=>_,j:()=>d,k:()=>F,l:()=>f,m:()=>b,n:()=>p,o:()=>x,p:()=>u,q:()=>g,s:()=>r,t:()=>M});var n=i(60418);function s(t,e){return t[0]=e[0],t[1]=e[1],t}function r(t,e,i){return t[0]=e,t[1]=i,t}function a(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function l(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function o(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function h(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function c(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function u(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function _(t,e){const i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)}function d(t,e){const i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function f(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function g(t){const e=t[0],i=t[1];return e*e+i*i}function p(t,e){return t[0]=-e[0],t[1]=-e[1],t}function T(t,e){const i=e[0],n=e[1];let s=i*i+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function E(t,e){return t[0]*e[0]+t[1]*e[1]}function m(t,e,i){const n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t}function b(t,e,i,n){const s=e[0],r=e[1];return t[0]=s+n*(i[0]-s),t[1]=r+n*(i[1]-r),t}function x(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s,t[1]=i[1]*n+i[3]*s,t}function M(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s+i[4],t[1]=i[1]*n+i[3]*s+i[5],t}function F(t,e){return t[0]===e[0]&&t[1]===e[1]}const S=f,A=l,R=o,v=h,C=_,D=d,w=g;Object.freeze({__proto__:null,copy:s,set:r,add:a,subtract:l,multiply:o,divide:h,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},max:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale:c,scaleAndAdd:u,distance:_,squaredDistance:d,length:f,squaredLength:g,negate:p,inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize:T,dot:E,cross:m,lerp:b,random:function(t,e){e=e||1;const i=2*(0,n.R)()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t},transformMat2:x,transformMat2d:M,transformMat3:function(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[3]*s+i[6],t[1]=i[1]*n+i[4]*s+i[7],t},transformMat4:function(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[4]*s+i[12],t[1]=i[1]*n+i[5]*s+i[13],t},rotate:function(t,e,i,n){const s=e[0]-i[0],r=e[1]-i[1],a=Math.sin(n),l=Math.cos(n);return t[0]=s*l-r*a+i[0],t[1]=s*a+r*l+i[1],t},angle:function(t,e){const i=t[0],n=t[1],s=e[0],r=e[1];let a=i*i+n*n;a>0&&(a=1/Math.sqrt(a));let l=s*s+r*r;l>0&&(l=1/Math.sqrt(l));const o=(i*s+n*r)*a*l;return o>1?0:o<-1?Math.PI:Math.acos(o)},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:F,equals:function(t,e){const i=t[0],s=t[1],r=e[0],a=e[1];return Math.abs(i-r)<=n.E*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(s-a)<=n.E*Math.max(1,Math.abs(s),Math.abs(a))},len:S,sub:A,mul:R,div:v,dist:C,sqrDist:D,sqrLen:w})},55735:(t,e,i)=>{"use strict";function n(){return[0,0]}function s(t,e){return[t,e]}function r(t){const e=[0,0],i=Math.min(2,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function a(t,e){return new Float64Array(t,e,2)}function l(){return s(1,1)}function o(){return s(1,0)}function h(){return s(0,1)}i.d(e,{a:()=>n,c:()=>a,d:()=>r,f:()=>s});const c=l(),u=o(),_=h();Object.freeze({__proto__:null,create:n,clone:function(t){return[t[0],t[1]]},fromValues:s,fromArray:r,createView:a,zeros:function(){return[0,0]},ones:l,unitX:o,unitY:h,ZEROS:[0,0],ONES:c,UNIT_X:u,UNIT_Y:_})},17154:(t,e,i)=>{"use strict";i.d(e,{jE:()=>h,c5:()=>T,LU:()=>m,Q4:()=>E,tB:()=>c,T:()=>l,u1:()=>a,pG:()=>d,ZA:()=>u,_F:()=>o});var n=i(33655),s=i(77625),r=i(17387);function a(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],n=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(Math.max(e,i),n))}function l(t,e,i){i=i||t;const n=(0,r.d)(t,e);(0,r.s)(i,t[0]-n*e[0],t[1]-n*e[1],t[2]-n*e[2]),(0,r.n)(i,i)}function o(t,e,i){Math.abs(t[0])>Math.abs(t[1])?(0,r.s)(e,0,1,0):(0,r.s)(e,1,0,0),(0,r.c)(i,t,e),(0,r.n)(e,e),(0,r.c)(e,i,t),(0,r.n)(i,i)}function h(t,e){const i=(0,r.l)(t),s=(0,n.Kt)(t[2]/i),a=Math.atan2(t[1]/i,t[0]/i);return(0,r.s)(e,i,s,a),e}function c(t,e,i){const n=i[0]-e[0],s=i[1]-e[1],r=i[2]-e[2];let a=n*n+s*s+r*r;return a?(a=1/Math.sqrt(a),t[0]=n*a,t[1]=s*a,t[2]=r*a,t):(t[0]=0,t[1]=0,t[2]=0,t)}function u(t,e,i,n=(0,s.c)()){const a=(0,r.l)(t),l=(0,r.l)(e),o=(0,r.d)(t,e)/(a*l);if(o<.9999999999999999){const s=Math.acos(o),h=((1-i)*a+i*l)/Math.sin(s),c=h/a*Math.sin((1-i)*s),u=h/l*Math.sin(i*s);return(0,r.a)(b,t,c),(0,r.a)(x,e,u),(0,r.b)(n,b,x)}return(0,r.e)(n,t,e,i)}class _{constructor(t,e){this.min=t,this.max=e,this.range=e-t}ndiff(t,e=0){return Math.ceil((t-e)/this.range)*this.range+e}_normalize(t,e,i,n=0,s=!1){return(i-=n)<t?i+=this.ndiff(t-i):i>e&&(i-=this.ndiff(i-e)),s&&i===e&&(i=t),i+n}normalize(t,e=0,i=!1){return this._normalize(this.min,this.max,t,e,i)}clamp(t,e=0){return(0,n.uZ)(t-e,this.min,this.max)+e}monotonic(t,e,i){return t<e?e:e+this.ndiff(t-e,i)}minimalMonotonic(t,e,i){return this._normalize(t,t+this.range,e,i)}center(t,e,i){return e=this.monotonic(t,e,i),this.normalize((t+e)/2,i)}diff(t,e,i){return this.monotonic(t,e,i)-t}shortestSignedDiff(t,e){t=this.normalize(t);const i=(e=this.normalize(e))-t,n=e<t?this.minimalMonotonic(t,e)-t:e-this.minimalMonotonic(e,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,e,i){return e=this.minimalMonotonic(t,e),(i=this.minimalMonotonic(t,i))>t&&i<e}}function d(t,e,i,n){(0,r.f)(f,e,t),(0,r.f)(g,i,t),(0,r.c)(n,f,g),(0,r.n)(n,n),n[3]=-(0,r.d)(t,n)}const f=(0,s.c)(),g=(0,s.c)();function p(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}const T=p(new _(0,2*Math.PI)),E=p(new _(-Math.PI,Math.PI)),m=p(new _(0,360)),b=((0,s.c)(),(0,s.c)()),x=(0,s.c)()},84570:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});i(95830);var n=i(36544),s=i(8634),r=i(29581);const a=n.Z.getLogger("esri.views.webgl.FrameBufferObject");class l{constructor(t,e,i,n){if(this._context=null,this._glName=null,this.id=o++,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,t.instanceCounter.increment(4,this),this._context=t,this._desc={...e},i){let e;var a;if(Array.isArray(i))for(const n of i){const{attachmentPoint:i,texture:r}=n,a=r instanceof s.Z?r:new s.Z(t,r);e=a.descriptor,this._colorAttachments.set(i,a),this._validateColorAttachmentPoint(i),this._validateTextureDimensions(e,this._desc)}else i instanceof s.Z?(e=i.descriptor,this._colorAttachments.set(36064,i)):(e=i,this._colorAttachments.set(36064,new s.Z(t,i))),0!==(null==(a=this._desc)?void 0:a.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateTextureDimensions(e,this._desc)}if(n instanceof r.Z){var h;const t=null!=(h=this._desc.depthStencilTarget)?h:3;2===t?this._stencilAttachment=n:1===t||3===t?this._depthAttachment=n:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),l._validateBufferDimensions(n.descriptor,this._desc)}else if(n){let t;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),n instanceof s.Z?(this._depthStencilTexture=n,t=this._depthStencilTexture.descriptor):(t=n,this._depthStencilTexture=new s.Z(this._context,t)),this._validateTextureDimensions(t,this._desc)}}dispose(){if(!this._context)return;const t=this._context,e=t.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(t.gl.deleteFramebuffer(this._glName),this._glName=null),t.bindFramebuffer(e),t.instanceCounter.decrement(4,this),this._context=null}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){const t=this._colorAttachments.get(36064);return t&&t instanceof s.Z?t:null}get colorAttachment(){return this._colorAttachments.get(36064)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width}get height(){return this._desc.height}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&e instanceof s.Z?e:null}attachColorTexture(t,e=36064){if(!t)return;this._validateColorAttachmentPoint(e);const i=t.descriptor;if(this._validateTextureDimensions(i,this._desc),this._disposeColorAttachments(),this._initialized){this._context.bindFramebuffer(this);const i=this._context.gl;i.framebufferTexture2D(i.FRAMEBUFFER,e,i.TEXTURE_2D,t.glName,0)}this._colorAttachments.set(e,t)}detachColorTexture(t=36064){const e=this._colorAttachments.get(t);if(e instanceof s.Z){const i=e;if(this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,t,e.TEXTURE_2D,null,0)}return this._colorAttachments.delete(t),i}}attachDepthStencilTexture(t){if(!t)return;const e=t.descriptor;if(34041!==e.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==e.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(e,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,t.glName,0)}this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;if(t&&this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,t}attachDepthStencilBuffer(t){if(!t)return;const e=t.descriptor;if(34041!==e.internalFormat&&33189!==e.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),l._validateBufferDimensions(e,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===e.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl,i=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,t.glName)}this._depthAttachment=t}detachDepthStencilBuffer(){const t=this._context.gl,e=this._depthAttachment;if(e&&this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}return this._depthAttachment=null,e}copyToTexture(t,e,i,n,s,r,a){(t<0||e<0||s<0||r<0)&&console.error("Offsets cannot be negative!"),(i<=0||n<=0)&&console.error("Copy width and height must be greater than zero!");const l=this._desc,o=a.descriptor;3553!==a.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(t+i>l.width||e+n>l.height||s+i>o.width||r+n>o.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const h=this._context;h.bindTexture(a,0),h.bindFramebuffer(this),h.gl.copyTexSubImage2D(3553,0,s,r,t,e,i,n)}readPixels(t,e,i,n,s,r,a){(i<=0||n<=0)&&console.error("Copy width and height must be greater than zero!"),a||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,i,n,s,r,a)}resize(t,e){const i=this._desc;if(i.width!==t||i.height!==e){if(!this._initialized)return i.width=t,i.height=e,this._colorAttachments.forEach((i=>{i&&i.resize(t,e)})),void(this._depthStencilTexture&&this._depthStencilTexture.resize(t,e));i.width=t,i.height=e,this._colorAttachments.forEach((i=>{i&&i.resize(t,e)})),null!=this._depthStencilTexture?this._depthStencilTexture.resize(t,e):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(t,e),this._stencilAttachment&&this._stencilAttachment.resize(t,e)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initialize(){var t,e,i,n;if(this._initialized)return!1;const a=this._context,l=a.gl;this._glName&&l.deleteFramebuffer(this._glName);const o=l.createFramebuffer(),c=this._desc,u=null!=(t=c.colorTarget)?t:1,_=null!=(e=c.width)?e:1,d=null!=(i=c.height)?i:1;if(l.bindFramebuffer(l.FRAMEBUFFER,o),0===this._colorAttachments.size)if(0===u)this._colorAttachments.set(36064,h(a,c));else{const t=new r.Z(a,{internalFormat:32854,width:_,height:d});this._colorAttachments.set(36064,t)}this._colorAttachments.forEach(((t,e)=>{t&&(t instanceof s.Z?l.framebufferTexture2D(l.FRAMEBUFFER,e,l.TEXTURE_2D,t.glName,0):l.framebufferRenderbuffer(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.RENDERBUFFER,t.glName))}));const f=null!=(n=c.depthStencilTarget)?n:0;switch(f){case 1:case 3:{this._depthAttachment||(this._depthAttachment=new r.Z(a,{internalFormat:1===c.depthStencilTarget?33189:34041,width:_,height:d}));const t=1===f?l.DEPTH_ATTACHMENT:l.DEPTH_STENCIL_ATTACHMENT;l.framebufferRenderbuffer(l.FRAMEBUFFER,t,l.RENDERBUFFER,this._depthAttachment.glName);break}case 2:this._stencilAttachment||(this._stencilAttachment=new r.Z(a,{internalFormat:36168,width:_,height:d})),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.STENCIL_ATTACHMENT,l.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){a.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");const t={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:_,height:d};this._depthStencilTexture=new s.Z(a,t)}l.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.TEXTURE_2D,this._depthStencilTexture.glName,0)}return this._glName=o,this._initialized=!0,!0}_disposeColorAttachments(){this._colorAttachments.forEach(((t,e)=>{if(t instanceof s.Z){if(this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;t.framebufferTexture2D(t.FRAMEBUFFER,e,t.TEXTURE_2D,null,0)}t.dispose()}else if(t instanceof WebGLRenderbuffer){const i=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),i.framebufferRenderbuffer(i.FRAMEBUFFER,e,i.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(t)}})),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}static _validateBufferDimensions(t,e){console.assert(t.width>=0&&t.height>=0),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(e.width=t.width,e.height=t.height)}_validateTextureDimensions(t,e){console.assert(t.width>=0&&t.height>=0),3553!==t.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error("Color attachment texture must match the framebuffer's!"):(e.width=t.width,e.height=t.height)}_validateColorAttachmentPoint(t){if(-1===l._MAX_COLOR_ATTACHMENTS){const t=this._context.capabilities.drawBuffers;if(t){const e=this._context.gl;l._MAX_COLOR_ATTACHMENTS=e.getParameter(t.MAX_COLOR_ATTACHMENTS)}else l._MAX_COLOR_ATTACHMENTS=1}const e=t-36064;e+1>l._MAX_COLOR_ATTACHMENTS&&a.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${e+1}. Implementation supports up to ${l._MAX_COLOR_ATTACHMENTS} color attachments`)}}l._MAX_COLOR_ATTACHMENTS=-1;let o=0;const h=(t,e)=>new s.Z(t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height}),c=l},29581:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});let n=0;const s=class{constructor(t,e){this._context=t,this._desc=e,this.id=++n,this._context.instanceCounter.increment(5,this);const i=this._context.gl;this.glName=i.createRenderbuffer(),this._context.bindRenderbuffer(this),i.renderbufferStorage(i.RENDERBUFFER,e.internalFormat,e.width,e.height)}get descriptor(){return this._desc}resize(t,e){const i=this._desc;if(i.width===t&&i.height===e)return;i.width=t,i.height=e;const n=this._context.gl;this._context.bindRenderbuffer(this),n.renderbufferStorage(n.RENDERBUFFER,i.internalFormat,i.width,i.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)}}},89930:(t,e,i)=>{"use strict";i.d(e,{Z:()=>_});i(95830);var n=i(59472),s=i(36904);const r=33984;class a{constructor(){for(this._current=new Array,this._max=new Array,this._allocations=new Map;this._current.length<6;)this._current.push(0),this._max.push(0)}resetMax(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)}increment(t,e){const i=++this._current[t];this._max[t]=Math.max(i,this._max[t])}decrement(t,e){--this._current[t]}get max(){return this._max}get current(){return this._current}printResourceCount(){if(console.log("Live objects:"),console.log(`Textures: ${this._current[0]}`),console.log(`Buffers: ${this._current[1]}`),console.log(`VAOs: ${this._current[2]}`),console.log(`Programs: ${this._current[3]}`),console.log(`Framebuffers: ${this._current[4]}`),console.log(`Renderbuffers: ${this._current[5]}`),this._allocations.size>0){console.log(`${this._allocations.size} live object allocations:`);const t=new Map;this._allocations.forEach((e=>{var i;t.set(e,(null!=(i=t.get(e))?i:0)+1)})),t.forEach(((t,e)=>console.log(t," : ",e)))}}}var l=i(6091),o=i(86733);function h(t,e){const i=e&&e.disabledExtensions||{},n=e&&e.debugWebGLExtensions||{};let s,r,a,h,u,_,d,f,g,p,T=null,E=null,m=null,b=null;return{get drawBuffers(){return p||(p=function(t,e){if(e.disjointTimerQuery)return null;if((0,l.Z)(t))return{drawBuffers:t.drawBuffers.bind(t),MAX_DRAW_BUFFERS:t.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:t.MAX_COLOR_ATTACHMENTS};if(e.drawBuffers)return null;const i=t.getExtension("WEBGL_draw_buffers");return i?{drawBuffers:i.drawBuffersWEBGL.bind(i),MAX_DRAW_BUFFERS:i.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:i.MAX_COLOR_ATTACHMENTS_WEBGL}:null}(t,i)),p},get instancing(){return s||(s=function(t){if((0,l.Z)(t))return{drawArraysInstanced:t.drawArraysInstanced.bind(t),drawElementsInstanced:t.drawElementsInstanced.bind(t),vertexAttribDivisor:t.vertexAttribDivisor.bind(t)};const e=t.getExtension("ANGLE_instanced_arrays");return e?{drawArraysInstanced:e.drawArraysInstancedANGLE.bind(e),drawElementsInstanced:e.drawElementsInstancedANGLE.bind(e),vertexAttribDivisor:e.vertexAttribDivisorANGLE.bind(e)}:null}(t)),s},get vao(){return r||(r=function(t,e){if((0,l.Z)(t))return{createVertexArray:t.createVertexArray.bind(t),deleteVertexArray:t.deleteVertexArray.bind(t),bindVertexArray:t.bindVertexArray.bind(t)};if(e.vao)return null;const i=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object");return i?{createVertexArray:i.createVertexArrayOES.bind(i),deleteVertexArray:i.deleteVertexArrayOES.bind(i),bindVertexArray:i.bindVertexArrayOES.bind(i)}:null}(t,i)),r},get compressedTextureS3TC(){return a||(a=function(t,e){if(e.compressedTextureS3TC)return null;const i=t.getExtension("WEBGL_compressed_texture_s3tc");return i?{COMPRESSED_RGB_S3TC_DXT1:i.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:i.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:i.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:i.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}(t,i)),a},get textureFilterAnisotropic(){return h||(h=function(t,e){if(e.textureFilterAnisotropic)return null;const i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return i?{MAX_TEXTURE_MAX_ANISOTROPY:i.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:i.TEXTURE_MAX_ANISOTROPY_EXT}:null}(t,i)),h},get disjointTimerQuery(){return u||(u=(0,o.m)(t,i)),u},get textureFloat(){return _||(_=function(t,e){if((0,l.Z)(t))return{textureFloat:!0,textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:t.HALF_FLOAT};if(t instanceof WebGLRenderingContext){const i=!e.textureHalfFloat&&t.getExtension("OES_texture_half_float");return{textureFloat:!e.textureFloat&&!!t.getExtension("OES_texture_float"),textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension("OES_texture_float_linear"),textureHalfFloat:!!i,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:i?i.HALF_FLOAT_OES:void 0}}return null}(t,i)),_},get colorBufferFloat(){return d||(d=function(t,e){if((0,l.Z)(t)){const i=!e.colorBufferFloat&&t.getExtension("EXT_color_buffer_half_float"),n=!e.colorBufferFloat&&t.getExtension("EXT_color_buffer_float");return i||n?{textureFloat:!!n,textureHalfFloat:!!i,R16F:t.R16F,RG16F:t.RG16F,RGBA16F:t.RGBA16F,R32F:t.R32F,RG32F:t.RG32F,RGBA32F:t.RGBA32F,R11F_G11F_B10F:t.R11F_G11F_B10F,RGB16F:t.RGB16F}:null}if(t instanceof WebGLRenderingContext){const i=!e.colorBufferFloat&&t.getExtension("EXT_color_buffer_half_float"),n=!e.colorBufferFloat&&t.getExtension("WEBGL_color_buffer_float");return i||n?{textureFloat:!!n,textureHalfFloat:!!i,RGBA16F:i?i.RGBA16F_EXT:void 0,RGB16F:i?i.RGB16F_EXT:void 0,RGBA32F:n?n.RGBA32F_EXT:void 0}:null}return null}(t,i)),d},get blendMinMax(){return f||(f=function(t,e){if((0,l.Z)(t))return{MIN:t.MIN,MAX:t.MAX};if(e.blendMinMax)return null;{const e=t.getExtension("EXT_blend_minmax");return e?{MIN:e.MIN_EXT,MAX:e.MAX_EXT}:null}}(t,i)),f},get depthTexture(){return null===T&&(T=c(t,i,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"])),T},get standardDerivatives(){return null===E&&(E=c(t,i,"standardDerivatives",!0,["OES_standard_derivatives"])),E},get shaderTextureLOD(){return null===m&&(m=c(t,i,"shaderTextureLOD",!0,["EXT_shader_texture_lod"])),m},get fragDepth(){return null===b&&(b=c(t,i,"fragDepth",!0,["EXT_frag_depth"])),b},get loseContext(){return g||(g=function(t,e){const i=e.loseContext&&t.getExtension("WEBGL_lose_context");return i?{loseRenderingContext:()=>i.loseContext()}:null}(t,n)),g}}}function c(t,e,i,n,s){if(n&&(0,l.Z)(t))return!0;if(e[i])return!1;for(const e of s)if(t.getExtension(e))return!0;return!1}class u{constructor(t,e){this.gl=null,this.instanceCounter=new a,this._blendEnabled=!1,this._blendColorState={r:0,g:0,b:0,a:0},this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0},this._blendEquationState={mode:32774,modeAlpha:32774},this._colorMaskState={r:!0,g:!0,b:!0,a:!0},this._polygonCullingEnabled=!1,this._cullFace=1029,this._frontFace=2305,this._scissorTestEnabled=!1,this._scissorRect={x:0,y:0,width:0,height:0},this._depthTestEnabled=!1,this._depthFunction=513,this._clearDepth=1,this._depthWriteEnabled=!0,this._depthRange={zNear:0,zFar:1},this._viewport=null,this._stencilTestEnabled=!1,this._polygonOffsetFillEnabled=!1,this._polygonOffset=[0,0],this._stencilFunction={face:1032,func:519,ref:0,mask:1},this._clearStencil=0,this._stencilWriteMask=1,this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680},this._clearColor={r:0,g:0,b:0,a:0},this._activeShaderProgram=null,this._activeVertexBuffer=null,this._activeIndexBuffer=null,this._activeFramebuffer=null,this._activeRenderbuffer=null,this._activeTextureUnit=0,this._textureUnitMap={},this._numOfDrawCalls=0,this._numOfTriangles=0,this.contextVersion=(0,l.Z)(t)?"webgl2":"webgl",this.gl=t,t instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint"),this._capabilities=h(t,e);const i=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:i[0],y:i[1],width:i[2],height:i[3]},this._stateTracker=new s.jp({setBlending:t=>{if(t){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(t.opRgb,t.opAlpha),this.setBlendFunctionSeparate(t.srcRgb,t.dstRgb,t.srcAlpha,t.dstAlpha);const e=t.color;this.setBlendColor(e.r,e.g,e.b,e.a)}else this.setBlendingEnabled(!1)},setCulling:t=>{t?(this.setFaceCullingEnabled(!0),this.setCullFace(t.face),this.setFrontFace(t.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:t=>{t?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(t.factor,t.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:t=>{t?(this.setDepthTestEnabled(!0),this.setDepthFunction(t.func)):this.setDepthTestEnabled(!1)},setStencilTest:t=>{if(t){this.setStencilTestEnabled(!0);const e=t.function;this.setStencilFunction(e.func,e.ref,e.mask);const i=t.operation;this.setStencilOp(i.fail,i.zFail,i.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:t=>{t?(this.setDepthWriteEnabled(!0),this.setDepthRange(t.zNear,t.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:t=>{t?this.setColorMask(t.r,t.g,t.b,t.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:t=>{t?this.setStencilWriteMask(t.mask):this.setStencilWriteMask(0)}}),this.enforceState()}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){if(!this._parameters){const t=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:t?this.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)}}return this._parameters}dispose(){this.bindVAO(null),this.unbindBuffer(34962),this.unbindBuffer(34963),this._textureUnitMap={},this.gl=null,this._capabilities=null}setPipelineState(t){this._stateTracker.setPipeline(t)}setBlendingEnabled(t){this._blendEnabled!==t&&(!0===t?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=t,this._stateTracker.invalidateBlending())}setBlendColor(t,e,i,n){t===this._blendColorState.r&&e===this._blendColorState.g&&i===this._blendColorState.b&&n===this._blendColorState.a||(this.gl.blendColor(t,e,i,n),this._blendColorState.r=t,this._blendColorState.g=e,this._blendColorState.b=i,this._blendColorState.a=n,this._stateTracker.invalidateBlending())}setBlendFunction(t,e){t===this._blendFunctionState.srcRGB&&e===this._blendFunctionState.dstRGB||(this.gl.blendFunc(t,e),this._blendFunctionState.srcRGB=t,this._blendFunctionState.srcAlpha=t,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=e,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(t,e,i,n){this._blendFunctionState.srcRGB===t&&this._blendFunctionState.srcAlpha===i&&this._blendFunctionState.dstRGB===e&&this._blendFunctionState.dstAlpha===n||(this.gl.blendFuncSeparate(t,e,i,n),this._blendFunctionState.srcRGB=t,this._blendFunctionState.srcAlpha=i,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=n,this._stateTracker.invalidateBlending())}setBlendEquation(t){this._blendEquationState.mode!==t&&(this.gl.blendEquation(t),this._blendEquationState.mode=t,this._blendEquationState.modeAlpha=t,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(t,e){this._blendEquationState.mode===t&&this._blendEquationState.modeAlpha===e||(this.gl.blendEquationSeparate(t,e),this._blendEquationState.mode=t,this._blendEquationState.modeAlpha=e,this._stateTracker.invalidateBlending())}setColorMask(t,e,i,n){this._colorMaskState.r===t&&this._colorMaskState.g===e&&this._colorMaskState.b===i&&this._colorMaskState.a===n||(this.gl.colorMask(t,e,i,n),this._colorMaskState.r=t,this._colorMaskState.g=e,this._colorMaskState.b=i,this._colorMaskState.a=n,this._stateTracker.invalidateColorWrite())}setClearColor(t,e,i,n){this._clearColor.r===t&&this._clearColor.g===e&&this._clearColor.b===i&&this._clearColor.a===n||(this.gl.clearColor(t,e,i,n),this._clearColor.r=t,this._clearColor.g=e,this._clearColor.b=i,this._clearColor.a=n)}setFaceCullingEnabled(t){this._polygonCullingEnabled!==t&&(!0===t?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=t,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(t){this._polygonOffsetFillEnabled!==t&&(!0===t?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=t,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(t,e){this._polygonOffset[0]===t&&this._polygonOffset[1]===e||(this._polygonOffset[0]=t,this._polygonOffset[1]=e,this.gl.polygonOffset(t,e),this._stateTracker.invalidatePolygonOffset())}setCullFace(t){this._cullFace!==t&&(this.gl.cullFace(t),this._cullFace=t,this._stateTracker.invalidateCulling())}setFrontFace(t){this._frontFace!==t&&(this.gl.frontFace(t),this._frontFace=t,this._stateTracker.invalidateCulling())}setScissorTestEnabled(t){this._scissorTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=t)}setScissorRect(t,e,i,n){this._scissorRect.x===t&&this._scissorRect.y===e&&this._scissorRect.width===i&&this._scissorRect.height===n||(this.gl.scissor(t,e,i,n),this._scissorRect.x=t,this._scissorRect.y=e,this._scissorRect.width=i,this._scissorRect.height=n)}setDepthTestEnabled(t){this._depthTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=t,this._stateTracker.invalidateDepthTest())}setClearDepth(t){this._clearDepth!==t&&(this.gl.clearDepth(t),this._clearDepth=t)}setDepthFunction(t){this._depthFunction!==t&&(this.gl.depthFunc(t),this._depthFunction=t,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(t){this._depthWriteEnabled!==t&&(this.gl.depthMask(t),this._depthWriteEnabled=t,this._stateTracker.invalidateDepthWrite())}setDepthRange(t,e){this._depthRange.zNear===t&&this._depthRange.zFar===e||(this.gl.depthRange(t,e),this._depthRange.zNear=t,this._depthRange.zFar=e,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(t){this._stencilTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=t,this._stateTracker.invalidateStencilTest())}setClearStencil(t){t!==this._clearStencil&&(this.gl.clearStencil(t),this._clearStencil=t)}setStencilFunction(t,e,i){this._stencilFunction.func===t&&this._stencilFunction.ref===e&&this._stencilFunction.mask===i||(this.gl.stencilFunc(t,e,i),this._stencilFunction.face=1032,this._stencilFunction.func=t,this._stencilFunction.ref=e,this._stencilFunction.mask=i,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(t,e,i,n){this._stencilFunction.face===t&&this._stencilFunction.func===e&&this._stencilFunction.ref===i&&this._stencilFunction.mask===n||(this.gl.stencilFuncSeparate(t,e,i,n),this._stencilFunction.face=t,this._stencilFunction.func=e,this._stencilFunction.ref=i,this._stencilFunction.mask=n,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(t){this._stencilWriteMask!==t&&(this.gl.stencilMask(t),this._stencilWriteMask=t,this._stateTracker.invalidateStencilWrite())}setStencilOp(t,e,i){this._stencilOperation.fail===t&&this._stencilOperation.zFail===e&&this._stencilOperation.zPass===i||(this.gl.stencilOp(t,e,i),this._stencilOperation.face=1032,this._stencilOperation.fail=t,this._stencilOperation.zFail=e,this._stencilOperation.zPass=i,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(t,e,i,n){this._stencilOperation.face===t&&this._stencilOperation.fail===e&&this._stencilOperation.zFail===i&&this._stencilOperation.zPass===n||(this.gl.stencilOpSeparate(t,e,i,n),this._stencilOperation.face=t,this._stencilOperation.face=t,this._stencilOperation.fail=e,this._stencilOperation.zFail=i,this._stencilOperation.zPass=n,this._stateTracker.invalidateStencilTest())}setActiveTexture(t){const e=this._activeTextureUnit;return t>=0&&t!==this._activeTextureUnit&&(this.gl.activeTexture(r+t),this._activeTextureUnit=t),e}clear(t){t&&this.gl.clear(t)}clearSafe(t,e=255){t&&(16384&t&&this.setColorMask(!0,!0,!0,!0),256&t&&this.setDepthWriteEnabled(!0),1024&t&&this.setStencilWriteMask(e),this.gl.clear(t))}drawArrays(t,e,i){this.gl.drawArrays(t,e,i)}drawElements(t,e,i,n){5123!==i?5125===i&&this.gl.drawElements(t,e,i,n):this.gl.drawElements(t,e,i,n)}logIno(){}get capabilities(){return this._capabilities}setViewport(t,e,i,n){const s=this._viewport;s.x===t&&s.y===e&&s.width===i&&s.height===n||(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))}getViewport(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}}bindProgram(t){if(!t)return this.gl.useProgram(null),void(this._activeShaderProgram=null);this._activeShaderProgram!==t&&(t.initialize(),this.gl.useProgram(t.glName),this._activeShaderProgram=t)}bindTexture(t,e){-1===u._MAX_TEXTURE_IMAGE_UNITS&&(u._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)),(e>=u._MAX_TEXTURE_IMAGE_UNITS||e<0)&&console.error("Input texture unit is out of range of available units!");const i=this._textureUnitMap[e];if(this.setActiveTexture(e),null==t||null==t.glName)return null!=i&&(this.gl.bindTexture(i.descriptor.target,null),i.setBoundToUnit(e,!1)),void(this._textureUnitMap[e]=null);i&&i.id===t.id?t.applyChanges():(i&&i.setBoundToUnit(e,!1),this.gl.bindTexture(t.descriptor.target,t.glName),t.setBoundToUnit(e,!0),t.applyChanges(),this._textureUnitMap[e]=t)}bindFramebuffer(t){if((0,n.Wi)(t))return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),void(this._activeFramebuffer=null);this._activeFramebuffer!==t&&(t.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t.glName),this._activeFramebuffer=t)}bindBuffer(t){t&&(34962===t.bufferType?this._activeVertexBuffer=u._bindBuffer(this.gl,t,t.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=u._bindBuffer(this.gl,t,t.bufferType,this._activeIndexBuffer))}bindRenderbuffer(t){const e=this.gl;t||(e.bindRenderbuffer(e.RENDERBUFFER,null),this._activeRenderbuffer=null),this._activeRenderbuffer!==t&&(e.bindRenderbuffer(e.RENDERBUFFER,t.glName),this._activeRenderbuffer=t)}unbindBuffer(t){34962===t?this._activeVertexBuffer=u._bindBuffer(this.gl,null,t,this._activeVertexBuffer):this._activeIndexBuffer=u._bindBuffer(this.gl,null,t,this._activeIndexBuffer)}bindVAO(t){t?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===t.id||(t.bind(),this._activeVertexArrayObject=t):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)}getBoundTexture(t){return this._textureUnitMap[t]}getBoundFramebufferObject(){return this._activeFramebuffer}getBoundVAO(){return this._activeVertexArrayObject}resetState(){this.bindProgram(null),this.bindVAO(null),this.bindFramebuffer(null),this.unbindBuffer(34962),this.unbindBuffer(34963);for(let t=0;t<this.parameters.maxTextureImageUnits;t++)this.bindTexture(null,t);this.setBlendingEnabled(!1),this.setBlendFunction(1,0),this.setBlendEquation(32774),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(1029),this.setFrontFace(2305),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(513),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(519,0,0),this.setStencilOp(7680,7680,7680),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){const t=this.gl,e=this.capabilities.vao;e&&e.bindVertexArray(null);for(let e=0;e<this.parameters.maxVertexAttributes;e++)t.disableVertexAttribArray(e);if(this._activeVertexBuffer?t.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):t.bindBuffer(34962,null),this._activeIndexBuffer?t.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):t.bindBuffer(34963,null),e&&this._activeVertexArrayObject){const t=this._activeVertexArrayObject;this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null),this.bindVAO(t)}t.bindFramebuffer(t.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null),t.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null),t.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a),t.bindRenderbuffer(t.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null),!0===this._blendEnabled?t.enable(this.gl.BLEND):t.disable(this.gl.BLEND),t.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha),t.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha),t.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),t.clearDepth(this._clearDepth),t.clearStencil(this._clearStencil),t.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a),t.cullFace(this._cullFace),t.depthFunc(this._depthFunction),t.depthRange(this._depthRange.zNear,this._depthRange.zFar),!0===this._depthTestEnabled?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),t.depthMask(this._depthWriteEnabled),t.frontFace(this._frontFace),t.lineWidth(1),!0===this._polygonCullingEnabled?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),t.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]),!0===this._polygonOffsetFillEnabled?t.enable(t.POLYGON_OFFSET_FILL):t.disable(t.POLYGON_OFFSET_FILL),t.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height),!0===this._scissorTestEnabled?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),t.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask),t.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass),!0===this._stencilTestEnabled?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),t.stencilMask(this._stencilWriteMask);for(let e=0;e<this.parameters.maxTextureImageUnits;e++){t.activeTexture(r+e),t.bindTexture(3553,null);const i=this._textureUnitMap[e];i&&t.bindTexture(i.descriptor.target,i.glName)}t.activeTexture(r+this._activeTextureUnit),t.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)}static _bindBuffer(t,e,i,n){return e?n!==e&&t.bindBuffer(i,e.glName):t.bindBuffer(i,null),e}}u._MAX_TEXTURE_IMAGE_UNITS=-1;const _=u},8634:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(59472),s=i(33655);class r{constructor(t,e,i=null){this._context=null,this._glName=null,this.id=a++,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._boundToUnits=new Set,t.instanceCounter.increment(0,this),this._context=t,this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){if(this._context&&this._context.gl){if(this._glName){const t=this._context.gl;this._boundToUnits.forEach((t=>{this._context.bindTexture(null,t)})),t.deleteTexture(this._glName),this._glName=null}this._context.instanceCounter.decrement(0,this),this._context=null}}release(){this.dispose()}resize(t,e){const i=this._descriptor;i.width===t&&i.height===e||(i.width=t,i.height=e,this.setData(null))}setData(t){if(!this._context||!this._context.gl)return;const e=this._context.gl;this._glName||(this._glName=e.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);const i=this._context.getBoundTexture(0);this._context.bindTexture(this,0);const s=this._descriptor;r._validateTexture(s),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipped?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.preMultiplyAlpha?1:0);const a=s.pixelFormat;let l=s.internalFormat?s.internalFormat:a;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let i=t.width,n=t.height;t instanceof HTMLVideoElement&&(i=t.videoWidth,n=t.videoHeight),s.width&&s.height&&console.assert(i===s.width&&n===s.height),e.texImage2D(e.TEXTURE_2D,0,l,a,s.dataType,t),s.hasMipmap&&this.generateMipmap(),void 0===s.width&&(s.width=i),void 0===s.height&&(s.height=n)}else{null!=s.width&&null!=s.height||console.error("Width and height must be specified!"),e.DEPTH24_STENCIL8&&l===e.DEPTH_STENCIL&&(l=e.DEPTH24_STENCIL8);let i=s.width,r=s.height;if(function(t){return(0,n.pC)(t)&&"type"in t&&"compressed"===t.type}(t)){const n=Math.round(Math.log(Math.max(i,r))/Math.LN2)+1;s.hasMipmap=s.hasMipmap&&n===t.levels.length;for(let n=0;;++n){const a=t.levels[Math.min(n,t.levels.length-1)];if(e.compressedTexImage2D(e.TEXTURE_2D,n,l,i,r,0,a),1===i&&1===r||!s.hasMipmap)break;i=Math.max(1,i>>1),r=Math.max(1,r>>1)}}else if((0,n.pC)(t))e.texImage2D(e.TEXTURE_2D,0,l,i,r,0,a,s.dataType,t),s.hasMipmap&&this.generateMipmap();else for(let t=0;e.texImage2D(e.TEXTURE_2D,t,l,i,r,0,a,s.dataType,null),(1!==i||1!==r)&&s.hasMipmap;++t)i=Math.max(1,i>>1),r=Math.max(1,r>>1)}r._applySamplingMode(e,this._descriptor),r._applyWrapMode(e,this._descriptor),r._applyAnisotropicFilteringParameters(this._context,this._descriptor),this._context.bindTexture(i,0)}updateData(t,e,i,n,s,r){r||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const a=this._context.gl,l=this._descriptor,o=this._context.getBoundTexture(0);this._context.bindTexture(this,0),(e<0||i<0||n>l.width||s>l.height||e+n>l.width||i+s>l.height)&&console.error("An attempt to update out of bounds of the texture!"),a.pixelStorei(a.UNPACK_ALIGNMENT,l.unpackAlignment),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,l.flipped?1:0),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.preMultiplyAlpha?1:0),r instanceof ImageData||r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement?a.texSubImage2D(a.TEXTURE_2D,t,e,i,l.pixelFormat,l.dataType,r):a.texSubImage2D(a.TEXTURE_2D,t,e,i,n,s,l.pixelFormat,l.dataType,r),this._context.bindTexture(o,0)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,r._validateTexture(t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.getBoundTexture(0);this._context.bindTexture(this,0);const i=this._context.gl;i.generateMipmap(i.TEXTURE_2D),this._context.bindTexture(e,0)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,r._validateTexture(this._descriptor),this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,r._validateTexture(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(r._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(r._applyWrapMode(t,e),this._wrapModeDirty=!1)}setBoundToUnit(t,e){e?this._boundToUnits.add(t):this._boundToUnits.delete(t)}static _validateTexture(t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!"),(0,s.wt)(t.width)&&(0,s.wt)(t.height)||("number"==typeof t.wrapMode?33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===t.wrapMode.s&&33071===t.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(t,e){let i=e.samplingMode,n=e.samplingMode;9985===i||9987===i?(i=9729,e.hasMipmap||(n=9729)):9984!==i&&9986!==i||(i=9728,e.hasMipmap||(n=9728)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n)}static _applyWrapMode(t,e){"number"==typeof e.wrapMode?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){if(null==e.maxAnisotropy)return;const i=t.capabilities.textureFilterAnisotropic;if(!i)return;const n=t.gl;n.texParameterf(n.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy)}}let a=0;const l=r},86733:(t,e,i)=>{"use strict";i.d(e,{m:()=>r});var n=i(6091);class s{constructor(t,e,i,n,s,r,a,l){this.createQuery=t,this.resultAvailable=e,this.getResult=i,this.disjoint=n,this.beginTimeElapsed=s,this.endTimeElapsed=r,this.createTimestamp=a,this.timestampBits=l}}function r(t,e){if(e.disjointTimerQuery)return null;let i=t.getExtension("EXT_disjoint_timer_query_webgl2");return i&&(0,n.Z)(t)?new s((()=>t.createQuery()),(e=>t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)),(e=>t.getQueryParameter(e,t.QUERY_RESULT)),(()=>t.getParameter(i.GPU_DISJOINT_EXT)),(e=>t.beginQuery(i.TIME_ELAPSED_EXT,e)),(()=>t.endQuery(i.TIME_ELAPSED_EXT)),(t=>i.queryCounterEXT(t,i.TIMESTAMP_EXT)),(()=>t.getQuery(i.TIMESTAMP_EXT,i.QUERY_COUNTER_BITS_EXT))):(i=t.getExtension("EXT_disjoint_timer_query"),i?new s((()=>i.createQueryEXT()),(t=>i.getQueryObjectEXT(t,i.QUERY_RESULT_AVAILABLE_EXT)),(t=>i.getQueryObjectEXT(t,i.QUERY_RESULT_EXT)),(()=>t.getParameter(i.GPU_DISJOINT_EXT)),(t=>i.beginQueryEXT(i.TIME_ELAPSED_EXT,t)),(()=>i.endQueryEXT(i.TIME_ELAPSED_EXT)),(t=>i.queryCounterEXT(t,i.TIMESTAMP_EXT)),(()=>i.getQueryEXT(i.TIMESTAMP_EXT,i.QUERY_COUNTER_BITS_EXT))):null)}},6091:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=function(t){return window.WebGL2RenderingContext&&t instanceof window.WebGL2RenderingContext}},36904:(t,e,i)=>{"use strict";function n(t,e,i=32774,n=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:n[0],g:n[1],b:n[2],a:n[3]}}}function s(t,e,i,n,s=32774,r=32774,a=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:n,opRgb:s,opAlpha:r,color:{r:a[0],g:a[1],b:a[2],a:a[3]}}}i.d(e,{jp:()=>P,BK:()=>a,LZ:()=>r,sm:()=>g,wK:()=>s,if:()=>n});const r={zNear:0,zFar:1},a={r:!0,g:!0,b:!0,a:!0};function l(t){return E.intern(t)}function o(t){return b.intern(t)}function h(t){return M.intern(t)}function c(t){return S.intern(t)}function u(t){return R.intern(t)}function _(t){return C.intern(t)}function d(t){return w.intern(t)}function f(t){return y.intern(t)}function g(t){return I.intern(t)}class p{constructor(t,e){this.makeKey=t,this.makeRef=e,this.interns=new Map}intern(t){if(!t)return null;const e=this.makeKey(t),i=this.interns;return i.has(e)||i.set(e,this.makeRef(t)),i.get(e)}}function T(t){return"["+t.join(",")+"]"}const E=new p(m,(t=>({__tag:"Blending",...t})));function m(t){return t?T([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const b=new p(x,(t=>({__tag:"Culling",...t})));function x(t){return t?T([t.face,t.mode]):null}const M=new p(F,(t=>({__tag:"PolygonOffset",...t})));function F(t){return t?T([t.factor,t.units]):null}const S=new p(A,(t=>({__tag:"DepthTest",...t})));function A(t){return t?T([t.func]):null}const R=new p(v,(t=>({__tag:"StencilTest",...t})));function v(t){return t?T([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const C=new p(D,(t=>({__tag:"DepthWrite",...t})));function D(t){return t?T([t.zNear,t.zFar]):null}const w=new p(B,(t=>({__tag:"ColorWrite",...t})));function B(t){return t?T([t.r,t.g,t.b,t.a]):null}const y=new p(O,(t=>({__tag:"StencilWrite",...t})));function O(t){return t?T([t.mask]):null}const I=new p((function(t){return t?T([m(t.blending),x(t.culling),F(t.polygonOffset),A(t.depthTest),v(t.stencilTest),D(t.depthWrite),B(t.colorWrite),O(t.stencilWrite)]):null}),(t=>({blending:l(t.blending),culling:o(t.culling),polygonOffset:h(t.polygonOffset),depthTest:c(t.depthTest),stencilTest:u(t.stencilTest),depthWrite:_(t.depthWrite),colorWrite:d(t.colorWrite),stencilWrite:f(t.stencilWrite)})));class P{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this.setBlending(t.blending),this.setCulling(t.culling),this.setPolygonOffset(t.polygonOffset),this.setDepthTest(t.depthTest),this.setStencilTest(t.stencilTest),this.setDepthWrite(t.depthWrite),this.setColorWrite(t.colorWrite),this.setStencilWrite(t.stencilWrite),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}setBlending(t){this._blending=this.setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}setCulling(t){this._culling=this.setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}setPolygonOffset(t){this._polygonOffset=this.setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}setDepthTest(t){this._depthTest=this.setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}setStencilTest(t){this._stencilTest=this.setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}setDepthWrite(t){this._depthWrite=this.setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}setColorWrite(t){this._colorWrite=this.setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}setStencilWrite(t){this._stencilWrite=this.setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}setSubState(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}}}]);
//# sourceMappingURL=2200.js.map