(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[6758],{50897:(e,t,i)=>{"use strict";i.d(t,{Gv:()=>G,SO:()=>d,d9:()=>r,r3:()=>_,BD:()=>u,Qn:()=>v,Zm:()=>m,jE:()=>y,Ue:()=>a,cS:()=>w,Ho:()=>c,oJ:()=>n,al:()=>s,Cb:()=>h,kK:()=>g,vk:()=>f,HH:()=>l,bf:()=>p});i(95830);var o=i(52937);function a(e=b){return[e[0],e[1],e[2],e[3]]}function r(e){return[e[0],e[1],e[2],e[3]]}function s(e,t,i,o,r=a()){return r[0]=e,r[1]=t,r[2]=i,r[3]=o,r}function n(e,t=a()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function l(e,t){return new o.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function c(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function p(e){return e[0]>=e[2]?0:e[2]-e[0]}function h(e){return e[1]>=e[3]?0:e[3]-e[1]}function d(e){return p(e)*h(e)}function u(e,t){return y(e,t[0],t[1])}function v(e,t){return y(e,t.x,t.y)}function y(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function m(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function g(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function _(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function f(e,t,i=e){return i[0]=e[0]-t,i[1]=e[1]-t,i[2]=e[2]+t,i[3]=e[3]+t,i}function w(e){return e?function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}(e,G):a(G)}const G=[1/0,1/0,-1/0,-1/0],b=[0,0,0,0]},12217:(e,t,i)=>{"use strict";i.d(t,{P:()=>r});i(95830);var o=i(59472),a=i(46970);function r(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if((0,o.Wi)(e.geometry))return 2;switch(e.geometry.type){case"polygon":case"point":case"polyline":break;case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==(0,a.vu)(e)&&(0,a.Lt)(e)?4:0}},91700:(e,t,i)=>{"use strict";i.d(t,{P:()=>s});i(95830);var o=i(59472),a=i(7646),r=i(46970);function s(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;const i=e.geometry;if((0,o.Wi)(i))return 2;switch(i.type){case"polygon":if(i instanceof a.Z)return 3;break;case"polyline":break;case"point":case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==(0,r.vu)(e)&&(0,r.Lt)(e)?4:0}},24591:(e,t,i)=>{"use strict";function o(e,t){if(!t||!e||!e.map)return;const{map:i}=e;i.layers.find((e=>e===t))||i.add(t)}i.d(t,{p:()=>o})},15843:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>fe});var o=i(56140),a=(i(95830),i(36544)),r=i(79881),s=i(51894),n=i(60263),l=i(87566),c=(i(10923),i(57002),i(86035),i(83477)),p=i(61398),h=(i(89771),i(40450)),d=i(9200),u=i(90846),v=i(52243),y=i(19401),m=i(90806),g=i(59472),_=(i(68055),i(32656)),f=i(61106),w=i(92232),G=(i(36348),i(35470)),b=i(96071),C=i(48142),S=i(5674),x=i(88083),T=i(54734),E=i(15988),k=i(59691),O=i(80621),I=i(89333),A=i(94394),M=i(69948),L=i(23672),H=i(2887),P=i(9434),D=i(48016),R=i(70573);function U(e){switch(e){case 0:break;case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""}var F=i(12217),Z=i(91700),W=i(46970);var K=i(24591),V=i(94588);let B=class extends G.Z.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw":case"draw-3d":return null;default:(0,V.Bg)(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this.reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}reset(){this.activeComponent.reset()}refreshComponent(){const e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type||e.refresh())}set undo(e){this._set("undo",(()=>{this.canUndo()&&e()}))}set redo(e){this._set("redo",(()=>{this.canRedo()&&e()}))}};(0,o._)([(0,r.Cb)()],B.prototype,"activeComponent",void 0),(0,o._)([(0,r.Cb)()],B.prototype,"cancelled",void 0),(0,o._)([(0,r.Cb)()],B.prototype,"history",void 0),(0,o._)([(0,r.Cb)({dependsOn:["activeComponent"]})],B.prototype,"tool",null),(0,o._)([(0,r.Cb)()],B.prototype,"type",void 0),(0,o._)([(0,r.Cb)()],B.prototype,"canUndo",null),(0,o._)([(0,r.Cb)()],B.prototype,"canRedo",null),(0,o._)([(0,r.Cb)()],B.prototype,"onEnd",void 0),(0,o._)([(0,r.Cb)()],B.prototype,"undo",null),(0,o._)([(0,r.Cb)()],B.prototype,"redo",null),(0,o._)([(0,r.Cb)()],B.prototype,"toggleTool",void 0),(0,o._)([(0,r.Cb)()],B.prototype,"addToSelection",void 0),(0,o._)([(0,r.Cb)()],B.prototype,"removeFromSelection",void 0),B=(0,o._)([(0,l.j)("esri.widgets.Sketch.support.OperationHandle")],B);const j=a.Z.getLogger("esri.widgets.Sketch.SketchViewModel"),z={redoKey:"r",undoKey:"z",centerKey:"Alt",constraintKey:"Control",snappingKey:"Control",cancelKey:"Escape",deleteKeys:["Backspace","Delete"],complete:"c",pan:" "},q={defaultZ:0},N={enableMidpoints:!0,enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,tool:"transform",enableZ:!0,enableMoveGraphic:!0};let Q=class extends G.Z.EventedAccessor{constructor(e){super(e),this._activeFillGraphic=null,this._activeLineGraphic=null,this._centerIndicatorGraphic=null,this._centerSymbol=new x.Z({style:"cross",size:6,color:[255,255,255]}),this._defaultSegmentOffset=48,this._numUpdating=0,this._handles=new k.Z,this._internalGraphicsLayer=new A.default({listMode:"hide"}),this._lineGraphic=null,this._operationHandle=null,this._vertexGraphics=[],this._viewHandles=new k.Z,this._doUnnormalization=!1,this.activeFillSymbol=new S.default({style:"solid",color:[150,150,150,.2],outline:{color:[50,50,50],width:0}}),this.activeLineSymbol=new C.Z({color:[255,127,0,1],width:2}),this.activeVertexSymbol=new x.Z({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}}),this.layer=null,this.pointSymbol=new x.Z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new S.default({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new C.Z({color:[130,130,130,1],width:2}),this.updateGraphics=new c.Z,this.updateOnGraphicClick=!0,this.updatePointSymbol=new x.Z({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new S.default({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new C.Z({color:[12,207,255],width:2}),this.vertexSymbol=new x.Z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.snappingOptions=new P.g,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=q,this.defaultUpdateOptions=N}initialize(){this._handles.add([(0,O.watch)(this,"layer",(()=>{this.cancel(),this._internalGraphicsLayer.elevationInfo=(0,g.pC)(this.layer)?this.layer.elevationInfo:null})),(0,O.on)(this,"view.map.layers","change",(e=>{e.removed.indexOf(this.layer)>=0&&this.cancel()})),(0,O.on)(this,"layer.graphics","change",(e=>{if((0,g.pC)(this._operationHandle))for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())})),(0,O.init)(this,"layer.elevationInfo",(()=>{this.cancel(),this._internalGraphicsLayer.elevationInfo=(0,g.pC)(this.layer)?this.layer.elevationInfo:null}),!0)])}destroy(){this.cancel(),this._handles.removeAll(),this._handles=null,this._viewHandles.removeAll(),this._viewHandles=null,this._removeDefaultLayer(),this._draw&&this._draw.destroy(),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){return"3d"===this.view.type?"move":"transform"}get _draw(){return"ready"===this.state||"active"===this.state?new R.Z({view:this.view}):null}get updating(){return this._numUpdating>0}get activeTool(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}get activeComponent(){return this._operationHandle?this._operationHandle.activeComponent:null}get createGraphic(){return this.view&&"3d"===this.view.type&&(0,g.pC)(this.activeComponent)&&"draw-3d"===this.activeComponent.type?(0,g.Wg)(this.activeComponent.createGraphic):this._get("createGraphic")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...q,...e})}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...N,...e})}get state(){var e;const t=!(null==(e=this.view)||!e.ready||!this.layer),i=this._operationHandle;return t&&i?"active":t?"ready":"disabled"}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:e,map:i}=t;e&&(t.cursor=null),i&&i.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}this._doUnnormalization=null!=e&&"3d"===e.type&&"global"===e.viewingMode;const i="view-ready";this._handles.remove(i),e&&this._handles.add((0,O.when)(e,"ready",(t=>{this._viewHandles.removeAll(),t&&this._viewHandles.add(this._generateViewHandles(e))}),!0),i),this._set("view",e)}cancel(){this._moduleLoaderAbortController&&(this._moduleLoaderAbortController.abort(),this._moduleLoaderAbortController=null),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if("active"===e&&t.length){const{activeTool:e,layer:i}=this,o=t.toArray();i.removeMany(o),this.cancel(),this._emitDeleteEvent({graphics:o,tool:e})}}async create(e,t){if("disabled"===this.state)return this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),void(this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."));if(this.cancel(),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");const i=await this._setupCreateOperation(e,t);(0,g.Wi)(i)||this.destroyed||((0,K.p)(this.view,this._internalGraphicsLayer),i.on("complete",(()=>{if(i===this._operationHandle){const t=this.createGraphic,o=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),i.cancelled||null==t||this.layer.add(t),this.emit("create",{graphic:t,state:o?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}})),this._operationHandle=i,this.view.ready&&(0,L.t)(this.view)&&this.view.focus())}async update(e,t){const{layer:i,state:o,view:a}=this;if("disabled"===o)return i||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),void(a||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."));this.cancel();const r=Array.isArray(e)?e:[e];if(null==e||!r||!r.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(r.some((e=>e.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):(0,g.Wi)(e.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"===a.type&&!a.spatialReference.equals(e.geometry.spatialReference)&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),!0))))return;const s=await this._setupUpdateOperation(r,t);(0,g.Wi)(s)||ee(s)||((0,K.p)(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(s,t),this.emit("update",{graphics:r,state:"start",aborted:!1,tool:s.tool,toolEventInfo:null,type:"update"}))}undo(){this.canUndo()&&this._operationHandle.undo()}redo(){this.canRedo()&&this._operationHandle.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(e){const t=[];switch(this.view.type){case"2d":{const a=await this.view.hitTest(e);if(a.results.length>0){const e=a.results[0];if(e.graphic){var i,o;const a=e.graphic;"vector-tile"!==(null==(i=a.layer)?void 0:i.type)&&"imagery"!==(null==(o=a.layer)?void 0:o.type)&&t.push(e)}}}break;case"3d":{const i=[this.view.map.ground];this.view.map.allLayers.forEach((e=>{"integrated-mesh"===e.type&&i.push(e)}));const o=await this.view.hitTest(e,{exclude:i});if(o.results.length>0){const e=o.results[0];(!o.ground.mapPoint||this.view.map.ground.opacity<1||o.ground.distance-e.distance>-Math.min(3*o.ground.distance,"global"===this.view.viewingMode?(0,I.Iu)(this.view.renderCoordsHelper.spatialReference).radius/this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&t.push(e)}}}return{screenPoint:e,results:t}}_generateViewHandles(e){return[e.on("immediate-click",(t=>{const{_operationHandle:i,defaultUpdateOptions:o,layer:a,state:r,updateGraphics:s,updateOnGraphicClick:n}=this,l="active"===r&&"create"===i.type;"disabled"!==r&&!l&&n&&(this._beginAsyncOperation(),this._getFirstHit((0,H.vT)(t)).then((i=>{const o=i.results;if(o.length)for(let i=0;i<o.length;++i){const n=o[i];if(n.graphic){const i=n.graphic;if(s.indexOf(i)>-1||i.layer===a)return t.stopPropagation(),i;"2d"!==e.type||this._isComponentGraphic(i)||"active"!==r||this.cancel()}}else"active"===r&&this.cancel();return null})).then((e=>(0,g.pC)(e)&&-1===s.indexOf(e)?this.update([e],{...o}):null)).then((()=>{this._endAsyncOperation()})))}),M.f.WIDGET)]}async _setupCreateOperation(e,t){if(!e)return null;const i={hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...t};let o;if("2d"===this.view.type)switch(e){case"point":o=this._setupCreatePointOperation(e,i);break;case"multipoint":o=this._setupCreateMultipointOperation(e,null);break;case"polygon":case"polyline":o=this._setupCreatePolyOperation(e,i);break;case"rectangle":o=this._setupCreateRectangleOperation(e,i);break;case"circle":o=this._setupCreateCircleOperation(e,i)}else{const t=await this._setupCreate3DOperation(e,this.view,i);if((0,g.Wi)(t)||ee(t))return null;o=t}return o}async _setupCreate3DOperation(e,t,o){if("multipoint"===e)return null;const a={point:this.pointSymbol,multipoint:null,polyline:this.polylineSymbol,polygon:this.polygonSymbol,rectangle:this.polygonSymbol,circle:this.polygonSymbol}[e];this._removeCreateOperationGraphics();const r="rectangle"!==e,s="rectangle"!==e;this.snappingOptions.selfEnabledToggled=!1;const n={view:t,mode:"rectangle"===e||"circle"===e?"hybrid":"click",...o,elevationInfo:this.layer.elevationInfo,geometryType:e,createGraphicSymbol:a,snapToScene:!(0,g.pC)(this.layer.elevationInfo)||"absolute-height"===this.layer.elevationInfo.mode,snappingOptions:this.snappingOptions,forceUniformSize:s,centered:r},l=await this._requireModule(Promise.all([i.e(8291),i.e(5736),i.e(8458)]).then(i.bind(i,78458)));if(ee(l))return l;const c=new l.module.DrawGraphicTool(n);this.view.tools.add(c);let p=null;this.view.activeTool=c;const h=[],d=new B({activeComponent:c,tool:e,type:"update",onEnd:()=>{var e;h.forEach((e=>e.remove())),h.length=0,null==(e=this.view.tools)||e.remove(c),c.destroy()},undo:()=>{c.canUndo&&c.undo()},redo:()=>{c.canRedo&&c.redo()},canUndo:()=>c.canUndo,canRedo:()=>c.canRedo});return h.push(this.view.on("key-down",(t=>{t.key===z.pan?(t.stopPropagation(),t.repeat||(c.enabled=!1)):t.key===z.complete?(t.stopPropagation(),c.completeCreateOperation()):t.key===z.undoKey?(t.stopPropagation(),d.undo()):t.key===z.redoKey?(t.stopPropagation(),d.redo()):t.key!==z.snappingKey||"rectangle"===e||"circle"===e||t.repeat?t.key!==z.constraintKey||"rectangle"!==e&&"circle"!==e||t.repeat?t.key===z.centerKey&&(t.repeat||(c.centered=!r,t.stopPropagation())):(c.forceUniformSize=!s,t.stopPropagation()):(c.snappingOptions.selfEnabledToggled=!0,t.stopPropagation())}),M.f.WIDGET),this.view.on("key-up",(t=>{t.key===z.pan?c.enabled=!0:t.key===z.snappingKey&&"rectangle"!==e&&"circle"!==e?(c.snappingOptions.selfEnabledToggled=!1,t.stopPropagation()):t.key!==z.constraintKey||"rectangle"!==e&&"circle"!==e?t.key===z.centerKey&&(c.centered=r,t.stopPropagation()):(c.forceUniformSize=s,t.stopPropagation())}),M.f.WIDGET),c.on("vertex-add",(t=>{switch(p=(0,g.Wi)(p)?"start":"active",t.operation){case"apply":this.emit("create",{graphic:(0,g.Wg)(c.createGraphic),state:p,tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[(0,g.Wg)(c.createGraphic)],tool:e});break;case"redo":this._emitRedoEvent({graphics:[(0,g.Wg)(c.createGraphic)],tool:e})}})),c.on("cursor-update",(e=>{c.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:(0,g.Wg)(c.createGraphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:e.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),c.on("vertex-remove",(t=>{switch(t.operation){case"apply":this.emit("create",{graphic:(0,g.Wg)(c.createGraphic),state:"active",tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[(0,g.Wg)(c.createGraphic)],tool:e});break;case"redo":this._emitRedoEvent({graphics:[(0,g.Wg)(c.createGraphic)],tool:e})}})),c.on("complete",(e=>{this._removeCreateOperationGraphics(),this._set("createGraphic",(0,g.Wg)(e.graphic)),p="complete",e.aborted?d&&d.cancel():d&&d.complete()}))),d}_setupCreatePointOperation(e,t){const i={elevationInfo:this.layer.elevationInfo,hasZ:t.hasZ,defaultZ:t.defaultZ,interactiveUndoDisabled:!0},o=this._draw.create(e,i),a=[o.on("cursor-update",(e=>{(0,g.pC)(e.vertexIndex)?this._displayCrosshairCursor():this._displayDefaultCursor()})),o.on("draw-complete",(e=>{const t=this.createPointFromVertex(e.vertices[0]),i=new E.Z(t,this.pointSymbol);this._set("createGraphic",i),s&&s.complete()}))],r=[this.view.on("key-down",(e=>{e.key===z.cancelKey&&(s&&s.cancel(),e.stopPropagation())}),M.f.WIDGET)],s=this._operationHandleForCreateAction(o,[...a,...r],e);return s}_setupCreateMultipointOperation(e,t){const i={...t,undoDisabled:!0},o=this._draw.create(e,i);let a=null;const r=[],s=this._operationHandleForCreateAction(o,r,e);return r.push(o.on("vertex-add",(t=>{const{type:i,vertexIndex:o,vertices:r}=t,s=r[o];a=t,this._drawMultipointGraphic(r,!0),this.emit("create",{graphic:this.createGraphic,state:1===r.length?"start":"active",tool:e,toolEventInfo:{added:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:o}],type:i},type:"create"})})),o.on("vertex-remove",(t=>{const{type:i,vertexIndex:o,vertices:r}=t,s=r[o];a=t,this._drawMultipointGraphic(r,!0),this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{removed:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:o}],type:i},type:"create"})})),o.on("vertex-update",(t=>{const{type:i,vertexIndex:o,vertices:r}=t,s=r[o];a=t,this._drawMultipointGraphic(r,!0),this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{type:i,updated:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:o}]},type:"create"})})),o.on("cursor-update",(e=>{a=e})),o.on("draw-complete",(e=>{const t=e.vertices.slice(0),i=(0,D.Nv)(t,this.view.spatialReference);i&&this.createGraphic&&(this.createGraphic.geometry=i),s&&s.complete()})),o.on("undo",(e=>{const t=e.vertices,i=a&&"cursor-update"!==a.type;this._resetCreateOperationGraphics(),t.length&&this._drawMultipointGraphic(t,i)})),o.on("redo",(e=>{const t=e.vertices,i=a&&"cursor-update"!==a.type;this._resetCreateOperationGraphics(),t.length&&this._drawMultipointGraphic(t,i)}))),r.push(this.view.on("pointer-move",(()=>this._displayCrosshairCursor()),M.f.WIDGET),this.view.on("key-down",(e=>this._getCommonUpdateOperationKeyDownHandlers(s,e)),M.f.WIDGET)),s}_setupCreatePolyOperation(e,t){const i={...t,elevationInfo:this.layer.elevationInfo,interactiveUndoDisabled:!0};let o=null;("polyline"===e||"polygon"===e)&&(o=this._draw.create(e,i));let a=new f.Z,r=null,s=!1;const n=[o.on("vertex-add",(t=>{const{type:i,vertexIndex:o,vertices:a}=t,n=a[o];this._snap(e,a,s),r=t,this._drawVertexGraphics(e,a,{userClicked:!0}),this.emit("create",{graphic:this.createGraphic,state:1===a.length?"start":"active",tool:e,toolEventInfo:{added:n,vertices:[{coordinates:n,componentIndex:0,vertexIndex:o}],type:i},type:"create"})})),o.on("vertex-remove",(t=>{const{type:i,vertexIndex:o,vertices:a}=t,n=a[o];this._snap(e,a,s),r=t,this._drawVertexGraphics(e,a,{userClicked:!0}),this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{removed:n,vertices:[{coordinates:n,componentIndex:0,vertexIndex:o}],type:i},type:"create"})})),o.on("vertex-update",(t=>{const{type:i,vertexIndex:o,vertices:a}=t,n=a[o];this._snap(e,a,s),r=t,this._drawVertexGraphics(e,a,{userClicked:!0}),this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{type:i,updated:n,vertices:[{coordinates:n,componentIndex:0,vertexIndex:o}]},type:"create"})})),o.on("cursor-update",(t=>{const{type:i,vertices:o}=t;if(t.mapPoint&&(this._snap(e,o,s),r=t,a=t.mapPoint,this._drawVertexGraphics(e,o,{userClicked:!1}),o.length>1)){const t=o[o.length-1];this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{coordinates:t,type:i},type:"create"})}})),o.on("draw-complete",(t=>{const i=t.vertices.slice(0);let o=null;"polyline"===e?o=(0,D.DF)([i],this.view.spatialReference,this._doUnnormalization):"polygon"===e&&(o=(0,D.p)([i],this.view.spatialReference,this._doUnnormalization,!0)),o&&(this.createGraphic.geometry=o),c&&c.complete()})),o.on("undo",(t=>{const i=t.vertices,o=r&&"cursor-update"!==r.type;this._resetCreateOperationGraphics(),this._snap(e,i,s),i.length&&this._drawVertexGraphics(e,i,{userClicked:o})})),o.on("redo",(t=>{const i=t.vertices,o=r&&"cursor-update"!==r.type;this._resetCreateOperationGraphics(),this._snap(e,i,s),i.length&&this._drawVertexGraphics(e,i,{userClicked:o})}))],l=[this.view.on("pointer-move",(e=>{this.view.toMap((0,b.vW)(e.x,e.y))?this._displayCrosshairCursor():this._displayDefaultCursor()}),M.f.WIDGET),this.view.on("key-down",(t=>{const i=o.vertices.slice(0),a=r&&"cursor-update"!==r.type;t.key===z.constraintKey?"2d"===this.view.type&&(s||(s=!0,this._snap(e,i,!a),this._drawVertexGraphics(e,i,{userClicked:a}))):t.key===z.undoKey&&c&&c.canUndo()?(t.stopPropagation(),c.undo()):t.key===z.redoKey&&c&&c.canRedo()?(t.stopPropagation(),c.redo()):t.key===z.cancelKey&&c&&c.cancel()}),M.f.WIDGET),this.view.on("key-up",(t=>{const i=o.vertices.slice(0),n=r&&"cursor-update"!==r.type;t.key===z.constraintKey&&s&&(n||(i.pop(),i.push([a.x,a.y]),this._drawVertexGraphics(e,i,{userClicked:n})),s=!1)}),M.f.WIDGET)];if("polygon"===e){const e=(e,t,i)=>{if(!e||!e.layer||!e.visible)return!1;const o=this.view.toScreen(e.geometry);return this._isWithinScreenDistance(o,t,i)},t=t=>{if(!(this._vertexGraphics.length<=2))return e(this._vertexGraphics[0],t,this._getVertexIntersectDistance())};let i=!1;l.push(this.view.on("pointer-move",(()=>{i=!1}),M.f.WIDGET),this.view.on("pointer-down",(o=>{if(t(o))return i=!0,void o.stopPropagation();this._vertexGraphics.some((t=>e(t,o,this._getVertexIntersectDistance())))&&o.stopPropagation()}),M.f.WIDGET),this.view.on("pointer-up",(e=>{i&&(e.stopPropagation(),o.complete())})))}const c=this._operationHandleForCreateAction(o,[...n,...l],e);return c}_setupCreateCircleOperation(e,t){const i={...t,elevationInfo:this.layer.elevationInfo,interactiveUndoDisabled:!0},o=this._draw.create(e,i);let a=!1,r=!0;const s=[o.on("vertex-add",(t=>{const{type:i,vertexIndex:s,vertices:n}=t,l=n[s];this._drawSegmentGraphic(e,n,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem),this.emit("create",{graphic:this.createGraphic,state:1===n.length?"start":"active",tool:e,toolEventInfo:{added:l,vertices:[{coordinates:l,componentIndex:0,vertexIndex:s}],type:i},type:"create"})})),o.on("cursor-update",(t=>{const{type:i,vertices:s}=t;if(this._drawSegmentGraphic(e,s,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem),2===s.length){const t=s[s.length-1];this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{coordinates:t,type:i},type:"create"})}})),o.on("draw-complete",(e=>{const t=e.vertices.slice(0);let i=null;1===t.length?(t.push(o.viewAlignedCoordinateSystem.makeMapPoint(t[0][0]+this._defaultSegmentOffset*this.view.resolution,t[0][1])),i=(0,D.y)(t,o.viewAlignedCoordinateSystem,!0,this.view.resolution)):i=a?(0,D.n_)(t,o.viewAlignedCoordinateSystem,r):(0,D.y)(t,o.viewAlignedCoordinateSystem,r,this.view.resolution),this.createGraphic?this.createGraphic.geometry=i:(this._removeCreateGraphic(),this._set("createGraphic",new E.Z(i,this.polygonSymbol))),l&&l.complete()}))],n=[this.view.on("pointer-move",(e=>{(0,g.pC)(o.getCoordsFromScreenPoint((0,b.vW)(e.x,e.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()}),M.f.WIDGET),this.view.on("key-down",(t=>{t.key===z.constraintKey?a||(a=!0,this._drawSegmentGraphic(e,o.vertices,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem)):t.key===z.centerKey?r&&(r=!1,this._drawSegmentGraphic(e,o.vertices,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem)):t.key===z.cancelKey&&l&&l.cancel()}),M.f.WIDGET),this.view.on("key-up",(t=>{t.key===z.constraintKey?(a=!1,this._drawSegmentGraphic(e,o.vertices,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem)):t.key===z.centerKey&&(r=!0,this._drawSegmentGraphic(e,o.vertices,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem))}),M.f.WIDGET)],l=this._operationHandleForCreateAction(o,[...s,...n],e);return l}_setupCreateRectangleOperation(e,t){const i={...t,elevationInfo:this.layer.elevationInfo,interactiveUndoDisabled:!0},o=this._draw.create(e,i);let a=!1,r=!1;const s=[o.on("vertex-add",(t=>{const{type:i,vertexIndex:s,vertices:n}=t,l=n[s];this._drawSegmentGraphic(e,n,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem),this.emit("create",{graphic:this.createGraphic,state:1===n.length?"start":"active",tool:e,toolEventInfo:{added:l,vertices:[{coordinates:l,componentIndex:0,vertexIndex:s}],type:i},type:"create"})})),o.on("cursor-update",(t=>{const{type:i,vertices:s}=t;if(this._drawSegmentGraphic(e,s,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem),2===s.length){const t=s[s.length-1];this.emit("create",{graphic:this.createGraphic,state:"active",tool:e,toolEventInfo:{coordinates:t,type:i},type:"create"})}})),o.on("draw-complete",(e=>{const t=e.vertices.slice(0);let i=null;1===t.length&&(a=!1,r=!1),i=a?(0,D.yL)(t,o.viewAlignedCoordinateSystem,r):(0,D.MC)(t,o.viewAlignedCoordinateSystem,r),this.createGraphic?this.createGraphic.geometry=i:(this._removeCreateGraphic(),this._set("createGraphic",new E.Z(i,this.polygonSymbol))),l&&l.complete()}))],n=[this.view.on("pointer-move",(e=>{(0,g.pC)(o.getCoordsFromScreenPoint((0,b.vW)(e.x,e.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()}),M.f.WIDGET),this.view.on("key-down",(t=>{t.key===z.constraintKey?a||(a=!0,this._drawSegmentGraphic(e,o.vertices,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem)):t.key===z.centerKey?r||(r=!0,this._drawSegmentGraphic(e,o.vertices,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem)):t.key===z.cancelKey&&l&&l.cancel()}),M.f.WIDGET),this.view.on("key-up",(t=>{t.key===z.constraintKey?(a=!1,this._drawSegmentGraphic(e,o.vertices,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem)):t.key===z.centerKey&&(r=!1,this._drawSegmentGraphic(e,o.vertices,{centered:r,constrainToggle:a},o.viewAlignedCoordinateSystem))}),M.f.WIDGET)],l=this._operationHandleForCreateAction(o,[...s,...n],e);return l}async _setupUpdateOperation(e,t){const{_defaultUpdateTool:i,defaultUpdateOptions:o,layer:a,view:r}=this,s={...o,...t},n=s.tool||i;for(const t of e)a.remove(t),a.add(t);if("3d"===r.type){if(0===e.length)return null;switch(n){case"move":return this._setupMove3DOperation(e,s,r,n);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const t=(0,Z.P)(e[0]);return 0===t?this._setupReshape3DOperation(e[0],s,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${U(t)}).`),null)}case"transform":return 1===e.length&&0===function(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if((0,g.Wi)(e.geometry))return 2;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":default:return 3}const i=(0,g.pC)(e.symbol)&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return i&&i.length>0&&i.some((e=>"object"===e.type))?"on-the-ground"!==(0,W.vu)(e)&&(0,W.Lt)(e)?4:0:5}(e[0])?this._setupPointTransform3DOperation(e[0],s,r):this._setupMove3DOperation(e,s,r,n)}}if("move"===n)return this._setupMoveOperation(e,s,r);if(e.length>1)return"reshape"===n?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshapeOperation(e,n,s,r);if(1===e.length){const t=e[0],i=(0,g.U2)(t.geometry,"type");if("point"===i||"multipoint"===i)return this._setupMoveOperation(e,s,r);if("transform"===n||"reshape"===n)return this._setupTransformOrReshapeOperation(e,n,s,r)}return null}async _setupMove3DOperation(e,t,o,a,r=!1){for(const t of e){const e=(0,F.P)(t);if(0!==e)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${U(e)}).`),null}const s=await this._requireModule(Promise.all([i.e(8291),i.e(5736),i.e(8458)]).then(i.bind(i,78458)));if(ee(s))return s;const n=new s.module.GraphicMoveTool({view:o,enableZ:t.enableZ});this.view.tools.add(n),n.graphics.addMany(e),r||this.updateGraphics.addMany(e);const l=[],c=new B({activeComponent:n,tool:a,type:"update",onEnd:()=>{var e;l.forEach((e=>e.remove())),l.length=0,null==(e=this.view.tools)||e.remove(n),n.destroyed||n.destroy()},undo:()=>{$(c,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:a})},redo:()=>{J(c,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:a})},addToSelection:e=>{this.updateGraphics.push(e),n.graphics.push(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);c.history.undo.forEach((e=>e.updates.splice(t,1))),c.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?n.graphics.remove(e):c.complete()},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;if("transform"!==a)return;const e=this.updateGraphics.getItemAt(0);if(0!==(0,Z.P)(e))return;const i=await this._setupReshape3DOperation(e,t,o,!0);ee(i)||(c.onEnd(),c.destroy(),this._setUpdateOperationHandle(i,t))}});return l.push(...this._getHandlesForComponent(c,t),this.view.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(c,e)),M.f.WIDGET),this.view.on("key-down",(e=>this._getCommonUpdateOperationKeyDownHandlers(c,e)),M.f.WIDGET)),c}async _setupPointTransform3DOperation(e,t,o){const a="transform",{enableRotation:r,enableScaling:s,enableZ:n}=t,l=await this._requireModule(Promise.all([i.e(8291),i.e(5736),i.e(8458)]).then(i.bind(i,78458)));if(ee(l))return l;const c=new l.module.GraphicTransformTool({graphic:e,view:o,enableRotation:r,enableScaling:s,enableZ:n});this.view.tools.add(c),this.updateGraphics.add(e);const p=[],h=new B({activeComponent:c,tool:a,type:"update",onEnd:()=>{var e;p.forEach((e=>e.remove())),p.length=0,null==(e=this.view.tools)||e.remove(c),c.destroyed||c.destroy()},undo:()=>{$(h,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:a})},redo:()=>{J(h,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:a})},addToSelection:async e=>{this.updateGraphics.add(e);const i=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,o,"transform",!0);ee(i)||(h.onEnd(),h.destroy(),this._setUpdateOperationHandle(i,t))}});return p.push(...this._getHandlesForComponent(h,t),this.view.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(h,e)),M.f.WIDGET),this.view.on("key-down",(e=>this._getCommonUpdateOperationKeyDownHandlers(h,e)),M.f.WIDGET)),h}async _setupMoveOperation(e,t,i){const o="move";this.updateGraphics.addMany(e);const a=this._getCloneInfos(e);for(const e of a)this._internalGraphicsLayer.add(e.clone);const r=await this._getGraphicMover(e,t,i);if(ee(r))return r;const s=new B({activeComponent:r,tool:o,type:"update",onEnd:()=>{var e;this._displayDefaultCursor(),l.forEach((e=>e.remove())),n.forEach((e=>e.remove())),l=[],n=[],r.destroy(),null==(e=this._internalGraphicsLayer)||e.removeMany([...this.updateGraphics.toArray(),...a.map((e=>e.clone))])},undo:()=>{$(s,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o})},redo:()=>{J(s,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o})},addToSelection:e=>{this.updateGraphics.push(e),r.graphics=this.updateGraphics.toArray();const t=this._createClone(e);a.push({graphic:e,clone:t}),this._internalGraphicsLayer.add(t),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);s.history.undo.forEach((e=>e.updates.splice(t,1))),s.history.redo.forEach((e=>e.updates.splice(t,1)));const i=a.findIndex((t=>t.graphic===e)),o=a[i];this._internalGraphicsLayer.remove(o.clone),this.updateGraphics.remove(e),a.splice(i,1);const n=this.updateGraphics.toArray();this.emit("update",{graphics:n,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?r.graphics=n:s.complete()}});let n=[i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(s,e,t)),M.f.WIDGET),i.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(s,e),e.key!==z.constraintKey||e.repeat||(r.enableMoveAllGraphics=!r.enableMoveAllGraphics)}),M.f.WIDGET),i.on("key-up",(e=>{e.key===z.constraintKey&&(r.enableMoveAllGraphics=!r.enableMoveAllGraphics)}),M.f.WIDGET)],l=this._getHandlesForComponent(s,t);return l.push(r.on("graphic-move",(e=>{a.forEach((t=>{const i=e.allGraphics.find((e=>e===t.graphic));i&&(t.clone.geometry=i.geometry)}))}))),s}_getCloneInfos(e){return(null==e?void 0:e.map((e=>({graphic:e,clone:this._createClone(e)}))))||[]}_createClone(e){const t=e.clone();return t.symbol=this._getSymbolForClone(e),t}_getSymbolForClone(e){if((0,g.Wi)(e.symbol))return null;switch(e.symbol.type){case"cim":return new x.Z({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":{const{xoffset:t,yoffset:i,height:o,width:a}=e.symbol,r=o===a?a:Math.max(o,a);return new x.Z({xoffset:t,yoffset:i,size:r,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-marker":{const{xoffset:t,yoffset:i,size:o,style:a}=e.symbol;return new x.Z({xoffset:t,yoffset:i,style:"circle"===a?"circle":"square",size:o+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-fill":return new S.default({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new C.Z({color:[255,127,0,1],style:"dash",width:1});case"text":{const{xoffset:t,yoffset:i}=e.symbol;return new x.Z({xoffset:t,yoffset:i,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}}async _setupReshape3DOperation(e,t,o,a=!1){const r="reshape",s=await this._requireModule(Promise.all([i.e(8291),i.e(5736),i.e(8458)]).then(i.bind(i,78458)));if(ee(s))return s;this.snappingOptions.selfEnabledToggled=!1;const n=new s.module.GraphicReshapeTool({view:o,graphic:e,enableZ:t.enableZ,enableMoveGraphic:t.enableMoveGraphic,snappingOptions:this.snappingOptions});o.tools.add(n),a||this.updateGraphics.add(e);const l=[],c=new B({activeComponent:n,tool:r,type:"update",onEnd:()=>{var e;l.forEach((e=>e.remove())),l.length=0,null==(e=this.view.tools)||e.remove(n),n.destroyed||n.destroy()},undo:()=>{n.beforeUndo(),$(c,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{J(c,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async e=>{this.updateGraphics.add(e);const i=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,o,"transform",!0);ee(i)||(c.onEnd(),c.destroy(),this._setUpdateOperationHandle(i,t))},toggleTool:async()=>{if(!1===t.toggleToolOnClick)return;const e=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,o,"transform",!0);ee(e)||(c.onEnd(),c.destroy(),this._setUpdateOperationHandle(e,t))}});return l.push(...this._getHandlesForComponent(c,t),o.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(c,e)),M.f.WIDGET),o.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(c,e),e.key===z.snappingKey&&(n.snappingOptions.selfEnabledToggled=!0,e.stopPropagation())}),M.f.WIDGET),o.on("key-up",(e=>{e.key===z.snappingKey&&(n.snappingOptions.selfEnabledToggled=!1,e.stopPropagation())}),M.f.WIDGET)),c}async _setupTransformOrReshapeOperation(e,t,i,o){const{multipleSelectionEnabled:a}=i;this.updateGraphics.addMany(e);const r="transform"===t?await this._getBox(e,i,o):await this._getReshape(e,i,o);if(ee(r))return r;const s=new B({activeComponent:r,type:"update",onEnd:()=>{l.forEach((e=>e.remove())),n.forEach((e=>e.remove())),l=[],n=[],s.activeComponent&&!s.activeComponent.destroyed&&s.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{$(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},redo:()=>{J(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},addToSelection:e=>{const t=s.activeComponent;this.updateGraphics.add(e),t.graphics=this.updateGraphics.toArray(),t.refresh(),s.resetHistory(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=s.activeComponent,i=this.updateGraphics.indexOf(e);s.history.undo.forEach((e=>e.updates.splice(i,1))),s.history.redo.forEach((e=>e.updates.splice(i,1))),this.updateGraphics.remove(e);const o=this.updateGraphics.toArray();this.emit("update",{graphics:o,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?t.graphics=o:s.complete()},toggleTool:async()=>{if(this.updateGraphics.length>1)return;let t=null;"transform"===s.tool?t=await this._getReshape(e,i,o):"reshape"===s.tool&&(t=await this._getBox(e,i,o)),ee(t)||(s.activeComponent.destroy(),s.activeComponent=t,s.activeComponent&&(l.forEach((e=>e.remove())),l=this._getHandlesForComponent(s,i)))}});let n=[o.on("immediate-click",(e=>{this._getFirstHit((0,H.vT)(e)).then((t=>{var i;if(!s)return;if(null==(i=t.results)||!i.length)return void s.complete();const o=s.activeComponent;t.results.some((t=>{if(t.graphic){var i;const r=t.graphic;if("box"===(null==o?void 0:o.type)&&null!=(i=e.native)&&i.shiftKey&&a)return s.addToSelection(r),!0;r.layer===this.layer&&s.complete()}return!1}))&&e.stopPropagation()}))}),M.f.WIDGET),o.on("key-down",(e=>{if(this._getCommonUpdateOperationKeyDownHandlers(s,e),e.key===z.constraintKey&&!e.repeat&&s){const e=s.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),M.f.WIDGET),o.on("key-up",(e=>{if(e.key===z.constraintKey&&s){const e=s.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),M.f.WIDGET)],l=this._getHandlesForComponent(s,i);return s}async _getGraphicMover(e,t,o){const{enableMoveAllGraphics:a}=t,r=await this._requireModule(i.e(2756).then(i.bind(i,32756)));return ee(r)?r:new r.module.default({enableMoveAllGraphics:a,graphics:e,view:o,callbacks:{onGraphicMoveStart:({dx:e,dy:t,graphic:i})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:"move-start"},type:"update"})},onGraphicMove:({dx:e,dy:t,graphic:i})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:"move"},type:"update"}),onGraphicMoveStop:({dx:e,dy:t,graphic:i})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,o){const{enableRotation:a,enableScaling:r,preserveAspectRatio:s}=t,n=await this._requireModule(Promise.all([i.e(846),i.e(7431)]).then(i.bind(i,77431)));return ee(n)?n:new n.module.default({graphics:e,enableRotation:a,enableScaling:r,preserveAspectRatio:s,layer:this._internalGraphicsLayer,view:o,callbacks:{onMoveStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMove:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMoveStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScale:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotate:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"})}})}async _getReshape(e,t,o){const{enableMidpoints:a=!0}=t,r=await this._requireModule(Promise.all([i.e(846),i.e(5596)]).then(i.bind(i,45596)));return ee(r)?r:new r.module.default({enableMidpoints:a,graphic:e[0],layer:this._internalGraphicsLayer,view:o,callbacks:{onReshapeStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshape:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshapeStop:({mover:e,type:t})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e,type:t},type:"update"}),onMoveStart:({dx:e,dy:t,mover:i,type:o})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:o},type:"update"}),onMove:({dx:e,dy:t,mover:i,type:o})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:o},type:"update"}),onMoveStop:({dx:e,dy:t,mover:i,type:o})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:o},type:"update"}),onVertexAdd:({added:e,type:t,vertices:i})=>{const o=e.map((e=>(0,w.nA)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:o,vertices:i,type:t},type:"update"})},onVertexRemove:({removed:e,type:t,vertices:i})=>{const o=e.map((e=>(0,w.nA)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:o,vertices:i,type:t},type:"update"})}}})}_getHandlesForComponent(e,t){const i=e.activeComponent;switch(i.type){case"graphic-mover":return[i.on("graphic-click",(({graphic:t,viewEvent:i})=>{var o;null!=(o=i.native)&&o.shiftKey&&(i.stopPropagation(),e.removeFromSelection(t))})),i.on("graphic-move-start",(t=>e.addToHistory(Y(t.allGraphics))))];case"box":return[i.on("graphic-click",(i=>this._onTransformOrReshape2DGraphicClick(e,t,i))),i.on("move-start",(t=>e.addToHistory(Y(t.graphics)))),i.on("rotate-start",(t=>e.addToHistory(Y(t.graphics)))),i.on("scale-start",(t=>e.addToHistory(Y(t.graphics))))];case"reshape":return[i.on("graphic-click",(i=>this._onTransformOrReshape2DGraphicClick(e,t,i))),i.on("move-start",(t=>e.addToHistory(Y([t.mover])))),i.on("reshape-start",(t=>e.addToHistory(Y([t.graphic])))),i.on("vertex-add",(t=>e.addToHistory(Y([t.oldGraphic])))),i.on("vertex-remove",(t=>e.addToHistory(Y([t.oldGraphic]))))];case"move-3d":return[i.on("graphic-move-start",(t=>{e.addToHistory(Y(t.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:t.allGraphics.length>0?t.allGraphics[0]:null,type:"move-start"},type:"update"})})),i.on("graphic-move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move"},type:"update"})})),i.on("graphic-move-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move-stop"},type:"update"})})),i.on("immediate-click",(i=>{i.shiftKey?this._toggleSelection([i.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[i.on("graphic-translate-start",(t=>{e.addToHistory(Y([t.graphic])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t.graphic,dx:t.dxScreen,dy:t.dyScreen,type:"move-start"},type:"update"})})),i.on("graphic-translate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),i.on("graphic-rotate-start",(t=>{e.addToHistory(X([t.graphic])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t.graphic,angle:t.angle,type:"rotate-start"},type:"update"})})),i.on("graphic-rotate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),i.on("graphic-scale-start",(t=>{e.addToHistory(X([t.graphic])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t.graphic,xScale:t.scale,yScale:t.scale,type:"scale-start"},type:"update"})})),i.on("graphic-scale-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.scale,yScale:e.scale,type:"scale-stop"},type:"update"})})),i.on("graphic-translate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),i.on("graphic-rotate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate"},type:"update"})})),i.on("graphic-scale",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.scale,yScale:e.scale,type:"scale"},type:"update"})}))];case"reshape-3d":return[i.on("reshape",(t=>{"reshape-start"===t.type&&e.addToHistory(Y([t.mover])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:t,type:"update"})})),i.on("move",(t=>{"move-start"===t.type&&e.addToHistory(Y([t.mover])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:t,type:"update"})})),i.on("vertex-add",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),i.on("vertex-remove",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),i.on("immediate-click",(()=>e.toggleTool()))];case"draw":case"draw-3d":return null;default:return}}_onTransformOrReshape2DGraphicClick(e,t,i){var o;const{graphic:a,viewEvent:r}=i;null!=(o=r.native)&&o.shiftKey?(r.stopPropagation(),e.removeFromSelection(a)):t.toggleToolOnClick&&((0,g.Wi)(a.geometry)||"extent"!==a.geometry.type?(r.stopPropagation(),e.toggleTool()):this._logError("sketch:reshape-extent","Reshape operation does not support graphics with geometry of type 'extent'."))}_setUpdateOperationHandle(e,t){this._operationHandle=e;const i=this.view.map;this._disablePopup(t),e.on("complete",(()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),a=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:a,toolEventInfo:null,type:"update"})}}))}_getCommonUpdateOperationClickHandlers(e,t,i){const o=(0,H.vT)(t);this._getFirstHit(o).then((o=>{const a=o.results;a.length&&(t.native.shiftKey&&this._toggleSelection(a.map((e=>e.graphic)),e,i)||a.some((e=>e.graphic&&this.updateGraphics.indexOf(e.graphic)>-1)))?t.stopPropagation():e.complete()}))}_toggleSelection(e,t,i){const o=!i||!!i.multipleSelectionEnabled;return e.some((e=>!(null==e||!o||e.layer!==this.layer||(-1===this.updateGraphics.indexOf(e)?t.addToSelection(e):t.removeFromSelection(e),0))))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const i=t.key;i===z.undoKey&&e.canUndo()?(t.stopPropagation(),e.undo()):i===z.redoKey&&e.canRedo()?(t.stopPropagation(),e.redo()):i===z.cancelKey?(t.stopPropagation(),e.cancel()):z.deleteKeys.indexOf(i)>=0&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||"update"!==this._operationHandle.type)return;const t=this.activeComponent;if((0,g.Wi)(t)||"reshape"===t.type||"reshape-3d"===t.type)return;e.stopPropagation();const i=this.updateGraphics.toArray();this.layer.removeMany(i),this._emitDeleteEvent({graphics:i,tool:this.activeTool})}_drawMultipointGraphic(e,t){let i=null;if(!t&&e.length>1){const t=e.slice(0);t.pop(),i=(0,D.Nv)(t,this.view.spatialReference)}else i=(0,D.Nv)(e,this.view.spatialReference);this.createGraphic?this.createGraphic.geometry=i:this._set("createGraphic",new E.Z(i,this.pointSymbol)),t&&1===e.length&&this._internalGraphicsLayer.add(this.createGraphic)}_drawVertexGraphics(e,t,i){if(!t.length)return;const{_doUnnormalization:o,activeLineSymbol:a,activeVertexSymbol:r,polygonSymbol:s,polylineSymbol:n,vertexSymbol:l,view:{spatialReference:c}}=this,p=!(!i||!i.userClicked),h="polygon"===e,d=h?s:n;if(1===t.length){this._removeLineGraphic(),this._removeActiveLineGraphic();const e=this.createPointFromVertex(t[0]),i=h?(0,D.p)([t],c,o,!0):(0,D.DF)([t],c,o);this._vertexGraphics.length?this._vertexGraphics[0].geometry=e:this._vertexGraphics.push(new E.Z(e,r)),this.createGraphic?this.createGraphic.geometry=i:this._set("createGraphic",new E.Z(i,d)),p&&this._internalGraphicsLayer.add(this._vertexGraphics[0])}else if(2===t.length){const e=this.createPointFromVertex(t[1]),i=(0,D.DF)([t],c,o),a=h?(0,D.p)([t],c,o,!0):(0,D.DF)([t],c,o);if(!this._vertexGraphics.length){const e=this.createPointFromVertex(t[0]),i=new E.Z(e,l);this._vertexGraphics.push(i)}if(1===this._vertexGraphics.length){const t=this._vertexGraphics[0],i=new E.Z(e,l);this._removeLineGraphic(),this._removeActiveFillGraphic(),this._vertexGraphics.push(i),this._internalGraphicsLayer.remove(t),this._internalGraphicsLayer.add(t)}else this._vertexGraphics[1].geometry=e;this._showActiveLineGraphic(i);const r=this._vertexGraphics[0];p&&(this._activeLineGraphic.symbol=n,r.symbol=l,this._internalGraphicsLayer.add(this._vertexGraphics[1])),this.createGraphic?this.createGraphic.geometry=a:this._set("createGraphic",new E.Z(a,s)),this._internalGraphicsLayer.remove(r),this._internalGraphicsLayer.add(r)}else if(t.length>2){const i=h?(0,D.p)([t],c,o,!0):(0,D.DF)([t],c,o);"polygon"===e&&this._showFillGraphic(i);const s=t.map((e=>e.slice())),u=s.pop(),v=[s[s.length-1],u],y=(0,D.DF)([s],c,o),m=(0,D.DF)([v],c,o);this._showLineGraphic(y),this._showActiveLineGraphic(m);for(let e=0;e<s.length;e++){const i=this._vertexGraphics[e];if(i)p||e!==this._vertexGraphics.length-1?i.symbol=l:i.symbol=r;else{const i=this.createPointFromVertex(t[e]);this._showVertexGraphic(i)}}if(p){this._activeLineGraphic.symbol=n;const e=t.length-1,i=this.createPointFromVertex(t[e]);this._showVertexGraphic(i)}else this._activeLineGraphic.symbol=a;this.createGraphic?this.createGraphic.geometry=i:(this._removeCreateGraphic(),this._set("createGraphic",new E.Z(i,d)));for(const e of this._vertexGraphics)this._internalGraphicsLayer.remove(e),this._internalGraphicsLayer.add(e)}}_drawSegmentGraphic(e,t,i,o){if(!t.length)return;const a=!(null==i||!i.centered),r=!(null==i||!i.constrainToggle);let s=null;1===t.length?this._removeCenterIndicatorGraphic():("rectangle"===e?s=r?(0,D.yL)(t,o,a):(0,D.MC)(t,o,a):"circle"===e&&(s=r?(0,D.n_)(t,o,a):(0,D.y)(t,o,a,this.view.resolution)),s.extent&&s.extent.center&&this._showCenterIndicatorGraphic(s.extent.center)),s?this.createGraphic?this.createGraphic.geometry=s:(this._removeCreateGraphic(),this._set("createGraphic",new E.Z(s,this.polygonSymbol)),this._internalGraphicsLayer.add(this.createGraphic)):this._removeCreateGraphic()}_showCenterIndicatorGraphic(e){this._centerIndicatorGraphic?this._centerIndicatorGraphic.geometry=e:(this._centerIndicatorGraphic=new E.Z(e,this._centerSymbol),this._internalGraphicsLayer.add(this._centerIndicatorGraphic))}_removeCenterIndicatorGraphic(){this._centerIndicatorGraphic&&(this._internalGraphicsLayer.remove(this._centerIndicatorGraphic),this._centerIndicatorGraphic.destroy(),this._centerIndicatorGraphic=null)}_showActiveLineGraphic(e){this._activeLineGraphic?(this._activeLineGraphic.geometry=e,this._internalGraphicsLayer.remove(this._activeLineGraphic)):this._activeLineGraphic=new E.Z(e,this.activeLineSymbol),this._internalGraphicsLayer.add(this._activeLineGraphic)}_showFillGraphic(e){this._activeFillGraphic?(this._activeFillGraphic.geometry=e,this._internalGraphicsLayer.remove(this._activeFillGraphic)):this._activeFillGraphic=new E.Z(e,this.activeFillSymbol),this._internalGraphicsLayer.add(this._activeFillGraphic)}_showLineGraphic(e){this._lineGraphic?(this._lineGraphic.geometry=e,this._internalGraphicsLayer.remove(this._lineGraphic)):this._lineGraphic=new E.Z(e,this.polylineSymbol),this._internalGraphicsLayer.add(this._lineGraphic)}_showVertexGraphic(e,t){const i=t?this.activeVertexSymbol:this.vertexSymbol,o=new E.Z(e,i);this._vertexGraphics.push(o),this._internalGraphicsLayer.add(o)}_resetCreateOperationGraphics(){this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeActiveLineGraphic(),this._removeVertexGraphics()}_removeCreateGraphic(){this.createGraphic&&(this._internalGraphicsLayer.remove(this.createGraphic),this._set("createGraphic",null))}_removeCreateOperationGraphics(){this._removeCenterIndicatorGraphic(),this._removeActiveLineGraphic(),this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeVertexGraphics()}_removeActiveLineGraphic(){this._activeLineGraphic&&(this._internalGraphicsLayer.remove(this._activeLineGraphic),this._activeLineGraphic.destroy(),this._activeLineGraphic=null)}_removeActiveFillGraphic(){this._activeFillGraphic&&(this._internalGraphicsLayer.remove(this._activeFillGraphic),this._activeFillGraphic.destroy(),this._activeFillGraphic=null)}_removeLineGraphic(){this._lineGraphic&&(this._internalGraphicsLayer.remove(this._lineGraphic),this._lineGraphic.destroy(),this._lineGraphic=null)}_removeVertexGraphics(){this._vertexGraphics.length&&(this._internalGraphicsLayer.removeMany(this._vertexGraphics),this._vertexGraphics.forEach((e=>e.destroy())),this._vertexGraphics=[])}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer.destroy(),this._internalGraphicsLayer=null)}_operationHandleForCreateAction(e,t,i){return new B({activeComponent:this._draw,tool:i,type:"create",onEnd:()=>{t.forEach((e=>e.remove())),t.length=0,this._removeCreateOperationGraphics(),this._internalGraphicsLayer&&this._internalGraphicsLayer.remove(this.createGraphic),this._displayDefaultCursor()},undo:()=>{e.undo(),this._emitUndoEvent({graphics:[this.createGraphic],tool:i})},redo:()=>{e.redo(),this._emitRedoEvent({graphics:[this.createGraphic],tool:i})},canUndo:()=>e&&e.canUndo(),canRedo:()=>e&&e.canRedo()})}_isComponentGraphic(e){const{activeComponent:t}=this;return!(!e||(0,g.Wi)(t))&&(!(!e.attributes||!e.attributes.esriSketchTool)||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}_snap(e,t,i){i&&this._snapLastVertexToAxis(t),"polygon"===e&&this._snapLastPolygonVertexToFirst(t)}_snapLastPolygonVertexToFirst(e){if(e.length<=2)return;const t=e[0],i=e[e.length-1],o=this.view.toScreen(new f.Z(t[0],t[1],this.view.spatialReference)),a=this.view.toScreen(new f.Z(i[0],i[1],this.view.spatialReference));this._isWithinScreenDistance(o,a,this._getVertexIntersectDistance())&&(i[0]=t[0],i[1]=t[1])}_getVertexIntersectDistance(){return this.vertexSymbol&&"simple-marker"===this.vertexSymbol.type?(0,b.F2)(this.vertexSymbol.size)/2+3:3}_isWithinScreenDistance(e,t,i){const o=e.x-t.x,a=e.y-t.y;return Math.sqrt(o*o+a*a)<=i}_snapLastVertexToAxis(e){if(e.length<2)return;const t=e.pop(),i=e[e.length-1],o=(0,D.Gn)(this.view,i),a=o.mapToLocal(i),r=o.mapToLocal(t),s=Math.abs(r.x-a.x),n=Math.abs(r.y-a.y),l=o.localToMap((0,D.Q8)(s>n?r.x:a.x,s>n?a.y:r.y));e.push(l)}_displayPointerCursor(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}_displayCrosshairCursor(){this.view&&this.view.container&&"crosshair"!==this.view.cursor&&(this.view.cursor="crosshair")}_displayDefaultCursor(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)}_logError(e,t,i){j.error(new _.Z(e,t,i))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const i=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}createPointFromVertex(e){return e.length>2?new f.Z(e[0],e[1],e[2],this.view.spatialReference):new f.Z(e[0],e[1],this.view.spatialReference)}test(){return this._operationHandle}wait(){return(0,O.whenNotOnce)(this,"updating")}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var t;return"3d"!==(null==(t=this.view)?void 0:t.type)||this.updateOnGraphicClick||e.toggleToolOnClick}_disablePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&(0,g.Wi)(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=t.autoOpenEnabled,t.autoOpenEnabled=!1)}_restorePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&(0,g.pC)(this._originalAutoOpenEnabled)&&(t.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}};function $(e,t){const i=e.history.undo.pop().updates,o=[];t.forEach(((e,t)=>{const a=i[t],r={};null!=a&&((0,g.pC)(a.geometry)&&(r.geometry=e.geometry,e.geometry=a.geometry),(0,g.pC)(a.symbol)&&(r.symbol=e.symbol,e.symbol=a.symbol),o.push(r))})),e.history.redo.push({updates:o})}function J(e,t){const i=e.history.redo.pop().updates,o=[];t.forEach(((e,t)=>{const a=i[t],r={};null!=a&&((0,g.pC)(a.geometry)&&(r.geometry=e.geometry,e.geometry=a.geometry),(0,g.pC)(a.symbol)&&(r.symbol=e.symbol,e.symbol=a.symbol),o.push(r))})),e.history.undo.push({updates:o})}function Y(e){return{updates:e.map((e=>({geometry:e.geometry})))}}function X(e){return{updates:e.map((e=>({symbol:e.symbol})))}}function ee(e){return"requireError"in e&&"aborted"===e.requireError}(0,o._)([(0,r.Cb)({dependsOn:["state"],readOnly:!0})],Q.prototype,"_draw",null),(0,o._)([(0,r.Cb)()],Q.prototype,"updating",null),(0,o._)([(0,r.Cb)()],Q.prototype,"_operationHandle",void 0),(0,o._)([(0,r.Cb)({dependsOn:["_operationHandle","_operationHandle.tool"],readOnly:!0})],Q.prototype,"activeTool",null),(0,o._)([(0,r.Cb)()],Q.prototype,"activeFillSymbol",void 0),(0,o._)([(0,r.Cb)()],Q.prototype,"activeLineSymbol",void 0),(0,o._)([(0,r.Cb)()],Q.prototype,"activeVertexSymbol",void 0),(0,o._)([(0,r.Cb)({readOnly:!0})],Q.prototype,"createGraphic",null),(0,o._)([(0,r.Cb)()],Q.prototype,"defaultCreateOptions",null),(0,o._)([(0,r.Cb)()],Q.prototype,"defaultUpdateOptions",null),(0,o._)([(0,r.Cb)()],Q.prototype,"layer",void 0),(0,o._)([(0,r.Cb)({types:T.s})],Q.prototype,"pointSymbol",void 0),(0,o._)([(0,r.Cb)({types:T.s})],Q.prototype,"polygonSymbol",void 0),(0,o._)([(0,r.Cb)({types:T.s})],Q.prototype,"polylineSymbol",void 0),(0,o._)([(0,r.Cb)({dependsOn:["view.ready","layer","_operationHandle"],readOnly:!0})],Q.prototype,"state",null),(0,o._)([(0,r.Cb)({readOnly:!0})],Q.prototype,"updateGraphics",void 0),(0,o._)([(0,r.Cb)()],Q.prototype,"updateOnGraphicClick",void 0),(0,o._)([(0,r.Cb)({types:T.s})],Q.prototype,"updatePointSymbol",void 0),(0,o._)([(0,r.Cb)({types:T.s})],Q.prototype,"updatePolygonSymbol",void 0),(0,o._)([(0,r.Cb)({types:T.s})],Q.prototype,"updatePolylineSymbol",void 0),(0,o._)([(0,r.Cb)({types:T.s})],Q.prototype,"vertexSymbol",void 0),(0,o._)([(0,r.Cb)({value:null})],Q.prototype,"view",null),(0,o._)([(0,r.Cb)({type:P.g})],Q.prototype,"snappingOptions",void 0),(0,o._)([(0,r.Cb)()],Q.prototype,"cancel",null),(0,o._)([(0,r.Cb)()],Q.prototype,"complete",null),(0,o._)([(0,r.Cb)()],Q.prototype,"delete",null),(0,o._)([(0,r.Cb)()],Q.prototype,"create",null),(0,o._)([(0,r.Cb)()],Q.prototype,"update",null),(0,o._)([(0,r.Cb)()],Q.prototype,"undo",null),(0,o._)([(0,r.Cb)()],Q.prototype,"redo",null),(0,o._)([(0,r.Cb)()],Q.prototype,"canUndo",null),(0,o._)([(0,r.Cb)()],Q.prototype,"canRedo",null),(0,o._)([(0,r.Cb)()],Q.prototype,"toggleUpdateTool",null),Q=(0,o._)([(0,l.j)("esri.widgets.Sketch.SketchViewModel")],Q);const te=Q;var ie=i(82677),oe=i(77204);async function ae(){return async function(){return i.e(3134).then(i.bind(i,93134))}().then((({contains:e,intersects:t,overlaps:i,simplify:o})=>({contains:e,intersects:t,overlaps:i,simplify:o})))}async function re(e){const{selector:t,candidates:i,currentSelection:o,options:a,view:r}=e;if(!(i&&i.length&&o&&r))return{added:[],removed:[]};const{overlaps:s,intersects:n,contains:l}=a,{spatialReference:c}=r;if(!t)return{added:[],removed:o.removeAll()};const p=t,h=await ae(),d=[],u=[];return i.forEach((e=>{const t=e.geometry,i=s&&!!h.overlaps(c,p,t),a=n&&!!h.intersects(c,p,t),r=l&&!!h.contains(c,p,t),v=o.includes(e);i||a||r?!v&&d.push(e):v&&u.push(e)})),o.removeMany(u),o.addMany(d),{added:d,removed:u}}let se=class extends G.Z.EventedAccessor{constructor(e){super(),this._activeOptions=null,this._dashedFillSymbol=new S.default({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}}),this._dashedLineSymbol=new C.Z({style:"dash",color:[12,207,255],width:2}),this._defaultOptions={tool:"rectangle",createOptions:null,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}},this._completed=!1,this._handles=new k.Z,this._sketchViewModel=new te,this._sketchGraphicsLayer=new A.default({listMode:"hide"}),this._transparentPointSymbol=new x.Z({color:[0,0,0,0],outline:{style:"none",width:0}}),this.candidates=null,this.geometry=null,this.options=null,this.selection=new c.Z,this.view=null,this.candidates=e.candidates,this.options=e.options,this.view=e.view;const{_dashedFillSymbol:t,_dashedLineSymbol:i,_sketchViewModel:o,_sketchGraphicsLayer:a,_transparentPointSymbol:r}=this;o.set({layer:a,view:this.view,activePointSymbol:r,activeLineSymbol:i,activeVertexSymbol:r,activeFillSymbol:t,pointSymbol:r,polygonSymbol:t,polylineSymbol:i,vertexSymbol:r}),this._handles.add([o.on("create",(e=>this._onSketchEvent(e))),o.on(["undo","redo"],(e=>this._onSketchEvent(e)))])}initialize(){this._load()}destroy(){this._handles.destroy(),this._handles=null}get state(){const{_completed:e,_sketchViewModel:{state:t}}=this;return e?"complete":"active"===t?"active":"disabled"}cancel(){this._sketchViewModel.cancel()}async _load(){await this.view.whenReady();const{options:e}=this,{tool:t,createOptions:i}=this._activeOptions={...this._defaultOptions,...e};this._sketchViewModel.create(t,i)}_onSketchEvent(e){const t="create"===e.type?e.graphic:e.graphics[0],i=(null==t?void 0:t.geometry)||null,o="create"===e.type&&"cancel"===e.state,a="create"===e.type&&"complete"===e.state;this._processSelectionGeometry(i,a,o)}_processSelectionGeometry(e,t,i){if(this._set("geometry",e),(t||i)&&(this._completed=!0),i)return void this._onComplete([],!0);const{_activeOptions:o,candidates:a,selection:r,view:s}=this;re({selector:e,candidates:a,currentSelection:r,options:o.selectionOptions,view:s}).then((({added:e,removed:i})=>{t?this._onComplete(this.selection.toArray(),!1):(e.length||i.length)&&this.emit("selection-change",{added:e,removed:i,type:"selection-change"})}))}_onComplete(e,t){this._handles.removeAll(),this.notifyChange("state"),this.emit("complete",{aborted:t,selection:e,type:"complete"})}};(0,o._)([(0,r.Cb)()],se.prototype,"_completed",void 0),(0,o._)([(0,r.Cb)()],se.prototype,"candidates",void 0),(0,o._)([(0,r.Cb)({readOnly:!0})],se.prototype,"geometry",void 0),(0,o._)([(0,r.Cb)()],se.prototype,"options",void 0),(0,o._)([(0,r.Cb)({readOnly:!0})],se.prototype,"selection",void 0),(0,o._)([(0,r.Cb)({dependsOn:["_completed","_sketchViewModel.state"],readOnly:!0})],se.prototype,"state",null),(0,o._)([(0,r.Cb)({value:null})],se.prototype,"view",void 0),se=(0,o._)([(0,l.j)("esri.widgets.support.Selector")],se);const ne=se;let le=class extends((0,oe.p)(ie.default)){constructor(e){super(e),this._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0},this.candidates=null,this.options=null,this.view=null}draw(e){const{_defaultSelectionOptions:t,candidates:i,options:o,view:a}=this,r={...t,...o,...null==e?void 0:e.selectionOptions};return new ne({candidates:i,options:{...e,selectionOptions:r},view:a})}async selectionFrom(e,t){const{_defaultSelectionOptions:i,candidates:o,options:a,view:r}=this,s=new c.Z,n={...i,...a,...t};return await re({selector:e,candidates:o,currentSelection:s,options:n,view:r}),s.toArray()}};(0,o._)([(0,r.Cb)()],le.prototype,"candidates",void 0),(0,o._)([(0,r.Cb)()],le.prototype,"options",void 0),(0,o._)([(0,r.Cb)({value:null})],le.prototype,"view",void 0),le=(0,o._)([(0,l.j)("esri.widgets.support.Selector")],le);const ce=le,pe="esri-sketch__panel",he="esri-sketch__section",de="esri-sketch__info-section",ue="esri-sketch__button",ve="esri-sketch__button--selected",ye="esri-icon-undo",me="esri-icon-redo",ge={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0};let _e=class extends m.default{constructor(e,t){super(e,t),this._activeCreateOptions=null,this._activeSelectionInfo=null,this._selector=new ce,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.createGraphic=null,this.creationMode="continuous",this.defaultCreateOptions=null,this.defaultUpdateOptions=null,this.iconClass="esri-icon-edit",this.label=void 0,this.layer=null,this.messages=null,this.updateGraphics=new c.Z,this.view=null,this.viewModel=new te,this.visibleElements={...ge},this._activateCreateTool=this._activateCreateTool.bind(this)}initialize(){const{view:e}=this;this._selector.view=e,this.own([this.viewModel.on("create",(()=>this.scheduleRender())),this.viewModel.on("update",(()=>this.scheduleRender())),this.viewModel.on("create",(e=>this._onCreateOperation(e))),this.viewModel.on("delete",(e=>this.emit("delete",e))),this.viewModel.on("undo",(()=>this.scheduleRender())),this.viewModel.on("redo",(()=>this.scheduleRender())),this.viewModel.watch("view",(e=>this._selector.set({view:e}))),this.viewModel.watch("state",(()=>this.notifyChange("state")))])}get activeTool(){var e;return(null==(e=this._activeSelectionInfo)?void 0:e.tool)||this.viewModel.activeTool}set layout(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}get state(){return this._activeSelectionInfo?"active":this.viewModel.state}castVisibleElements(e){return{...ge,...e,createTools:{...ge.createTools,...null==e?void 0:e.createTools},selectionTools:{...ge.selectionTools,...null==e?void 0:e.selectionTools}}}create(e,t){this._activeCreateOptions=t||null,this.viewModel.create(e,t)}update(e,t){return this.viewModel.update(e,t)}complete(){}cancel(){this._cancelSelectionOperation(),this.viewModel.cancel()}undo(){}redo(){}delete(){}render(){const{label:e,layout:t,viewModel:{state:i}}=this;return(0,y.j)("div",{"aria-label":e,class:this.classes("esri-sketch","esri-widget",{"esri-disabled":"disabled"===i,"esri-sketch--vertical":"vertical"===t})},(0,y.j)("div",{class:pe},this.renderTopPanelContents()),(0,y.j)("div",{class:this.classes(pe,"esri-sketch__info-panel")},this.renderInfoPanelContents()))}renderTopPanelContents(){const e=this.classes(he,"esri-sketch__tool-section"),{availableCreateTools:t,visibleElements:i}=this;return[(0,y.j)("div",{key:"selection-button-container",class:e},this.renderSelectionTools()),t&&t.length?(0,y.j)("div",{class:e},this.renderDrawButtons()):null,i.undoRedoMenu?(0,y.j)("div",{key:"menu-button-container",class:e},this.renderMenuButtons()):null]}renderInfoPanelContents(){if(this.updateGraphics.length)return[(0,y.j)("div",{class:this.classes(he,de,"esri-sketch__info-count-section"),key:"feature-count-container"},this.renderFeatureCount()),(0,y.j)("div",{class:this.classes(he,de),key:"delete-button-container"},this.renderDeleteButton())]}renderFeatureCount(){const{layout:e,messages:t,updateGraphics:{length:i}}=this,o=(0,p.n)(1===i?t.featureCount:t.featuresCount,{count:i});return(0,y.j)("div",{class:"esri-sketch__feature-count-badge","aria-label":o},(0,y.j)("span",{class:"esri-sketch__feature-count-number"},"vertical"===e?i:o))}renderDeleteButton(){const e=this.messages.deleteFeature;return(0,y.j)("button",{"aria-label":e,bind:this,class:this.classes(ue,"esri-icon-trash"),onclick:this.delete,title:e,type:"button"})}renderSelectionTools(){return[this.renderDefaultSelectionButton(),this.renderRectangleSelectionButton(),this.renderLassoSelectionButton()]}renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const e=this.messages.selectFeature;return(0,y.j)("button",{"aria-label":e,bind:this,class:this.classes(ue,"esri-icon-cursor",{[ve]:"ready"===this.state}),onclick:this.cancel,title:e})}renderRectangleSelectionButton(){var e,t;if("2d"!==(null==(e=this.view)?void 0:e.type)||!this.visibleElements.selectionTools["rectangle-selection"])return;const i=this.messages.selectRectangle;return(0,y.j)("button",{"aria-label":i,bind:this,class:this.classes(ue,"esri-icon-cursor-marquee",{[ve]:"rectangle-selection"===(null==(t=this._activeSelectionInfo)?void 0:t.tool)}),onclick:this._activateRectangleSelectTool,title:i})}renderLassoSelectionButton(){var e,t;if("2d"!==(null==(e=this.view)?void 0:e.type)||!this.visibleElements.selectionTools["lasso-selection"])return;const i=this.messages.selectLasso;return(0,y.j)("button",{"aria-label":i,bind:this,class:this.classes(ue,"esri-icon-lasso",{[ve]:"lasso-selection"===(null==(t=this._activeSelectionInfo)?void 0:t.tool)}),onclick:this._activateLassoSelectTool,title:i})}renderDrawButtons(){const e=this.visibleElements.createTools;return this.availableCreateTools.map((t=>"point"===t&&e.point?this.renderPointButton():"polyline"===t&&e.polyline?this.renderPolylineButton():"polygon"===t&&e.polygon?this.renderPolygonButton():"rectangle"===t&&e.rectangle?this.renderRectangleButton():"circle"===t&&e.circle?this.renderCircleButton():void 0))}renderPointButton(){const e="point",t=this.messages.drawPoint,i=[ue,"esri-icon-map-pin"];return this.activeTool===e&&i.push(ve),(0,y.j)("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,title:t,type:"button"})}renderPolygonButton(){const e="polygon",t=this.messages.drawPolygon,i=[ue,"esri-icon-polygon"];return this.activeTool===e&&i.push(ve),(0,y.j)("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,title:t,type:"button"})}renderPolylineButton(){const e="polyline",t=this.messages.drawPolyline,i=[ue,"esri-icon-polyline"];return this.activeTool===e&&i.push(ve),(0,y.j)("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,title:t,type:"button"})}renderCircleButton(){const e="circle",t=this.messages.drawCircle,i=[ue,"esri-icon-radio-unchecked"];return this.activeTool===e&&i.push(ve),(0,y.j)("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,title:t,type:"button"})}renderRectangleButton(){const e="rectangle",t=this.messages.drawRectangle,i=[ue,"esri-icon-checkbox-unchecked"];return this.activeTool===e&&i.push(ve),(0,y.j)("button",{"aria-label":t,bind:this,class:this.classes(i),"data-tool-name":e,onclick:this._activateCreateTool,title:t,type:"button"})}renderMenuButtons(){return[this.renderUndoButton(),this.renderRedoButton()]}renderUndoButton(){const e=this.messages.undo,t=!this.viewModel.canUndo(),i=(0,h.dZ)()?me:ye;return(0,y.j)("button",{"aria-label":e,bind:this,class:this.classes(ue,i),disabled:t,onclick:this.undo,title:e,type:"button"})}renderRedoButton(){const e=this.messages.redo,t=!this.viewModel.canRedo(),i=(0,h.dZ)()?ye:me;return(0,y.j)("button",{"aria-label":e,bind:this,class:this.classes(ue,i),disabled:t,onclick:this.redo,title:e,type:"button"})}_cancelSelectionOperation(){var e,t;null==(e=this._activeSelectionInfo)||null==(t=e.operation)||t.cancel(),this._activeSelectionInfo=null,this._selector.candidates=null}_activateCreateTool(e){const t=e.target.getAttribute("data-tool-name");this.activeTool!==t?(this._activeSelectionInfo&&this._cancelSelectionOperation(),this.create(t)):this.cancel()}_onCreateOperation(e){if("complete"!==e.state)return;const{creationMode:t}=this,{type:i}=e;if("create"===i){const{tool:i,graphic:o}=e,a=this._activeCreateOptions;this._activeCreateOptions=null,"continuous"===t?this.create(i,a):"update"===t&&this.update([o])}}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:t}}=this,{selection:i}=e;if(this._activeSelectionInfo=null,!e.aborted&&i.length){const e=t.tool,o=i.length>1&&"reshape"===e?"transform":e;this.update(i,{...t,tool:o})}this.notifyChange("state")}_activateRectangleSelectTool(){if(this._activeSelectionInfo){const e=this._activeSelectionInfo.tool;if(this._cancelSelectionOperation(),"rectangle-selection"===e)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();const e=this._selector.draw({tool:"rectangle"});e.once("complete",(e=>this._onSelectionOperationComplete(e))),this._activeSelectionInfo={tool:"rectangle-selection",operation:e}}_activateLassoSelectTool(){if(this._activeSelectionInfo){const e=this._activeSelectionInfo.tool;if(this._cancelSelectionOperation(),"lasso-selection"===e)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();const e=this._selector.draw({tool:"polygon",createOptions:{mode:"freehand"}});e.once("complete",(e=>this._onSelectionOperationComplete(e))),this._activeSelectionInfo={tool:"lasso-selection",operation:e}}_getSelectionCandidates(){var e,t;return(null==(e=this.layer)||null==(t=e.graphics)?void 0:t.toArray())||[]}};(0,o._)([(0,r.Cb)()],_e.prototype,"_activeSelectionInfo",void 0),(0,o._)([(0,r.Cb)({dependsOn:["_activeSelectionInfo","viewModel.activeTool"]})],_e.prototype,"activeTool",null),(0,o._)([(0,r.Cb)({cast:e=>{if(!e||!e.length)return null;const t=new Set(["point","polyline","polygon","rectangle","circle"]);return e.filter((e=>t.has(e)))}}),(0,u.G)()],_e.prototype,"availableCreateTools",void 0),(0,o._)([(0,s.B)("viewModel.createGraphic"),(0,u.G)()],_e.prototype,"createGraphic",void 0),(0,o._)([(0,r.Cb)()],_e.prototype,"creationMode",void 0),(0,o._)([(0,s.B)("viewModel.defaultCreateOptions"),(0,u.G)()],_e.prototype,"defaultCreateOptions",void 0),(0,o._)([(0,s.B)("viewModel.defaultUpdateOptions"),(0,u.G)()],_e.prototype,"defaultUpdateOptions",void 0),(0,o._)([(0,r.Cb)()],_e.prototype,"iconClass",void 0),(0,o._)([(0,r.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_e.prototype,"label",void 0),(0,o._)([(0,s.B)("viewModel.layer"),(0,u.G)()],_e.prototype,"layer",void 0),(0,o._)([(0,r.Cb)({value:"horizontal"}),(0,u.G)()],_e.prototype,"layout",null),(0,o._)([(0,r.Cb)(),(0,u.G)(),(0,d.H)("esri/widgets/Sketch/t9n/Sketch")],_e.prototype,"messages",void 0),(0,o._)([(0,r.Cb)({dependsOn:["_activeSelectionInfo","viewModel.state"]}),(0,u.G)()],_e.prototype,"state",null),(0,o._)([(0,s.B)("viewModel.updateGraphics"),(0,u.G)(["updateGraphics","updateGraphics.length"])],_e.prototype,"updateGraphics",void 0),(0,o._)([(0,s.B)("viewModel.view"),(0,u.G)()],_e.prototype,"view",void 0),(0,o._)([(0,r.Cb)(),(0,u.G)("viewModel.state"),(0,v.s)(["create","update","undo","redo"])],_e.prototype,"viewModel",void 0),(0,o._)([(0,r.Cb)(),(0,u.G)()],_e.prototype,"visibleElements",void 0),(0,o._)([(0,n.p)("visibleElements")],_e.prototype,"castVisibleElements",null),(0,o._)([(0,s.B)("viewModel.complete")],_e.prototype,"complete",null),(0,o._)([(0,s.B)("viewModel.undo")],_e.prototype,"undo",null),(0,o._)([(0,s.B)("viewModel.redo")],_e.prototype,"redo",null),(0,o._)([(0,s.B)("viewModel.delete")],_e.prototype,"delete",null),_e=(0,o._)([(0,l.j)("esri.widgets.Sketch")],_e);const fe=_e}}]);
//# sourceMappingURL=6758.js.map