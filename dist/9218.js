(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[9218],{87565:(e,t,i)=>{"use strict";i.d(t,{lt:()=>c,WU:()=>a,ti:()=>s,Qc:()=>d});var n=i(88263),o=i(3766);const r={ar:[".",","],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function s(e){e||(e=(0,o.Kd)());let t=e in r;if(!t){const i=e.split("-");i.length>1&&i[0]in r&&(e=i[0],t=!0),t||(e="en")}const[i,n,s="#,##0.###"]=r[e];return{decimal:i,group:n,pattern:s}}function a(e,t){const i=s((t={...t}).locale);t.customs=i;const n=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,i){const n=(i=i||{}).customs.group,o=i.customs.decimal,r=t.split(";"),s=r[0];if(-1!==(t=r[e<0?1:0]||"-"+s).indexOf("%"))e*=100;else if(-1!==t.indexOf("‰"))e*=1e3;else{if(-1!==t.indexOf("¤"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const a=l,c=s.match(a);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===i.fractional&&(i.places=0),t.replace(a,function(e,t,i){!0===(i=i||{}).places&&(i.places=0),i.places===1/0&&(i.places=6);const n=t.split("."),o="string"==typeof i.places&&i.places.indexOf(",");let r=i.places;o?r=i.places.substring(o+1):r>=0||(r=(n[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(r))));const s=String(Math.abs(e)).split("."),a=s[1]||"";if(n[1]||i.places){o&&(i.places=i.places.substring(0,o));const e=void 0!==i.places?i.places:n[1]&&n[1].lastIndexOf("0")+1;e>a.length&&(s[1]=a.padEnd(Number(e),"0")),r<a.length&&(s[1]=a.substr(0,Number(r)))}else s[1]&&s.pop();const l=n[0].replace(",","");let c=l.indexOf("0");-1!==c&&(c=l.length-c,c>s[0].length&&(s[0]=s[0].padStart(c,"0")),-1===l.indexOf("#")&&(s[0]=s[0].substr(s[0].length-c)));let d,u,p=n[0].lastIndexOf(",");if(-1!==p){d=n[0].length-p-1;const e=n[0].substr(0,p);p=e.lastIndexOf(","),-1!==p&&(u=e.length-p-1)}const h=[];for(let e=s[0];e;){const t=e.length-d;h.push(t>0?e.substr(t):e),e=t>0?e.slice(0,t):"",u&&(d=u,u=void 0)}return s[0]=h.reverse().join(i.group||","),s.join(i.decimal||".")}(e,c[0],{decimal:o,group:n,places:i.places,round:i.round}))}(e,n,t)}const l=/[#0,]*[#0](?:\.0*#*)?/;function c(e){const t=s((e=e||{}).locale),i=e.pattern||t.pattern,o=t.group,r=t.decimal;let a=1;if(-1!==i.indexOf("%"))a/=100;else if(-1!==i.indexOf("‰"))a/=1e3;else if(-1!==i.indexOf("¤"))throw new Error("currency notation not supported");const c=i.split(";");return 1===c.length&&c.push("-"+c[0]),{regexp:p(c,(function(t){return(t="(?:"+(0,n.Qs)(t,".")+")").replace(l,(function(t){const i={signed:!1,separator:e.strict?o:[o,""],fractional:e.fractional,decimal:r,exponent:!1},n=t.split(".");let s=e.places;1===n.length&&1!==a&&(n[1]="###"),1===n.length||0===s?i.fractional=!1:(void 0===s&&(s=e.pattern?n[1].lastIndexOf("0")+1:1/0),s&&null==e.fractional&&(i.fractional=!0),!e.places&&s<n[1].length&&(s+=","+n[1].length),i.places=s);const l=n[0].split(",");return l.length>1&&(i.groupSize=l.pop().length,l.length>1&&(i.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=u(e),i=p(e.fractional,(function(t){let i="";return t&&0!==e.places&&(i="\\"+e.decimal,e.places===1/0?i="(?:"+i+"\\d+)?":i+="\\d{"+e.places+"}"),i}),!0);let n=t+i;return i&&(n="(?:(?:"+n+")|(?:"+i+"))"),n+p(e.exponent,(function(t){return t?"([eE]"+u({signed:e.eSigned})+")":""}))}(i)+")"}))}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:o,decimal:r,factor:a}}function d(e,t){const i=c(t),n=new RegExp("^"+i.regexp+"$").exec(e);if(!n)return NaN;let o=n[1];if(!n[1]){if(!n[2])return NaN;o=n[2],i.factor*=-1}return o=o.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(o)*i.factor}function u(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",p(e.signed,(function(e){return e?"[-+]":""}),!0)+p(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=(0,n.Qs)(t))?t="\\s":" "===t&&(t="\\s\\xa0");const i=e.groupSize,o=e.groupSize2;if(o){const e="(?:0|[1-9]\\d{0,"+(o-1)+"}(?:["+t+"]\\d{"+o+"})*["+t+"]\\d{"+i+"})";return i-o>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"}),!0)}const p=function(e,t,i){if(!(e instanceof Array))return t(e);const n=[];for(let i=0;i<e.length;i++)n.push(t(e[i]));return h(n.join("|"),i)},h=function(e,t){return"("+(t?"?:":"")+e+")"}},75138:(e,t,i)=>{"use strict";i.r(t),i.d(t,{create:()=>a,projectGeometry:()=>l});var n=i(34926),o=i(32656),r=i(32797),s=i(52411);async function a(e=null,t){if(n.Z.geometryServiceUrl)return new(0,(await i.e(5393).then(i.bind(i,88201))).default)({url:n.Z.geometryServiceUrl});if(!e)throw new o.Z("internal:geometry-service-url-not-configured");let s;if(s="portal"in e?e.portal||r.Z.getDefault():e,await s.load({signal:t}),s.helperServices&&s.helperServices.geometry&&s.helperServices.geometry.url)return new(0,(await i.e(5393).then(i.bind(i,88201))).default)({url:s.helperServices.geometry.url});throw new o.Z("internal:geometry-service-url-not-configured")}async function l(e,t,i=null,n){const r=await a(i,n),l=new s.Z;l.geometries=[e],l.outSpatialReference=t;const c=await r.project(l,{signal:n});if(c&&Array.isArray(c)&&1===c.length)return c[0];throw new o.Z("internal:geometry-service-projection-failed")}},37629:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>De});var n=i(56140),o=i(7584),r=(i(95830),i(36544)),s=(i(68055),i(79881)),a=i(51894),l=i(87566),c=(i(10923),i(57002),i(86035),i(10180)),d=i(40450),u=i(24258),p=i(9200),h=i(90846),v=i(19401),g=i(90806),_=i(82677);let m=class extends _.default{constructor(e){super(e),this.format=null,this.position={coordinate:null,location:null}}get displayCoordinate(){const e=this.get("format");return e&&e.getDisplayCoordinate(this.get("position.coordinate"))}};(0,n._)([(0,s.Cb)({readOnly:!0,dependsOn:["position","format.currentPattern"]})],m.prototype,"displayCoordinate",null),(0,n._)([(0,s.Cb)()],m.prototype,"format",void 0),(0,n._)([(0,s.Cb)()],m.prototype,"position",void 0),m=(0,n._)([(0,l.j)("esri.widgets.CoordinateConversion.support.Conversion")],m);const f=m;var b=i(32656),w=i(39105),y=i(61106),C=i(35470),P=i(83477),S=i(3766),x=i(14071),M=i(12973),A=(i(89771),i(50764)),j=i(15988),O=i(59691),R=i(80621),k=i(17333),E=i(4338),$=i(75138),D=i(73032),I=i(41241),T=(i(36348),i(52411));const Z={utm:{conversionMode:"utmDefault",addSpaces:!0},usng:{numOfDigits:5,rounding:!1,addSpaces:!1},mgrs:{rounding:!1}},W=new Array(3);function G(e){return e>=500?6:e<500&&e>=50?7:e<50&&e>=5?8:9}function V(e){return"number"==typeof e&&isFinite(e)}function U(e){return e&&V(e.x)&&V(e.y)}function F(e,t){if(e.spatialReference.isGeographic&&t){const[i,n]=function(e,t){const i=G(t);return[e[0].toFixed(i),e[1].toFixed(i)]}([e.x,e.y],t);return`${i}, ${n}`}return`${e.x.toFixed(3)}, ${e.y.toFixed(3)}`}function L(e){return"dd"===e||"dms"===e||"ddm"===e||"mgrs"===e||"usng"===e||"utm"===e}var N=i(87565),B=i(27780),z=i(3744);function Y(e){let t=null;if(e||(e=D.Z.WGS84),e.wkid){if(t=z.e.geogcs(e.wkid),!t)throw new b.Z("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt)throw new b.Z("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(t=z.e.fromString(z.f.PE_TYPE_GEOGCS,e.wkt),!t)throw new b.Z("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return t}function X(e){let t=-1;switch(e){case"automatic":t=z.b.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":t=z.b.PE_MGRS_STYLE_NEW|z.b.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":t=z.b.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":t=z.b.PE_MGRS_STYLE_OLD|z.b.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":t=z.b.PE_MGRS_STYLE_OLD}return t}function q(e){let t=-1;switch(e){case"latitude-band-indicators":t=z.d.PE_UTM_OPTS_NONE;break;case"north-south-indicators":t=z.d.PE_UTM_OPTS_NS}return t}let J=class extends _.default{constructor(e){super(e),this.conversionInfo=null,this.coordinateSegments=null,this.defaultPattern=null,this.name=null,this.viewModel=null}get currentPattern(){return this._get("currentPattern")||this._get("defaultPattern")}set currentPattern(e){this._set("currentPattern",e)}get hasDisplayProperties(){return!(!this.defaultPattern||!this.coordinateSegments)}get spatialReference(){const e=this.get("conversionInfo.spatialReference")||D.Z.WGS84;return"basemap"===this.name?this._viewSpatialReference:e}set spatialReference(e){void 0===e&&this._clearOverride("spatialReference"),this._override("spatialReference",e)}get _viewSpatialReference(){return this.get("viewModel.view.spatialReference")||D.Z.WGS84}get _additionalCharactersPattern(){const e=this.get("coordinateSegments");if(!e)return null;const t=e.map((e=>e.alias)),i=this.currentPattern.replace(new RegExp(`["nsew${t.join()}]`,"gi"),"").replace(/\ /g,"");return new RegExp(`[${i}]`,"g")}convert(e,t){if(!U(e))return(0,w.reject)(new b.Z("format:invalid-point","Could not convert invalid point.",{point:e}));const i=this.get("conversionInfo.convert");return i?(0,w.resolve)().then((()=>i(e))):this._project(e,this.spatialReference,t).then((e=>this._getCoordinate(e).then((t=>({location:e,coordinate:t})))))}getConversionStrategy(){const e=this._viewSpatialReference;return this.get("conversionInfo.convert")||this.get("viewModel.formatterAvailable")||"xy"===this.name&&(e.isWebMercator||e.isWGS84)||"basemap"===this.name?"client":"server"}getDisplayCoordinate(e){if(!e)return null;if(!this.coordinateSegments||!this.currentPattern)return e;let t=this.currentPattern;const i=this._getSegmentMatches(e,!1);for(let e=this.coordinateSegments.length-1;e>=0;e--){const n=this.coordinateSegments[e];t=t.replace(n.alias,i[e])}return t}parseUserInput(e){let t=this.defaultPattern.replace(this._additionalCharactersPattern,"");e=e.replace(this._additionalCharactersPattern,"");const i=this._getSegmentMatches(e,!0);for(let e=this.coordinateSegments.length-1;e>=0;e--){const n=this.coordinateSegments[e];t=t.replace(n.alias,i[e])}return t}_getSegmentMatches(e,t){const i=[];for(let n=0;n<this.coordinateSegments.length;n++){const o=this.coordinateSegments[n],r=e.match(o.searchPattern);if(!r){i.push("");continue}let s=r[0];if(e=e.replace(s,"").trim(),o.substitution){const e=t?o.substitution.input(s):o.substitution.output(s);e&&(s=e)}i.push(s)}return i}reverseConvert(e){const t=this.parseUserInput(e),i=this.get("conversionInfo.reverseConvert"),n=L(this.name);let o;if(i)o=i(t);else if("xy"===this.name||"basemap"===this.name)o=function(e,t){const i=e.indexOf(",")>=0?",":" ",[n,o,r]=e.split(i).map((e=>{const t=e.trim();return t?Number(t):null}));if(!V(n)||!V(o))return null;const s=new y.Z({x:n,y:o,spatialReference:t||D.Z.WGS84});return r&&(s.z=r,s.hasZ=!0),s}(t,this.spatialReference);else if(this.viewModel.formatterAvailable)switch(this.name){case"dd":case"ddm":case"dms":o=function(e,t){const i=[];e=e.replace(/\u2032/g,"'");const n=Y(t);return z.P.dms_to_geog(n,1,[e],i)?new y.Z(i[0][0],i[0][1],t||D.Z.WGS84):null}(t,this.spatialReference);break;case"mgrs":{const e="automatic";o=function(e,t,i){const n=[],o=X(i);if(-1===o)return console.warn(`invalid conversionMode: ${i}`),null;const r=Y(t);return z.b.mgrs_to_geog_extended(r,1,[e],o,n)?new y.Z(n[0][0],n[0][1],t||D.Z.WGS84):null}(t,this.spatialReference,e);break}case"utm":{const e="latitude-band-indicators";o=function(e,t,i){const n=[],o=q(i);if(-1===o)return console.warn(`invalid conversionMode: ${i}`),null;const r=Y(t);return z.d.utm_to_geog(r,1,[e],o,n)?new y.Z(n[0][0],n[0][1],t||D.Z.WGS84):null}(t,this.spatialReference,e);break}case"usng":o=function(e,t){const i=[];!t&&/\(.+27/.test(e)&&(t=D.Z.GCS_NAD_1927);const n=Y(t);return z.c.usng_to_geog(n,1,[e],i)?new y.Z(i[0][0],i[0][1],t||D.Z.WGS84):null}(t,this.spatialReference);break;default:o=null}else if(n)return function(e){const{geometryServicePromise:t,coordinate:i,spatialReference:n,formatName:o}=e;return t.then((e=>e.fromGeoCoordinateString({strings:[i],sr:n,conversionType:o}).then((e=>{const t=new y.Z({x:e[0][0],y:e[0][1],spatialReference:n});if(!U(t))throw e;return t})).catch((e=>{throw new b.Z("coordinate-conversion:from-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:e})}))))}({coordinate:t,spatialReference:this.spatialReference,formatName:this.name,geometryServicePromise:this.get("viewModel.geometryServicePromise")});return o?this._project(o,this._viewSpatialReference):(0,w.reject)(new b.Z("format:invalid-input","Could not parse input into point.",{userInput:e}))}_getCoordinate(e){const t=this.get("viewModel.view.scale");if(!U(e))return(0,w.reject)(new b.Z("format:invalid-point","Could not transform invalid point into coordinate.",{point:e}));if(this.get("viewModel.formatterAvailable")||"basemap"===this.name||"xy"===this.name)switch(this.name){case"dd":case"ddm":case"dms":{const i=G(t);return(0,w.resolve)(function(e,t,i=0){const n=[[e.x,e.y]],o=[],r=Y(e.spatialReference);let s=0;switch(t){case"dd":s=z.P.geog_to_dd(r,1,n,i,o);break;case"ddm":s=z.P.geog_to_ddm(r,1,n,i,o);break;case"dms":s=z.P.geog_to_dms(r,1,n,i,o);break;default:return console.warn(`invalid format: ${t}`),null}return s?o[0]:null}(e,this.name,i))}case"mgrs":return(0,w.resolve)(function(e,t,i=0,n=!1){const o=[[e.x,e.y]],r=[],s=Y(e.spatialReference);let a=X(t);return-1===a?(console.warn(`invalid conversionMode: ${t}`),null):(n&&(a|=z.b.PE_MGRS_ADD_SPACES),z.b.geog_to_mgrs_extended(s,1,o,i,!1,a,r)?r[0]:null)}(e,"automatic",5,!1));case"usng":return(0,w.resolve)(function(e,t=0,i=!1){const n=[[e.x,e.y]],o=[],r=Y(e.spatialReference);return z.c.geog_to_usng(r,1,n,t,!1,i,o)?o[0]:null}(e,5,!1));case"utm":return(0,w.resolve)(function(e,t,i=!1){const n=[[e.x,e.y]],o=[],r=Y(e.spatialReference);let s=q(t);return-1===s?(console.warn(`invalid conversionMode: ${t}`),null):(i&&(s|=z.d.PE_UTM_OPTS_ADD_SPACES),z.d.geog_to_utm(r,1,n,s,o)?o[0]:null)}(e,"latitude-band-indicators",!0));default:return(0,w.resolve)(F(e,t))}return L(this.name)?function(e){const{formatName:t,location:i,geometryServicePromise:n}=e,o=Z[t]||{},r={coordinates:[[i.x,i.y]],sr:i.spatialReference,conversionType:t,...o};return n.then((e=>e.toGeoCoordinateString(r).then((e=>{const t=e[0];if(!t)throw e;return t})).catch((e=>{throw new b.Z("coordinate-conversion:to-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:e})}))))}({formatName:this.name,location:e,geometryServicePromise:this.get("viewModel.geometryServicePromise")}):(0,w.resolve)(F(e,t))}_project(e,t,i){return(0,B.fS)(e.spatialReference,t)||!t?(0,w.resolve)(e):this.get("viewModel.formatterAvailable")&&(0,k.kR)()?(0,w.resolve)((0,k.iV)(e,t)):this.get("viewModel.formatterAvailable")?null:(0,I.Q8)(e,t)?(0,w.resolve)((0,I.iV)(e,t)):function(e,t){const{spatialReference:i,geometryServicePromise:n,location:o,scale:r}=e;if(!i||o.spatialReference.wkid===i.wkid)return(0,w.resolve)({location:o,coordinate:F(o,r)});if((o.spatialReference.isWGS84||o.spatialReference.isWebMercator)&&(i.isWGS84||i.isWebMercator))return(0,w.resolve)({location:(0,I.iV)(o,i),coordinate:F(o,r)});if(W[0]===o&&W[1]===i.wkid)return W[2];W[0]=o,W[1]=i.wkid;const s=n.then((e=>e.project(new T.Z({geometries:[o],outSpatialReference:i}),{signal:t}).then((e=>{if(!U(e[0]))throw e[0];return{location:e[0],coordinate:F(e[0],r)}})).catch((e=>{throw new b.Z("coordinate-conversion:projection-failed","Failed to project point",{projectionResult:e})}))));return W[2]=s,s}({location:e,spatialReference:t,geometryServicePromise:this.get("viewModel.geometryServicePromise"),scale:this.get("viewModel.view.scale")},i).then((e=>e.location))}};(0,n._)([(0,s.Cb)()],J.prototype,"conversionInfo",void 0),(0,n._)([(0,s.Cb)()],J.prototype,"coordinateSegments",void 0),(0,n._)([(0,s.Cb)()],J.prototype,"currentPattern",null),(0,n._)([(0,s.Cb)()],J.prototype,"defaultPattern",void 0),(0,n._)([(0,s.Cb)({readOnly:!0,dependsOn:["defaultPattern","coordinateSegments"]})],J.prototype,"hasDisplayProperties",null),(0,n._)([(0,s.Cb)()],J.prototype,"name",void 0),(0,n._)([(0,s.Cb)({dependsOn:["_viewSpatialReference","name"],type:D.Z})],J.prototype,"spatialReference",null),(0,n._)([(0,s.Cb)()],J.prototype,"viewModel",void 0),(0,n._)([(0,s.Cb)({dependsOn:["viewModel.view.spatialReference"],readOnly:!0})],J.prototype,"_viewSpatialReference",null),(0,n._)([(0,s.Cb)({readOnly:!0,dependsOn:["currentPattern"]})],J.prototype,"_additionalCharactersPattern",null),J=(0,n._)([(0,l.j)("esri.widgets.CoordinateConversion.support.Format")],J);const Q=J,H=(0,N.ti)().decimal,K={N:"north",S:"south",E:"east",W:"west"},ee=new RegExp(`-?\\d+[\\.|\\${H}]?\\d*`),te=/^[\\0]+(?=\d)/;function ie(e){const t=e.match(te),i=t?t[0]:"",n=e.indexOf(".")>=0?e.split(".")[1].length:0;return i+(0,N.WU)(Number(e),{pattern:"###0.###",places:n,round:-1})}function ne(e){return(0,N.Qc)(e)}const oe="default",re=new y.Z([0,0,500]),se=`${window.location.pathname}__coordinateConversionWidgetState`,ae=r.Z.getLogger("esri.widgets.CoordinateConversion.CoordinateConversionViewModel"),le="view",ce="view-change";let de=0,ue=[],pe=class extends((0,E._)(C.Z.EventedAccessor)){constructor(e){super(e),this._conversionPromise=null,this._handles=new O.Z,this._locationGraphic=null,this._locale=(0,S.Kd)(),this._pointerCount=0,this.conversions=new P.Z,this.formats=new P.Z,this.formatterAvailable=!1,this.geometryServicePromise=null,this.messages=null,this.requestDelay=300,this.locationSymbol=new A.Z({url:(0,M.V)("esri/images/search/search-symbol-32.png"),width:24,height:24}),this.view=null,this._instanceNumber=de,de++,this._saveWidgetState=this._saveWidgetState.bind(this),this._handleFormatChange=this._handleFormatChange.bind(this),this._handleConversionChange=this._handleConversionChange.bind(this),this._handleViewChange=this._handleViewChange.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}initialize(){(async()=>this.messages=await(0,x.ME)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion"))().then((()=>{if(!this.destroyed&&(this.formats.addMany(function(e){const t=e.abbreviatedDirections.north,i=e.abbreviatedDirections.south,n=e.abbreviatedDirections.east,o=e.abbreviatedDirections.west,r={};r[t]="N",r[i]="S",r[n]="E",r[o]="W";const s=new RegExp(`N|S|${t}|${i}`,"i"),a=new RegExp(`E|W|${n}|${o}`,"i");return[new Q({name:"basemap",coordinateSegments:[{alias:"X",description:"easting",searchPattern:ee,substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:"Y",description:"northing",searchPattern:ee,substitution:{input:e=>ne(e),output:e=>ie(e)}}],defaultPattern:"X, Y",viewModel:null}),new Q({name:"dd",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${H}]?\\d*(?=\\D*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:s,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[K[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}[\\.|\\${H}]?\\d*(?=\\D*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:a,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[K[t]]}}],defaultPattern:`Y°‎${e.abbreviatedDirections.north}, X°‎${e.abbreviatedDirections.east}`,viewModel:null}),new Q({name:"ddm",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}[\\.\\${H}]?\\d*(?=.*?[N|S|${t}||${i}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:s,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[K[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=\\D*?\\s+.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:"B",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\|${H}]?\\d*(?=.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:a,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[K[t]]}}],defaultPattern:`Y°‎ A'${e.abbreviatedDirections.north}, X°‎ B'${e.abbreviatedDirections.east}`,viewModel:null}),new Q({name:"dms",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:"B",description:"seconds latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${H}]?\\d*(?=.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:s,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[K[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=.*?\\s+.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:"C",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:"D",description:"seconds longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${H}]?\\d*(?=.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:a,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[K[t]]}}],defaultPattern:`Y°‎ A' B"${e.abbreviatedDirections.north}, X°‎ C' D"${e.abbreviatedDirections.east}`,viewModel:null}),new Q({name:"xy",coordinateSegments:[{alias:"X",description:"longitude",searchPattern:ee,substitution:{input:e=>ne(e),output:e=>ie(e)}},{alias:"Y",description:"latitude",searchPattern:ee,substitution:{input:e=>ne(e),output:e=>ie(e)}}],defaultPattern:"X°‎, Y°‎",viewModel:null}),new Q({name:"mgrs",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new Q({name:"usng",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new Q({name:"utm",coordinateSegments:[{alias:"Z",description:"zone number",searchPattern:/\d{1,2}|[abyz]/i},{alias:"B",description:"latitude band",searchPattern:/^\D/},{alias:"X",description:"easting",searchPattern:/\d{1,7}(?=\s*\d{7}$)/},{alias:"Y",description:"northing",searchPattern:/\d{1,7}/}],defaultPattern:"ZB X Y",viewModel:null})]}(this.messages)),this._loadWidgetState(),this.formats.forEach((e=>{e.viewModel=this,this._handles.add(e.watch("currentPattern",this._saveWidgetState),e.name)})),this._handles.add(this.conversions.on("change",this._handleConversionChange),"conversions"),this._handles.add(this.formats.on("change",this._handleFormatChange),"formats"),this._handles.add((0,R.init)(this,"view.map",(()=>{this.geometryServicePromise=(0,$.create)(this.get("view.map.portalItem"))})),ce),(0,k.zD)().then((()=>{this.formatterAvailable=!0})).catch((e=>{ae.error(new b.Z("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:e})),this.formatterAvailable=!1})).then((()=>this._handles.add((0,R.init)(this,"view",this._handleViewChange),ce))),0===this.conversions.length)){const e=this.formats.find((e=>"xy"===e.name))||this.formats.getItemAt(0);this.conversions.add(new f({format:e}))}}))}destroy(){this._handles.removeAll(),this._cleanUpView(this.view),this.view=null}set currentLocation(e){this._set("currentLocation",e),this._updateConversions()}get currentLocation(){return this._get("currentLocation")||null}set mode(e){switch(e){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",e);break;case"live":this._startLiveMode(),this._set("mode",e)}}get mode(){return this._get("mode")||"live"}get state(){const{messages:e,view:t}=this,i=null==t?void 0:t.ready;return e?i?"ready":t?"loading":"disabled":"disabled"}get waitingForConversions(){return null!=this._conversionPromise}get _debouncedConvert(){return(0,w.debounce)(((e,t,i)=>(0,w.eachAlways)(e.map((e=>e.convert(t,i))))),this.requestDelay)}setLocation(e){if(this.view.graphics.remove(this._locationGraphic),e){const t=e.clone();t.hasZ&&(t.z=void 0),this._locationGraphic=new j.Z({geometry:t,symbol:this.get("locationSymbol")}),this.view.graphics.add(this._locationGraphic)}}convert(e,t){return U(t)?(0,w.resolve)().then((()=>e.convert(t))):(0,w.reject)(new b.Z("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:t}))}goToLocation(e){if(this.get("view.clippingArea")||this.get("view.map.basemap.baseLayers.length")>0){const t=this.get("view.clippingArea")||this.view.map.basemap.baseLayers.getItemAt(0).fullExtent;return t?t.contains(e)?this.callGoTo({target:e}):(0,w.reject)(new b.Z("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:e})):this.callGoTo({target:e})}return this.callGoTo({target:e})}pause(){this.currentLocation=null,this._handles.remove(le),this.view&&(this.view.cursor=oe,this.view.graphics.remove(this._locationGraphic))}previewConversion(e,t=this.currentLocation||re){return this._convertMany([e],t).then((()=>e.displayCoordinate))}resume(){"capture"===this.mode?this._startCaptureMode():this._startLiveMode()}reverseConvert(e,t){return t.reverseConvert(e)}async updateConversions(e,t){return t&&t.type&&"point"===t.type?this._convertMany(e,t).then((e=>e.client.concat(e.server))):(this._clearConversions(this.conversions),(0,w.reject)(new b.Z("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:t})))}_cleanUpView(e){e&&(e.graphics.remove(this._locationGraphic),this._handles.remove(le),e.cursor=oe)}_clearConversions(e){e.forEach((e=>{e.position={location:null,coordinate:null}}))}_convertMany(e,t){const{client:i,server:n}=e.reduce(((e,t)=>(e[t.format.getConversionStrategy()].push(t),e)),{client:[],server:[]}),o=(0,w.all)(i.map((e=>e.format.convert(t).then((t=>(e.position=t,e))).catch((()=>{e.position=null}))))),r=e=>e?(this._conversionPromise=null,this.notifyChange("waitingForConversions"),e.map(((e,t)=>{const i=n[t];return e.error?(i.position=null,i):(i.position=e.value,i)}))):[];return this._conversionPromise=n.length>0?this._debouncedConvert(n.map((e=>e.format)),t).then(r,r):(0,w.resolve)([]),this.notifyChange("waitingForConversions"),(0,w.all)([o,this._conversionPromise]).then((e=>({client:e[0],server:e[1]})))}_handleConversionChange(e){e.added.forEach((e=>{const t=e.format;t.viewModel=this,this.currentLocation&&(this._set("waitingForConversions",!0),this.convert(t,this.currentLocation).then((t=>{e.position=t,this._set("waitingForConversions",!1)})))})),this._saveWidgetState()}_handleFormatChange(e){e.added.forEach((e=>{this._handles.add(e.watch("currentPattern",this._saveWidgetState),e.name),e.viewModel=this})),e.removed.forEach((e=>{e.viewModel=null,this._handles.remove(e.name)}))}_loadWidgetState(){if(0===this._instanceNumber)try{const e=JSON.parse(localStorage.getItem(se));e&&(ue=e)}catch(e){ae.error(new b.Z("coordinate-conversion:invalid-local-storage-json","Could not read from localStorge.",{error:e}))}this._setWidgetState()}_startCaptureMode(){this._handles.remove(le),this.view&&(this.view.cursor="crosshair",this.currentLocation&&this.setLocation(this.currentLocation),this._handles.add(this.view.on("click",this._onClick),le))}_startLiveMode(){this._pointerCount=0,this._handles.remove(le),this.view&&(this.view.cursor=oe,this.view.graphics.remove(this._locationGraphic),this._handles.add([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],le))}_handleViewChange(e,t){t&&t!==e&&this._cleanUpView(t),e&&("capture"===this.mode&&this._startCaptureMode(),this._startLiveMode())}_onClick(e){if(0===e.button){const t=this.view.toMap(e),i=t&&t.normalize();this.setLocation(i),this.currentLocation=i}}_onPointerDown(e){const{pointerType:t}=e;if(this._pointerCount++,("touch"===t||"pen"===t)&&1===this._pointerCount){const t=this.view.toMap(e);this.currentLocation=t&&t.normalize()}}_onPointerMove(e){const{pointerType:t}=e;if("mouse"===t||1===this._pointerCount){const t=this.view.toMap(e);this.currentLocation=t&&t.normalize()}}_onPointerUp(){this._pointerCount--}_setWidgetState(){const e=ue[this._instanceNumber];if(e)try{e.formats.forEach((t=>{const i=this.formats.find((e=>e.name===t.name));i&&e.locale===this._locale&&t.currentPattern&&(i.currentPattern=t.currentPattern),i&&t.index>=0&&this.conversions.add(new f({format:i}))}))}catch(e){ae.warn(new b.Z("coordinate-conversion:local-storage-read-error","Could not get widget state from stored JSON.",{error:e})),ue[this._instanceNumber]={formats:[],locale:this._locale}}else ue[this._instanceNumber]={formats:[],locale:this._locale}}_saveWidgetState(){const e=this._toJSON();ue[this._instanceNumber]={formats:e,locale:this._locale};try{localStorage.setItem(se,JSON.stringify(ue))}catch(e){ae.error(new b.Z("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:e}))}}async _updateConversions(){try{await this.updateConversions(this.conversions.toArray(),this.currentLocation)}catch{}}_toJSON(){return this.formats.filter((e=>{const t=e.name;return"xy"===t||"basemap"===t||L(t)})).map((e=>({name:e.name,currentPattern:e.currentPattern,defaultPattern:e.defaultPattern,index:this.conversions.findIndex((t=>t.format===e))}))).sort(((e,t)=>e.index-t.index)).toArray()}};(0,n._)([(0,s.Cb)()],pe.prototype,"conversions",void 0),(0,n._)([(0,s.Cb)({type:y.Z})],pe.prototype,"currentLocation",null),(0,n._)([(0,s.Cb)()],pe.prototype,"formats",void 0),(0,n._)([(0,s.Cb)()],pe.prototype,"messages",void 0),(0,n._)([(0,s.Cb)()],pe.prototype,"mode",null),(0,n._)([(0,s.Cb)()],pe.prototype,"requestDelay",void 0),(0,n._)([(0,s.Cb)({dependsOn:["messages","view","view.ready"],readOnly:!0})],pe.prototype,"state",null),(0,n._)([(0,s.Cb)()],pe.prototype,"locationSymbol",void 0),(0,n._)([(0,s.Cb)({readOnly:!0})],pe.prototype,"waitingForConversions",null),(0,n._)([(0,s.Cb)()],pe.prototype,"view",void 0),(0,n._)([(0,s.Cb)({readOnly:!0,dependsOn:["requestDelay"]})],pe.prototype,"_debouncedConvert",null),pe=(0,n._)([(0,l.j)("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],pe);const he=pe,ve="esri-coordinate-conversion__conversion-list",ge="esri-coordinate-conversion__row",_e="esri-coordinate-conversion__select-row",me="esri-coordinate-conversion__tools",fe="esri-coordinate-conversion__mode-toggle",be="esri-coordinate-conversion__row-button",we="esri-coordinate-conversion__back-button",ye="esri-coordinate-conversion__input-coordinate",Ce="esri-coordinate-conversion__input-group",Pe="esri-coordinate-conversion__heading",Se="esri-coordinate-conversion__pattern-input",xe="esri-coordinate-conversion__settings-group",Me="esri-coordinate-conversion__preview-coordinate",Ae="esri-input",je="esri-widget__heading",Oe="esri-widget--button",Re="esri-icon-map-pin",ke="esri-select",Ee=r.Z.getLogger("esri.widgets.CoordinateConversion");let $e=class extends g.default{constructor(e,t){super(e,t),this._popupMessage=null,this._popupId=null,this._coordinateInput=null,this._badInput=!1,this._goToEnabled=!1,this._conversionFormat=null,this._settingsFormat=null,this._previewConversion=null,this._expanded=!1,this._popupVisible=!1,this._settingsVisible=!1,this._inputVisible=!1,this.conversions=null,this.currentLocation=null,this.formats=null,this.goToOverride=null,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode=null,this.orientation="auto",this.requestDelay=null,this.view=null,this.viewModel=new he}set multipleConversions(e){!1===e&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",e)}get multipleConversions(){const e=this._get("multipleConversions");return"boolean"!=typeof e||e}reverseConvert(e,t){return this.viewModel.reverseConvert(e,t)}render(){const e=this.get("viewModel.state"),t="disabled"===e?(0,v.j)("div",{key:"esri-coordinate__no-basemap"},this.messages.noBasemap):null,i=!t&&this._inputVisible?this._renderInputForm():null,n=!t&&this._settingsVisible?this._renderSettings():null,o=t||i||n?null:this._renderConversionsView(),r=this._popupVisible?this._renderPopup():null,s={"esri-coordinate-conversion--capture-mode":"capture"===this.mode,"esri-disabled":"loading"===e,"esri-coordinate-conversion--no-basemap":"disabled"===e};return(0,v.j)("div",{class:this.classes("esri-coordinate-conversion esri-widget",s)},r,t,o,n,i)}_addConversion(e){const t=e.target,i=t.options[t.options.selectedIndex]["data-format"],n=t["data-index"],o=new f({format:i});t.options.selectedIndex=0,n>=0&&this.conversions.removeAt(n),this.conversions.add(o,n)}_findSettingsFormat(){return this._settingsFormat||this.conversions.reduceRight(((e,t)=>{const i=t.format;return i.get("hasDisplayProperties")?i:e}),null)||this.formats.find((e=>e.hasDisplayProperties))}_hidePopup(){this._popupId&&(clearTimeout(this._popupId),this._popupId=null),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender()}_onConvertComplete(){this._inputVisible=!1,this._coordinateInput.value=""}_onCopy(e){const t=e.currentTarget["data-conversion"].displayCoordinate;"clipboardData"in o.Z?o.Z.clipboardData.setData("text",t):e.clipboardData.setData("text/plain",t),this._showPopup(this.messages.copySuccessMessage),e.preventDefault()}_processUserInput(e){const t=(0,c.kK)(e),i=this.viewModel;if("Enter"!==t&&t)this._badInput&&(this._badInput=!1);else{const e=this._coordinateInput["data-format"],t=this._coordinateInput.value;this._reverseConvert(t,e).then((e=>{"capture"===this.mode?i.resume():this.mode="capture",this.currentLocation=e,i.setLocation(e),this._onConvertComplete()})).catch((e=>{Ee.error(e),this._showPopup(this.messages.invalidCoordinate),this._badInput=!0}))}}_reverseConvert(e,t){const i=this.viewModel;return t.reverseConvert(e).then((e=>(this._goToEnabled&&i.goToLocation(e).catch((e=>{Ee.warn(e),this._showPopup(this.messages.locationOffBasemap)})),e)))}_setInputFormat(e){const t=e.target,i=t[t.options.selectedIndex]["data-format"];this._conversionFormat=i}_setPreviewConversion(){const e=this._findSettingsFormat(),t=this.viewModel;if(e){const i=this.conversions.find((t=>t.format===e));this._previewConversion=new f({format:e,position:{location:this.currentLocation,coordinate:i&&i.position.coordinate}}),this._previewConversion.position.coordinate||t.previewConversion(this._previewConversion)}}_setSettingsFormat(e){const t=e.target,i=t[t.options.selectedIndex]["data-format"];this._settingsFormat=i,this._setPreviewConversion()}_showPopup(e,t=2500){this._popupMessage=e,this._popupVisible?clearTimeout(this._popupId):this._popupVisible=!0,this.scheduleRender(),this._popupId=setTimeout((()=>{this._popupId=null,this._hidePopup()}),t)}_toggleGoTo(){this._goToEnabled=!this._goToEnabled}_updateCurrentPattern(e){e.stopPropagation();const t=e.target,i=this._findSettingsFormat();i&&(i.currentPattern=t.value)}_renderConversion(e,t){const{messages:i}=this,n=`${this.id}__list-item-${t}`,o=`${e.format.name} ${i.conversionOutputSuffix}`,r=0===t,s=r||this._expanded,a=r?this._renderFirstConversion(e):this._renderTools(t,e,n),l=r&&!e.displayCoordinate?i.noLocation:e.displayCoordinate,c=(0,v.j)("div",{"aria-label":l,class:"esri-coordinate-conversion__display","data-conversion":e,role:"listitem",tabindex:"0",title:l},l),d=this._renderOptions(this.formats.filter((t=>t!==e.format)));return s?(0,v.j)("li",{"aria-label":o,class:ge,id:n,key:e,role:"group",title:o,tabindex:"0"},(0,v.j)("select",{"aria-controls":n,"aria-label":i.selectFormat,class:this.classes(ke,_e),bind:this,"data-index":t,onchange:this._addConversion,title:i.selectFormat},(0,v.j)("option",{"aria-label":e.format.name,selected:!0,title:e.format.name},e.format.name.toUpperCase()),d),c,a):null}_renderCopyButton(e){return(0,v.j)("li",{"aria-label":this.messagesCommon.copy,bind:this,class:this.classes(Oe,be),"data-conversion":e,onclick:this._copyCoordinateOutput,onkeydown:this._copyCoordinateOutput,oncopy:this._onCopy,role:"button",tabindex:"0",title:this.messagesCommon.copy},(0,v.j)("span",{"aria-hidden":"true",class:"esri-icon-duplicate"}))}_renderFirstConversion(e){const t=this.id,i={"esri-icon-down":!this._expanded,"esri-icon-up":this._expanded},{messages:n,messagesCommon:o}=this,r="live"===this.mode?n.captureMode:n.liveMode,s=this._expanded?o.collapse:o.expand,a=e.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(e):null,l=this.multipleConversions?(0,v.j)("li",{"aria-controls":`${t}__${ve}`,"aria-label":s,bind:this,class:Oe,key:"esri-coordinate-conversion__expand-button",onclick:this._toggleExpand,onkeydown:this._toggleExpand,role:"button",tabindex:"0",title:s},(0,v.j)("span",{"aria-hidden":"true",class:this.classes(i)})):(0,v.j)("li",{"aria-label":r,bind:this,class:this.classes(Oe,fe),key:"esri-coordinate-conversion__mode-toggle",onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:r},(0,v.j)("span",{"aria-hidden":"true",class:Re}));return(0,v.j)("ul",{class:me},a,l)}_renderInputForm(){const e=this._conversionFormat||this.conversions.getItemAt(0).format,t=this.formats.findIndex((t=>t.name===e.name)),i=this.id,n=`${i}__${ye}`,o=`${i}__${ye}__header`,r=this._renderOptions(this.formats,!0,t),s={"esri-coordinate-conversion__input-coordinate--rejected":this._badInput},{messages:a,messagesCommon:l}=this;return(0,v.j)("div",{"aria-labelledby":o,class:"esri-coordinate-conversion__input-form",key:"esri-coordinate-conversion__input-form",role:"search"},(0,v.j)("div",{class:Pe},(0,v.j)("div",{"aria-label":l.back,bind:this,class:this.classes(Oe,we),onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:l.back},this._renderBackIcon()),(0,v.j)("h4",{class:je,id:o},a.inputCoordTitle)),(0,v.j)("div",{class:Ce},(0,v.j)("select",{"aria-controls":n,"aria-label":a.selectFormat,bind:this,class:this.classes(ke,_e),onchange:this._setInputFormat,title:a.selectFormat},r),(0,v.j)("input",{afterCreate:d.Se,"aria-labelledby":o,"aria-required":"true",bind:this,class:this.classes(ye,Ae,s),"data-format":e,"data-node-ref":"_coordinateInput",id:n,onkeydown:this._processUserInput,placeholder:a.inputCoordTitle,role:"textbox",spellcheck:!1,title:a.inputCoordTitle,type:"text"})),(0,v.j)("div",{class:Ce},(0,v.j)("label",{"aria-label":a.goTo},(0,v.j)("input",{bind:this,checked:this._goToEnabled,onclick:this._toggleGoTo,title:a.goTo,type:"checkbox"}),a.goTo),(0,v.j)("button",{"aria-label":a.convert,bind:this,class:this.classes("esri-coordinate-conversion__button","esri-button"),onclick:this._processUserInput,title:a.convert,type:"button"},a.convert)))}_renderConversionsView(){const e=`${this.id}__${ve}`,t=this._renderPrimaryTools(),i=this._renderOptions(this.formats),n=this.conversions.map(((e,t)=>this._renderConversion(e,t))).toArray(),{messages:o}=this,r=this._expanded?(0,v.j)("div",{class:ge},(0,v.j)("select",{"aria-controls":e,"aria-label":o.addConversion,bind:this,class:this.classes(ke,"esri-coordinate-conversion__select-primary"),onchange:this._addConversion,title:o.addConversion},(0,v.j)("option",{disabled:!0,selected:!0,value:""},o.addConversion),i),t):null,s={"esri-coordinate-conversion__conversions-view--expanded":this._expanded,"esri-coordinate-conversion__conversions-view--expand-up":"expand-up"===this.orientation,"esri-coordinate-conversion__conversions-view--expand-down":"expand-down"===this.orientation};return(0,v.j)("div",{class:this.classes("esri-coordinate-conversion__conversions-view",s),key:"esri-coordinate-conversion__main-view"},(0,v.j)("ul",{"aria-expanded":this._expanded?"true":"false",class:ve,id:e},n),r)}_renderOptions(e,t,i){const n=this.conversions.getItemAt(0);return e.map(((e,o)=>{const r=!(t||!n)&&(n.format.name===e.name||this.conversions.map((e=>e.format.name)).includes(e.name));return(0,v.j)("option",{"aria-label":e.name,"data-format":e,disabled:r,key:e.name,selected:o===i,value:e.name},e.name.toUpperCase())})).toArray()}_renderPopup(){return(0,v.j)("div",{class:"esri-coordinate-conversion__popup",role:"alert"},this._popupMessage)}_renderPrimaryTools(){const{messages:e}=this,t="live"===this.mode?e.captureMode:e.liveMode;return(0,v.j)("ul",{class:me},(0,v.j)("li",{bind:this,class:Oe,onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:e.inputCoordTitle},(0,v.j)("span",{"aria-hidden":"true",class:"esri-icon-edit"})),(0,v.j)("li",{bind:this,class:this.classes(Oe,fe),onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:t},(0,v.j)("span",{"aria-hidden":"true",class:Re})),(0,v.j)("li",{bind:this,class:Oe,onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:e.settingsTitle},(0,v.j)("span",{"aria-hidden":"true",class:"esri-icon-settings2"})))}_renderSettings(){const e=this.id,t=`${e}__${Se}`,i=`${e}__${Se}__header`,n=`${e}__${Me}`,o=this.formats.filter((e=>e.hasDisplayProperties)),r=this._findSettingsFormat(),s=o.indexOf(r),a=this._renderOptions(o,!0,s),l=r.get("currentPattern"),{messages:c,messagesCommon:d}=this;return(0,v.j)("div",{"aria-labelledby":i,class:"esri-coordinate__settings",key:"esri-coordinate-conversion__settings"},(0,v.j)("div",{class:Pe},(0,v.j)("div",{bind:this,class:this.classes(Oe,we),onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:d.back},this._renderBackIcon()),(0,v.j)("h4",{class:je,id:i},c.settingsTitle)),(0,v.j)("div",{class:xe},(0,v.j)("label",{for:t},c.changeCoordinateDisplay),(0,v.j)("select",{"aria-label":c.selectFormat,class:ke,bind:this,onchange:this._setSettingsFormat,title:c.selectFormat},a),(0,v.j)("div",{class:"esri-coordinate-conversion__settings-group-horizontal"},(0,v.j)("input",{"aria-controls":n,bind:this,class:this.classes(Se,Ae),id:t,oninput:this._updateCurrentPattern,spellcheck:!1,title:c.changeCoordinateDisplay,type:"text",value:l}),(0,v.j)("div",{"aria-controls":t,bind:this,class:Oe,onclick:this._setDefaultPattern,onkeydown:this._setDefaultPattern,role:"button",tabindex:"0",title:c.defaultPattern},(0,v.j)("span",{"aria-hidden":"true",class:"esri-icon-refresh"})))),(0,v.j)("div",{class:xe},(0,v.j)("label",null,d.preview,(0,v.j)("div",{class:Me,id:n,tabindex:"0"},this._previewConversion.displayCoordinate))))}_renderBackIcon(){return(0,v.j)("span",{"aria-hidden":"true",class:(0,d.dZ)()?"esri-icon-right-arrow":"esri-icon-left-arrow"})}_renderTools(e,t,i){const n=t.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(t):null,{messages:o}=this;return(0,v.j)("ul",{class:me,role:"listitem"},n,(0,v.j)("li",{"aria-controls":i,"aria-label":o.removeConversion,bind:this,class:this.classes(Oe,be),"data-index":e,key:`${i}__${Oe}`,onclick:this._removeConversion,onkeydown:this._removeConversion,tabindex:"0",role:"button",title:o.removeConversion},(0,v.j)("span",{"aria-hidden":"true",class:"esri-icon-close"})))}_copyCoordinateOutput(e){const t=e.target;if(!("createTextRange"in document.body)){const e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),e.removeAllRanges(),e.addRange(i)}document.execCommand("copy")}_removeConversion(e){const t=e.currentTarget["data-index"];this.conversions.removeAt(t)}_setDefaultPattern(e){e.stopPropagation();const t=this._findSettingsFormat();t&&(t.currentPattern=t.get("defaultPattern"))}_toggleExpand(){this._expanded=!this._expanded}_toggleInputVisibility(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume()}_toggleMode(){this.mode="live"===this.mode?"capture":"live"}_toggleSettingsVisibility(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume()}};(0,n._)([(0,a.B)("viewModel.conversions")],$e.prototype,"conversions",void 0),(0,n._)([(0,a.B)("viewModel.currentLocation"),(0,h.G)()],$e.prototype,"currentLocation",void 0),(0,n._)([(0,a.B)("viewModel.formats"),(0,h.G)()],$e.prototype,"formats",void 0),(0,n._)([(0,a.B)("viewModel.goToOverride")],$e.prototype,"goToOverride",void 0),(0,n._)([(0,s.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],$e.prototype,"label",void 0),(0,n._)([(0,s.Cb)(),(0,h.G)(),(0,p.H)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],$e.prototype,"messages",void 0),(0,n._)([(0,s.Cb)(),(0,h.G)(),(0,p.H)("esri/t9n/common")],$e.prototype,"messagesCommon",void 0),(0,n._)([(0,a.B)("viewModel.mode"),(0,h.G)()],$e.prototype,"mode",void 0),(0,n._)([(0,s.Cb)(),(0,h.G)()],$e.prototype,"orientation",void 0),(0,n._)([(0,a.B)("viewModel.requestDelay")],$e.prototype,"requestDelay",void 0),(0,n._)([(0,s.Cb)(),(0,h.G)()],$e.prototype,"multipleConversions",null),(0,n._)([(0,a.B)("viewModel.locationSymbol")],$e.prototype,"locationSymbol",void 0),(0,n._)([(0,a.B)("viewModel.view"),(0,h.G)()],$e.prototype,"view",void 0),(0,n._)([(0,s.Cb)({type:he}),(0,h.G)(["viewModel.state","viewModel.waitingForConversions"])],$e.prototype,"viewModel",void 0),(0,n._)([(0,u.h)()],$e.prototype,"_copyCoordinateOutput",null),(0,n._)([(0,u.h)()],$e.prototype,"_removeConversion",null),(0,n._)([(0,u.h)()],$e.prototype,"_setDefaultPattern",null),(0,n._)([(0,u.h)()],$e.prototype,"_toggleExpand",null),(0,n._)([(0,u.h)()],$e.prototype,"_toggleInputVisibility",null),(0,n._)([(0,u.h)()],$e.prototype,"_toggleMode",null),(0,n._)([(0,u.h)()],$e.prototype,"_toggleSettingsVisibility",null),$e=(0,n._)([(0,l.j)("esri.widgets.CoordinateConversion")],$e);const De=$e},67565:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var n=i(56140),o=(i(95830),i(36544),i(68055),i(79881)),r=i(51894),s=i(87566),a=(i(10923),i(57002),i(86035),i(39105)),l=(i(40450),i(9200)),c=i(90846),d=i(19401),u=i(90806),p=i(82677),h=i(93533),v=i(65867);let g=class extends p.default{constructor(e){super(e),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(e){void 0!==e?this._override("areaUnit",e):this._clearOverride("areaUnit")}get linearUnit(){return this.defaultUnit}set linearUnit(e){void 0!==e?this._override("linearUnit",e):this._clearOverride("linearUnit")}get state(){const{activeViewModel:e}=this;return e?e.state:"disabled"}};(0,n._)([(0,o.Cb)({type:["area","distance","direct-line"]})],g.prototype,"activeTool",void 0),(0,n._)([(0,o.Cb)()],g.prototype,"activeViewModel",void 0),(0,n._)([(0,o.Cb)({type:h.fN,dependsOn:["defaultUnit"]})],g.prototype,"areaUnit",null),(0,n._)([(0,o.Cb)(v.Y)],g.prototype,"defaultUnit",void 0),(0,n._)([(0,o.Cb)({type:h.oD,dependsOn:["defaultUnit"]})],g.prototype,"linearUnit",null),(0,n._)([(0,o.Cb)({dependsOn:["activeViewModel","activeViewModel.state"],readOnly:!0})],g.prototype,"state",null),(0,n._)([(0,o.Cb)()],g.prototype,"view",void 0),g=(0,n._)([(0,s.j)("esri.widgets.Measurement.MeasurementViewModel")],g);const _=g;let m=class extends u.default{constructor(e,t){super(e,t),this._widgets=new Map,this.activeTool=null,this.activeWidget=null,this.areaUnit=null,this.iconClass="esri-icon-measure",this.label=void 0,this.linearUnit=null,this.messages=null,this.view=null,this.viewModel=new _}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then((e=>{this._set("activeWidget",e)})),this.own([this.watch(["view","activeTool"],(()=>{this._getActiveWidget().then((e=>{this._set("activeWidget",e)}))})),this.watch("activeWidget",((e,t)=>{this.viewModel.set("activeViewModel",e?e.viewModel:null),t&&(t.visible=!1)})),this.watch(["areaUnit","linearUnit"],(()=>this._updateWidgetUnits()))])}destroy(){this._destroyWidgets()}render(){const{activeWidget:e}=this,t=e&&!e.destroyed?e.render():null;return(0,d.j)("div",{class:"esri-measurement"},t)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:e}=this.viewModel;e&&(0,a.ignoreAbortErrors)(e.start())}async _createWidget(e){const{areaUnit:t,linearUnit:n,view:o}=this;switch(e){case"area":{const{type:e}=o;switch(e){case"2d":return new(0,(await Promise.all([i.e(3716),i.e(1518),i.e(2551),i.e(2406),i.e(5798),i.e(5666),i.e(2200),i.e(905),i.e(5743),i.e(1731),i.e(5062),i.e(2412),i.e(7551),i.e(9647),i.e(9667)]).then(i.bind(i,95550))).default)({view:o,unit:t});case"3d":return new(0,(await Promise.all([i.e(1518),i.e(2551),i.e(2406),i.e(5798),i.e(5666),i.e(2200),i.e(905),i.e(5743),i.e(1731),i.e(5062),i.e(8291),i.e(7819),i.e(7483)]).then(i.bind(i,17483))).default)({view:o,unit:t});default:return null}}case"distance":return new(0,(await Promise.all([i.e(3716),i.e(1518),i.e(2551),i.e(2406),i.e(5798),i.e(5666),i.e(2200),i.e(905),i.e(5743),i.e(1731),i.e(5062),i.e(2412),i.e(7551),i.e(9647),i.e(4965)]).then(i.bind(i,51067))).default)({view:o,unit:n});case"direct-line":return new(0,(await Promise.all([i.e(1518),i.e(2551),i.e(2406),i.e(5798),i.e(5666),i.e(2200),i.e(905),i.e(5743),i.e(1731),i.e(5062),i.e(2412),i.e(8291),i.e(5736),i.e(7819),i.e(2793)]).then(i.bind(i,32793))).default)({view:o,unit:n});default:return null}}_destroyWidgets(){this._widgets.forEach((e=>e.destroy())),this._widgets.clear()}async _getActiveWidget(){const{activeTool:e,view:t}=this;if(!t||!e)return null;let i=null;if(this._widgets.has(e))i=this._widgets.get(e),i.visible=!0;else{if(i=await this._createWidget(e),!i)return null;await i.viewModel.start(),this._widgets.set(e,i)}return i}_updateWidgetUnits(){this._widgets.forEach((e=>{const{areaUnit:t,linearUnit:i}=this;e.unit=function(e){return e&&("esri.widgets.AreaMeasurement2D"===e.declaredClass||"esri.widgets.AreaMeasurement3D"===e.declaredClass)}(e)?t:i}))}};(0,n._)([(0,r.B)("viewModel.activeTool")],m.prototype,"activeTool",void 0),(0,n._)([(0,o.Cb)({readOnly:!0}),(0,c.G)()],m.prototype,"activeWidget",void 0),(0,n._)([(0,r.B)("viewModel.areaUnit")],m.prototype,"areaUnit",void 0),(0,n._)([(0,o.Cb)()],m.prototype,"iconClass",void 0),(0,n._)([(0,o.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],m.prototype,"label",void 0),(0,n._)([(0,r.B)("viewModel.linearUnit")],m.prototype,"linearUnit",void 0),(0,n._)([(0,o.Cb)(),(0,c.G)(),(0,l.H)("esri/widgets/Measurement/t9n/Measurement")],m.prototype,"messages",void 0),(0,n._)([(0,r.B)("viewModel.view"),(0,c.G)()],m.prototype,"view",void 0),(0,n._)([(0,o.Cb)({type:_}),(0,c.G)(["viewModel.state"])],m.prototype,"viewModel",void 0),m=(0,n._)([(0,s.j)("esri.widgets.Measurement")],m);const f=m},65867:(e,t,i)=>{"use strict";i.d(t,{Y:()=>o});var n=i(93533);const o={dependsOn:["view.map.portalItem?.portal.units","view.map.portalItem?.portal.user.units","view.spatialReference"],readOnly:!0,get(){const e="metric",{view:t}=this;if(!t)return e;const i=t.get("map.portalItem.portal");if(i)switch(i.get("user.units")||i.units){case e:return e;case"english":return"imperial"}return(0,n.yT)(t.spatialReference)||e}}},99218:function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=a(e);if(t){var o=a(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return s(this,i)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),p=i(73502),h=d(i(90806)),v=d(i(92896));i(20332);var g="esri-widget esri-component measure-base",_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,i,s,a=r(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).viewModel=new v.default,t.radioItemCreated=function(e){console.log(e)},t}return t=l,(i=[{key:"render",value:function(){return p.tsx("div",{class:g},p.tsx("calcite-radio-group",{width:"full",afterCreate:this.viewModel.measureToggleCreated},p.tsx("calcite-radio-group-item",{title:"distance",value:"distance",id:"distanceItem",icon:"measure",afterCreate:this.radioItemCreated},"Distance"),p.tsx("calcite-radio-group-item",{title:"coordinates",value:"coordinates",id:"coordinateItem",icon:"pin",afterCreate:this.radioItemCreated},"Coordinates"),p.tsx("calcite-radio-group-item",{title:"area",value:"area",id:"areaItem",icon:"measure-area",afterCreate:this.radioItemCreated},"Area"),p.tsx("calcite-radio-group-item",{title:"clear",value:"clear",id:"clearItem",icon:"trash",afterCreate:this.radioItemCreated},"Clear")),p.tsx("div",{afterCreate:this.viewModel.measureCreated,id:"measureWidget"}),p.tsx("div",{id:"coordinateWidget",afterCreate:this.viewModel.coordinateCreated,hidden:!0}))}}])&&n(t.prototype,i),s&&n(t,s),l}(h.default);c([u.aliasOf("viewModel.view")],_.prototype,"view",void 0),c([u.aliasOf("viewModel.state")],_.prototype,"state",void 0),c([p.vmEvent(["activated"]),u.property({type:v.default}),p.renderable()],_.prototype,"viewModel",void 0),_=c([u.subclass("app.widgets.Measure")],_),t.default=_},92896:function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=l(e);if(t){var o=l(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return s(this,i)}}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=i(83781),h=u(i(67565)),v=u(i(37629)),g=i(80621),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,i,s,l=r(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).measureCreated=function(){g.whenDefinedOnce(a(t),"view",t.init.bind(a(t)))},t.coordinateCreated=function(){new v.default({view:t.view,container:"coordinateWidget"})},t.measureToggleCreated=function(e){null==e||e.addEventListener("calciteRadioGroupItemChange",(function(e){var i,n,o;if(!e.target.hasAttribute("checked"))if("clear"===(null===(i=e.target)||void 0===i?void 0:i.title))t.measurement.clear(),t.state="inactive",null===(o=document.querySelector("#coordinateWidget"))||void 0===o||o.setAttribute("hidden","");else if("coordinates"===(null===(n=e.target)||void 0===n?void 0:n.title)){var r;null===(r=document.querySelector("#coordinateWidget"))||void 0===r||r.toggleAttribute("hidden"),t.state="inactive"}else{var s,a;t.measurement.activeTool=null===(s=e.target)||void 0===s?void 0:s.title,null===(a=document.querySelector("#coordinateWidget"))||void 0===a||a.setAttribute("hidden",""),t.state="active"}"active"===t.state&&t.emit("activated",null)}),{passive:!0})},g.whenDefinedOnce(a(t),"view",t.init.bind(a(t))),t}return t=c,(i=[{key:"init",value:function(e){var t=this;this.measurement=new h.default({view:e,container:"measureWidget"}),this.watch("state",(function(e){"inactive"===e&&t.measurement.clear()}))}}])&&n(t.prototype,i),s&&n(t,s),c}(u(i(90806)).default);d([p.property()],_.prototype,"view",void 0),d([p.property()],_.prototype,"state",void 0),_=d([p.subclass("app.widgets.Measure.MeasureViewModel")],_),t.default=_},98090:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(94015),o=i.n(n),r=i(23645),s=i.n(r)()(o());s.push([e.id,".measure-base{padding:0}calcite-radio-group{display:grid;grid-auto-flow:column;grid-gap:0;grid-template-rows:43px 43px;grid-template-columns:50%;padding:0}calcite-radio-group-item{border:1px solid var(--calcite-ui-border-1)}calcite-radio-group-item:nth-child(1){border-bottom-color:var(--calcite-ui-background);border-right-color:var(--calcite-ui-background)}calcite-radio-group-item:nth-child(2){border-right-color:var(--calcite-ui-background)}calcite-radio-group-item:nth-child(3){border-bottom-color:var(--calcite-ui-background)}.esri-coordinate-conversion{max-width:100%}","",{version:3,sources:["webpack://./src/widgets/Measure/styles/Measure.scss"],names:[],mappings:"AAAA,cACE,SAAA,CAGF,oBACE,YAAA,CACA,qBAAA,CACA,UAAA,CACA,4BAAA,CACA,yBAAA,CACA,SAAA,CAGF,yBACA,2CAAA,CAGA,sCACE,gDAAA,CACA,+CAAA,CAGF,sCACE,+CAAA,CAGF,sCACE,gDAAA,CAGF,4BACE,cAAA",sourcesContent:[".measure-base {\n  padding: 0;\n}\n\ncalcite-radio-group {\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 0;\n  grid-template-rows: 43px 43px;\n  grid-template-columns: 50%;\n  padding: 0;\n}\n\ncalcite-radio-group-item {\nborder: 1px solid var(--calcite-ui-border-1);\n}\n\ncalcite-radio-group-item:nth-child(1) {\n  border-bottom-color: var(--calcite-ui-background);\n  border-right-color: var(--calcite-ui-background);\n}\n\ncalcite-radio-group-item:nth-child(2){\n  border-right-color: var(--calcite-ui-background);\n}\n\ncalcite-radio-group-item:nth-child(3){\n  border-bottom-color: var(--calcite-ui-background);\n}\n\n.esri-coordinate-conversion {\n  max-width: 100%;\n}"],sourceRoot:""}]);const a=s},20332:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i(93379),o=i.n(n),r=i(98090),s={insert:"head",singleton:!1};o()(r.Z,s);const a=r.Z.locals||{}}}]);
//# sourceMappingURL=9218.js.map