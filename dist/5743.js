(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[5743],{55534:(t,e,i)=>{"use strict";i(95830);var n=i(36544),r=i(33655),s=i(77625),o=i(17387),a=i(17154),c=i(67128),u=i(91531),l=i(12811),f=i(8344),h=i(69987),d=i(35280),m=i(95224),g=i(31641);const p=n.Z.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function b(t=D){return{plane:(0,m.c)(t.plane),origin:(0,s.b)(t.origin),basis1:(0,s.b)(t.basis1),basis2:(0,s.b)(t.basis2)}}function _(t,e=b()){return v(t.origin,t.basis1,t.basis2,e)}function v(t,e,i,n=b()){return(0,o.g)(n.origin,t),(0,o.g)(n.basis1,e),(0,o.g)(n.basis2,i),x(n),function(t,e){Math.abs((0,o.d)(t.basis1,t.basis2)/((0,o.l)(t.basis1)*(0,o.l)(t.basis2)))>1e-6&&p.warn(e,"Provided basis vectors are not perpendicular"),Math.abs((0,o.d)(t.basis1,U(t)))>1e-6&&p.warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,o.d)(U(t),t.origin)-t.plane[3])>1e-6&&p.warn(e,"Plane offset is not consistent with plane origin")}(n,"fromValues()"),n}function x(t){(0,m.f)(t.basis2,t.basis1,t.origin,t.plane)}function y(t,e,i){t!==i&&_(t,i);const n=(0,o.a)(f.WM.get(),U(t),e);return(0,o.b)(i.origin,i.origin,n),i.plane[3]-=e,i}function M(t,e=b()){const i=(t[2]-t[0])/2,n=(t[3]-t[1])/2;return(0,o.s)(e.origin,t[0]+i,t[1]+n,0),(0,o.s)(e.basis1,i,0,0),(0,o.s)(e.basis2,0,n,0),(0,m.a)(0,0,1,0,e.plane),e}function A(t,e,i){return!!(0,m.i)(t.plane,e,i)&&V(t,i)}function S(t,e,i){const n=C.get();z(t,e,n,C.get());let s=Number.POSITIVE_INFINITY;for(const c of W){const u=L(t,c,N.get()),l=f.WM.get();if((0,m.b)(n,u,l)){const t=(0,a.tB)(f.WM.get(),e.origin,l),n=Math.abs((0,r.ZF)((0,o.d)(e.direction,t)));n<s&&(s=n,(0,o.g)(i,l))}}return s===Number.POSITIVE_INFINITY?P(t,e,i):i}function P(t,e,i){if(A(t,e,i))return i;const n=C.get(),r=C.get();z(t,e,n,r);let s=Number.POSITIVE_INFINITY;for(const a of W){const c=L(t,a,N.get()),u=f.WM.get();if((0,m.d)(n,c,u)){const t=(0,g.d)(e,u);if(!(0,m.e)(r,u))continue;t<s&&(s=t,(0,o.g)(i,u))}}return T(t,e.origin)<s&&O(t,e.origin,i),i}function O(t,e,i){const n=(0,m.p)(t.plane,e,f.WM.get()),r=(0,d.p)(B(t,t.basis1),n,-1,1,f.WM.get()),s=(0,d.p)(B(t,t.basis2),n,-1,1,f.WM.get());return(0,o.f)(i,(0,o.b)(f.WM.get(),r,s),t.origin),i}function w(t,e,i){const{origin:n,basis1:r,basis2:s}=t,a=(0,o.f)(f.WM.get(),e,n),c=(0,h.p)(r,a),u=(0,h.p)(s,a),l=(0,h.p)(U(t),a);return(0,o.s)(i,c,u,l)}function T(t,e){const i=w(t,e,f.WM.get()),{basis1:n,basis2:r}=t,s=(0,o.l)(n),a=(0,o.l)(r),c=Math.max(Math.abs(i[0])-s,0),u=Math.max(Math.abs(i[1])-a,0),l=i[2];return c*c+u*u+l*l}function I(t,e){const i=-t.plane[3];return(0,h.p)(U(t),e)-i}function U(t){return(0,m.n)(t.plane)}function V(t,e){const i=(0,o.f)(f.WM.get(),e,t.origin),n=(0,o.o)(t.basis1),r=(0,o.o)(t.basis2),s=(0,o.d)(t.basis1,i),a=(0,o.d)(t.basis2,i);return-s-n<0&&s-n<0&&-a-r<0&&a-r<0}function B(t,e){const i=N.get();return(0,o.g)(i.origin,t.origin),(0,o.g)(i.vector,e),i}function L(t,e,i){const{basis1:n,basis2:r,origin:s}=t,a=(0,o.a)(f.WM.get(),n,e.origin[0]),c=(0,o.a)(f.WM.get(),r,e.origin[1]);(0,o.b)(i.origin,a,c),(0,o.b)(i.origin,i.origin,s);const u=(0,o.a)(f.WM.get(),n,e.direction[0]),l=(0,o.a)(f.WM.get(),r,e.direction[1]);return(0,o.a)(i.vector,(0,o.b)(u,u,l),2),i}function z(t,e,i,n){const r=U(t);(0,m.f)(r,e.direction,e.origin,i),(0,m.f)((0,m.n)(i),r,e.origin,n)}const D={plane:(0,m.c)(),origin:(0,s.f)(0,0,0),basis1:(0,s.f)(1,0,0),basis2:(0,s.f)(0,1,0)},C=new u.x(m.c),N=new u.x(d.c),R=(0,s.c)(),F=new u.x((()=>({origin:null,basis1:null,basis2:null,plane:null}))),W=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],j=(0,l.a)(),E=(0,l.a)();Object.freeze({__proto__:null,BoundedPlaneClass:class{constructor(){this.plane=(0,m.c)(),this.origin=(0,s.c)(),this.basis1=(0,s.c)(),this.basis2=(0,s.c)()}},create:b,wrap:function(t,e,i){const n=F.get();return n.origin=t,n.basis1=e,n.basis2=i,n.plane=(0,m.w)(0,0,0,0),x(n),n},copy:_,fromValues:v,updateUnboundedPlane:x,elevate:y,setExtent:function(t,e,i){return M(e,i),y(i,I(t,t.origin),i),i},fromAABoundingRect:M,intersectRay:A,intersectRayClosestSilhouette:function(t,e,i){if(A(t,e,i))return i;const n=S(t,e,f.WM.get());return(0,o.b)(i,e.origin,(0,o.a)(f.WM.get(),e.direction,(0,o.k)(e.origin,n)/(0,o.l)(e.direction))),i},closestPointOnSilhouette:S,closestPoint:P,projectPoint:O,projectPointLocal:w,distance2:T,distance:function(t,e){return Math.sqrt(T(t,e))},distanceToSilhouette:function(t,e){let i=Number.NEGATIVE_INFINITY;for(const n of W){const r=L(t,n,N.get()),s=(0,d.d)(r,e);s>i&&(i=s)}return Math.sqrt(i)},extrusionContainsPoint:function(t,e){return(0,m.e)(t.plane,e)&&V(t,e)},axisAt:function(t,e,i,n){return function(t,e,i){switch(e){case 0:(0,o.g)(i,t.basis1),(0,o.n)(i,i);break;case 1:(0,o.g)(i,t.basis2),(0,o.n)(i,i);break;case 2:(0,o.g)(i,U(t))}return i}(t,i,n)},altitudeAt:I,setAltitudeAt:function(t,e,i,n){const r=I(t,e),s=(0,o.a)(R,U(t),i-r);return(0,o.b)(n,e,s),n},equals:function(t,e){return(0,o.m)(t.basis1,e.basis1)&&(0,o.m)(t.basis2,e.basis2)&&(0,o.m)(t.origin,e.origin)},transform:function(t,e,i){return t!==i&&_(t,i),(0,c.a)(j,e),(0,c.b)(j,j),(0,o.i)(i.basis1,t.basis1,j),(0,o.i)(i.basis2,t.basis2,j),(0,o.i)((0,m.n)(i.plane),(0,m.n)(t.plane),j),(0,o.i)(i.origin,t.origin,e),(0,m.s)(i.plane,i.origin,i.plane),i},rotate:function(t,e,i,n){return t!==n&&_(t,n),(0,c.r)(E,(0,c.i)(E),e,i),(0,o.i)(n.basis1,t.basis1,E),(0,o.i)(n.basis2,t.basis2,E),x(n),n},normal:U,UP:D})},46304:(t,e,i)=>{"use strict";i.d(e,{a:()=>l,b:()=>a,c:()=>g,d:()=>h,f:()=>u,g:()=>f});var n=i(17387),r=i(91531),s=i(8344),o=i(31641);function a(t){return t?{ray:(0,o.c)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,o.c)(),c0:0,c1:Number.MAX_VALUE}}function c(t,e,i,n=a()){return(0,o.b)(t,n.ray),n.c0=e,n.c1=i,n}function u(t,e=a()){return(0,o.b)(t,e.ray),e.c0=0,e.c1=Number.MAX_VALUE,e}function l(t,e,i=a()){const r=(0,n.l)(t.vector);return(0,o.e)(t.origin,e,i.ray),i.c0=0,i.c1=r,i}function f(t,e){return d(t,t.c0,e)}function h(t,e){return d(t,t.c1,e)}function d(t,e,i){return(0,n.b)(i,t.ray.origin,(0,n.a)(i,t.ray.direction,e))}const m=new r.x((()=>({c0:0,c1:0,ray:null})));var g=Object.freeze({__proto__:null,create:a,wrap:function(t,e,i){const n=m.get();return n.ray=t,n.c0=e,n.c1=i,n},copy:function(t,e=a()){return c(t.ray,t.c0,t.c1,e)},fromValues:c,fromRay:u,fromLineSegment:function(t,e=a()){return l(t,(0,n.n)(s.WM.get(),t.vector),e)},fromLineSegmentAndDirection:l,getStart:f,getEnd:h,getAt:d})},35280:(t,e,i)=>{"use strict";i.d(e,{c:()=>c,d:()=>f,f:()=>l,l:()=>p,p:()=>h});var n=i(33655),r=i(77625),s=i(17387),o=i(91531),a=i(8344);function c(t){return t?{origin:(0,r.b)(t.origin),vector:(0,r.b)(t.vector)}:{origin:(0,r.c)(),vector:(0,r.c)()}}function u(t,e){const i=g.get();return i.origin=t,i.vector=e,i}function l(t,e,i=c()){return(0,s.g)(i.origin,t),(0,s.g)(i.vector,e),i}function f(t,e){const i=(0,s.f)(a.WM.get(),e,t.origin),r=(0,s.d)(t.vector,i),o=(0,s.d)(t.vector,t.vector),c=(0,n.uZ)(r/o,0,1),u=(0,s.f)(a.WM.get(),(0,s.a)(a.WM.get(),t.vector,c),i);return(0,s.d)(u,u)}function h(t,e,i,r,o){const{vector:c,origin:u}=t,l=(0,s.f)(a.WM.get(),e,u),f=(0,s.l)(c),h=(0,s.d)(c,l)/f;return(0,s.a)(o,c,(0,n.uZ)(h,i,r)),(0,s.b)(o,o,t.origin)}function d(t,e,i,r){const o=1e-6,c=t.origin,u=(0,s.b)(a.WM.get(),c,t.vector),l=e.origin,f=(0,s.b)(a.WM.get(),l,e.vector),h=a.WM.get(),d=a.WM.get();if(h[0]=c[0]-l[0],h[1]=c[1]-l[1],h[2]=c[2]-l[2],d[0]=f[0]-l[0],d[1]=f[1]-l[1],d[2]=f[2]-l[2],Math.abs(d[0])<o&&Math.abs(d[1])<o&&Math.abs(d[2])<o)return!1;const m=a.WM.get();if(m[0]=u[0]-c[0],m[1]=u[1]-c[1],m[2]=u[2]-c[2],Math.abs(m[0])<o&&Math.abs(m[1])<o&&Math.abs(m[2])<o)return!1;const g=h[0]*d[0]+h[1]*d[1]+h[2]*d[2],p=d[0]*m[0]+d[1]*m[1]+d[2]*m[2],b=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],_=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],v=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*_-p*p;if(Math.abs(v)<o)return!1;let x=(g*p-b*_)/v,y=(g+p*x)/_;i&&(x=(0,n.uZ)(x,0,1),y=(0,n.uZ)(y,0,1));const M=a.WM.get(),A=a.WM.get();return M[0]=c[0]+x*m[0],M[1]=c[1]+x*m[1],M[2]=c[2]+x*m[2],A[0]=l[0]+y*d[0],A[1]=l[1]+y*d[1],A[2]=l[2]+y*d[2],r.tA=x,r.tB=y,r.pA=M,r.pB=A,r.distance2=(0,s.h)(M,A),!0}const m={tA:0,tB:0,pA:(0,r.c)(),pB:(0,r.c)(),distance2:0},g=new o.x((()=>({origin:null,vector:null})));var p=Object.freeze({__proto__:null,create:c,wrap:u,copy:function(t,e=c()){return l(t.origin,t.vector,e)},fromValues:l,fromPoints:function(t,e,i=c()){return(0,s.g)(i.origin,t),(0,s.f)(i.vector,e,t),i},distance2:f,distance:function(t,e){return Math.sqrt(f(t,e))},projectPoint:function(t,e,i){return h(t,e,0,1,i)},pointAt:function(t,e,i){return(0,s.b)(i,t.origin,(0,s.a)(i,t.vector,e))},projectPointClamp:h,closestRayDistance2:function(t,e){if(d(t,u(e.origin,e.direction),!1,m)){const{tA:e,pB:i,distance2:n}=m;if(e>=0&&e<=1)return n;if(e<0)return(0,s.h)(t.origin,i);if(e>1)return(0,s.h)((0,s.b)(a.WM.get(),t.origin,t.vector),i)}return null},closestLineSegmentPoint:function(t,e,i){return!!d(t,e,!0,m)&&((0,s.g)(i,m.pA),!0)},closestLineSegmentDistance2:function(t,e){return d(t,e,!0,m)?m.distance2:null}})},30663:(t,e,i)=>{"use strict";function n(){return[1,0,0,0,1,0,0,0,1]}function r(t,e){return new Float64Array(t,e,9)}i.d(e,{a:()=>n,c:()=>r});Object.freeze({__proto__:null,create:n,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},fromValues:function(t,e,i,n,r,s,o,a,c){return[t,e,i,n,r,s,o,a,c]},createView:r})},6897:(t,e,i)=>{"use strict";function n(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}i.d(e,{c:()=>n});const r=n();Object.freeze({__proto__:null,create:n,clone:function(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},fromValues:function(t,e,i,n,r,s,o,a,c,u,l,f,h,d,m,g){const p=new Float32Array(16);return p[0]=t,p[1]=e,p[2]=i,p[3]=n,p[4]=r,p[5]=s,p[6]=o,p[7]=a,p[8]=c,p[9]=u,p[10]=l,p[11]=f,p[12]=h,p[13]=d,p[14]=m,p[15]=g,p},createView:function(t,e){return new Float32Array(t,e,16)},IDENTITY:r})},12811:(t,e,i)=>{"use strict";function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function s(t,e){return new Float64Array(t,e,16)}i.d(e,{I:()=>o,a:()=>n,b:()=>r,c:()=>s});const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze({__proto__:null,create:n,clone:r,fromValues:function(t,e,i,n,r,s,o,a,c,u,l,f,h,d,m,g){return[t,e,i,n,r,s,o,a,c,u,l,f,h,d,m,g]},createView:s,IDENTITY:o})},95224:(t,e,i)=>{"use strict";i.d(e,{a:()=>f,b:()=>S,c:()=>c,d:()=>P,e:()=>w,f:()=>M,g:()=>N,h:()=>l,i:()=>A,j:()=>d,k:()=>O,l:()=>U,m:()=>L,n:()=>D,o:()=>T,p:()=>V,q:()=>I,s:()=>y,w:()=>u});var n=i(59472),r=i(33655),s=i(77625),o=i(17387),a=i(8344);function c(t=C){return[t[0],t[1],t[2],t[3]]}function u(t,e,i,n){return f(t,e,i,n,a.o6.get())}function l(t,e=c()){return f(t[0],t[1],t[2],t[3],e)}function f(t,e,i,n,r=c()){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}function h(t,e,i=c()){(0,o.g)(i,e);const n=(0,o.d)(e,e);return Math.abs(n-1)>1e-5&&n>1e-12&&(0,o.a)(i,i,1/Math.sqrt(n)),y(i,t,i),i}function d(t,e,i,n=c()){return M((0,o.f)(a.WM.get(),t,e),(0,o.f)(a.WM.get(),i,e),t,n)}function m(t,e,i,n,r){if(t.count<3)return!1;t.getVec(i,p);let s=n,a=!1;for(;s<t.count-1&&!a;)t.getVec(s,b),s++,a=!(0,o.m)(p,b);if(!a)return!1;for(s=Math.max(s,r),a=!1;s<t.count&&!a;)t.getVec(s,_),s++,(0,o.f)(v,p,b),(0,o.n)(v,v),(0,o.f)(x,b,_),(0,o.n)(x,x),a=!(0,o.m)(p,_)&&!(0,o.m)(b,_)&&Math.abs((0,o.d)(v,x))<g;return a?(d(p,b,_,e),!0):(0!==i||1!==n||2!==r)&&m(t,e,0,1,2)}const g=.99619469809,p=(0,s.c)(),b=(0,s.c)(),_=(0,s.c)(),v=(0,s.c)(),x=(0,s.c)();function y(t,e,i){return t!==i&&l(t,i),i[3]=-(0,o.d)(i,e),i}function M(t,e,i,n=c()){return h(i,(0,o.c)(a.WM.get(),e,t),n)}function A(t,e,i){return!!(0,n.pC)(e)&&z(t,e.origin,e.direction,!0,!1,i)}function S(t,e,i){return z(t,e.origin,e.vector,!1,!1,i)}function P(t,e,i){return z(t,e.origin,e.vector,!1,!0,i)}function O(t,e){const{center:i,radius:n}=e;return L(t,i)-n>=0}function w(t,e){return L(t,e)>=0}function T(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5];return t[0]*(t[0]>0?i:s)+t[1]*(t[1]>0?n:o)+t[2]*(t[2]>0?r:a)+t[3]>=0}function I(t,e){const i=(0,o.d)(t,e.ray.direction),n=-L(t,e.ray.origin);if(n<0&&i>=0)return!1;if(i>-1e-6&&i<1e-6)return n>0;if((n<0||i<0)&&!(n<0&&i<0))return!0;const r=n/i;return i>0?r<e.c1&&(e.c1=r):r>e.c0&&(e.c0=r),e.c0<=e.c1}function U(t,e){const i=(0,o.d)(t,e.ray.direction),n=-L(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return n>0;const r=n/i;return i>0?r<e.c1&&(e.c1=r):r>e.c0&&(e.c0=r),e.c0<=e.c1}function V(t,e,i){const n=(0,o.a)(a.WM.get(),t,-t[3]),r=B(t,(0,o.f)(a.WM.get(),e,n),a.WM.get());return(0,o.b)(i,r,n),i}function B(t,e,i){const n=(0,o.a)(a.WM.get(),t,(0,o.d)(t,e));return(0,o.f)(i,e,n),i}function L(t,e){return(0,o.d)(t,e)+t[3]}function z(t,e,i,n,s,a){const c=(0,o.d)(t,i);if(0===c)return!1;let u=-((0,o.d)(t,e)+t[3])/c;return s&&(u=n?Math.max(0,u):(0,r.uZ)(u,0,1)),!(u<0||!n&&u>1||((0,o.b)(a,e,(0,o.a)(a,i,u)),0))}function D(t){return t}const C=[0,0,1,0];var N=Object.freeze({__proto__:null,create:c,wrap:u,copy:l,fromValues:f,fromNormalAndOffset:function(t,e,i=c()){return(0,o.g)(i,t),i[3]=e,i},fromPositionAndNormal:h,fromPoints:d,fromManyPoints:function(t,e){return m(t,e,0,1,2)},fromManyPointsSampleAt:m,setOffsetFromPoint:y,negate:function(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},fromVectorsAndPoint:M,intersectRay:A,intersectLineSegment:S,intersectLineSegmentClamp:P,isSphereFullyInside:O,isSphereFullyOutside:function(t,e){const{center:i,radius:n}=e;return L(t,i)+n<0},isPointInside:w,isPointOutside:function(t,e){return L(t,e)<0},isAABBFullyInside:T,clip:I,clipInfinite:U,projectPoint:V,projectVector:B,distance:function(t,e){return Math.abs(L(t,e))},signedDistance:L,normal:D,UP:C})},2847:(t,e,i)=>{"use strict";i.d(e,{c:()=>m,g:()=>l,i:()=>d,r:()=>U});var n=i(77625),r=i(60418),s=i(17387),o=i(30663),a=i(32232),c=i(34353);function u(t,e,i){i*=.5;const n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t}function l(t,e){const i=2*Math.acos(e[3]),n=Math.sin(i/2);return n>r.E?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),i}function f(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=i[0],c=i[1],u=i[2],l=i[3];return t[0]=n*l+o*a+r*u-s*c,t[1]=r*l+o*c+s*a-n*u,t[2]=s*l+o*u+n*c-r*a,t[3]=o*l-n*a-r*c-s*u,t}function h(t,e,i,n){const s=e[0],o=e[1],a=e[2],c=e[3];let u,l,f,h,d,m=i[0],g=i[1],p=i[2],b=i[3];return l=s*m+o*g+a*p+c*b,l<0&&(l=-l,m=-m,g=-g,p=-p,b=-b),1-l>r.E?(u=Math.acos(l),f=Math.sin(u),h=Math.sin((1-n)*u)/f,d=Math.sin(n*u)/f):(h=1-n,d=n),t[0]=h*s+d*m,t[1]=h*o+d*g,t[2]=h*a+d*p,t[3]=h*c+d*b,t}function d(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=i*i+n*n+r*r+s*s,a=o?1/o:0;return t[0]=-i*a,t[1]=-n*a,t[2]=-r*a,t[3]=s*a,t}function m(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function g(t,e){const i=e[0]+e[4]+e[8];let n;if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);const r=(i+1)%3,s=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*r+r]-e[3*s+s]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*r+s]-e[3*s+r])*n,t[r]=(e[3*r+i]+e[3*i+r])*n,t[s]=(e[3*s+i]+e[3*i+s])*n}return t}const p=c.c,b=c.s,_=c.a,v=f,x=c.b,y=c.d,M=c.l,A=c.e,S=A,P=c.f,O=P,w=c.n,T=c.g,I=c.h;function U(t,e,i){const n=(0,s.d)(e,i);return n<-.999999?((0,s.c)(V,B,e),(0,s.j)(V)<1e-6&&(0,s.c)(V,L,e),(0,s.n)(V,V),u(t,V,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,s.c)(V,e,i),t[0]=V[0],t[1]=V[1],t[2]=V[2],t[3]=1+n,w(t,t))}const V=(0,n.c)(),B=(0,n.f)(1,0,0),L=(0,n.f)(0,1,0);const z=(0,a.a)(),D=(0,a.a)();const C=(0,o.a)();Object.freeze({__proto__:null,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:u,getAxisAngle:l,multiply:f,rotateX:function(t,e,i){i*=.5;const n=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(i),c=Math.cos(i);return t[0]=n*c+o*a,t[1]=r*c+s*a,t[2]=s*c-r*a,t[3]=o*c-n*a,t},rotateY:function(t,e,i){i*=.5;const n=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(i),c=Math.cos(i);return t[0]=n*c-s*a,t[1]=r*c+o*a,t[2]=s*c+n*a,t[3]=o*c-r*a,t},rotateZ:function(t,e,i){i*=.5;const n=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(i),c=Math.cos(i);return t[0]=n*c+r*a,t[1]=r*c-n*a,t[2]=s*c+o*a,t[3]=o*c-s*a,t},calculateW:function(t,e){const i=e[0],n=e[1],r=e[2];return t[0]=i,t[1]=n,t[2]=r,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-r*r)),t},slerp:h,random:function(t){const e=(0,r.R)(),i=(0,r.R)(),n=(0,r.R)(),s=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=s*Math.sin(2*Math.PI*i),t[1]=s*Math.cos(2*Math.PI*i),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t},invert:d,conjugate:m,fromMat3:g,fromEuler:function(t,e,i,n){const r=.5*Math.PI/180;e*=r,i*=r,n*=r;const s=Math.sin(e),o=Math.cos(e),a=Math.sin(i),c=Math.cos(i),u=Math.sin(n),l=Math.cos(n);return t[0]=s*c*l-o*a*u,t[1]=o*a*l+s*c*u,t[2]=o*c*u-s*a*l,t[3]=o*c*l+s*a*u,t},str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},copy:p,set:b,add:_,mul:v,scale:x,dot:y,lerp:M,length:A,len:S,squaredLength:P,sqrLen:O,normalize:w,exactEquals:T,equals:I,rotationTo:U,sqlerp:function(t,e,i,n,r,s){return h(z,e,r,s),h(D,i,n,s),h(t,z,D,2*s*(1-s)),t},setAxes:function(t,e,i,n){const r=C;return r[0]=i[0],r[3]=i[1],r[6]=i[2],r[1]=n[0],r[4]=n[1],r[7]=n[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],w(t,g(t,r))}})},32232:(t,e,i)=>{"use strict";function n(){return[0,0,0,1]}function r(t,e){return new Float64Array(t,e,4)}i.d(e,{a:()=>n,c:()=>r});Object.freeze({__proto__:null,create:n,clone:function(t){return[t[0],t[1],t[2],t[3]]},fromValues:function(t,e,i,n){return[t,e,i,n]},createView:r,IDENTITY:[0,0,0,1]})},31641:(t,e,i)=>{"use strict";i.d(e,{b:()=>f,c:()=>l,d:()=>p,e:()=>h,g:()=>m,h:()=>b,r:()=>x});var n=i(59472),r=i(96071),s=i(77625),o=i(17387),a=i(91531),c=i(14286),u=i(8344);function l(t){return t?{origin:(0,s.b)(t.origin),direction:(0,s.b)(t.direction)}:{origin:(0,s.c)(),direction:(0,s.c)()}}function f(t,e=l()){return h(t.origin,t.direction,e)}function h(t,e,i=l()){return(0,o.g)(i.origin,t),(0,o.g)(i.direction,e),i}function d(t,e,i=l()){const s=(0,r.Wv)((0,c.c)(u.WM.get(),e));if(s[2]=0,!t.unprojectFromRenderScreen(s,i.origin))return null;const a=(0,r.Wv)((0,c.c)(u.WM.get(),e));a[2]=1;const f=t.unprojectFromRenderScreen(a,u.WM.get());return(0,n.Wi)(f)?null:((0,o.f)(i.direction,f,i.origin),i)}function m(t,e,i=l()){return g(t,t.screenToRender(e,(0,r.Wv)(u.WM.get())),i)}function g(t,e,i=l()){(0,o.g)(i.origin,t.eye);const r=(0,o.s)(u.WM.get(),e[0],e[1],1),s=t.unprojectFromRenderScreen(r,u.WM.get());return(0,n.Wi)(s)?null:((0,o.f)(i.direction,s,i.origin),i)}function p(t,e){const i=(0,o.c)(u.WM.get(),(0,o.n)(u.WM.get(),t.direction),(0,o.f)(u.WM.get(),e,t.origin));return(0,o.d)(i,i)}function b(t,e,i){const n=(0,o.d)(t.direction,(0,o.f)(i,e,t.origin));return(0,o.b)(i,t.origin,(0,o.a)(i,t.direction,n)),i}function _(){return{origin:null,direction:null}}const v=new a.x(_);var x=Object.freeze({__proto__:null,create:l,wrap:function(t,e){const i=v.get();return i.origin=t,i.direction=e,i},copy:f,fromPoints:function(t,e,i=l()){return(0,o.g)(i.origin,t),(0,o.f)(i.direction,e,t),i},fromValues:h,fromScreen:function(t,e,i=l()){return d(t,t.screenToRender(e,(0,r.Wv)(u.WM.get())),i)},fromRender:d,fromScreenAtEye:m,fromRenderAtEye:g,distance2:p,distance:function(t,e){return Math.sqrt(p(t,e))},closestPoint:b,createWrapper:_})},13633:(t,e,i)=>{"use strict";i.d(e,{c:()=>g,s:()=>I});i(95830);var n=i(59472),r=i(36544),s=i(33655),o=i(77625),a=i(17387),c=i(17154),u=i(67128),l=i(91531),f=i(8344),h=i(69987),d=i(31641);const m=r.Z.getLogger("esri.views.3d.support.geometryUtils.sphere");function g(t){return t?{radius:t.radius,center:(0,o.b)(t.center)}:{radius:1,center:(0,o.c)()}}function p(t,e=g()){return b(t.radius,t.center,e)}function b(t,e,i=g()){return(0,a.g)(i.center,e),i.radius=t,i}function _(t,e,i){if((0,n.Wi)(e))return!1;const r=(0,a.f)(f.WM.get(),e.origin,t.center),s=(0,a.d)(e.direction,e.direction),o=2*(0,a.d)(e.direction,r),c=o*o-4*s*((0,a.d)(r,r)-t.radius*t.radius);if(c<0)return!1;const u=Math.sqrt(c);let l=(-o-u)/(2*s);const h=(-o+u)/(2*s);return(l<0||h<l&&h>0)&&(l=h),!(l<0||(i&&(0,a.b)(i,e.origin,(0,a.a)(f.WM.get(),e.direction,l)),0))}function v(t,e,i){const n=f.WM.get(),r=f.MP.get();(0,a.c)(n,e.origin,e.direction),(0,a.c)(i,n,e.origin),(0,a.a)(i,i,1/(0,a.l)(i)*t.radius);const s=y(t,e.origin),o=(0,h.a)(e.origin,i);return(0,u.i)(r),(0,u.r)(r,r,o+s,n),(0,a.i)(i,i,r),i}function x(t,e,i){const n=(0,a.f)(f.WM.get(),e,t.center),r=(0,a.a)(f.WM.get(),n,t.radius/(0,a.l)(n));return(0,a.b)(i,r,t.center)}function y(t,e){const i=(0,a.f)(f.WM.get(),e,t.center),n=(0,a.l)(i),r=t.radius+Math.abs(t.radius-n);return(0,s.ZF)(t.radius/r)}const M=(0,o.c)();function A(t,e,i,n){const r=(0,a.f)(M,e,t.center);switch(i){case 0:{const t=(0,c.jE)(r,M)[2];return(0,a.s)(n,-Math.sin(t),Math.cos(t),0)}case 1:{const t=(0,c.jE)(r,M),e=t[1],i=t[2],s=Math.sin(e);return(0,a.s)(n,-s*Math.cos(i),-s*Math.sin(i),Math.cos(e))}case 2:return(0,a.n)(n,r);default:return}}function S(t,e){const i=(0,a.f)(T,e,t.center);return(0,a.l)(i)-t.radius}const P=new l.x((()=>({center:null,radius:0}))),O=(0,d.c)(),w=(0,o.c)(),T=(0,o.c)();Object.freeze(w);var I=Object.freeze({__proto__:null,create:g,wrap:function(t,e){const i=P.get();return i.radius=t,i.center=e||w,i},copy:p,fromValues:b,elevate:function(t,e,i){return t!==i&&(0,a.g)(i.center,t.center),i.radius=t.radius+e,i},setExtent:function(t,e,i){return m.error("sphere.setExtent is not yet supported"),t===i?i:p(t,i)},intersectRay:_,intersectScreen:function(t,e,i,n){return _(t,(0,d.g)(e,i,O),n)},intersectsRay:function(t,e){return _(t,e,null)},intersectRayClosestSilhouette:function(t,e,i){if(_(t,e,i))return i;const n=v(t,e,f.WM.get());return(0,a.b)(i,e.origin,(0,a.a)(f.WM.get(),e.direction,(0,a.k)(e.origin,n)/(0,a.l)(e.direction))),i},closestPointOnSilhouette:v,closestPoint:function(t,e,i){return _(t,e,i)?i:((0,d.h)(e,t.center,i),x(t,i,i))},projectPoint:x,distanceToSilhouette:function(t,e){const i=(0,a.f)(f.WM.get(),e,t.center),n=(0,a.o)(i),r=t.radius*t.radius;return Math.sqrt(Math.abs(n-r))},angleToSilhouette:y,axisAt:A,altitudeAt:S,setAltitudeAt:function(t,e,i,n){const r=S(t,e),s=A(t,e,2,T),o=(0,a.a)(T,s,i-r);return(0,a.b)(n,e,o),n}})},56938:(t,e,i)=>{"use strict";i.d(e,{a:()=>h});var n=i(77625),r=i(17387),s=i(91531),o=i(14286),a=i(8344),c=i(35280);function u(t){return t?{p0:(0,n.b)(t.p0),p1:(0,n.b)(t.p1),p2:(0,n.b)(t.p2)}:{p0:(0,n.c)(),p1:(0,n.c)(),p2:(0,n.c)()}}function l(t,e,i,n=u()){return(0,r.g)(n.p0,t),(0,r.g)(n.p1,e),(0,r.g)(n.p2,i),n}function f(t,e,i){const n=(0,o.i)(t,e),r=(0,o.i)(e,i),s=(0,o.i)(i,t),a=(n+r+s)/2,c=a*(a-n)*(a-r)*(a-s);return c<=0?0:Math.sqrt(c)}function h(t,e,i){return(0,r.f)(g,e,t),(0,r.f)(p,i,t),(0,r.l)((0,r.c)(g,g,p))/2}const d=new s.x(c.c),m=new s.x((()=>({p0:null,p1:null,p2:null}))),g=(0,n.c)(),p=(0,n.c)();Object.freeze({__proto__:null,create:u,wrap:function(t,e,i){const n=m.get();return n.p0=t,n.p1=e,n.p2=i,n},copy:function(t,e=u()){return l(t.p0,t.p1,t.p2,e)},fromValues:l,distance2:function(t,e){const i=t.p0,n=t.p1,s=t.p2,o=(0,r.f)(a.WM.get(),n,i),u=(0,r.f)(a.WM.get(),s,n),l=(0,r.f)(a.WM.get(),i,s),f=(0,r.f)(a.WM.get(),e,i),h=(0,r.f)(a.WM.get(),e,n),m=(0,r.f)(a.WM.get(),e,s),g=(0,r.c)(o,o,l),p=(0,r.d)((0,r.c)(a.WM.get(),o,g),f),b=(0,r.d)((0,r.c)(a.WM.get(),u,g),h),_=(0,r.d)((0,r.c)(a.WM.get(),l,g),m);if(p>0&&b>0&&_>0){const t=(0,r.d)(g,f);return t*t/(0,r.d)(g,g)}const v=(0,c.d)((0,c.f)(i,o,d.get()),e),x=(0,c.d)((0,c.f)(n,u,d.get()),e),y=(0,c.d)((0,c.f)(s,l,d.get()),e);return Math.min(v,x,y)},intersectRay:function(t,e,i){const n=1e-5,{direction:s,origin:o}=e,{p0:a,p1:c,p2:u}=t,l=c[0]-a[0],f=c[1]-a[1],h=c[2]-a[2],d=u[0]-a[0],m=u[1]-a[1],g=u[2]-a[2],p=s[1]*g-m*s[2],b=s[2]*d-g*s[0],_=s[0]*m-d*s[1],v=l*p+f*b+h*_;if(v>-n&&v<n)return!1;const x=1/v,y=o[0]-a[0],M=o[1]-a[1],A=o[2]-a[2],S=x*(y*p+M*b+A*_);if(S<0||S>1)return!1;const P=M*h-f*A,O=A*l-h*y,w=y*f-l*M,T=x*(s[0]*P+s[1]*O+s[2]*w);return!(T<0||S+T>1)&&(i&&((0,r.a)(i,s,x*(d*P+m*O+g*w)),(0,r.b)(i,o,i)),!0)},areaPoints2d:f,area2d:function(t){return f(t.p0,t.p1,t.p2)},areaPoints3d:h})},69236:(t,e,i)=>{"use strict";function n(){return new Float32Array(3)}function r(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(t,e,i){const n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=i,n}function o(){return n()}function a(){return s(1,1,1)}function c(){return s(1,0,0)}function u(){return s(0,1,0)}function l(){return s(0,0,1)}i.d(e,{a:()=>r,c:()=>n,f:()=>s});const f=o(),h=a(),d=c(),m=u(),g=l();Object.freeze({__proto__:null,create:n,clone:r,fromValues:s,createView:function(t,e){return new Float32Array(t,e,3)},zeros:o,ones:a,unitX:c,unitY:u,unitZ:l,ZEROS:f,ONES:h,UNIT_X:d,UNIT_Y:m,UNIT_Z:g})},38256:(t,e,i)=>{"use strict";function n(){return[0,0,0,0]}function r(t,e,i,n){return[t,e,i,n]}function s(t){const e=[0,0,0,0],i=Math.min(4,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function o(t,e){return new Float64Array(t,e,4)}function a(){return r(1,1,1,1)}function c(){return r(1,0,0,0)}function u(){return r(0,1,0,0)}function l(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}i.d(e,{O:()=>d,Z:()=>h,a:()=>n,b:()=>r,c:()=>o,f:()=>s});const h=[0,0,0,0],d=a(),m=c(),g=u(),p=l(),b=f();Object.freeze({__proto__:null,create:n,clone:function(t){return[t[0],t[1],t[2],t[3]]},fromValues:r,fromArray:s,createView:o,zeros:function(){return[0,0,0,0]},ones:a,unitX:c,unitY:u,unitZ:l,unitW:f,ZEROS:h,ONES:d,UNIT_X:m,UNIT_Y:g,UNIT_Z:p,UNIT_W:b})},69987:(t,e,i)=>{"use strict";i.d(e,{a:()=>a,p:()=>o,v:()=>l});var n=i(33655),r=i(77625),s=i(17387);function o(t,e){return(0,s.d)(t,e)/(0,s.l)(t)}function a(t,e){const i=(0,s.d)(t,e)/((0,s.l)(t)*(0,s.l)(e));return-(0,n.ZF)(i)}const c=(0,r.c)(),u=(0,r.c)();var l=Object.freeze({__proto__:null,projectPoint:function(t,e,i){const n=(0,s.d)(t,e)/(0,s.d)(t,t);return(0,s.a)(i,t,n)},projectPointSignedLength:o,angle:a,angleAroundAxis:function(t,e,i){(0,s.n)(c,t),(0,s.n)(u,e);const r=(0,s.d)(c,u),o=(0,n.ZF)(r),a=(0,s.c)(c,c,u);return(0,s.d)(a,i)<0?2*Math.PI-o:o}})},91531:(t,e,i)=>{"use strict";i.d(e,{x:()=>s});var n=i(59472),r=i(33469);class s{constructor(t){this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=r.Z.before((()=>this.reset())),this.grow()}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=(0,n.Bd)(this.tickHandle)),this.items=(0,n.Bd)(this.items)}get(){return 0===this.itemsPtr&&(0,r.Z)((()=>{})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*o);this.items.length=Math.min(t,this.items.length),this.itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this.items.length,o));t++)this.items.push(this.allocator())}}const o=1024},88:(t,e,i)=>{"use strict";i.d(e,{bW:()=>I,oy:()=>V,KD:()=>w,yC:()=>O,kx:()=>T,Dv:()=>U,xr:()=>B});var n=i(69987),r=i(17387),s=i(8344);function o(t=c){return[t[0],t[1],t[2],t[3]]}function a(t,e,i,n,r=o()){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}const c=[0,0,1,0];Object.freeze({__proto__:null,create:o,wrap:function(t,e,i,n){return a(t,e,i,n,s.o6.get())},wrapAxisAngle:function(t,e){return a(t[0],t[1],t[2],e,s.o6.get())},copy:function(t,e=o()){return a(t[0],t[1],t[2],t[3],e)},fromValues:a,fromAxisAndAngle:function(t,e,i=o()){return(0,r.g)(i,t),i[3]=e,i},fromPoints:function(t,e,i=o()){return(0,r.c)(i,t,e),(0,r.n)(i,i),i[3]=(0,n.a)(t,e),i},axis:function(t){return t},UP:c});var u=i(35280),l=i(95224),f=i(31641),h=(i(55534),i(46304)),d=i(77625),m=i(67128),g=i(91531),p=i(38256),b=i(34353);function _(t){if(t){const{planes:e,points:i}=t;return{planes:[(0,l.c)(e[0]),(0,l.c)(e[1]),(0,l.c)(e[2]),(0,l.c)(e[3]),(0,l.c)(e[4]),(0,l.c)(e[5])],points:[(0,d.b)(i[0]),(0,d.b)(i[1]),(0,d.b)(i[2]),(0,d.b)(i[3]),(0,d.b)(i[4]),(0,d.b)(i[5]),(0,d.b)(i[6]),(0,d.b)(i[7])]}}return{planes:[(0,l.c)(),(0,l.c)(),(0,l.c)(),(0,l.c)(),(0,l.c)(),(0,l.c)()],points:[(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)()]}}function v(t,e,i=_()){for(let e=0;e<6;e++)(0,l.h)(t[e],i.planes[e]);for(let t=0;t<8;t++)(0,r.g)(i.points[t],e[t]);return i}function x(t){const{planes:e,points:i}=t;(0,l.j)(i[4],i[0],i[3],e[0]),(0,l.j)(i[1],i[5],i[6],e[1]),(0,l.j)(i[4],i[5],i[1],e[2]),(0,l.j)(i[3],i[2],i[6],e[3]),(0,l.j)(i[0],i[1],i[2],e[4]),(0,l.j)(i[5],i[4],i[7],e[5])}function y(t,e){for(let i=0;i<6;i++)if(!(0,l.q)(t[i],e))return!1;return!0}const M=[(0,p.b)(-1,-1,-1,1),(0,p.b)(1,-1,-1,1),(0,p.b)(1,1,-1,1),(0,p.b)(-1,1,-1,1),(0,p.b)(-1,-1,1,1),(0,p.b)(1,-1,1,1),(0,p.b)(1,1,1,1),(0,p.b)(-1,1,1,1)],A=new g.x(h.b);var S=Object.freeze({__proto__:null,create:_,copy:function(t,e=_()){return v(t.planes,t.points,e)},fromValues:v,fromMatrix:function(t,e,i=_()){const{points:n}=i,o=(0,m.m)(s.MP.get(),e,t);(0,m.a)(o,o);for(let t=0;t<8;++t){const e=(0,b.t)(s.o6.get(),M[t],o);(0,r.s)(n[t],e[0]/e[3],e[1]/e[3],e[2]/e[3])}return x(i),i},recomputePlanes:x,intersectsSphere:function(t,e){for(let i=0;i<6;i++)if((0,l.k)(t[i],e))return!1;return!0},intersectsRay:function(t,e){return y(t,(0,h.f)(e,A.get()))},intersectClipRay:function(t,e){for(let i=0;i<6;i++){const n=t[i];if(!(0,l.l)(n,e))return!1}return!0},intersectsLineSegment:function(t,e,i){return y(t,(0,h.a)(e,i,A.get()))},intersectsPoint:function(t,e){for(let i=0;i<6;i++)if((0,l.m)(t[i],e)>0)return!1;return!0},intersectsAABB:function(t,e){for(let i=0;i<6;i++)if((0,l.o)(t[i],e))return!1;return!0},planePointIndices:{bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]}}),P=i(13633);i(56938);const O=l.g,w=u.l,T=f.r,I=h.c,U=P.s,V=S,B=n.v},8344:(t,e,i)=>{"use strict";i.d(e,{MP:()=>p,qW:()=>d,WM:()=>m,o6:()=>g});var n=i(59472),r=i(33469),s=i(77625),o=i(30663),a=i(12811),c=i(32232),u=i(55735),l=i(38256);class f{constructor(t,e,i){this.itemByteSize=t,this.itemCreate=e,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(i/this.itemByteSize),this.tickHandle=r.Z.before((()=>this.reset()))}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=(0,n.Bd)(this.tickHandle)),this.itemsPtr=0,this.items=(0,n.Bd)(this.items),this.buffers=(0,n.Bd)(this.buffers)}get(){0===this.itemsPtr&&(0,r.Z)((()=>{}));const t=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=t;){const t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let e=0;e<this.itemsPerBuffer;++e)this.items.push(this.itemCreate(t,e*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}reset(){const t=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>t;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}static createVec2f64(t=h){return new f(16,u.c,t)}static createVec3f64(t=h){return new f(24,s.a,t)}static createVec4f64(t=h){return new f(32,l.c,t)}static createMat3f64(t=h){return new f(72,o.c,t)}static createMat4f64(t=h){return new f(128,a.c,t)}static createQuatf64(t=h){return new f(32,c.c,t)}get test(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}const h=4096,d=f.createVec2f64(),m=f.createVec3f64(),g=f.createVec4f64(),p=(f.createMat3f64(),f.createMat4f64());f.createQuatf64()},61514:(t,e,i)=>{"use strict";i.d(e,{p:()=>c});var n,r=i(59472),s=i(77625),o=i(17387),a=i(85461);function c(t,e){if(e.slicePlaneEnabled){t.extensions.add("GL_OES_standard_derivatives"),e.sliceEnabledForVertexPrograms&&(t.vertex.uniforms.add("slicePlaneOrigin","vec3"),t.vertex.uniforms.add("slicePlaneBasis1","vec3"),t.vertex.uniforms.add("slicePlaneBasis2","vec3")),t.fragment.uniforms.add("slicePlaneOrigin","vec3"),t.fragment.uniforms.add("slicePlaneBasis1","vec3"),t.fragment.uniforms.add("slicePlaneBasis2","vec3");const i=a.H`
      struct SliceFactors {
        float front;
        float side0;
        float side1;
        float side2;
        float side3;
      };

      SliceFactors calculateSliceFactors(vec3 pos) {
        vec3 rel = pos - slicePlaneOrigin;

        vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
        float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);

        float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
        float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);

        float basis1Dot = dot(slicePlaneBasis1, rel);
        float basis2Dot = dot(slicePlaneBasis2, rel);

        return SliceFactors(
          dot(slicePlaneNormal, pos) + slicePlaneW,
          -basis1Dot - basis1Len2,
          basis1Dot - basis1Len2,
          -basis2Dot - basis2Len2,
          basis2Dot - basis2Len2
        );
      }

      bool sliceByFactors(SliceFactors factors) {
        return factors.front < 0.0
          && factors.side0 < 0.0
          && factors.side1 < 0.0
          && factors.side2 < 0.0
          && factors.side3 < 0.0;
      }

      bool sliceEnabled() {
        // a slicePlaneBasis1 vector of zero length is used to disable slicing in the shader during draped rendering.
        return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
      }

      bool sliceByPlane(vec3 pos) {
        return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
      }

      #define rejectBySlice(_pos_) sliceByPlane(_pos_)
      #define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }
    `,n=a.H`
      vec4 applySliceHighlight(vec4 color, vec3 pos) {
        SliceFactors factors = calculateSliceFactors(pos);

        if (sliceByFactors(factors)) {
          return color;
        }

        const float HIGHLIGHT_WIDTH = 1.0;
        const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);

        factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
        factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
        factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
        factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
        factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);

        float highlightFactor = (1.0 - step(0.5, factors.front))
          * (1.0 - step(0.5, factors.side0))
          * (1.0 - step(0.5, factors.side1))
          * (1.0 - step(0.5, factors.side2))
          * (1.0 - step(0.5, factors.side3));

        return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
      }
    `,r=e.sliceHighlightDisabled?a.H`#define highlightSlice(_color_, _pos_) (_color_)`:a.H`
        ${n}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `;e.sliceEnabledForVertexPrograms&&t.vertex.code.add(i),t.fragment.code.add(i),t.fragment.code.add(r)}else{const i=a.H`
      #define rejectBySlice(_pos_) false
      #define discardBySlice(_pos_) {}
      #define highlightSlice(_color_, _pos_) (_color_)
    `;e.sliceEnabledForVertexPrograms&&t.vertex.code.add(i),t.fragment.code.add(i)}}(n=c||(c={})).bindUniformsWithOrigin=function(t,e,i){n.bindUniforms(t,e,i.slicePlane,i.origin)},n.bindUniforms=function(t,e,i,n){e.slicePlaneEnabled&&((0,r.pC)(i)?(n?((0,o.f)(u,i.origin,n),t.setUniform3fv("slicePlaneOrigin",u)):t.setUniform3fv("slicePlaneOrigin",i.origin),t.setUniform3fv("slicePlaneBasis1",i.basis1),t.setUniform3fv("slicePlaneBasis2",i.basis2)):(t.setUniform3fv("slicePlaneBasis1",s.Z),t.setUniform3fv("slicePlaneBasis2",s.Z),t.setUniform3fv("slicePlaneOrigin",s.Z)))};const u=(0,s.c)()},62213:(t,e,i)=>{"use strict";i.d(e,{w:()=>r});var n=i(85461);function r(t,e){e.linearDepth?t.vertex.code.add(n.H`
    vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
      vec4 eye = view * vec4(pos, 1.0);
      depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
      return proj * eye;
    }
    `):t.vertex.code.add(n.H`
    vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
      // Make sure the order of operations is the same as in transformPositionWithDepth.
      return proj * (view * vec4(pos, 1.0));
    }
    `)}},11823:(t,e,i)=>{"use strict";i.d(e,{c:()=>r});var n=i(85461);function r(t,e){e.attributeColor?(t.attributes.add("color","vec4"),t.varyings.add("vColor","vec4"),t.vertex.code.add(n.H`
      void forwardVertexColor() { vColor = color; }
    `),t.vertex.code.add(n.H`
      void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }
    `)):t.vertex.code.add(n.H`
      void forwardVertexColor() {}
      void forwardNormalizedVertexColor() {}
    `)}},83488:(t,e,i)=>{"use strict";i.d(e,{F:()=>s});var n=i(85461),r=i(61017);function s(t,e){t.fragment.include(r.n),3===e.output?(t.extensions.add("GL_OES_standard_derivatives"),t.fragment.code.add(n.H`
      float _calculateFragDepth(const in float depth) {
        // calc polygon offset
        const float SLOPE_SCALE = 2.0;
        const float BIAS = 2.0 * .000015259;    // 1 / (2^16 - 1)
        float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
        float result = depth + SLOPE_SCALE * m + BIAS;
        return clamp(result, .0, .999999);
      }

      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
      }
    `)):1===e.output&&t.fragment.code.add(n.H`
      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_linearDepth);
      }
    `)}},72023:(t,e,i)=>{"use strict";i.d(e,{b:()=>r});var n=i(85461);function r(t){t.fragment.uniforms.add("depthTex","sampler2D"),t.fragment.uniforms.add("highlightViewportPixelSz","vec4"),t.fragment.code.add(n.H`
    void outputHighlight() {
      vec4 fragCoord = gl_FragCoord;

      float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;
      if (fragCoord.z > sceneDepth + 5e-7) {
        gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
      }
      else {
        gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
      }
    }
  `)}!function(t){t.bindOutputHighlight=function(t,e,i){t.bindTexture(i.highlightDepthTexture,5),e.setUniform1i("depthTex",5),e.setUniform4f("highlightViewportPixelSz",0,0,i.inverseViewport[0],i.inverseViewport[1])}}(r||(r={}))},9295:(t,e,i)=>{"use strict";i.d(e,{e:()=>r});var n=i(85461);function r(t){t.vertex.code.add(n.H`
    const float PI = 3.141592653589793;
  `),t.fragment.code.add(n.H`
    const float PI = 3.141592653589793;
    const float LIGHT_NORMALIZATION = 1.0 / PI;
    const float INV_PI = 0.3183098861837907;
    const float HALF_PI = 1.570796326794897;
    `)}},8681:(t,e,i)=>{"use strict";i.d(e,{k:()=>r});var n=i(85461);function r(t,e){e.vvInstancingEnabled&&(e.vvSize||e.vvColor)&&t.attributes.add("instanceFeatureAttribute","vec4"),e.vvSize?(t.vertex.uniforms.add("vvSizeMinSize","vec3"),t.vertex.uniforms.add("vvSizeMaxSize","vec3"),t.vertex.uniforms.add("vvSizeOffset","vec3"),t.vertex.uniforms.add("vvSizeFactor","vec3"),t.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),t.vertex.uniforms.add("vvSymbolAnchor","vec3"),t.vertex.code.add(n.H`
      vec3 vvScale(vec4 _featureAttribute) {
        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
      }

      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
      }
    `),t.vertex.code.add(n.H`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${e.vvInstancingEnabled?n.H`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):t.vertex.code.add(n.H`
      vec4 localPosition() { return vec4(position, 1.0); }

      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }
    `),e.vvColor?(t.vertex.defines.addInt("VV_COLOR_N",8),t.vertex.code.add(n.H`
      uniform float vvColorValues[VV_COLOR_N];
      uniform vec4 vvColorColors[VV_COLOR_N];

      vec4 vvGetColor(vec4 featureAttribute, float values[VV_COLOR_N], vec4 colors[VV_COLOR_N]) {
        float value = featureAttribute.y;
        if (value <= values[0]) {
          return colors[0];
        }

        for (int i = 1; i < VV_COLOR_N; ++i) {
          if (values[i] >= value) {
            float f = (value - values[i-1]) / (values[i] - values[i-1]);
            return mix(colors[i-1], colors[i], f);
          }
        }
        return colors[VV_COLOR_N - 1];
      }

      ${e.vvInstancingEnabled?n.H`
      vec4 vvColor() {
        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);
      }`:""}
    `)):t.vertex.code.add(n.H`
      vec4 vvColor() { return vec4(1.0); }
    `)}!function(t){function e(t,e){e.vvSizeEnabled&&(t.setUniform3fv("vvSizeMinSize",e.vvSizeMinSize),t.setUniform3fv("vvSizeMaxSize",e.vvSizeMaxSize),t.setUniform3fv("vvSizeOffset",e.vvSizeOffset),t.setUniform3fv("vvSizeFactor",e.vvSizeFactor)),e.vvColorEnabled&&(t.setUniform1fv("vvColorValues",e.vvColorValues),t.setUniform4fv("vvColorColors",e.vvColorColors))}t.bindUniforms=e,t.bindUniformsWithOpacity=function(t,i){e(t,i),i.vvOpacityEnabled&&(t.setUniform1fv("vvOpacityValues",i.vvOpacityValues),t.setUniform1fv("vvOpacityOpacities",i.vvOpacityOpacities))},t.bindUniformsForSymbols=function(t,i){e(t,i),i.vvSizeEnabled&&(t.setUniform3fv("vvSymbolAnchor",i.vvSymbolAnchor),t.setUniformMatrix3fv("vvSymbolRotationMatrix",i.vvSymbolRotationMatrix))}}(r||(r={}))},34658:(t,e,i)=>{"use strict";i.d(e,{sj:()=>o,F:()=>r,bf:()=>s});var n=i(85461);const r=.1,s=.001;function o(t,e){const i=t.fragment;switch(e.alphaDiscardMode){case 0:i.code.add(n.H`
        #define discardOrAdjustAlpha(color) { if (color.a < ${n.H.float(.001)}) { discard; } }
      `);break;case 1:i.code.add(n.H`
        void discardOrAdjustAlpha(inout vec4 color) {
          color.a = 1.0;
        }
      `);break;case 2:i.uniforms.add("textureAlphaCutoff","float"),i.code.add(n.H`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }
      `);break;case 3:t.fragment.uniforms.add("textureAlphaCutoff","float"),t.fragment.code.add(n.H`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }
      `)}}},63230:(t,e,i)=>{"use strict";i.d(e,{Y:()=>r});var n=i(85461);function r(t){t.code.add(n.H`
    vec4 premultiplyAlpha(vec4 v) {
      return vec4(v.rgb * v.a, v.a);
    }

    // Note: the min in the last line has been added to fix an instability in chrome.
    // See https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/23911
    // With proper floating point handling, the value could never be >1.
    vec3 rgb2hsv(vec3 c) {
      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);

      float d = q.x - min(q.w, q.y);
      float e = 1.0e-10;
      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
    }

    vec3 hsv2rgb(vec3 c) {
      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

    float rgb2v(vec3 c) {
      return max(c.x, max(c.y, c.z));
    }
  `)}},61017:(t,e,i)=>{"use strict";i.d(e,{n:()=>r});var n=i(85461);function r(t){t.code.add(n.H`
    // This is the maximum float value representable as 32bit fixed point,
    // it is rgba2float(vec4(1)) inlined.
    const float MAX_RGBA_FLOAT =
      255.0 / 256.0 +
      255.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 / 256.0;

    // Factors to convert to fixed point, i.e. factors (256^0, 256^1, 256^2, 256^3)
    const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);

    vec4 float2rgba(const float value) {
      // Make sure value is in the domain we can represent
      float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);

      // Decompose value in 32bit fixed point parts represented as
      // uint8 rgba components. Decomposition uses the fractional part after multiplying
      // by a power of 256 (this removes the bits that are represented in the previous
      // component) and then converts the fractional part to 8bits.
      vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);

      // Convert uint8 values (from 0 to 255) to floating point representation for
      // the shader
      const float toU8AsFloat = 1.0 / 255.0;

      return fixedPointU8 * toU8AsFloat;
    }

    // Factors to convert rgba back to float
    const vec4 RGBA_2_FLOAT_FACTORS = vec4(
      255.0 / (256.0),
      255.0 / (256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0 * 256.0)
    );

    float rgba2float(vec4 rgba) {
      // Convert components from 0->1 back to 0->255 and then
      // add the components together with their corresponding
      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)
      return dot(rgba, RGBA_2_FLOAT_FACTORS);
    }
  `)}},89553:(t,e,i)=>{"use strict";i.d(e,{G:()=>n});var n,r=i(67128),s=i(6897);!function(t){function e(t,e,i){(0,r.t)(o,i,e),t.setUniform3fv("localOrigin",e),t.setUniformMatrix4fv("view",o)}t.bindCamPosition=function(t,e,i){t.setUniform3f("camPos",i[3]-e[0],i[7]-e[1],i[11]-e[2])},t.bindProjectionMatrix=function(t,e){t.setUniformMatrix4fv("proj",e)},t.bindNearFar=function(t,e){t.setUniform2fv("nearFar",e)},t.bindViewCustomOrigin=e,t.bindView=function(t,i){e(t,i.origin,i.camera.viewMatrix)},t.bindViewport=function(t,e){t.setUniform4fv("viewport",e.camera.fullViewport)}}(n||(n={}));const o=(0,s.c)()},51219:(t,e,i)=>{"use strict";i.d(e,{kG:()=>s});const n=i(36544).Z.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class r{constructor(){this.includedModules=new Map}include(t,e){this.includedModules.has(t)?this.includedModules.get(t)!==e&&n.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(t,e),t(this.builder,e))}}class s extends r{constructor(){super(...arguments),this.vertex=new c,this.fragment=new c,this.attributes=new u,this.varyings=new l,this.extensions=new f,this.defines=new h}get builder(){return this}generateSource(t){const e=this.extensions.generateSource(t),i=this.attributes.generateSource(t),n=this.varyings.generateSource(),r="vertex"===t?this.vertex:this.fragment,s=r.uniforms.generateSource(),o=r.code.generateSource(),a="vertex"===t?m:d,c=this.defines.generateSource().concat(r.defines.generateSource());return`\n${e.join("\n")}\n\n${c.join("\n")}\n\n${a}\n\n${s.join("\n")}\n\n${i.join("\n")}\n\n${n.join("\n")}\n\n${o.join("\n")}`}}class o{constructor(){this._entries=new Array,this._set=new Set}add(t,e,i){const n=`${t}_${e}_${i}`;return this._set.has(n)||(this._entries.push([t,e,i]),this._set.add(n)),this}generateSource(){return this._entries.map((t=>{return`uniform ${t[1]} ${t[0]}${e=t[2],e?`[${e}]`:""};`;var e}))}}class a{constructor(){this._entries=new Array}add(t){this._entries.push(t)}generateSource(){return this._entries}}class c extends r{constructor(){super(...arguments),this.uniforms=new o,this.code=new a,this.defines=new h}get builder(){return this}}class u{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(t){return"fragment"===t?[]:this._entries.map((t=>`attribute ${t[1]} ${t[0]};`))}}class l{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(){return this._entries.map((t=>`varying ${t[1]} ${t[0]};`))}}class f{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){const e="vertex"===t?f.ALLOWLIST_VERTEX:f.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((t=>e.includes(t))).map((t=>`#extension ${t} : enable`))}}f.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],f.ALLOWLIST_VERTEX=[];class h{constructor(){this._entries=new Map}addInt(t,e){const i=e%1==0?e.toFixed(0):e.toString();this._entries.set(t,i)}addFloat(t,e){const i=e%1==0?e.toFixed(1):e.toString();this._entries.set(t,i)}generateSource(){return Array.from(this._entries,(([t,e])=>`#define ${t} ${e}`))}}const d="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",m="precision highp float;\nprecision highp sampler2D;"},85461:(t,e,i)=>{"use strict";function n(t,...e){let i="";for(let n=0;n<e.length;n++)i+=t[n]+e[n];return i+=t[t.length-1],i}i.d(e,{H:()=>n}),function(t){t.int=function(t){return Math.round(t).toString()},t.float=function(t){return t.toPrecision(8)}}(n||(n={}))},23240:(t,e,i)=>{"use strict";i.d(e,{J:()=>n});class n{constructor(t,e){this._module=t,this._loadModule=e}get(){return this._module}async reload(){return this._module=await this._loadModule(),this._module}}},97853:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});class n{constructor(t,e){e&&(this._config=e.snapshot()),this._program=this.initializeProgram(t),t.commonUniformStore&&(this._commonUniformStore=t.commonUniformStore,this._commonUniformStore.subscribeProgram(this._program)),this._pipeline=this.initializePipeline(t)}dispose(){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose(),this._program=null)}reload(t){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose()),this._program=this.initializeProgram(t),this._commonUniformStore&&this._commonUniformStore.subscribeProgram(this._program)}get program(){return this._program}get pipeline(){return this._pipeline}get key(){return this._config.key}get configuration(){return this._config}bindPass(t,e,i){}bindMaterial(t,e,i){}bindDraw(t,e,i){}bindPipelineState(t){t.setPipelineState(this.pipeline)}ensureAttributeLocations(t){this.program.assertCompatibleVertexAttributeLocations(t)}get primitiveType(){return 4}}},44801:(t,e,i)=>{"use strict";i.d(e,{m:()=>r,o:()=>s});var n=i(33655);class r{constructor(){this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits.map((()=>0))}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const t=this._parameterNames,e={key:this.key};for(const i of t)e[i]=this[i];return e}}function s(t={}){return(e,i)=>{var r,s;e._parameterNames=null!=(r=e._parameterNames)?r:[],e._parameterNames.push(i);const o=e._parameterNames.length-1,a=t.count||2,c=Math.ceil((0,n.k3)(a)),u=null!=(s=e._parameterBits)?s:[0];let l=0;for(;u[l]+c>16;)l++,l>=u.length&&u.push(0);e._parameterBits=u;const f=u[l],h=(1<<c)-1<<f;u[l]+=c,Object.defineProperty(e,i,{get(){return this[o]},set(t){if(this[o]!==t&&(this[o]=t,this._keyDirty=!0,this._parameterBits[l]=this._parameterBits[l]&~h|+t<<f&h,"number"!=typeof t&&"boolean"!=typeof t))throw"Configuration values must be booleans or numbers!"}})}}},91852:(t,e,i)=>{"use strict";i.d(e,{Xn:()=>r,TF:()=>n,gT:()=>s});const n=t=>class extends t{constructor(){super(...arguments),this._isDisposed=!1}dispose(){for(const e of null!=(t=this._managedDisposables)?t:[]){var t;const i=this[e];this[e]=null,i&&"function"==typeof i.dispose&&i.dispose()}this._isDisposed=!0}get isDisposed(){return this._isDisposed}};class r extends(n(class{})){}function s(){return(t,e)=>{var i,n;t.hasOwnProperty("_managedDisposables")||(t._managedDisposables=null!=(i=null==(n=t._managedDisposables)?void 0:n.slice())?i:[]),t._managedDisposables.unshift(e)}}},11379:(t,e,i)=>{"use strict";i.d(e,{i:()=>n});const n={position:0,normal:1,uv0:2,color:3,size:4,tangent:4,uvMapSpace:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,instanceColor:7,bound1:5,bound2:6,bound3:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15}},26701:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(91852);const r=class extends n.Xn{constructor(t){super(),this.material=t.material,this.techniqueRep=t.techniqueRep,this.output=t.output}getTechnique(){return this.technique}getPipelineState(t,e){return this.getTechnique().pipeline}ensureResources(t){return 2}ensureParameters(t){}}},68500:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(59472),r=i(27898),s=i(56469),o=i(15853),a=i(62698),c=i(77625),u=i(17387);class l{constructor(t,e,i,n){this.primitiveIndices=t,this._numIndexPerPrimitive=e,this.indices=i,this._position=n,this.center=(0,c.c)(),(0,s.hu)(t.length>=1),(0,s.hu)(i.length%this._numIndexPerPrimitive==0),(0,s.hu)(i.length>=t.length*this._numIndexPerPrimitive),(0,s.hu)(3===this._position.size||4===this._position.size);const{data:r,offsetIdx:o,strideIdx:a}=this._position;let f=0;const h=t.length;let d=o+a*i[this._numIndexPerPrimitive*t[f]];for(l.tmpIndices.clear(),l.tmpIndices.push(d),this.bbMin=(0,c.f)(r[d],r[d+1],r[d+2]),this.bbMax=(0,c.b)(this.bbMin);f<h;++f){const e=this._numIndexPerPrimitive*t[f];for(let t=0;t<this._numIndexPerPrimitive;++t){d=o+a*i[e+t],l.tmpIndices.push(d);let n=r[d];this.bbMin[0]=Math.min(n,this.bbMin[0]),this.bbMax[0]=Math.max(n,this.bbMax[0]),n=r[d+1],this.bbMin[1]=Math.min(n,this.bbMin[1]),this.bbMax[1]=Math.max(n,this.bbMax[1]),n=r[d+2],this.bbMin[2]=Math.min(n,this.bbMin[2]),this.bbMax[2]=Math.max(n,this.bbMax[2])}}(0,u.e)(this.center,this.bbMin,this.bbMax,.5),this.bsRadius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);let m=this.bsRadius*this.bsRadius;for(f=0;f<l.tmpIndices.length;++f){d=l.tmpIndices.data[f];const t=r[d]-this.center[0],e=r[d+1]-this.center[1],i=r[d+2]-this.center[2],n=t*t+e*e+i*i;if(n<=m)continue;const s=Math.sqrt(n),o=.5*(s-this.bsRadius);this.bsRadius=this.bsRadius+o,m=this.bsRadius*this.bsRadius;const a=o/s;this.center[0]+=t*a,this.center[1]+=e*a,this.center[2]+=i*a}l.tmpIndices.clear()}getCenter(){return this.center}getBSRadius(){return this.bsRadius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getPrimitiveIndices(){return this.primitiveIndices}getIndices(){return this.indices}getPosition(){return this._position}getChildren(){if(this._children)return this._children;if((0,u.h)(this.bbMin,this.bbMax)>1){const t=(0,u.e)((0,c.c)(),this.bbMin,this.bbMax,.5),e=this.primitiveIndices.length,i=new Uint8Array(e),n=new Array(8);for(let t=0;t<8;++t)n[t]=0;const{data:r,offsetIdx:s,strideIdx:o}=this._position;for(let a=0;a<e;++a){let e=0;const c=this._numIndexPerPrimitive*this.primitiveIndices[a];let u=s+o*this.indices[c],l=r[u],f=r[u+1],h=r[u+2];for(let t=1;t<this._numIndexPerPrimitive;++t){u=s+o*this.indices[c+t];const e=r[u],i=r[u+1],n=r[u+2];e<l&&(l=e),i<f&&(f=i),n<h&&(h=n)}l<t[0]&&(e|=1),f<t[1]&&(e|=2),h<t[2]&&(e|=4),i[a]=e,++n[e]}let a=0;for(let t=0;t<8;++t)n[t]>0&&++a;if(a<2)return;const f=new Array(8);for(let t=0;t<8;++t)f[t]=n[t]>0?new Uint32Array(n[t]):void 0;for(let t=0;t<8;++t)n[t]=0;for(let t=0;t<e;++t){const e=i[t];f[e][n[e]++]=this.primitiveIndices[t]}this._children=new Array(8);for(let t=0;t<8;++t)void 0!==f[t]&&(this._children[t]=new l(f[t],this._numIndexPerPrimitive,this.indices,this._position))}return this._children}}!function(t){t.tmpIndices=new a.Z({deallocator:null})}(l||(l={}));const f=l;class h{constructor(t,e){this._boundingInfo=null,this._id=h.__idGen.gen(e),this._data=t}get id(){return this._id}get data(){return this._data}getIndices(t){return this.data.getIndices(t)}get indexCount(){return this.data.indexCount}getAttribute(t){return this.data.getAttribute(t)}get vertexCount(){return this.data.indexCount}get faceCount(){return this.data.indexCount/3}get boundingInfo(){return(0,n.Wi)(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return"triangle"===this.data.primitiveType?this.computeAttachmentOriginTriangles(t):this.computeAttachmentOriginPoints(t)}computeAttachmentOriginTriangles(t){const e=this.getIndices(s.Xt.POSITION),i=this.getAttribute(s.Xt.POSITION);return(0,r.cM)(i,e,t)}computeAttachmentOriginPoints(t){const e=this.getIndices(s.Xt.POSITION),i=this.getAttribute(s.Xt.POSITION);return(0,r.NO)(i,e,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){let t=this.data.getIndices(s.Xt.POSITION);const e=this.data.getAttribute(s.Xt.POSITION),i="triangle"===this.data.primitiveType?3:1;if(0===t.length){t=new Uint32Array(i);for(let e=0;e<i;++e)t[e]=e}const n=t.length;(0,s.hu)(n%i==0,"Indexing error: "+n.toFixed(0)+" not divisible by "+i.toFixed(0));const o=(0,r.p)(n/i);return new f(o,i,t,e)}}h.__idGen=new o.A;const d=h},69534:(t,e,i)=>{"use strict";i.d(e,{b:()=>s});var n=i(27898),r=i(56469);class s{constructor(t,e=s.DefaultIndices,i="triangle"){this.initialize(t,e,i)}get id(){return this._id}get vertexAttributes(){return this._vertexAttributes}get indices(){return this._indices}get indexCount(){const t=(0,r.kV)(this._indices);return null==t?0:t.length}get primitiveType(){return this._primitiveType}getVertexAttr(){return this.vertexAttributes}initialize(t,e=s.DefaultIndices,i="triangle"){const o={};for(const e in t){const{data:i,size:n}=t[e];o[e]={data:i,size:n,offsetIdx:0,strideIdx:n}}if(e===s.DefaultIndices){const t=function(t){const e=(0,r.kV)(t);return null==e?0:e.data.length/e.size}(o),i=(0,n.p)(t);e={};for(const t in o)e[t]=i}this._id=(0,n.RL)(),this._vertexAttributes=o,this._indices=e,this._primitiveType=i}toRenderData(){return{id:this._id.toString(),indices:this._indices,vertexAttr:this._vertexAttributes}}getIndices(t){return this._indices[t]}getAttribute(t){return this._vertexAttributes[t]}estimateGpuMemoryUsage(){let t=0;if(this._indices[r.Xt.POSITION]){const e=3;t+=this._indices[r.Xt.POSITION].length*e*4}if(this._indices[r.Xt.NORMAL]){const e=3;t+=this._indices[r.Xt.NORMAL].length*e*4}if(this._indices[r.Xt.UV0]){const e=2;t+=this._indices[r.Xt.UV0].length*e*4}if(this._indices[r.Xt.COLOR]){const e=1;t+=this._indices[r.Xt.COLOR].length*e*4}return t}}s.DefaultIndices={}},15853:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});class n{constructor(){this._count=0}gen(t){return null==t&&(t="a"),t+"_"+this._count++}}},10762:(t,e,i)=>{"use strict";i.d(e,{F5:()=>a,zh:()=>u,Pb:()=>c});var n=i(59472),r=i(11379),s=i(15853),o=i(30090);class a{constructor(t,e,i){this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._insertOrder=0,this._vertexAttributeLocations=r.i,this.id=a._idGen.gen(t),this._params=(0,o.Uf)(e,i),this.validateParameterValues(this._params)}dispose(){}get params(){return this._params}update(){return!1}setParameterValues(t){(0,o.LO)(this._params,t)&&(this.validateParameterValues(this._params),this.parametersChanged())}validateParameterValues(){}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.parametersChanged())}isVisibleInPass(t){return!0}get renderOccluded(){return this.params.renderOccluded}get renderPriority(){return this._renderPriority}set renderPriority(t){t!==this._renderPriority&&(this._renderPriority=t,this.parametersChanged())}get insertOrder(){return this._insertOrder}set insertOrder(t){t!==this._insertOrder&&(this._insertOrder=t,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){(0,n.pC)(this.materialRepository)&&this.materialRepository.materialChanged(this)}}function c(t,e){return t.isVisible()&&t.isVisibleInPass(e.pass)&&0!=(t.renderOccluded&e.renderOccludedMask)}a._idGen=new s.A;const u={renderOccluded:1}},88909:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(59472),r=i(77625),s=i(17387),o=i(17154),a=i(67128),c=i(12811),u=i(56469),l=i(15853),f=i(38035);class h{acquire(t,e,i,n,r,s){this.id=h._idGen.gen(t&&t.id),this.geometry=t,this.material=e,this.transformation=i,this.instanceParameters=n,this.origin=r,this.shaderTransformation=s}getStaticTransformation(){return this.transformation}getShaderTransformation(){return this.shaderTransformation?this.shaderTransformation(this.transformation):this.transformation}computeAttachmentOrigin(t){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,t):this.geometry.computeAttachmentOrigin(t))&&((0,s.i)(t,t,this.getStaticTransformation()),!0)}}h._idGen=new l.A,h.pool=new f.Z(h);const d=h;var m=i(8830),g=i(49366);class p{constructor(t={}){this._objectTransformation=(0,c.a)(),this._bvObjectSpace=new _,this._bvWorldSpace=new _,this._bvDirty=!0,this._hasVolatileTransformation=!1,this._visible=!0,this.id=p._idGen.gen(t.idHint),this.castShadow=null==t.castShadow||t.castShadow,this.metadata=t.metadata,this.metadata&&this.metadata.isElevationSource&&(this.metadata.lastValidElevationBB=new b),this.objectTransformation=(0,c.a)(),this._initializeGeometryRecords(t.geometries,t.materials,t.transformations,t.origins)}get geometryRecords(){return this._geometryRecords}get geometries(){return this._geometries}get objectTransformation(){return this._objectTransformation}set objectTransformation(t){(0,a.c)(this._objectTransformation,t),this._invalidateBoundingVolume(),this._notifyDirty("objTransformation")}dispose(){for(const t of this._geometryRecords)d.pool.release(t);this._geometryRecords=null,this._geometries=null}_initializeGeometryRecords(t,e,i,n){if(!Array.isArray(t))return this._geometryRecords=[],void(this._geometries=[]);(0,u.hu)(e.length===t.length,"Object3D: materials don't match geometries"),(0,u.hu)(i.length===t.length,"Object3D: transformations don't match geometries"),this._geometryRecords=new Array(t.length),this._geometries=t.slice();for(let r=0;r<t.length;r++){const s={highlights:null,occludees:null,visible:!0};this._geometryRecords[r]=d.pool.acquire(t[r],e[r],(0,c.b)(i[r]),s,n&&n[r])}this._hasVolatileTransformation=!1}get parentLayer(){return this._parentLayer}set parentLayer(t){(0,u.hu)(null==this._parentLayer||null==t,"Object3D can only be added to a single Layer"),this._parentLayer=t}getNumGeometryRecords(){return this._geometryRecords.length}getGeometryRecord(t){return(0,u.hu)(t>=0&&t<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range"),this._geometryRecords[t]}addGeometry(t,e,i,n,r,s){i=i||c.I,this._geometries.push(t);const o=d.pool.acquire(t,e,i,n||{highlights:null,occludees:null,visible:!0},r,s);return this._geometryRecords.push(o),this._hasVolatileTransformation=this._geometryRecords.some((t=>!!t.shaderTransformation)),this._notifyDirty("objGeometryAdded",o),this._invalidateBoundingVolume(),o}removeGeometry(t){const e=this._geometryRecords.splice(t,1)[0];return d.pool.release(e),this._hasVolatileTransformation=this._geometryRecords.some((t=>!!t.shaderTransformation)),this._geometries.splice(t,1),this._notifyDirty("objGeometryRemoved",e),this._invalidateBoundingVolume(),e}removeAllGeometries(){for(;this.getNumGeometryRecords()>0;)this.removeGeometry(0)}geometryVertexAttrsUpdated(t){this._notifyDirty("vertexAttrsUpdated",this._geometryRecords[t]),this._invalidateBoundingVolume()}get isVisible(){return this._visible}setVisible(t){this._visible=t;for(const t of this._geometryRecords)t.instanceParameters.visible=this._visible;this._notifyDirty("visibilityChanged")}maskOccludee(){const t=(0,m.K)(1);for(const e of this._geometryRecords)e.instanceParameters.occludees=(0,g.lr)(e.instanceParameters.occludees,t);return this._notifyDirty("occlusionChanged"),t}removeOcclude(t){for(const e of this._geometryRecords)e.instanceParameters.occludees=(0,g.U_)(e.instanceParameters.occludees,t);this._notifyDirty("occlusionChanged")}highlight(){const t=(0,m.K)(0);for(const e of this._geometryRecords)e.instanceParameters.highlights=(0,g.lr)(e.instanceParameters.highlights,t);return this._notifyDirty("highlightChanged"),t}removeHighlight(t){for(const e of this._geometryRecords)e.instanceParameters.highlights=(0,g.U_)(e.instanceParameters.highlights,t);this._notifyDirty("highlightChanged")}getCombinedStaticTransformation(t,e){return(0,a.m)((0,n.Pt)(e,(0,c.a)()),this.objectTransformation,t.getStaticTransformation())}getCombinedShaderTransformation(t,e){return e=e||(0,c.a)(),(0,a.m)(e,this.objectTransformation,t.getShaderTransformation()),e}hasVolativeTransformation(){return this._hasVolatileTransformation}getBBMin(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin}getBBMax(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax}getCenter(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.center:this._bvWorldSpace.center}getBSRadius(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bsRadius:this._bvWorldSpace.bsRadius}_validateBoundingVolume(){if(!this._bvDirty&&!this._hasVolatileTransformation)return;this._bvObjectSpace.init(),this._bvWorldSpace.init();for(let t=0;t<this._geometryRecords.length;++t){const e=this._geometries[t],i=this._geometryRecords[t],n=e.boundingInfo;this._calculateTransformedBoundingVolume(n,this._bvObjectSpace,i.getShaderTransformation()),this._calculateTransformedBoundingVolume(n,this._bvWorldSpace,this.getCombinedShaderTransformation(i))}(0,s.e)(this._bvObjectSpace.center,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,.5),(0,s.e)(this._bvWorldSpace.center,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);const t=(0,r.c)(),e=(0,r.c)(),i=(0,o.u1)(this.objectTransformation);for(let n=0;n<this._geometryRecords.length;++n){const r=this._geometries[n],a=this._geometryRecords[n].getShaderTransformation(),c=(0,o.u1)(a),u=r.boundingInfo;(0,s.i)(t,u.getCenter(),a);const l=(0,s.k)(t,this._bvObjectSpace.center),f=u.getBSRadius()*c;this._bvObjectSpace.bsRadius=Math.max(this._bvObjectSpace.bsRadius,l+f),(0,s.i)(e,t,this.objectTransformation);const h=(0,s.k)(e,this._bvWorldSpace.center),d=f*i;this._bvWorldSpace.bsRadius=Math.max(this._bvWorldSpace.bsRadius,h+d)}this._bvDirty=!1}_calculateTransformedBoundingVolume(t,e,i){const n=t.getBBMin(),o=t.getBBMax(),a=(0,r.b)(n),c=(0,r.b)(o);(0,s.i)(a,a,i),(0,s.i)(c,c,i);for(let t=0;t<3;++t)e.bbMin[t]=Math.min(e.bbMin[t],a[t],c[t]),e.bbMax[t]=Math.max(e.bbMax[t],a[t],c[t]);for(let t=0;t<3;++t){(0,s.g)(a,n),(0,s.g)(c,o),a[t]=o[t],c[t]=n[t],(0,s.i)(a,a,i),(0,s.i)(c,c,i);for(let t=0;t<3;++t)e.bbMin[t]=Math.min(e.bbMin[t],a[t],c[t]),e.bbMax[t]=Math.max(e.bbMax[t],a[t],c[t])}}_invalidateBoundingVolume(){this._bvDirty=!0,this._parentLayer&&this._parentLayer.notifyObjectBBChanged(this,{center:this._bvWorldSpace.center,radius:this._bvWorldSpace.bsRadius})}_notifyDirty(t,e,i,n){if(this._parentLayer){i=i||1;const r=n||this;this._parentLayer.notifyDirty(t,e,i,r)}}get test(){const t=this;return{hasGeometry:e=>t._geometries.indexOf(e)>-1,getGeometryIndex:e=>t._geometries.indexOf(e)}}}p._idGen=new l.A;class b{constructor(){this.bbMin=(0,r.f)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.bbMax=(0,r.f)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.bbMax[0]<this.bbMin[0]&&this.bbMax[1]<this.bbMin[1]&&this.bbMax[2]<this.bbMin[2]}}class _ extends b{constructor(){super(),this.center=(0,r.c)(),this.bsRadius=0}init(){(0,s.s)(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),(0,s.s)(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),(0,s.s)(this.center,0,0,0),this.bsRadius=0}getCenter(){return this.center}getBSRadius(){return this.bsRadius}}const v=p},8830:(t,e,i)=>{"use strict";i.d(e,{K:()=>r});const n=new(i(15853).A);function r(t){const e=0===t?"highlight":"occludee";return{id:n.gen(e),channel:t}}},66704:(t,e,i)=>{"use strict";i.d(e,{$L:()=>a,$x:()=>h,Vc:()=>c,E0:()=>l,ve:()=>u,wu:()=>r,je:()=>f});var n=i(36904);const r=(0,n.wK)(770,1,771,771),s=(0,n.if)(1,1),o=(0,n.if)(0,771);function a(t){return 2===t?null:1===t?o:s}function c(t){return 2===t?n.LZ:null}const u=5e5,l={factor:-1,units:-2};function f(t){return t?l:null}function h(t){return 3===t||2===t?513:515}},38391:(t,e,i)=>{"use strict";i.d(e,{zV:()=>r,JN:()=>n,RY:()=>a,eD:()=>c,ii:()=>u,YD:()=>l,P7:()=>o,s3:()=>s});const n={func:513},r={func:519},s={mask:255},o={mask:0},a={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}},c={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}},u={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}},l={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}}},56469:(t,e,i)=>{"use strict";i.d(e,{Xt:()=>a,hu:()=>c,tM:()=>g,RQ:()=>p,Kj:()=>d,zF:()=>m,kV:()=>l,Xv:()=>M,kG:()=>h,I0:()=>b,yK:()=>u,u_:()=>f,vP:()=>_});var n=i(33655),r=(i(77625),i(67128),i(55735),i(38256)),s=i(14286);i(34353);(0,r.a)();class o{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}const a={POSITION:"position",NORMAL:"normal",UV0:"uv0",UVMAPSPACE:"uvMapSpace",MEANVERTEXPOSITION:"meanVertexPosition",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",BOUND1:"bound1",BOUND2:"bound2",BOUND3:"bound3",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",TANGENT:"tangent"};function c(t,e){if(!t){e=e||"assert";const t=new Error(e);throw t.stack&&console.log(t.stack),new o(e)}}function u(t,e,i,n){let r,s=(i[0]-t[0])/e[0],o=(n[0]-t[0])/e[0];s>o&&(r=s,s=o,o=r);let a=(i[1]-t[1])/e[1],c=(n[1]-t[1])/e[1];if(a>c&&(r=a,a=c,c=r),s>c||a>o)return!1;a>s&&(s=a),c<o&&(o=c);let u=(i[2]-t[2])/e[2],l=(n[2]-t[2])/e[2];return u>l&&(r=u,u=l,l=r),!(s>l||u>o||(l<o&&(o=l),o<0))}function l(t){return t[function(t){for(const e in t)return e}(t)]}function f(t,e,i,n){t[12]=e,t[13]=i,t[14]=n}function h(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}function d(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/e)}function m(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/i)}function g(t,e,i){return 2*Math.atan(e*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}function p(t,e,i){return 2*Math.atan(i*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}function b(t,e,i=0){const r=(0,n.uZ)(t,0,y);for(let t=0;t<4;t++)e[i+t]=Math.floor(256*((s=r*v[t])-Math.floor(s)));var s}function _(t,e=0){let i=0;for(let n=0;n<4;n++)i+=t[e+n]*x[n];return i}const v=[1,256,65536,16777216],x=[1/256,1/65536,1/16777216,1/4294967296],y=_(new Uint8ClampedArray([255,255,255,255]));function M(t,e,i,n,r){const o=t;0===t[11]?(n[0]=2/(e*o[0]),n[1]=2/(i*o[5]),n[2]=(1+o[12])/o[0],n[3]=(1+o[13])/o[5],(0,s.s)(r,0,1)):(n[0]=-2/(e*o[0]),n[1]=-2/(i*o[5]),n[2]=(1-o[8])/o[0],n[3]=(1-o[9])/o[5],(0,s.s)(r,1,0))}},71061:(t,e,i)=>{"use strict";function n(t,e,i){for(let n=0;n<i;++n)e[2*n]=t[n],e[2*n+1]=t[n]-e[2*n]}function r(t,e,i,r){for(let a=0;a<r;++a)s[0]=t[a],n(s,o,1),e[a]=o[0],i[a]=o[1]}i.d(e,{LF:()=>n,po:()=>r});const s=new Float64Array(1),o=new Float32Array(2)},27898:(t,e,i)=>{"use strict";i.d(e,{qZ:()=>h,NO:()=>f,cM:()=>l,p:()=>u,RL:()=>m});var n=i(77625),r=i(17387),s=i(56938);let o=1,a=null;const c=new Uint32Array([0]);function u(t){if(1===t)return c;if(t>o||null==a){for(;t>o;)o*=2;a=new Uint32Array(o);for(let t=0;t<o;t++)a[t]=t}return new Uint32Array(a.buffer,0,t)}function l(t,e,i){if(!t)return!1;const{strideIdx:n,offsetIdx:o,data:a}=t;(0,r.s)(i,0,0,0),(0,r.s)(_,0,0,0);let c=0,u=0;for(let t=0;t<e.length-2;t+=3){const l=e[t+0]*n+o,f=e[t+1]*n+o,h=e[t+2]*n+o;(0,r.s)(g,a[l+0],a[l+1],a[l+2]),(0,r.s)(p,a[f+0],a[f+1],a[f+2]),(0,r.s)(b,a[h+0],a[h+1],a[h+2]);const d=(0,s.a)(g,p,b);d?((0,r.b)(g,g,p),(0,r.b)(g,g,b),(0,r.a)(g,g,1/3*d),(0,r.b)(i,i,g),c+=d):((0,r.b)(_,_,g),(0,r.b)(_,_,p),(0,r.b)(_,_,b),u+=3)}return!(0===u&&0===c||(0!==c?((0,r.a)(i,i,1/c),0):0===u||((0,r.a)(i,_,1/u),0)))}function f(t,e,i){if(!t||!e)return!1;const{strideIdx:n,offsetIdx:s,data:o}=t;(0,r.s)(i,0,0,0);let a=-1,c=0;for(let t=0;t<e.length;t++){const r=e[t]*n+s;a!==r&&(i[0]+=o[r+0],i[1]+=o[r+1],i[2]+=o[r+2],c++),a=r}return c>1&&(0,r.a)(i,i,1/c),c>0}function h(t,e,i,n){if(!t)return!1;const{strideIdx:s,offsetIdx:o,data:a}=t;(0,r.s)(n,0,0,0),(0,r.s)(_,0,0,0);let c=0,u=0;const l=e?e.length-1:a.length/s-1,f=l+(i?2:0);for(let t=0;t<f;t+=2){const i=t<l?t:l,f=t<l?t+1:0,h=(e?e[i]:i)*s+o,d=(e?e[f]:f)*s+o;g[0]=a[h+0],g[1]=a[h+1],g[2]=a[h+2],p[0]=a[d+0],p[1]=a[d+1],p[2]=a[d+2],(0,r.a)(g,(0,r.b)(g,g,p),.5);const m=(0,r.w)(g,p);m>0?((0,r.b)(n,n,(0,r.a)(g,g,m)),c+=m):((0,r.b)(_,_,g),u++)}return 0!==c?((0,r.a)(n,n,1/c),!0):0!==u&&((0,r.a)(n,_,1/u),!0)}let d=0;function m(){return d++}const g=(0,n.c)(),p=(0,n.c)(),b=(0,n.c)(),_=(0,n.c)()},10346:(t,e,i)=>{"use strict";i.d(e,{hf:()=>l,ow:()=>u});var n=i(11379),r=i(69595),s=i(8634),o=i(74038);const a=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}],c=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];function u(t,e=a,i=n.i,s=-1,u=1){let l=null;switch(e){case c:l=new Float32Array([s,s,0,0,u,s,1,0,s,u,0,1,u,u,1,1]);break;case a:default:l=new Float32Array([s,s,u,s,s,u,u,u])}return new o.Z(t,i,{geometry:e},{geometry:r.Z.createVertex(t,35044,l)})}function l(t){return new s.Z(t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))}},24379:(t,e,i)=>{"use strict";i.d(e,{TU:()=>c,sX:()=>o,PV:()=>a,bA:()=>u});var n=i(33655);function r(t,e,i){const n=i.parameters,r=i.paddingPixelsOverride;return l.scale=Math.min(n.divisor/(e-n.offset),1),l.factor=function(t){return Math.abs(t*t*t)}(t),l.minPixelSize=n.minPixelSize,l.paddingPixels=r,l}function s(t,e){return 0===t?e.minPixelSize:e.minPixelSize*(1+2*e.paddingPixels/t)}function o(t,e){return Math.max((0,n.t7)(t*e.scale,t,e.factor),s(t,e))}function a(t,e,i,n){n.scale=function(t,e,i){const n=r(t,e,i);return n.minPixelSize=0,n.paddingPixels=0,o(1,n)}(t,e,i),n.factor=0,n.minPixelSize=i.parameters.minPixelSize,n.paddingPixels=i.paddingPixelsOverride}function c(t,e,i=[0,0]){const n=Math.min(Math.max(e.scale,s(t[1],e)/t[1]),1);return i[0]=t[0]*n,i[1]=t[1]*n,i}function u(t,e,i,n){return o(t,r(e,i,n))}(0,n.Vl)(10),(0,n.Vl)(12),(0,n.Vl)(70),(0,n.Vl)(40);const l={scale:0,factor:0,minPixelSize:0,paddingPixels:0}},30090:(t,e,i)=>{"use strict";i.d(e,{bj:()=>A,FZ:()=>w,Uf:()=>S,Bw:()=>d,LO:()=>P,Hx:()=>M});var n=i(59472),r=i(33655),s=i(77625),o=i(17387),a=i(69996),c=i(56469),u=i(49366),l=i(24379);const f=(0,a.Ue)(),h=c.Xt;function d(t,e,i,n,r,s,o){const a=(0,u.PD)(e),l=i.tolerance;if(!a)if(t.boundingInfo)(0,c.hu)("triangle"===t.data.primitiveType),g(t.boundingInfo,n,r,l,s,o);else{const e=t.getIndices(h.POSITION),i=t.getAttribute(h.POSITION);_(n,r,0,e.length/3,e,i,void 0,s,o)}}const m=(0,s.c)();function g(t,e,i,r,s,c){const u=function(t,e,i){return(0,o.s)(i,1/(e[0]-t[0]),1/(e[1]-t[1]),1/(e[2]-t[2]))}(e,i,m);if((0,a.op)(f,t.getBBMin()),(0,a.Tn)(f,t.getBBMax()),(0,n.pC)(s)&&s.applyToAabb(f),function(t,e,i,n){return function(t,e,i,n,r){const s=(t[0]-n-e[0])*i[0],o=(t[3]+n-e[0])*i[0];let a=Math.min(s,o),c=Math.max(s,o);const u=(t[1]-n-e[1])*i[1],l=(t[4]+n-e[1])*i[1];if(c=Math.min(c,Math.max(u,l)),c<0)return!1;if(a=Math.max(a,Math.min(u,l)),a>c)return!1;const f=(t[2]-n-e[2])*i[2],h=(t[5]+n-e[2])*i[2];return c=Math.min(c,Math.max(f,h)),!(c<0)&&(a=Math.max(a,Math.min(f,h)),!(a>c)&&a<r)}(t,e,i,n,1/0)}(f,e,u,r)){const n=t.getPrimitiveIndices(),o=t.getIndices(),a=t.getPosition(),u=n?n.length:o.length/3;if(u>T){const n=t.getChildren();if(void 0!==n){for(let t=0;t<8;++t)void 0!==n[t]&&g(n[t],e,i,r,s,c);return}}_(e,i,0,u,o,a,n,s,c)}}const p=2**-52,b=(0,s.c)();function _(t,e,i,r,s,o,a,c,u){if(a)return function(t,e,i,r,s,o,a,c,u){const{data:l,offsetIdx:f,strideIdx:h}=o,d=t[0],m=t[1],g=t[2],_=e[0]-d,v=e[1]-m,x=e[2]-g;for(let t=i;t<r;++t){const e=a[t];let i=3*e,r=f+h*s[i++],o=l[r++],M=l[r++],A=l[r];r=f+h*s[i++];let S=l[r++],P=l[r++],O=l[r];r=f+h*s[i];let w=l[r++],T=l[r++],I=l[r];(0,n.pC)(c)&&([o,M,A]=c.applyToVertex(o,M,A,t),[S,P,O]=c.applyToVertex(S,P,O,t),[w,T,I]=c.applyToVertex(w,T,I,t));const U=S-o,V=P-M,B=O-A,L=w-o,z=T-M,D=I-A,C=v*D-z*x,N=x*L-D*_,R=_*z-L*v,F=U*C+V*N+B*R;if(Math.abs(F)<=p)continue;const W=d-o,j=m-M,E=g-A,k=W*C+j*N+E*R;if(F>0){if(k<0||k>F)continue}else if(k>0||k<F)continue;const H=j*B-V*E,G=E*U-B*W,X=W*V-U*j,q=_*H+v*G+x*X;if(F>0){if(q<0||k+q>F)continue}else if(q>0||k+q<F)continue;const Z=(L*H+z*G+D*X)/F;Z>=0&&u(Z,y(U,V,B,L,z,D,b),e)}}(t,e,i,r,s,o,a,c,u);const{data:l,offsetIdx:f,strideIdx:h}=o,d=t[0],m=t[1],g=t[2],_=e[0]-d,v=e[1]-m,x=e[2]-g;for(let t=i,e=3*i;t<r;++t){let i=f+h*s[e++],r=l[i++],o=l[i++],a=l[i];i=f+h*s[e++];let M=l[i++],A=l[i++],S=l[i];i=f+h*s[e++];let P=l[i++],O=l[i++],w=l[i];(0,n.pC)(c)&&([r,o,a]=c.applyToVertex(r,o,a,t),[M,A,S]=c.applyToVertex(M,A,S,t),[P,O,w]=c.applyToVertex(P,O,w,t));const T=M-r,I=A-o,U=S-a,V=P-r,B=O-o,L=w-a,z=v*L-B*x,D=x*V-L*_,C=_*B-V*v,N=T*z+I*D+U*C;if(Math.abs(N)<=p)continue;const R=d-r,F=m-o,W=g-a,j=R*z+F*D+W*C;if(N>0){if(j<0||j>N)continue}else if(j>0||j<N)continue;const E=F*U-I*W,k=W*T-U*R,H=R*I-T*F,G=_*E+v*k+x*H;if(N>0){if(G<0||j+G>N)continue}else if(G>0||j+G<N)continue;const X=(V*E+B*k+L*H)/N;X>=0&&u(X,y(T,I,U,V,B,L,b),t)}}const v=(0,s.c)(),x=(0,s.c)();function y(t,e,i,n,r,s,a){return(0,o.s)(v,t,e,i),(0,o.s)(x,n,r,s),(0,o.c)(a,v,x),(0,o.n)(a,a),a}function M(t,e,i,n,s){let o=(i.screenLength||0)*t.pixelRatio;s&&(o=(0,l.bA)(o,n,e,s));const a=o*Math.tan(.5*t.fovY)/(.5*t.fullHeight);return(0,r.YU)(a*e,i.minWorldLength||0,null!=i.maxWorldLength?i.maxWorldLength:1/0)}function A(t,e,i){if(!t)return;const n=t.parameters,r=t.paddingPixelsOverride;e.setUniform4f(i,n.divisor,n.offset,n.minPixelSize,r)}function S(t,e){const i=e?S(e):{};for(const e in t){let n=t[e];n&&n.forEach&&(n=O(n)),null==n&&e in i||(i[e]=n)}return i}function P(t,e){let i=!1;for(const n in e){const r=e[n];void 0!==r&&(i=!0,Array.isArray(r)?t[n]=r.slice():t[n]=r)}return i}function O(t){const e=[];return t.forEach((t=>e.push(t))),e}const w={multiply:1,ignore:2,replace:3,tint:4},T=1e3},13405:(t,e,i)=>{"use strict";i.d(e,{SW:()=>a,Vs:()=>l,NK:()=>f,s5:()=>u,ho:()=>c});var n=i(12608),r=i(56469);function s(t,e,i,n,r){const s=i.typedBuffer,o=i.typedBufferStride,a=t.length;if(n*=o,null==r||1===r)for(let i=0;i<a;++i){const r=2*t[i];s[n]=e[r],s[n+1]=e[r+1],n+=o}else for(let i=0;i<a;++i){const a=2*t[i];for(let t=0;t<r;++t)s[n]=e[a],s[n+1]=e[a+1],n+=o}}function o(t,e,i,n,r){const s=i.typedBuffer,o=i.typedBufferStride,a=t.length;if(n*=o,null==r||1===r)for(let i=0;i<a;++i){const r=3*t[i];s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],n+=o}else for(let i=0;i<a;++i){const a=3*t[i];for(let t=0;t<r;++t)s[n]=e[a],s[n+1]=e[a+1],s[n+2]=e[a+2],n+=o}}function a(t,e,i,n,r){const s=i.typedBuffer,o=i.typedBufferStride,a=t.length;if(n*=o,null==r||1===r)for(let i=0;i<a;++i){const r=4*t[i];s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],s[n+3]=e[r+3],n+=o}else for(let i=0;i<a;++i){const a=4*t[i];for(let t=0;t<r;++t)s[n]=e[a],s[n+1]=e[a+1],s[n+2]=e[a+2],s[n+3]=e[a+3],n+=o}}function c(t,e,i,n,r,s){if(i){const o=i,a=n.typedBuffer,c=n.typedBufferStride,u=t.length;if(r*=c,null==s||1===s)for(let i=0;i<u;++i){const n=3*t[i],s=e[n],u=e[n+1],l=e[n+2];a[r]=o[0]*s+o[4]*u+o[8]*l+o[12],a[r+1]=o[1]*s+o[5]*u+o[9]*l+o[13],a[r+2]=o[2]*s+o[6]*u+o[10]*l+o[14],r+=c}else for(let i=0;i<u;++i){const n=3*t[i],u=e[n],l=e[n+1],f=e[n+2],h=o[0]*u+o[4]*l+o[8]*f+o[12],d=o[1]*u+o[5]*l+o[9]*f+o[13],m=o[2]*u+o[6]*l+o[10]*f+o[14];for(let t=0;t<s;++t)a[r]=h,a[r+1]=d,a[r+2]=m,r+=c}}else o(t,e,n,r,s)}function u(t,e,i,n,r,s){if(i){const o=i,a=n.typedBuffer,c=n.typedBufferStride,u=t.length,l=o[0],f=o[1],h=o[2],d=o[4],m=o[5],g=o[6],p=o[8],b=o[9],_=o[10],v=Math.abs(1-l*l+d*d+p*p)>1e-5||Math.abs(1-f*f+m*m+b*b)>1e-5||Math.abs(1-h*h+g*g+_*_)>1e-5;if(r*=c,null==s||1===s)for(let i=0;i<u;++i){const n=3*t[i],s=e[n],o=e[n+1],u=e[n+2];let x=l*s+d*o+p*u,y=f*s+m*o+b*u,M=h*s+g*o+_*u;if(v){const t=x*x+y*y+M*M;if(t<.999999&&t>1e-6){const e=Math.sqrt(t);x/=e,y/=e,M/=e}}a[r+0]=x,a[r+1]=y,a[r+2]=M,r+=c}else for(let i=0;i<u;++i){const n=3*t[i],o=e[n],u=e[n+1],x=e[n+2];let y=l*o+d*u+p*x,M=f*o+m*u+b*x,A=h*o+g*u+_*x;if(v){const t=y*y+M*M+A*A;if(t<.999999&&t>1e-6){const e=Math.sqrt(t);y/=e,M/=e,A/=e}}for(let t=0;t<s;++t)a[r+0]=y,a[r+1]=M,a[r+2]=A,r+=c}}else o(t,e,n,r,s)}function l(t,e,i,n,r,s){const o=n.typedBuffer,a=n.typedBufferStride,c=t.length;if(r*=a,null==s||1===s){if(4===i)for(let i=0;i<c;++i){const n=4*t[i];o[r]=e[n],o[r+1]=e[n+1],o[r+2]=e[n+2],o[r+3]=e[n+3],r+=a}else if(3===i)for(let i=0;i<c;++i){const n=3*t[i];o[r]=e[n],o[r+1]=e[n+1],o[r+2]=e[n+2],o[r+3]=255,r+=a}}else if(4===i)for(let i=0;i<c;++i){const n=4*t[i];for(let t=0;t<s;++t)o[r]=e[n],o[r+1]=e[n+1],o[r+2]=e[n+2],o[r+3]=e[n+3],r+=a}else if(3===i)for(let i=0;i<c;++i){const n=3*t[i];for(let t=0;t<s;++t)o[r]=e[n],o[r+1]=e[n+1],o[r+2]=e[n+2],o[r+3]=255,r+=a}}function f(t,e,i,o,f,h){for(const d of e.fieldNames){const e=t.vertexAttr[d],m=t.indices[d];if(e&&m)switch(d){case r.Xt.POSITION:{(0,r.hu)(3===e.size);const t=f.getField(d,n.ct);t&&c(m,e.data,i,t,h);break}case r.Xt.NORMAL:{(0,r.hu)(3===e.size);const t=f.getField(d,n.ct);t&&u(m,e.data,o,t,h);break}case r.Xt.UV0:{(0,r.hu)(2===e.size);const t=f.getField(d,n.Eu);t&&s(m,e.data,t,h);break}case r.Xt.UVMAPSPACE:{(0,r.hu)(4===e.size);const t=f.getField(d,n.ek);t&&a(m,e.data,t,h);break}case r.Xt.MEANVERTEXPOSITION:{(0,r.hu)(3===e.size);const t=f.getField(d,n.ct);t&&c(m,e.data,i,t,h);break}case r.Xt.BOUND1:case r.Xt.BOUND2:case r.Xt.BOUND3:{(0,r.hu)(3===e.size);const t=f.getField(d,n.ct);t&&c(m,e.data,i,t,h);break}case r.Xt.COLOR:{(0,r.hu)(3===e.size||4===e.size);const t=f.getField(d,n.mc);t&&l(m,e.data,e.size,t,h);break}case r.Xt.SYMBOLCOLOR:{(0,r.hu)(3===e.size||4===e.size);const t=f.getField(d,n.mc);t&&l(m,e.data,e.size,t,h);break}case r.Xt.TANGENT:{(0,r.hu)(4===e.size);const t=f.getField(d,n.ek);t&&a(m,e.data,t,h);break}}}}},49366:(t,e,i)=>{"use strict";i.d(e,{a9:()=>l,lr:()=>a,Wr:()=>h,PD:()=>u,BX:()=>f,U_:()=>c});var n=i(59472),r=i(67128),s=i(12811),o=i(56469);i(71061);function a(t,e){return(0,n.Wi)(t)&&(t=[]),t.push(e),t}function c(t,e){if((0,n.Wi)(t))return t;const i=t.filter((t=>t!==e));return 0===i.length?null:i}function u(t){return!!(0,n.pC)(t)&&!t.visible}function l(t,e){const i=new Map;return i.set(0,e.acquire(t,0)),i.set(1,e.acquire(t,7)),i.set(4,e.acquire(t,3)),i.set(3,e.acquire(t,2)),i.set(2,e.acquire(t,1)),i.set(5,e.acquire(t,4)),i}function f(t,e){e.release(t,0),e.release(t,7),e.release(t,3),e.release(t,2),e.release(t,1),e.release(t,4)}function h(t,e,i){const s=t.origin.vec3;(0,o.u_)(d,-s[0],-s[1],-s[2]),(0,n.pC)(t.transformation)?(0,r.m)(e,d,t.transformation):(0,r.c)(e,d),i&&((0,r.a)(i,e),(0,r.b)(i,i))}new Float64Array(3),new Float32Array(6);const d=(0,s.a)()},69595:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(6962);class r{constructor(t,e,i,n,r){this._context=null,this._glName=null,this._bufferType=void 0,this._usage=35044,this._size=-1,this._indexType=void 0,this.id=s++,t.instanceCounter.increment(1,this),this._context=t,this._bufferType=e,this._usage=i,this._glName=this._context.gl.createBuffer(),n&&this.setData(n,r)}static createIndex(t,e,i,n){return new r(t,34963,e,i,n)}static createVertex(t,e,i){return new r(t,34962,e,i)}get glName(){return this._glName}get size(){return this._size}get usage(){return this._usage}get bufferType(){return this._bufferType}get indexType(){return this._indexType}get byteSize(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}dispose(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)}setData(t,e){if(!t)return;if("number"==typeof t){if(t<0&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&e)switch(this._indexType=e,this._size=t,e){case 5123:t*=2;break;case 5125:t*=4}}else{let e=t.byteLength;(0,n.Uc)(t)&&(e/=2,this._indexType=5123),(0,n.ZY)(t)&&(e/=4,this._indexType=5125),this._size=e}const i=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this),this._context.gl.bufferData(this._bufferType,t,this._usage),this._context.bindVAO(i)}setSubData(t,e=0,i=0,r){if(!t)return;(e<0||e>=this._size)&&console.error("offset is out of range!");let s=e,o=i,a=r,c=t.byteLength;(0,n.Uc)(t)&&(c/=2,s*=2,o*=2,a*=2),(0,n.ZY)(t)&&(c/=4,s*=4,o*=4,a*=4),void 0===r&&(r=c-1),i>=r&&console.error("end must be bigger than start!"),e+i-r>this._size&&console.error("An attempt to write beyond the end of the buffer!");const u=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const l=this._context.gl,f=ArrayBuffer.isView(t)?t.buffer:t;l.bufferSubData(this._bufferType,s,f.slice(o,a)),this._context.bindVAO(u)}}let s=0;const o=r},51007:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});i(95830);var n=i(59472);const r=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"];var s=i(5627),o=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function a(t){return e=t,i=function(){var t,e,i,n=0,r=0,a=999,c=[],u=[],l=1,f=0,h=0,d=!1,m=!1,g="";return function(s){return u=[],null!==s?function(s){var o;for(n=0,i=(g+=s).length;t=g[n],n<i;){switch(o=n,a){case 0:n="/"===t&&"*"===e?(c.push(t),p(c.join("")),a=999,n+1):(c.push(t),e=t,n+1);break;case 1:case 2:n=b();break;case 3:n=_();break;case 4:n="."===t||/[eE]/.test(t)?(c.push(t),a=5,e=t,n+1):"x"===t&&1===c.length&&"0"===c[0]?(a=11,c.push(t),e=t,n+1):/[^\d]/.test(t)?(p(c.join("")),a=999,n):(c.push(t),e=t,n+1);break;case 11:n=/[^a-fA-F0-9]/.test(t)?(p(c.join("")),a=999,n):(c.push(t),e=t,n+1);break;case 5:"f"===t&&(c.push(t),e=t,n+=1),n=/[eE]/.test(t)||"-"===t&&/[eE]/.test(e)?(c.push(t),e=t,n+1):/[^\d]/.test(t)?(p(c.join("")),a=999,n):(c.push(t),e=t,n+1);break;case 9999:n=x();break;case 9:n=/[^\s]/g.test(t)?(p(c.join("")),a=999,n):(c.push(t),e=t,n+1);break;case 999:c=c.length?[]:c,n="/"===e&&"*"===t?(h=r+n-1,a=0,e=t,n+1):"/"===e&&"/"===t?(h=r+n-1,a=1,e=t,n+1):"#"===t?(a=2,h=r+n,n):/\s/.test(t)?(a=9,h=r+n,n):(d=/\d/.test(t),m=/[^\w_]/.test(t),h=r+n,a=d?4:m?3:9999,n)}if(o!==n)switch(g[o]){case"\n":f=0,++l;break;default:++f}}return r+=n,g=g.slice(n),u}(s.replace?s.replace(/\r\n/g,"\n"):s):(c.length&&p(c.join("")),a=10,p("(eof)"),u)};function p(t){t.length&&u.push({type:o[a],data:t,position:h,line:l,column:f})}function b(){return"\r"!==t&&"\n"!==t||"\\"===e?(c.push(t),e=t,n+1):(p(c.join("")),a=999,n)}function _(){if("."===e&&/\d/.test(t))return a=5,n;if("/"===e&&"*"===t)return a=0,n;if("/"===e&&"/"===t)return a=1,n;if("."===t&&c.length){for(;v(c););return a=5,n}if(";"===t||")"===t||"("===t){if(c.length)for(;v(c););return p(t),a=999,n+1}var i=2===c.length&&"="!==t;if(/[\w_\d\s]/.test(t)||i){for(;v(c););return a=999,n}return c.push(t),e=t,n+1}function v(t){for(var e,i,n=0;;){if(e=s.o.indexOf(t.slice(0,t.length+n).join("")),i=s.o[e],-1===e){if(n--+t.length>0)continue;i=t.slice(0,1).join("")}return p(i),h+=i.length,(c=c.slice(i.length)).length}}function x(){if(/[^\d\w_]/.test(t)){var i=c.join("");return a=s.l.indexOf(i)>-1?8:s.b.indexOf(i)>-1?7:6,p(c.join("")),a=999,n}return c.push(t),e=t,n+1}}(),[].concat(i(e)).concat(i(null));var e,i}const c=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];function u(t,e){for(let i=e-1;i>=0;i--){const e=t[i];if("whitespace"!==e.type&&"block-comment"!==e.type){if("keyword"!==e.type)break;if("attribute"===e.data||"in"===e.data)return!0}}return!1}function l(t,e,i,n){n=n||i;for(const r of t)if("ident"===r.type&&r.data===i)return n in e?e[n]++:e[n]=0,l(t,e,n+"_"+e[n],n);return i}function f(t,e,i="afterVersion"){function n(t,e){for(let i=e;i<t.length;i++){const e=t[i];if("operator"===e.type&&";"===e.data)return i}return null}const r={data:"\n",type:"whitespace"},s=e=>e<t.length&&/[^\r\n]$/.test(t[e].data);let o=function(t){let e=-1,r=0,s=-1;for(let o=0;o<t.length;o++){const a=t[o];if("preprocessor"===a.type&&(a.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++r:a.data.match(/\#endif\s*.*/)&&--r),"afterVersion"!==i&&"afterPrecision"!==i||"preprocessor"===a.type&&/^#version/.test(a.data)&&(s=Math.max(s,o)),"afterPrecision"===i&&"keyword"===a.type&&"precision"===a.data){const e=n(t,o);if(null===e)throw new Error("precision statement not followed by any semicolons!");s=Math.max(s,e)}e<s&&0===r&&(e=o)}return e+1}(t);s(o-1)&&t.splice(o++,0,r);for(const i of e)t.splice(o++,0,i);s(o-1)&&s(o)&&t.splice(o,0,r)}function h(t,e,i,n="lowp"){f(t,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}function d(t,e,i,n,r="lowp"){f(t,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:n.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}function m(t,e){let i,n,r=-1;for(let s=e;s<t.length;s++){const e=t[s];if("operator"===e.type&&("["===e.data&&(i=s),"]"===e.data)){n=s;break}"integer"===e.type&&(r=parseInt(e.data,10))}return i&&n&&t.splice(i,n-i+1),r}function g(t,e){const i=a(t);if("300 es"===function(t,e="100",i="300 es"){const n=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const r of t)if("preprocessor"===r.type){const t=n.exec(r.data);if(t){const n=t[1].replace(/\s\s+/g," ");if(n===i)return n;if(n===e)return r.data="#version "+i,e;throw new Error("unknown glsl version: "+n)}}return t.splice(0,0,{type:"preprocessor",data:"#version "+i},{type:"whitespace",data:"\n"}),null}(i,"100","300 es"))throw new Error("shader is already glsl 300 es");let n=null,s=null;const o={},f={};for(let t=0;t<i.length;++t){const a=i[t];switch(a.type){case"keyword":"vertex"===e&&"attribute"===a.data?a.data="in":"varying"===a.data&&(a.data="vertex"===e?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(a.data.trim())&&(a.data=a.data.replace(/(2D|Cube|EXT)/g,"")),"fragment"===e&&"gl_FragColor"===a.data&&(n||(n=l(i,o,"fragColor"),h(i,n,"vec4")),a.data=n),"fragment"===e&&"gl_FragData"===a.data){const e=m(i,t+1),n=l(i,o,"fragData");d(i,n,"vec4",e,"mediump"),a.data=n}else"fragment"===e&&"gl_FragDepthEXT"===a.data&&(s||(s=l(i,o,"gl_FragDepth")),a.data=s);break;case"ident":if(r.indexOf(a.data)>=0){if("vertex"===e&&u(i,t))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");a.data in f||(f[a.data]=l(i,o,a.data)),a.data=f[a.data]}}}for(let t=i.length-1;t>=0;--t){const e=i[t];if("preprocessor"===e.type){const n=e.data.match(/\#extension\s+(.*)\:/);if(n&&n[1]&&c.indexOf(n[1].trim())>=0){const e=i[t+1];i.splice(t,e&&"whitespace"===e.type?2:1)}const r=e.data.match(/\#ifdef\s+(.*)/);r&&r[1]&&c.indexOf(r[1].trim())>=0&&(e.data="#if 1");const s=e.data.match(/\#ifndef\s+(.*)/);s&&s[1]&&c.indexOf(s[1].trim())>=0&&(e.data="#if 0")}}return function(t){return t.map((t=>"eof"!==t.type?t.data:"")).join("")}(i)}class p{constructor(t,e,i,n,r={}){if(this._context=null,this._glName=null,this._locations={},this.id=_++,this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error("RenderingContext isn't initialized!"),0===e.length&&console.error("Shaders source should not be empty!"),t.instanceCounter.increment(3,this),this._context=t,this._vertexShaderSource=e,this._fragmentShaderSource=i,Array.isArray(r))for(const t of r)this._defines[t]="1";else this._defines=r;this._locations=n}get glName(){return this._glName}get locations(){return this._locations}getDefine(t){return this._defines[t]}dispose(){if(!this._context)return;const t=this._context.gl;if(this._vShader){const e=this._vShader;t.deleteShader(e),this._vShader=null}if(this._fShader){const e=this._fShader;t.deleteShader(e),this._fShader=null}this._glName&&(t.deleteProgram(this._glName),this._glName=null),this._context.instanceCounter.decrement(3,this),this._context=null}initialize(){if(this._initialized)return;this._vShader=this._loadShader(35633),this._fShader=this._loadShader(35632),this._vShader&&this._fShader||console.error("Error loading shaders!");const t=this._context.gl,e=t.createProgram();t.attachShader(e,this._vShader),t.attachShader(e,this._fShader);for(const i in this._locations){const n=this._locations[i];t.bindAttribLocation(e,n,i)}t.linkProgram(e),this._glName=e,this._initialized=!0}getUniformLocation(t){return this.initialize(),void 0===this._nameToUniformLocation[t]&&(this._nameToUniformLocation[t]=this._context.gl.getUniformLocation(this._glName,t)),this._nameToUniformLocation[t]}hasUniform(t){return null!==this.getUniformLocation(t)}getAttribLocation(t){return this.initialize(),void 0===this._nameToAttribLocation[t]&&(this._nameToAttribLocation[t]=this._context.gl.getAttribLocation(this._glName,t)),this._nameToAttribLocation[t]}setUniform1i(t,e){const i=this._nameToUniform1[t];void 0!==i&&e===i||(this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(t),e),this._nameToUniform1[t]=e)}setUniform1iv(t,e){const i=this._nameToUniform1v[t];b(i,e)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(t),e),void 0===i?this._nameToUniform1v[t]=p._arrayCopy(e):p._arrayAssign(e,i))}setUniform2iv(t,e){const i=this._nameToUniform2[t];b(i,e)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(t),e),void 0===i?this._nameToUniform2[t]=p._arrayCopy(e):p._arrayAssign(e,i))}setUniform3iv(t,e){const i=this._nameToUniform3[t];b(i,e)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(t),e),void 0===i?this._nameToUniform3[t]=p._arrayCopy(e):p._arrayAssign(e,i))}setUniform4iv(t,e){const i=this._nameToUniform4[t];b(i,e)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(t),e),void 0===i?this._nameToUniform4[t]=p._arrayCopy(e):p._arrayAssign(e,i))}setUniform1f(t,e){const i=this._nameToUniform1[t];void 0!==i&&e===i||(this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(t),e),this._nameToUniform1[t]=e)}setUniform1fv(t,e){const i=this._nameToUniform1v[t];b(i,e)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(t),e),void 0===i?this._nameToUniform1v[t]=p._arrayCopy(e):p._arrayAssign(e,i))}setUniform2f(t,e,i){const n=this._nameToUniform2[t];void 0!==n&&e===n[0]&&i===n[1]||(this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(t),e,i),void 0===n?this._nameToUniform2[t]=[e,i]:(n[0]=e,n[1]=i))}setUniform2fv(t,e){const i=this._nameToUniform2[t];b(i,e)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(t),e),void 0===i?this._nameToUniform2[t]=p._arrayCopy(e):p._arrayAssign(e,i))}setUniform3f(t,e,i,n){const r=this._nameToUniform3[t];void 0!==r&&e===r[0]&&i===r[1]&&n===r[2]||(this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(t),e,i,n),void 0===r?this._nameToUniform3[t]=[e,i,n]:(r[0]=e,r[1]=i,r[2]=n))}setUniform3fv(t,e){const i=this._nameToUniform3[t];b(i,e)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(t),e),void 0===i?this._nameToUniform3[t]=p._arrayCopy(e):p._arrayAssign(e,i))}setUniform4f(t,e,i,n,r){const s=this._nameToUniform4[t];void 0!==s&&e===s[0]&&i===s[1]&&n===s[2]&&r===s[3]||(this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(t),e,i,n,r),void 0===s?this._nameToUniform4[t]=[e,i,n,r]:(s[0]=e,s[1]=i,s[2]=n,s[3]=r))}setUniform4fv(t,e){const i=this._nameToUniform4[t];b(i,e)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(t),e),void 0===i?this._nameToUniform4[t]=p._arrayCopy(e):p._arrayAssign(e,i))}setUniformMatrix3fv(t,e,i=!1){const r=this._nameToUniformMatrix3[t];(function(t,e){return!!(0,n.Wi)(t)||(9!==t.length?b(t,e):9!==t.length||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[7]!==e[7]||t[8]!==e[8])})(r,e)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(t),i,e),void 0===r?this._nameToUniformMatrix3[t]=p._arrayCopy(e):p._arrayAssign(e,r))}setUniformMatrix4fv(t,e,i=!1){const r=this._nameToUniformMatrix4[t];(function(t,e){return!!(0,n.Wi)(t)||(16!==t.length?b(t,e):16!==t.length||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[7]!==e[7]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]||t[11]!==e[11]||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[15]!==e[15])})(r,e)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(t),i,e),void 0===r?this._nameToUniformMatrix4[t]=p._arrayCopy(e):p._arrayAssign(e,r))}assertCompatibleVertexAttributeLocations(t){const e=t.locations===this.locations;return e||console.error("VertexAttributeLocations are incompatible"),e}static _padToThree(t){let e=t.toString();return t<1e3&&(e=("  "+t).slice(-3)),e}_addLineNumbers(t){let e=2;return t.replace(/\n/g,(()=>"\n"+p._padToThree(e++)+":"))}_loadShader(t){const e=35633===t;let i=e?this._vertexShaderSource:this._fragmentShaderSource,n="";for(const t in this._defines)n+=`#define ${t} ${this._defines[t]}\n`;i=n+i,"webgl2"===this._context.contextVersion&&(i=g(i,e?"vertex":"fragment"));const r=this._context.gl,s=r.createShader(t);return r.shaderSource(s,i),r.compileShader(s),s}static _arrayCopy(t){const e=[];for(let i=0;i<t.length;++i)e.push(t[i]);return e}static _arrayAssign(t,e){for(let i=0;i<t.length;++i)e[i]=t[i]}}function b(t,e){if((0,n.Wi)(t)||t.length!==e.length)return!0;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!0;return!1}let _=0;const v=p},57319:(t,e,i)=>{"use strict";i.d(e,{XP:()=>o,un:()=>c,m:()=>s,UF:()=>a,_V:()=>r});i(95830);var n=i(59472);function r(t,e){return t.vertexBuffers[e].size/s(t.layout[e])}function s(t){return t[0].stride}function o(t,e,i,n,r){const s=t.gl,o=t.capabilities.instancing;t.bindBuffer(i);for(const t of n){const i=e[t.name],n=(r||(0+t.baseInstance?t.baseInstance:0))*t.stride;if(void 0===i&&console.error(`There is no location for vertex attribute '${t.name}' defined.`),t.baseInstance&&!t.divisor&&console.error(`Vertex attribute '${t.name}' uses baseInstanceOffset without divisor.`),t.count<=4)s.vertexAttribPointer(i,t.count,t.type,t.normalized,t.stride,t.offset+n),s.enableVertexAttribArray(i),t.divisor&&t.divisor>0&&o&&o.vertexAttribDivisor(i,t.divisor);else if(9===t.count)for(let e=0;e<3;e++)s.vertexAttribPointer(i+e,3,t.type,t.normalized,t.stride,t.offset+12*e+n),s.enableVertexAttribArray(i+e),t.divisor&&t.divisor>0&&o&&o.vertexAttribDivisor(i+e,t.divisor);else if(16===t.count)for(let e=0;e<4;e++)s.vertexAttribPointer(i+e,4,t.type,t.normalized,t.stride,t.offset+16*e+n),s.enableVertexAttribArray(i+e),t.divisor&&t.divisor>0&&o&&o.vertexAttribDivisor(i+e,t.divisor);else console.error("Unsupported vertex attribute element count: "+t.count)}}function a(t,e,i,n){const r=t.gl,s=t.capabilities.instancing;t.bindBuffer(i);for(const t of n){const i=e[t.name];if(t.count<=4)r.disableVertexAttribArray(i),t.divisor&&t.divisor>0&&s&&s.vertexAttribDivisor(i,0);else if(9===t.count)for(let e=0;e<3;e++)r.disableVertexAttribArray(i+e),t.divisor&&t.divisor>0&&s&&s.vertexAttribDivisor(i+e,0);else if(16===t.count)for(let e=0;e<4;e++)r.disableVertexAttribArray(i+e),t.divisor&&t.divisor>0&&s&&s.vertexAttribDivisor(i+e,0);else console.error("Unsupported vertex attribute element count: "+t.count)}t.unbindBuffer(34962)}function c(t){if((0,n.Wi)(t))return 0;if("colorAttachment"in t)return t.glName?c(t.colorAttachment)+c(t.depthStencilAttachment):0;if("descriptor"in t)return t.glName?c(t.descriptor):0;const e=t.internalFormat||"pixelFormat"in t&&t.pixelFormat;if(!e)return 0;const i="hasMipmap"in t&&t.hasMipmap?1.3:1,r=t.width*t.height;return function(t){switch(t){case 6406:case 6409:return 1;case 6410:return 2;case 6407:return 3;case 6408:case 34041:return 4;case 33325:return 2;case 33326:case 35898:case 33327:return 4;case 33328:case 34842:return 8;case 34836:return 16;case 33189:return 2;case 34041:return 4;case 32854:return 2;case 36168:return 1}return 0}(e)*r*i}},74038:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(57319);let r=0;const s=class{constructor(t,e,i,n,s){this._context=t,this._locations=e,this._layout=i,this._buffers=n,this._indexBuffer=s,this._glName=null,this.id=r++,this._initialized=!1,t.instanceCounter.increment(2,this)}get glName(){return this._glName}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce(((t,e)=>t+this._buffers[e].size),this._indexBuffer?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(t=!0){if(!this._context)return;const e=this._context.capabilities.vao;if(e&&this._glName&&(e.deleteVertexArray(this._glName),this._glName=null),this._context.getBoundVAO()===this&&this._context.bindVAO(null),t){for(const t in this._buffers)this._buffers[t].dispose(),delete this._buffers[t];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context.instanceCounter.decrement(2,this),this._context=null}initialize(){if(this._initialized)return;const t=this._context.capabilities.vao;if(t){const e=t.createVertexArray();t.bindVertexArray(e),this._bindLayout(),t.bindVertexArray(null),this._glName=e}this._initialized=!0}bind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const t=this._buffers,e=!!this._context.capabilities.vao,i=this._layout,r=this._indexBuffer;t||console.error("Vertex buffer dictionary is empty!");const s=this._context.gl;for(const e in t){const r=t[e];r||console.error("Vertex buffer is uninitialized!");const s=i[e];s||console.error("Vertex element descriptor is empty!"),(0,n.XP)(this._context,this._locations,r,s)}r&&(e?s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r.glName):this._context.bindBuffer(r))}unbind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const t=this._buffers,e=this._layout;t||console.error("Vertex buffer dictionary is empty!");for(const i in t){const r=t[i];r||console.error("Vertex buffer is uninitialized!");const s=e[i];(0,n.UF)(this._context,this._locations,r,s)}const i=this._indexBuffer;i&&this._context.unbindBuffer(i.bufferType)}}}}]);
//# sourceMappingURL=5743.js.map