{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/chunks/vec4f32.js","webpack://imaps/./node_modules/@arcgis/core/support/requestImageUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/visualElements/LaserlineVisualElement.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultTextureUnits.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DDSUtil.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js"],"names":["n","Float32Array","r","t","a","e","u","o","s","c","i","f","l","_","w","N","U","Object","freeze","__proto__","create","clone","fromValues","createView","zeros","ones","unitX","unitY","unitZ","unitW","ZEROS","ONES","UNIT_X","UNIT_Y","UNIT_Z","UNIT_W","async","data","responseType","super","view","this","_angleCutoff","_style","_heightManifoldTarget","_heightManifoldEnabled","_intersectsLine","_intersectsLineEnabled","_intersectsLineInfinite","_lineVerticalPlaneSegment","_pathVerticalPlaneBuffers","_pointDistanceLine","applyProps","renderer","ensureRenderer","disposeRenderer","syncHeightManifold","syncIntersectsLine","syncPathVerticalPlane","syncLineVerticalPlane","syncPointDistance","syncAngleCutoff","syncStyle","syncRenderer","intersectsLine","renderCoordsHelper","worldUpAtPosition","d","intersectsLineInfinite","syncIntersectsLineInfinite","origin","target","attached","contrastControlEnabled","_stage","addRenderPlugin","renderSlots","setParameterValues","intersectsLineRadius","angleCutoff","heightManifoldEnabled","visible","heightManifoldTarget","intersectsLineEnabled","intersectsLineSegment","pathVerticalPlaneEnabled","pathVerticalPlaneBuffers","lineVerticalPlaneEnabled","lineVerticalPlaneSegment","pointDistanceEnabled","pointDistanceOrigin","pointDistanceTarget","removeRenderPlugin","_resources","object","createResources","geometries","forEach","remove","id","removeAllGeometries","createGeometries","setVisible","add","destroyResources","isPickable","addToViewContent","idHint","castShadow","createExternalResources","forEachExternalResource","_contentTypeFromResource","addObject","layer","dispose","destroyExternalResources","z","_handles","_quadMaterial","_outlineMaterial","_maxSize","_position","_up","_right","_transform","_renderOccluded","_color","_outlineColor","_outlineSize","_size","_outlineRenderOccluded","_updateQuadMaterial","_updateOutlineMaterial","recreateGeometry","_updateTransform","previous","center","next","Math","min","quadMaterialParameters","outlineMaterialParameters","state","watch","removeAll","_createQuadGeometry","_createOutlineGeometry","_quadGeometryData","addGeometry","camera","computeScreenPixelSizeAt","objectTransformation","position","size","Uint32Array","color","transparent","writeDepth","polygonOffset","renderOccluded","width","_attached","_resourcesCreated","_visible","_createResources","_destroyResources","console","error","updateVisibility","v","m","E","mode","p","g","spatialReference","requiresAlignment","applyElevationAlignmentBuffer","array","offset","verticalDistanceToGround","sampledElevation","geometryZWithOffset","NONE","UPDATE","RECREATE","calculateOffsetRenderUnits","featureExpressionInfoContext","meterUnitOffset","getElevation","S","DIFFUSE","NORMAL","EMISSION","OCCLUSION","METALLIC_ROUGHNESS","SSAO","SHADOW_MAP","charCodeAt","Int32Array","String","fromCharCode","h","warn","x","max","C","D","Uint8Array","push","textureData","type","levels","internalFormat","height","glTexture","powerOfTwoStretchInfo","loadingPromise","loadingController","events","idGen","gen","params","mipmap","noUnpackFlip","preMultiplyAlpha","wrap","powerOfTwoResizeMode","estimatedTexMemRequired","estimateTexMemRequired","startPreload","HTMLVideoElement","startPreloadVideoElement","HTMLImageElement","startPreloadImageElement","src","preload","crossOrigin","videoWidth","videoHeight","byteLength","Image","ImageData","HTMLCanvasElement","getDataDimensions","components","disableAnisotropy","pixelFormat","dataType","wrapMode","flipped","samplingMode","hasMipmap","maxAnisotropy","parameters","maxMaxAnisotropy","createDescriptor","bindTexture","loadFromURL","loadFromImageElement","loadFromVideoElement","loadFromImage","encoding","DDS_ENCODING","loadFromDDSData","loadFromPixelData","readyState","currentTime","framebuffer","vao","sourceTexture","setData","drawStretchedTexture","descriptor","updateData","generateMipmap","length","signal","then","loadAsync","complete","loadFromVideoElementAsync","removeEventListener","addEventListener","requiresPowerOfTwo","makePowerOfTwoTexture","gl","textureCoordinateScaleFactor","stretchToPowerOfTwo","colorTarget","depthStencilTarget","requiresFrameUpdates","detachColorTexture","bindFramebuffer","getViewport","setViewport","program","bindProgram","setUniform4f","setUniform1i","bindVAO","setPipelineState","pipeline","drawArrays","y","abort","emit"],"mappings":"+FAIA,SAASA,IAAI,OAAO,IAAIC,aAAa,GAAG,SAASC,EAAEF,GAAG,MAAME,EAAE,IAAID,aAAa,GAAG,OAAOC,EAAE,GAAGF,EAAE,GAAGE,EAAE,GAAGF,EAAE,GAAGE,EAAE,GAAGF,EAAE,GAAGE,EAAE,GAAGF,EAAE,GAAGE,EAAE,SAASC,EAAEH,EAAEE,EAAEC,EAAEC,GAAG,MAAMC,EAAE,IAAIJ,aAAa,GAAG,OAAOI,EAAE,GAAGL,EAAEK,EAAE,GAAGH,EAAEG,EAAE,GAAGF,EAAEE,EAAE,GAAGD,EAAEC,EAAiD,SAASA,IAAI,OAAOL,IAAI,SAASM,IAAI,OAAOH,EAAE,EAAE,EAAE,EAAE,GAAG,SAASI,IAAI,OAAOJ,EAAE,EAAE,EAAE,EAAE,GAAG,SAASK,IAAI,OAAOL,EAAE,EAAE,EAAE,EAAE,GAAG,SAASM,IAAI,OAAON,EAAE,EAAE,EAAE,EAAE,GAAG,SAASO,IAAI,OAAOP,EAAE,EAAE,EAAE,EAAE,G,iCAAG,MAAMQ,EAAEN,IAAIO,EAAEN,IAAIO,EAAEN,IAAIO,EAAEN,IAAIO,EAAEN,IAAIO,EAAEN,IAAUO,OAAOC,OAAO,CAACC,UAAU,KAAKC,OAAOpB,EAAEqB,MAAMnB,EAAEoB,WAAWnB,EAAEoB,WAA9U,SAAWvB,EAAEE,GAAG,OAAO,IAAID,aAAaD,EAAEE,EAAE,IAA+SsB,MAAMnB,EAAEoB,KAAKnB,EAAEoB,MAAMnB,EAAEoB,MAAMnB,EAAEoB,MAAMnB,EAAEoB,MAAMnB,EAAEoB,MAAMnB,EAAEoB,KAAKnB,EAAEoB,OAAOnB,EAAEoB,OAAOnB,EAAEoB,OAAOnB,EAAEoB,OAAOnB,K,6DCAtnBoB,eAAejC,EAAEA,EAAED,GAAG,MAAMmC,KAAKjC,SAAS,aAAED,EAAE,CAACmC,aAAa,WAAWpC,IAAI,OAAOE,I,4HCAyS,MAAMK,UAAU,IAAE,YAAYJ,GAAGkC,MAAMlC,EAAEmC,MAAMC,KAAKC,aAAa,IAAED,KAAKE,OAAO,GAAGF,KAAKG,uBAAsB,SAAIH,KAAKI,wBAAuB,EAAGJ,KAAKK,gBAAgB,cAAWL,KAAKM,wBAAuB,EAAGN,KAAKO,yBAAwB,EAAGP,KAAKQ,0BAA0B,KAAKR,KAAKS,0BAA0B,KAAKT,KAAKU,mBAAmB,KAAKV,KAAKW,WAAW/C,GAAG,eAAe,OAAOoC,KAAKY,SAAS,kBAAkBZ,KAAKa,iBAAiB,mBAAmBb,KAAKc,kBAAkB,mBAAmBd,KAAKe,qBAAqBf,KAAKgB,qBAAqBhB,KAAKiB,wBAAwBjB,KAAKkB,wBAAwBlB,KAAKmB,oBAAoB,kBAAkB,OAAOnB,KAAKC,aAAa,gBAAgBrC,GAAGoC,KAAKC,eAAerC,IAAIoC,KAAKC,aAAarC,EAAEoC,KAAKoB,mBAAmB,YAAY,OAAOpB,KAAKE,OAAO,UAAUtC,GAAGoC,KAAKE,OAAOtC,EAAEoC,KAAKqB,YAAY,2BAA2B,OAAOrB,KAAKI,uBAAuBJ,KAAKG,sBAAsB,KAAK,yBAAyBzC,IAAG,QAAEA,KAAI,OAAEsC,KAAKG,sBAAsBzC,GAAGsC,KAAKI,wBAAuB,GAAIJ,KAAKI,wBAAuB,EAAGJ,KAAKsB,eAAetB,KAAKe,qBAAqB,gCAAgCnD,GAAG,IAAG,QAAEA,GAAG,YAAYoC,KAAKuB,eAAe,MAAM,MAAMtD,EAAE+B,KAAKD,KAAKyB,mBAAmBC,kBAAkB7D,EAAE8D,GAAG1B,KAAKuB,eAAe,gBAAa3D,EAAEK,GAAG+B,KAAK2B,wBAAuB,EAAG,qBAAqB,OAAO3B,KAAKM,uBAAuBN,KAAKK,gBAAgB,KAAK,mBAAmB3C,IAAG,QAAEA,IAAI,UAAOA,EAAEsC,KAAKK,iBAAiBL,KAAKM,wBAAuB,GAAIN,KAAKM,wBAAuB,EAAGN,KAAKgB,qBAAqBhB,KAAKsB,eAAe,6BAA6B,OAAOtB,KAAKO,wBAAwB,2BAA2B3C,GAAGoC,KAAKO,wBAAwB3C,EAAEoC,KAAK4B,6BAA6B,+BAA+B,OAAO5B,KAAKQ,0BAA0B,6BAA6B9C,GAAGsC,KAAKQ,2BAA0B,QAAE9C,GAAG,UAAOA,GAAG,KAAKsC,KAAKkB,wBAAwBlB,KAAKsB,eAAe,wBAAwB,OAAOtB,KAAKS,0BAA0B,sBAAsB7C,GAAGoC,KAAKS,0BAA0B7C,EAAEoC,KAAKiB,wBAAwBjB,KAAKkB,wBAAwBlB,KAAKmB,oBAAoBnB,KAAKsB,eAAe,wBAAwB,OAAOtB,KAAKU,mBAAmB,sBAAsBhD,GAAGsC,KAAKU,oBAAmB,QAAEhD,GAAG,CAACmE,QAAO,OAAEnE,EAAEmE,QAAQC,QAAO,OAAEpE,EAAEoE,SAAS,KAAK9B,KAAKmB,oBAAoBnB,KAAKsB,eAAe,eAAetB,KAAK+B,WAAW/B,KAAKM,wBAAwBN,KAAKI,yBAAwB,QAAEJ,KAAKU,sBAAqB,QAAEV,KAAKS,4BAA4BT,KAAKa,iBAAiBb,KAAKc,kBAAkB,kBAAiB,QAAEd,KAAKY,YAAYZ,KAAKY,SAAS,IAAI,IAAEZ,KAAKD,KAAKyB,wBAAmB,EAAO,CAACQ,wBAAuB,IAAKhC,KAAKqB,YAAYrB,KAAKe,qBAAqBf,KAAKgB,qBAAqBhB,KAAK4B,6BAA6B5B,KAAKiB,wBAAwBjB,KAAKkB,wBAAwBlB,KAAKmB,oBAAoBnB,KAAKoB,kBAAkBpB,KAAKD,KAAKkC,QAAQjC,KAAKD,KAAKkC,OAAOC,gBAAgBlC,KAAKY,SAASuB,YAAYnC,KAAKY,WAAW,aAAY,QAAEZ,KAAKY,YAAYZ,KAAKY,SAASwB,mBAAmBpC,KAAKE,QAAQ,MAAMF,KAAKE,OAAOmC,uBAAuBrC,KAAKY,SAASyB,qBAAqBrC,KAAKE,OAAOmC,uBAAuB,mBAAkB,QAAErC,KAAKY,WAAWZ,KAAKY,SAASwB,mBAAmB,CAACE,YAAYtC,KAAKC,eAAe,sBAAqB,QAAED,KAAKY,YAAYZ,KAAKY,SAAS2B,sBAAsBvC,KAAKI,wBAAwBJ,KAAKwC,QAAQxC,KAAKI,yBAAyBJ,KAAKY,SAAS6B,qBAAqBzC,KAAKG,wBAAwB,sBAAqB,QAAEH,KAAKY,YAAYZ,KAAKY,SAAS8B,sBAAsB1C,KAAKM,wBAAwBN,KAAKwC,QAAQxC,KAAKM,yBAAyBN,KAAKY,SAAS+B,sBAAsB3C,KAAKK,kBAAkB,8BAA6B,QAAEL,KAAKY,YAAYZ,KAAKY,SAASe,uBAAuB3B,KAAKO,yBAAyB,yBAAwB,QAAEP,KAAKY,YAAYZ,KAAKY,SAASgC,0BAAyB,QAAE5C,KAAKS,4BAA4BT,KAAKwC,SAAQ,QAAExC,KAAKS,6BAA6BT,KAAKY,SAASiC,yBAAyB7C,KAAKS,4BAA4B,yBAAwB,QAAET,KAAKY,YAAYZ,KAAKY,SAASkC,0BAAyB,QAAE9C,KAAKQ,4BAA4BR,KAAKwC,SAAQ,QAAExC,KAAKQ,6BAA6BR,KAAKY,SAASmC,yBAAyB/C,KAAKQ,4BAA4B,qBAAoB,QAAER,KAAKY,YAAYZ,KAAKY,SAASoC,sBAAqB,QAAEhD,KAAKU,qBAAqBV,KAAKwC,SAAQ,QAAExC,KAAKU,sBAAsBV,KAAKY,SAASqC,oBAAoBjD,KAAKU,mBAAmBmB,OAAO7B,KAAKY,SAASsC,oBAAoBlD,KAAKU,mBAAmBoB,SAAS,mBAAkB,QAAE9B,KAAKY,WAAWZ,KAAKD,KAAKkC,SAASjC,KAAKD,KAAKkC,OAAOkB,mBAAmBnD,KAAKY,UAAUZ,KAAKY,SAAS,OAAO,MAAMc,GAAE,U,oHCAzqJ,MAAMnE,UAAU,IAAE,YAAYK,GAAGkC,MAAMlC,EAAEmC,MAAMC,KAAKoD,WAAW,KAAK,aAAa,OAAO,QAAEpD,KAAKoD,YAAYpD,KAAKoD,WAAWC,OAAO,KAAK,WAAWrD,KAAK+B,UAAU/B,KAAKsD,kBAAkB,mBAAmB,IAAG,QAAEtD,KAAKoD,YAAY,OAAO,MAAMxF,EAAEoC,KAAKoD,WAAWC,OAAO3F,EAAEsC,KAAKD,KAAKkC,OAAOrE,EAAE2F,WAAWC,SAAS5F,IAAIF,EAAE+F,OAAO,EAAE7F,EAAE8F,OAAO9F,EAAE+F,sBAAsB3D,KAAK4D,iBAAiBhG,GAAGoC,KAAKwC,SAAS5E,EAAEiG,WAAW7D,KAAKwC,SAAS5E,EAAE2F,WAAWC,SAAS5F,IAAIF,EAAEoG,IAAI,EAAElG,MAAM,kBAAkBoC,KAAK+D,mBAAmB,MAAMnG,EAAEoC,KAAKD,KAAKkC,OAAO,IAAIrE,EAAE,OAAO,MAAMG,EAAE,IAAI,IAAE,UAAU,CAACiG,YAAW,IAAKpG,EAAEkG,IAAI,EAAE/F,GAAGH,EAAEqG,iBAAiB,CAAClG,EAAE2F,KAAK,MAAMjG,EAAE,IAAI,IAAE,CAACyG,OAAO,UAAUC,YAAW,IAAKnE,KAAKoE,0BAA0BpE,KAAK4D,iBAAiBnG,GAAGA,EAAE8F,WAAWC,SAASzF,IAAIH,EAAEkG,IAAI,EAAE/F,MAAMiC,KAAKqE,yBAAyBtG,IAAIH,EAAEkG,IAAI9D,KAAKsE,yBAAyBvG,GAAGA,MAAMH,EAAEkG,IAAI,EAAErG,GAAGM,EAAEwG,UAAU9G,GAAGuC,KAAKwC,SAAS/E,EAAEoG,YAAW,GAAI7D,KAAKoD,WAAW,CAACoB,MAAMzG,EAAEsF,OAAO5F,GAAG,yBAAyBG,GAAG,OAAOA,aAAa,IAAE,EAAEA,aAAa,IAAE,EAAE,EAAE,mBAAmB,MAAMA,EAAEoC,KAAKD,KAAKkC,SAAQ,QAAEjC,KAAKoD,aAAaxF,IAAIA,EAAE6F,OAAO,EAAEzD,KAAKoD,WAAWC,OAAOK,IAAI9F,EAAE6F,OAAO,EAAEzD,KAAKoD,WAAWoB,MAAMd,IAAI1D,KAAKqE,yBAAyBtG,IAAIH,EAAE6F,OAAOzD,KAAKsE,yBAAyBvG,GAAGA,EAAE2F,IAAI3F,EAAE0G,aAAazE,KAAKoD,WAAWC,OAAOE,WAAWC,SAASzF,IAAIH,EAAE6F,OAAO,EAAE1F,EAAE2F,OAAO1D,KAAKoD,WAAWC,OAAOoB,UAAUzE,KAAK0E,2BAA2B1E,KAAKoD,WAAW,MAAM,iBAAiBxF,IAAG,QAAEoC,KAAKoD,aAAapD,KAAKoD,WAAWC,OAAOQ,WAAWjG,M,sNCAt4B,MAAM+G,UAAU,IAAE,YAAY/G,GAAGkC,MAAMlC,GAAGoC,KAAK4E,SAAS,IAAI,IAAE5E,KAAK6E,cAAc,KAAK7E,KAAK8E,iBAAiB,KAAK9E,KAAK+E,SAAS,EAAE/E,KAAKgF,WAAU,SAAIhF,KAAKiF,KAAI,SAAIjF,KAAKkF,QAAO,SAAIlF,KAAKmF,YAAW,SAAInF,KAAKoF,gBAAgB,EAAEpF,KAAKqF,QAAO,OAAE,EAAE,EAAE,EAAE,GAAGrF,KAAKsF,eAAc,OAAE,EAAE,EAAE,EAAE,GAAGtF,KAAKuF,aAAa,EAAEvF,KAAKwF,MAAM,GAAGxF,KAAKyF,uBAAuB,GAAGzF,KAAKW,WAAW/C,GAAG,qBAAqB,OAAOoC,KAAKoF,gBAAgB,mBAAmBxH,GAAGA,IAAIoC,KAAKoF,kBAAkBpF,KAAKoF,gBAAgBxH,EAAEoC,KAAK0F,uBAAuB,YAAY,OAAO1F,KAAKqF,OAAO,UAAUzH,IAAG,OAAEoC,KAAKqF,OAAOzH,GAAGoC,KAAK0F,sBAAsB,mBAAmB,OAAO1F,KAAKsF,cAAc,iBAAiB1H,IAAG,OAAEoC,KAAKsF,cAAc1H,GAAGoC,KAAK2F,yBAAyB,kBAAkB,OAAO3F,KAAKuF,aAAa,gBAAgB3H,GAAG,MAAMF,EAAE,IAAIsC,KAAKuF,eAAe,IAAI3H,GAAGoC,KAAKuF,aAAa3H,EAAEF,EAAEsC,KAAK4F,mBAAmB5F,KAAK2F,yBAAyB,WAAW,OAAO3F,KAAKwF,MAAM,SAAS5H,GAAGA,IAAIoC,KAAKwF,QAAQxF,KAAKwF,MAAM5H,EAAEoC,KAAK6F,oBAAoB,4BAA4B,OAAO7F,KAAKyF,uBAAuB,0BAA0B7H,GAAGoC,KAAKyF,uBAAuB7H,EAAEoC,KAAK2F,yBAAyB,cAAcG,SAASlI,EAAEmI,OAAOrI,EAAEsI,KAAKlI,IAAIkC,KAAK+E,SAASkB,KAAKC,KAAI,OAAExI,EAAEE,IAAG,OAAEF,EAAEI,IAAI,GAAE,OAAEkC,KAAKiF,KAAI,OAAEjF,KAAKiF,IAAIrH,EAAEF,KAAI,OAAEsC,KAAKkF,QAAO,OAAElF,KAAKkF,OAAOpH,EAAEJ,KAAI,OAAEsC,KAAKgF,UAAUtH,GAAGsC,KAAK4F,mBAAmB,0BAA0B5F,KAAK6E,cAAc,IAAI,IAAE7E,KAAKmG,uBAAuB,oBAAoBnG,KAAK8E,iBAAiB,IAAI,IAAE9E,KAAKoG,0BAA0B,4BAA4BpG,KAAK4E,SAASd,IAAI9D,KAAKD,KAAKsG,MAAMC,MAAM,UAAS,KAAMtG,KAAK6F,uBAAuB,2BAA2B7F,KAAK6E,cAAc,KAAK7E,KAAK8E,iBAAiB,KAAK9E,KAAK4E,SAAS2B,YAAY,wBAAwB3I,GAAGA,EAAEoC,KAAK6E,eAAejH,EAAEoC,KAAK8E,kBAAkB,iBAAiBlH,GAAGoC,KAAKwG,oBAAoB5I,GAAGoC,KAAKyG,uBAAuB7I,GAAGoC,KAAK6F,iBAAiBjI,GAAG,oBAAoBA,GAAG,MAAMF,EAAE,IAAI,IAAEsC,KAAK0G,kBAAkB1G,KAAKiF,IAAIjF,KAAKkF,QAAQ,oBAAoBtH,EAAE+I,YAAYjJ,EAAEsC,KAAK6E,eAAe,uBAAuBjH,GAAG,GAAG,IAAIoC,KAAKuF,aAAa,OAAO,MAAM7H,GAAE,OAAE,WAAQsC,KAAKiF,IAAIjF,KAAKkF,QAAQjH,EAAE,IAAI,IAAE,2BAAyB,CAAC+B,KAAKiF,IAAIvH,EAAEsC,KAAKkF,SAAS,4BAA4BtH,EAAE+I,YAAY1I,EAAE+B,KAAK8E,kBAAkB,iBAAiBpH,EAAEsC,KAAKqD,QAAQ,MAAMpF,EAAE+B,KAAKD,KAAKsG,MAAMO,OAAOnJ,EAAEuC,KAAKwF,MAAMvH,EAAE4I,yBAAyB7G,KAAKgF,WAAWjH,EAAEkI,KAAKC,IAAIlG,KAAK+E,SAAStH,IAAG,OAAEuC,KAAKmF,aAAY,OAAEnF,KAAKmF,WAAWnF,KAAKmF,WAAWnF,KAAKgF,YAAW,OAAEhF,KAAKmF,WAAWnF,KAAKmF,WAAW,CAACpH,EAAEA,EAAEA,KAAI,QAAEL,KAAKA,EAAEoJ,qBAAqB9G,KAAKmF,YAAY,kBAAkBvH,EAAEF,GAAG,MAAMO,GAAE,OAAE,WAAQL,EAAEF,GAAG,OAAO,IAAI,IAAE,CAACqJ,SAAS,CAACC,KAAK,EAAEpH,KAAK,CAAC,EAAE,EAAE,KAAKlC,KAAKE,KAAKK,KAAK,CAAC8I,SAAS,IAAIE,YAAY,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,MAAM,6BAA6B,MAAM,CAACC,MAAMlH,KAAKqF,OAAO8B,aAAY,EAAGC,YAAW,EAAGC,eAAc,EAAGC,eAAetH,KAAKoF,iBAAiB,sBAAsBpF,KAAK6E,eAAe7E,KAAK6E,cAAczC,mBAAmBpC,KAAKmG,wBAAwB,gCAAgC,MAAM,CAACe,MAAMlH,KAAKsF,cAAciC,MAAMvH,KAAKuF,aAAa+B,eAAetH,KAAKyF,wBAAwB,yBAAyBzF,KAAK8E,kBAAkB9E,KAAK8E,iBAAiB1C,mBAAmBpC,KAAKoG,8B,8CCAh9H,MAAM1I,EAAE,YAAYA,GAAGsC,KAAKwH,WAAU,EAAGxH,KAAKyH,mBAAkB,EAAGzH,KAAK0H,UAAS,EAAG1H,KAAKD,KAAKrC,EAAEsC,KAAKD,KAAKuG,MAAM,SAAS5I,IAAIsC,KAAKyH,oBAAoB/J,EAAEsC,KAAK2H,mBAAmB3H,KAAK4H,wBAAwB,WAAWlK,GAAG,IAAIE,GAAE,EAAG,IAAI,MAAMG,KAAKL,EAAEK,KAAKiC,KAAK,aAAajC,EAAEH,EAAEF,EAAEK,GAAGiC,KAAKjC,GAAGL,EAAEK,GAAG8J,QAAQC,MAAM,8BAA8B/J,GAAGiC,KAAK+B,SAASnE,EAAE,UAAUoC,KAAK+B,UAAS,EAAG,eAAe,OAAO/B,KAAKwH,UAAU,aAAa9J,GAAGA,IAAIsC,KAAKwH,YAAYxH,KAAKwH,UAAU9J,EAAEsC,KAAKwH,YAAYxH,KAAKyH,kBAAkBzH,KAAK2H,oBAAoB3H,KAAKwH,WAAWxH,KAAKyH,mBAAmBzH,KAAK4H,qBAAqB,cAAc,OAAO5H,KAAK0H,SAAS,YAAYhK,GAAGA,IAAIsC,KAAK0H,WAAW1H,KAAK0H,SAAShK,EAAEsC,KAAK+B,UAAU/B,KAAK+H,iBAAiBrK,IAAI,mBAAmBsC,KAAKsD,kBAAkBtD,KAAKyH,mBAAkB,EAAGzH,KAAKwC,SAASxC,KAAK+H,kBAAiB,GAAI,oBAAoB/H,KAAK+D,mBAAmB/D,KAAKyH,mBAAkB,K,4DCAosCO,EAAYpK,E,qFAAziD,SAASC,EAAED,EAAEF,EAAEH,EAAEE,EAAEQ,EAAEF,EAAEJ,EAAEQ,EAAEH,EAAEH,EAAEK,GAAG,MAAM+J,EAAEC,EAAEhK,EAAEiK,MAAM,IAAIzG,EAAE0G,EAAEC,EAAE,EAAE,IAAG,QAAEzK,EAAEF,EAAEH,EAAEE,EAAEO,EAAEsK,iBAAiBrK,EAAEE,GAAG,OAAO8J,EAAEM,kBAAkBrK,IAAImK,EAAEJ,EAAEO,8BAA8B/K,EAAEQ,EAAEF,EAAEJ,EAAEQ,EAAEH,EAAEH,EAAEK,GAAGwD,EAAE3D,EAAEqK,EAAEzK,IAAI+D,EAAEjE,EAAE2K,EAAEnK,IAAG,QAAEyD,EAAE1D,EAAEsK,iBAAiBF,EAAErK,EAAEF,EAAEyK,iBAAiB3K,EAAEQ,GAAGkK,OAAE,EAAO,SAASnK,EAAER,EAAEH,EAAEO,EAAEL,EAAEQ,GAAG,MAAMD,IAAG,QAAEN,GAAGA,EAAEiH,GAAE,QAAEjH,GAAGA,EAAE+K,MAAM/K,EAAEgL,OAAO,GAAGhL,EAAE,KAAK,EAAE,OAAOI,EAAEqK,MAAM,IAAI,gBAAgB,CAAC,MAAMvK,GAAE,QAAEL,EAAEG,EAAE,WAAW,EAAE,OAAOO,IAAIA,EAAE0K,yBAAyB,EAAE1K,EAAE2K,iBAAiBhL,GAAGA,EAAE,IAAI,qBAAqB,CAAC,MAAMA,GAAE,QAAEL,EAAEG,EAAE,WAAW,EAAEK,EAAED,EAAE+K,oBAAoB7K,EAAEP,GAAG,OAAOQ,IAAIA,EAAE0K,yBAAyB5K,EAAEE,EAAE2K,iBAAiBhL,GAAGG,EAAEH,EAAE,IAAI,oBAAoB,CAAC,MAAMA,GAAE,QAAEL,EAAEG,EAAE,UAAU,EAAEK,EAAED,EAAE+K,oBAAoB7K,EAAEP,GAAG,OAAOQ,IAAIA,EAAE0K,yBAAyB5K,EAAEE,EAAE2K,iBAAiBhL,GAAGG,EAAEH,EAAE,IAAI,kBAAkB,CAAC,MAAMA,EAAEE,EAAE+K,oBAAoB7K,EAAEP,GAAG,GAAGQ,EAAE,CAAC,MAAMH,GAAE,QAAEP,EAAEG,EAAE,WAAW,EAAEO,EAAE0K,yBAAyB/K,EAAEE,EAAEG,EAAE2K,iBAAiB9K,EAAE,OAAOF,EAAE,QAAQ,OAAO,QAAEE,EAAEqK,MAAM,IAAmoBvK,EAAyEoK,IAAIA,EAAE,KAA1EpK,EAAEkL,KAAK,GAAG,OAAOlL,EAAEA,EAAEmL,OAAO,GAAG,SAASnL,EAAEA,EAAEoL,SAAS,GAAG,WAAuB,MAAMd,EAAE,CAAC,kBAAkB,CAACM,8BAA8B,SAAS5K,EAAEF,EAAEH,EAAEO,EAAEL,EAAEQ,EAAEF,EAAEJ,GAAG,MAAMQ,EAAER,EAAEsL,2BAA2BlL,GAAGC,EAAEL,EAAEuL,6BAA6BxL,GAAG,EAAEI,GAAG,EAAE,IAAI,IAAIG,EAAE,EAAEA,EAAER,IAAIQ,EAAE,CAAC,MAAMR,EAAEG,EAAEF,EAAE,GAAGO,EAAEL,EAAEF,EAAE,GAAGK,EAAEH,EAAEF,EAAE,GAAGH,EAAEO,EAAE,GAAGL,EAAEF,EAAEO,EAAE,GAAGG,EAAEV,EAAEO,EAAE,GAAG,MAAME,EAAED,EAAEI,EAAEA,EAAET,GAAG,EAAEI,GAAG,EAAE,OAAO,GAAGyK,kBAAkB,SAAS3K,GAAG,MAAMF,EAAEE,EAAEuL,gBAAgB5L,EAAEK,EAAEsL,6BAA6B,OAAO,IAAIxL,GAAG,MAAMH,IAAI,gBAAgB,CAACiL,8BAA8B,SAAS5K,EAAEF,EAAEH,EAAEO,EAAEL,EAAEQ,GAAG,IAAIF,EAAE,EAAE,MAAMJ,EAAEM,EAAEqK,iBAAiB5K,GAAG,EAAEI,GAAG,EAAE,IAAI,IAAIK,EAAE,EAAEA,EAAEV,IAAIU,EAAE,CAAC,MAAMV,EAAEG,EAAEF,EAAE,GAAGS,EAAEP,EAAEF,EAAE,GAAGM,EAAEJ,EAAEF,EAAE,GAAGG,EAAEI,EAAEmL,aAAa3L,EAAEU,EAAEH,EAAEL,EAAE,WAAW,EAAEI,GAAGF,EAAEN,EAAEO,EAAE,GAAGL,EAAEF,EAAEO,EAAE,GAAGK,EAAEZ,EAAEO,EAAE,GAAGD,EAAEH,GAAG,EAAEI,GAAG,EAAE,OAAOC,EAAEN,GAAG8K,kBAAkB,KAAI,GAAI,qBAAqB,CAACC,8BAA8B,SAAS5K,EAAEF,EAAEH,EAAEO,EAAEL,EAAEQ,EAAEF,EAAEJ,GAAG,IAAIQ,EAAE,EAAE,MAAMH,EAAEL,EAAEsL,2BAA2BlL,GAAGF,EAAEF,EAAEuL,6BAA6BhL,EAAED,EAAEqK,iBAAiB5K,GAAG,EAAEI,GAAG,EAAE,IAAI,IAAIC,EAAE,EAAEA,EAAEN,IAAIM,EAAE,CAAC,MAAMN,EAAEG,EAAEF,EAAE,GAAGK,EAAEH,EAAEF,EAAE,GAAGC,EAAEC,EAAEF,EAAE,GAAGuK,EAAEhK,EAAEmL,aAAa3L,EAAEM,EAAEJ,EAAEO,EAAE,WAAW,EAAEC,GAAG8J,EAAE1K,EAAEO,EAAE,GAAGL,EAAEF,EAAEO,EAAE,GAAGC,EAAER,EAAEO,EAAE,GAAG,MAAMD,EAAEF,EAAEsK,EAAEjK,EAAEiK,EAAEjK,EAAEN,GAAG,EAAEI,GAAG,EAAE,OAAOK,EAAEV,GAAG8K,kBAAkB,KAAI,GAAI,oBAAoB,CAACC,8BAA8B,SAAS5K,EAAEF,EAAEH,EAAEO,EAAEL,EAAEQ,EAAEF,EAAEJ,GAAG,IAAIQ,EAAE,EAAE,MAAMH,EAAEL,EAAEsL,2BAA2BlL,GAAGF,EAAEF,EAAEuL,6BAA6BhL,EAAED,EAAEqK,iBAAiB5K,GAAG,EAAEI,GAAG,EAAE,IAAI,IAAIC,EAAE,EAAEA,EAAEN,IAAIM,EAAE,CAAC,MAAMN,EAAEG,EAAEF,EAAE,GAAGK,EAAEH,EAAEF,EAAE,GAAGC,EAAEC,EAAEF,EAAE,GAAGuK,EAAEhK,EAAEmL,aAAa3L,EAAEM,EAAEJ,EAAEO,EAAE,UAAU,EAAEC,GAAG8J,EAAE1K,EAAEO,EAAE,GAAGL,EAAEF,EAAEO,EAAE,GAAGC,EAAER,EAAEO,EAAE,GAAG,MAAMD,EAAEF,EAAEsK,EAAEjK,EAAEiK,EAAEjK,EAAEN,GAAG,EAAEI,GAAG,EAAE,OAAOK,EAAEV,GAAG8K,kBAAkB,KAAI,KAAO,UAAwD,U,8CCAhoH,MAAMc,EAAE,CAACC,QAAQ,EAAEC,OAAO,EAAEC,SAAS,EAAEC,UAAU,EAAEC,mBAAmB,EAAEC,KAAK,EAAEC,WAAW,I,yOCAsD,MAAMrM,E,SAAE,YAAY,0CAA0C,SAASO,EAAEF,GAAG,OAAOA,EAAEiM,WAAW,IAAIjM,EAAEiM,WAAW,IAAI,IAAIjM,EAAEiM,WAAW,IAAI,KAAKjM,EAAEiM,WAAW,IAAI,IAAI,MAAMlM,EAAEG,EAAE,QAAQG,EAAEH,EAAE,QAAQC,EAAED,EAAE,QAA4P,SAASD,EAAED,EAAEH,GAAG,MAAMK,EAAE,IAAIgM,WAAWlM,EAAE,EAAE,IAAI,GAAG,YAAYE,EAAE,GAAG,OAAOP,EAAEuK,MAAM,sCAAsC,KAAK,KAAK,EAAEhK,EAAE,KAAK,OAAOP,EAAEuK,MAAM,kDAAkD,KAAK,MAAM3J,EAAEL,EAAE,IAAI,IAAID,EAAEG,EAAE,OAAOG,GAAG,KAAKR,EAAEE,EAAE,EAAEG,EAAE,MAAM,MAAM,KAAKC,EAAEJ,EAAE,GAAGG,EAAE,MAAM,MAAM,KAAKD,EAAEF,EAAE,GAAGG,EAAE,MAAM,MAAM,QAAQ,OAAOT,EAAEuK,MAAM,4BAA4BG,EAAE9J,EAAE4L,OAAOC,aAAa,IAAI/B,EAAEA,GAAG,EAAE,IAAIA,GAAG,GAAG,IAAIA,GAAG,GAAG,OAAO,KAAK,IAAIA,EAAE,IAAIgC,EAAE,EAAEvI,EAAE5D,EAAE,GAAGsK,EAAEtK,EAAE,GAAG,IAAI,EAAE4D,IAAI,IAAI,EAAE0G,KAAK7K,EAAE2M,KAAK,iEAAiExI,EAAEA,EAAE,GAAG,EAAE0G,EAAEA,EAAE,GAAG,GAAG,MAAMC,EAAE3G,EAAExD,EAAEkK,EAAE,IAAI/J,EAAE8L,EAAE,OAAOrM,EAAE,KAAI,IAAKL,IAAIwM,EAAEhE,KAAKmE,IAAI,EAAEtM,EAAE,KAAK,IAAImM,IAAG,QAAEvI,KAAI,QAAE0G,KAAK7K,EAAE2M,KAAK,kEAAkED,EAAE,GAAG,IAAII,EAAEvM,EAAE,GAAG,EAAE,MAAMwM,EAAE,GAAG,IAAI,IAAI5M,EAAE,EAAEA,EAAEuM,IAAIvM,EAAEyM,GAAGzI,EAAE,GAAG,IAAI0G,EAAE,GAAG,GAAGvK,EAAEQ,EAAE,IAAIkM,WAAW3M,EAAEyM,EAAEF,GAAGG,EAAEE,KAAKnM,GAAGgM,GAAGF,EAAEzI,EAAEuE,KAAKmE,IAAI,EAAE1I,GAAG,GAAG0G,EAAEnC,KAAKmE,IAAI,EAAEhC,GAAG,GAAG,MAAM,CAACqC,YAAY,CAACC,KAAK,aAAaC,OAAOL,GAAGM,eAAe5M,EAAEuJ,MAAMc,EAAEwC,OAAO3M,GCAxc,MAAMgK,EAAE,YAAYtK,EAAEF,EAAED,GAAGuC,KAAKJ,KAAKhC,EAAEoC,KAAK8K,UAAU,KAAK9K,KAAK+K,sBAAsB,KAAK/K,KAAKgL,eAAe,KAAKhL,KAAKiL,kBAAkB,KAAKjL,KAAKkL,OAAO,IAAI,IAAElL,KAAKJ,KAAKhC,EAAEoC,KAAK0D,GAAGwE,EAAEiD,MAAMC,IAAI1N,GAAGsC,KAAKqL,OAAO5N,GAAG,GAAGuC,KAAKqL,OAAOC,QAAO,IAAKtL,KAAKqL,OAAOC,OAAOtL,KAAKqL,OAAOE,aAAavL,KAAKqL,OAAOE,eAAc,EAAGvL,KAAKqL,OAAOG,iBAAiBxL,KAAKqL,OAAOG,mBAAkB,EAAGxL,KAAKqL,OAAOI,KAAKzL,KAAKqL,OAAOI,MAAM,CAAC1N,EAAE,MAAML,EAAE,OAAOsC,KAAKqL,OAAOK,qBAAqB1L,KAAKqL,OAAOK,sBAAsB,EAAE1L,KAAK2L,wBAAwBzD,EAAE0D,uBAAuB5L,KAAKJ,KAAKI,KAAKqL,QAAQrL,KAAK6L,eAAe,eAAe,MAAMjO,EAAEoC,KAAKJ,MAAK,QAAEhC,KAAKA,aAAakO,iBAAiB9L,KAAK+L,yBAAyBnO,GAAGA,aAAaoO,kBAAkBhM,KAAKiM,yBAAyBrO,IAAI,yBAAyBA,IAAG,QAAEA,EAAEsO,MAAM,SAAStO,EAAEuO,SAASvO,EAAEwO,cAAcxO,EAAEuO,QAAQ,OAAOvO,EAAEwO,YAAY,YAAYxO,EAAEsO,IAAItO,EAAEsO,KAAK,yBAAyBtO,IAAG,QAAEA,EAAEsO,OAAM,QAAEtO,EAAEsO,MAAMtO,EAAEwO,cAAcxO,EAAEwO,YAAY,YAAYxO,EAAEsO,IAAItO,EAAEsO,KAAK,yBAAyBtO,GAAG,OAAOA,aAAakO,iBAAiB,CAACvE,MAAM3J,EAAEyO,WAAWxB,OAAOjN,EAAE0O,aAAa1O,EAAE,8BAA8BA,EAAEG,GAAG,IAAG,QAAEH,GAAG,OAAO,EAAE,IAAG,QAAEA,KAAI,QAAEA,GAAG,OAAOA,EAAE2O,WAAW,MAAMhF,MAAM5J,EAAEkN,OAAO/M,GAAGF,aAAa4O,OAAO5O,aAAa6O,WAAW7O,aAAa8O,mBAAmB9O,aAAakO,iBAAiB5D,EAAEyE,kBAAkB/O,GAAGG,EAAE,OAAOA,EAAEuN,OAAO,EAAE,EAAE,GAAG3N,EAAEG,GAAGC,EAAE6O,YAAY,IAAI,EAAE,UAAU5M,KAAKJ,UAAK,EAAO,YAAY,OAAOI,KAAKqL,OAAO9D,MAAM,aAAa,OAAOvH,KAAKqL,OAAOR,OAAO,iBAAiBjN,GAAG,MAAMF,EAAEsC,KAAKqL,OAAOC,SAAStL,KAAKqL,OAAOwB,kBAAkB,MAAM,CAAC/K,OAAO,KAAKgL,YAAY,KAAKC,SAAS,KAAKC,SAAShN,KAAKqL,OAAOI,KAAKwB,SAASjN,KAAKqL,OAAOE,aAAa2B,aAAalN,KAAKqL,OAAOC,OAAO,KAAK,KAAK6B,UAAUnN,KAAKqL,OAAOC,OAAOE,iBAAiBxL,KAAKqL,OAAOG,iBAAiB4B,cAAc1P,EAAEE,EAAEyP,WAAWC,sBAAiB,GAAQ,KAAK1P,EAAED,GAAG,IAAG,QAAEqC,KAAK8K,WAAW,OAAO9K,KAAK8K,UAAU,IAAG,QAAE9K,KAAKgL,gBAAgB,OAAOhL,KAAKgL,eAAe,MAAMlN,EAAEkC,KAAKJ,KAAK,OAAO,QAAE9B,IAAIkC,KAAK8K,UAAU,IAAI,IAAElN,EAAEoC,KAAKuN,iBAAiB3P,GAAG,MAAMA,EAAE4P,YAAYxN,KAAK8K,UAAU,GAAG9K,KAAK8K,WAAW,iBAAiBhN,EAAEkC,KAAKyN,YAAY7P,EAAED,EAAEG,GAAGA,aAAa0O,MAAMxM,KAAK0N,qBAAqB9P,EAAED,EAAEG,GAAGA,aAAagO,iBAAiB9L,KAAK2N,qBAAqB/P,EAAED,EAAEG,GAAGA,aAAa2O,WAAW3O,aAAa4O,kBAAkB1M,KAAK4N,cAAchQ,EAAEE,EAAEH,KAAI,QAAEG,KAAI,QAAEA,KAAKkC,KAAKqL,OAAOwC,WAAW3F,EAAE4F,aAAa9N,KAAK+N,gBAAgBnQ,EAAEE,IAAG,QAAEA,GAAGkC,KAAKgO,kBAAkBpQ,EAAEE,IAAG,QAAEA,GAAGkC,KAAKgO,kBAAkBpQ,EAAE,IAAI2M,WAAWzM,IAAI,KAAK,2BAA2B,OAAOkC,KAAKJ,gBAAgBkM,iBAAiB,YAAYlO,EAAEF,EAAED,GAAG,KAAKuC,KAAKJ,gBAAgBkM,oBAAmB,QAAE9L,KAAK8K,WAAW,OAAOrN,EAAE,GAAGuC,KAAKJ,KAAKqO,WAAW,GAAGxQ,IAAIuC,KAAKJ,KAAKsO,YAAY,OAAOzQ,EAAE,IAAG,QAAEuC,KAAK+K,uBAAuB,CAAC,MAAMoD,YAAY1Q,EAAE2Q,IAAInQ,EAAEoQ,cAActQ,GAAGiC,KAAK+K,sBAAsBhN,EAAEuQ,QAAQtO,KAAKJ,MAAMI,KAAKuO,qBAAqB3Q,EAAEF,EAAED,EAAEQ,EAAEF,EAAEiC,KAAK8K,eAAe,CAAC,MAAMvD,MAAM3J,EAAEiN,OAAOnN,GAAGsC,KAAKJ,MAAM2H,MAAM9J,EAAEoN,OAAO5M,GAAG+B,KAAK8K,UAAU0D,WAAW5Q,IAAIH,GAAGC,IAAIO,EAAE+B,KAAK8K,UAAU2D,WAAW,EAAE,EAAE,EAAExI,KAAKC,IAAItI,EAAEH,GAAGwI,KAAKC,IAAIxI,EAAEO,GAAG+B,KAAKJ,MAAMI,KAAK8K,UAAUwD,QAAQtO,KAAKJ,MAAM,OAAOI,KAAK8K,UAAU0D,WAAWrB,WAAWnN,KAAK8K,UAAU4D,iBAAiB1O,KAAKJ,KAAKsO,YAAY,gBAAgBtQ,EAAEF,GAAG,OAAOsC,KAAK8K,UDA94H,SAAWlN,EAAEF,EAAEH,EAAEO,GAAG,MAAM2M,YAAY9M,EAAEiN,eAAe3M,EAAEsJ,MAAMxJ,EAAE8M,OAAO1M,GAAGN,EAAEN,EAAEO,GAAGJ,EAAEwP,aAAavP,EAAEgN,OAAOgE,OAAO,EAAE,KAAK,KAAKjR,EAAEyP,UAAUxP,EAAEgN,OAAOgE,OAAO,EAAEjR,EAAEkN,eAAe3M,EAAEP,EAAE6J,MAAMxJ,EAAEL,EAAEmN,OAAO1M,EAAE,MAAMH,EAAE,IAAI,IAAEJ,EAAEF,EAAEC,GAAG,OAAOC,EAAE4P,YAAYxP,EAAE,GAAGA,ECAsqH,CAAEJ,EAAEoC,KAAKuN,iBAAiB3P,GAAGF,EAAEsC,KAAKqL,OAAOC,QAAQ1N,EAAE4P,YAAYxN,KAAK8K,UAAU,GAAG9K,KAAK8K,UAAU,kBAAkBlN,EAAEF,IAAG,QAAEsC,KAAKqL,OAAO9D,MAAM,GAAGvH,KAAKqL,OAAOR,OAAO,GAAG,MAAMpN,EAAEuC,KAAKuN,iBAAiB3P,GAAG,OAAOH,EAAEqP,YAAY,IAAI9M,KAAKqL,OAAOuB,WAAW,KAAK,IAAI5M,KAAKqL,OAAOuB,WAAW,KAAK,KAAKnP,EAAE8J,MAAMvH,KAAKqL,OAAO9D,MAAM9J,EAAEoN,OAAO7K,KAAKqL,OAAOR,OAAO7K,KAAK8K,UAAU,IAAI,IAAElN,EAAEH,EAAEC,GAAGE,EAAE4P,YAAYxN,KAAK8K,UAAU,GAAG9K,KAAK8K,UAAU,gBAAgBlN,GAAG,MAAMF,GAAE,6BAAIsC,KAAKiL,kBAAkBvN,EAAE,MAAMD,EAAEG,EAAEF,EAAEkR,QAAQ5O,KAAKgL,eAAevN,EAAE,MAAMQ,EAAE,KAAK+B,KAAKiL,oBAAoBvN,IAAIsC,KAAKiL,kBAAkB,MAAMjL,KAAKgL,iBAAiBvN,IAAIuC,KAAKgL,eAAe,OAAO,OAAOvN,EAAEoR,KAAK5Q,EAAEA,GAAGR,EAAE,YAAYG,EAAEF,EAAED,GAAG,OAAOuC,KAAK8O,WAAU,MAACnP,IAAU,MAAM5B,QAAQ,OAAEN,EAAE,CAACmR,OAAO3Q,IAAI,OAAO+B,KAAK4N,cAAchQ,EAAEG,EAAEL,MAAM,qBAAqBE,EAAEF,EAAED,GAAG,OAAOA,EAAEsR,SAAS/O,KAAK4N,cAAchQ,EAAEH,EAAEC,GAAGsC,KAAK8O,WAAU,MAACnP,IAAU,MAAM5B,QAAQ,OAAEN,EAAEA,EAAEyO,KAAI,EAAGjO,GAAG,OAAO+B,KAAK4N,cAAchQ,EAAEG,EAAEL,MAAM,qBAAqBE,EAAEF,EAAED,GAAG,OAAOA,EAAEwQ,YAAY,EAAEjO,KAAK4N,cAAchQ,EAAEH,EAAEC,GAAGsC,KAAKgP,0BAA0BpR,EAAEF,EAAED,GAAG,0BAA0BG,EAAEF,EAAED,GAAG,OAAOuC,KAAK8O,WAAW7Q,IAAG,aAAE,CAAEH,EAAEP,KAAK,MAAM0M,EAAE,KAAKxM,EAAEwR,oBAAoB,aAAa9Q,GAAGV,EAAEwR,oBAAoB,QAAQvN,IAAG,QAAE7D,IAAIA,EAAE4F,UAAUtF,EAAE,KAAKV,EAAEwQ,YAAY,IAAIhE,IAAInM,EAAEkC,KAAK4N,cAAchQ,EAAEH,EAAEC,MAAMgE,EAAE9D,IAAIqM,IAAI1M,EAAEK,GAAG,IAAI,IAAE,0BAA0BH,EAAEyR,iBAAiB,aAAa/Q,GAAGV,EAAEyR,iBAAiB,QAAQxN,GAAG,MAAM7D,GAAE,aAAEI,GAAE,IAAKyD,GAAE,gCAAY,cAAc9D,EAAEF,EAAED,GAAG,MAAMQ,EAAEiK,EAAEyE,kBAAkBjP,GAAGsC,KAAKqL,OAAO9D,MAAMtJ,EAAEsJ,MAAMvH,KAAKqL,OAAOR,OAAO5M,EAAE4M,OAAO,MAAM9M,EAAEiC,KAAKuN,iBAAiB3P,GAAG,OAAOG,EAAE+O,YAAY,IAAI9M,KAAKqL,OAAOuB,WAAW,KAAK,MAAM5M,KAAKmP,mBAAmBvR,EAAEG,KAAI,QAAEE,EAAEsJ,SAAQ,QAAEtJ,EAAE4M,SAAS9M,EAAEwJ,MAAMtJ,EAAEsJ,MAAMxJ,EAAE8M,OAAO5M,EAAE4M,OAAO7K,KAAK8K,UAAU,IAAI,IAAElN,EAAEG,EAAEL,GAAGE,EAAE4P,YAAYxN,KAAK8K,UAAU,GAAG9K,KAAK8K,YAAY9K,KAAK8K,UAAU9K,KAAKoP,sBAAsBxR,EAAEF,EAAEO,EAAEF,EAAEN,GAAGG,EAAE4P,YAAYxN,KAAK8K,UAAU,GAAG9K,KAAK8K,WAAW,mBAAmBlN,EAAEF,GAAG,MAAMD,EAAE,MAAMQ,EAAE,iBAAiBP,EAAEsP,SAAStP,EAAEsP,WAAWvP,EAAEC,EAAEsP,SAASjP,IAAIN,GAAGC,EAAEsP,SAAStP,IAAID,EAAE,QAAO,OAAEG,EAAEyR,MAAM3R,EAAEyP,YAAYlP,GAAG,sBAAsBP,EAAED,EAAEQ,EAAEF,EAAEJ,GAAG,MAAM4J,MAAMzJ,EAAE+M,OAAOtN,GAAGU,EAAEgM,GAAE,QAAEnM,GAAGK,GAAE,QAAEZ,GAAG,IAAI0K,EAAE,OAAOlK,EAAEwJ,MAAM0C,EAAElM,EAAE8M,OAAO1M,EAAE6B,KAAKqL,OAAOK,sBAAsB,KAAK,EAAE3N,EAAEuR,6BAA6B,CAACxR,EAAEmM,EAAE1M,EAAEY,GAAG8J,EAAE,IAAI,IAAEvK,EAAEK,GAAGkK,EAAEwG,WAAW,EAAE,EAAE,EAAE3Q,EAAEP,EAAEE,GAAG,MAAM,KAAK,EAAE,KAAK,KAAK,UAAK,EAAOwK,EAAEjI,KAAKuP,oBAAoB7R,EAAED,EAAEM,EAAEJ,GAAG,MAAM,SAAQ,QAAEqC,KAAKqL,OAAOK,sBAAsB,OAAO3N,EAAEoP,WAAWlF,EAAEyG,iBAAiBzG,EAAE,oBAAoBrK,EAAEF,EAAED,EAAEQ,GAAG,MAAMF,EAAE,IAAI,IAAEH,EAAEH,GAAGE,EAAE,IAAI,IAAEC,EAAE,CAAC4R,YAAY,EAAEC,mBAAmB,GAAG1R,GAAGD,EAAE,IAAI,IAAEF,EAAE,CAACkE,OAAO,KAAKgL,YAAYrP,EAAEqP,YAAYC,SAAS,KAAKC,SAAS,MAAME,aAAa,KAAKD,UAAUxP,EAAEwP,QAAQG,cAAc,EAAE5B,iBAAiB/N,EAAE+N,kBAAkB9N,GAAGH,GAAE,QAAEK,GAAG,OAAOoC,KAAKuO,qBAAqB3Q,EAAEK,EAAEN,EAAEJ,EAAEO,EAAEC,GAAGiC,KAAK0P,qBAAqB1P,KAAK+K,sBAAsB,CAACqD,IAAI7Q,EAAE8Q,cAAcvQ,EAAEqQ,YAAYxQ,IAAIJ,EAAEkH,SAAQ,GAAI3G,EAAE2G,UAAU9G,EAAEgS,qBAAqB/R,EAAEgS,gBAAgB,MAAMjS,EAAE8G,WAAW1G,EAAE,qBAAqBH,EAAEF,EAAED,EAAEQ,EAAEF,EAAEJ,GAAGC,EAAEgS,gBAAgBnS,GAAG,MAAMK,EAAEF,EAAEiS,cAAcjS,EAAEkS,YAAY,EAAE,EAAEnS,EAAE6Q,WAAWjH,MAAM5J,EAAE6Q,WAAW3D,QAAQ,MAAMtN,EAAEG,EAAEqS,QAAQnS,EAAEoS,YAAYzS,GAAGA,EAAE0S,aAAa,QAAQ,EAAE,EAAE,EAAE,GAAG1S,EAAE2S,aAAa,MAAM,GAAGtS,EAAE4P,YAAYzP,EAAE,GAAGH,EAAEuS,QAAQlS,GAAGL,EAAEwS,iBAAiB1S,EAAE2S,UAAUzS,EAAE0S,WAAW,EAAE,GAAE,QAAErS,EAAE,aAAaL,EAAEgS,gBAAgB,MAAMhS,EAAEkS,YAAYhS,EAAEqM,EAAErM,EAAEyS,EAAEzS,EAAEyJ,MAAMzJ,EAAE+M,QAAQ,SAAS,IAAG,QAAE7K,KAAK+K,uBAAuB,CAAC,MAAMoD,YAAYvQ,EAAEwQ,IAAI1Q,EAAE2Q,cAAc5Q,GAAGuC,KAAK+K,sBAAsBrN,EAAE+G,SAAQ,GAAIhH,EAAEgH,UAAU7G,EAAE6G,UAAUzE,KAAK8K,UAAU,KAAK9K,KAAK+K,sBAAsB,KAAK,IAAG,QAAE/K,KAAK8K,aAAa9K,KAAK8K,UAAUrG,UAAUzE,KAAK8K,UAAU,OAAM,QAAE9K,KAAKiL,mBAAmB,CAAC,MAAMrN,EAAEoC,KAAKiL,kBAAkBjL,KAAKiL,kBAAkB,KAAKjL,KAAKgL,eAAe,KAAKpN,EAAE4S,QAAQxQ,KAAKkL,OAAOuF,KAAK,aAAavI,EAAEiD,MAAM,IAAI,IAAEjD,EAAE4F,aAAa,mBAAmB","file":"2412.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction n(){return new Float32Array(4)}function r(n){const r=new Float32Array(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}function t(n,r,t,a){const e=new Float32Array(4);return e[0]=n,e[1]=r,e[2]=t,e[3]=a,e}function a(n,r){return new Float32Array(n,r,4)}function e(){return n()}function u(){return t(1,1,1,1)}function o(){return t(1,0,0,0)}function s(){return t(0,1,0,0)}function c(){return t(0,0,1,0)}function i(){return t(0,0,0,1)}const f=e(),l=u(),_=o(),w=s(),N=c(),U=i();var y=Object.freeze({__proto__:null,create:n,clone:r,fromValues:t,createView:a,zeros:e,ones:u,unitX:o,unitY:s,unitZ:c,unitW:i,ZEROS:f,ONES:l,UNIT_X:_,UNIT_Y:w,UNIT_Z:N,UNIT_W:U});export{l as O,_ as U,f as Z,r as a,a as b,n as c,s as d,c as e,t as f,i as g,w as h,N as i,U as j,u as o,o as u,y as v,e as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,r){const{data:a}=await e(t,{responseType:\"image\",...r});return a}export{t as requestImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import{c as i,b as n}from\"../../../../chunks/vec3f64.js\";import{g as s}from\"../../../../chunks/vec3.js\";import{lineSegment as r}from\"../../support/geometryUtils.js\";import{VisualElement as h}from\"./VisualElement.js\";import{d as a}from\"../../../../chunks/Laserlines.glsl.js\";import{LaserLineRenderer as l}from\"../../support/LaserLineRenderer.js\";class c extends h{constructor(e){super(e.view),this._angleCutoff=a,this._style={},this._heightManifoldTarget=i(),this._heightManifoldEnabled=!1,this._intersectsLine=r.create(),this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._lineVerticalPlaneSegment=null,this._pathVerticalPlaneBuffers=null,this._pointDistanceLine=null,this.applyProps(e)}get testData(){return this.renderer}createResources(){this.ensureRenderer()}destroyResources(){this.disposeRenderer()}updateVisibility(){this.syncHeightManifold(),this.syncIntersectsLine(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance()}get angleCutoff(){return this._angleCutoff}set angleCutoff(e){this._angleCutoff!==e&&(this._angleCutoff=e,this.syncAngleCutoff())}get style(){return this._style}set style(e){this._style=e,this.syncStyle()}get heightManifoldTarget(){return this._heightManifoldEnabled?this._heightManifoldTarget:null}set heightManifoldTarget(t){e(t)?(s(this._heightManifoldTarget,t),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this.syncRenderer(),this.syncHeightManifold()}set intersectsWorldUpAtLocation(e){if(t(e))return void(this.intersectsLine=null);const i=this.view.renderCoordsHelper.worldUpAtPosition(e,d);this.intersectsLine=r.fromValues(e,i),this.intersectsLineInfinite=!0}get intersectsLine(){return this._intersectsLineEnabled?this._intersectsLine:null}set intersectsLine(t){e(t)?(r.copy(t,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this.syncIntersectsLine(),this.syncRenderer()}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){this._intersectsLineInfinite=e,this.syncIntersectsLineInfinite()}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(t){this._lineVerticalPlaneSegment=e(t)?r.copy(t):null,this.syncLineVerticalPlane(),this.syncRenderer()}get pathVerticalPlane(){return this._pathVerticalPlaneBuffers}set pathVerticalPlane(e){this._pathVerticalPlaneBuffers=e,this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncRenderer()}get pointDistanceLine(){return this._pointDistanceLine}set pointDistanceLine(t){this._pointDistanceLine=e(t)?{origin:n(t.origin),target:n(t.target)}:null,this.syncPointDistance(),this.syncRenderer()}syncRenderer(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||e(this._pointDistanceLine)||e(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()}ensureRenderer(){e(this.renderer)||(this.renderer=new l(this.view.renderCoordsHelper,void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))}syncStyle(){t(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&(this.renderer.intersectsLineRadius=this._style.intersectsLineRadius))}syncAngleCutoff(){t(this.renderer)||this.renderer.setParameterValues({angleCutoff:this._angleCutoff})}syncHeightManifold(){t(this.renderer)||(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget))}syncIntersectsLine(){t(this.renderer)||(this.renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this.renderer.intersectsLineSegment=this._intersectsLine))}syncIntersectsLineInfinite(){t(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)}syncPathVerticalPlane(){t(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=e(this._pathVerticalPlaneBuffers)&&this.visible,e(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}syncLineVerticalPlane(){t(this.renderer)||(this.renderer.lineVerticalPlaneEnabled=e(this._lineVerticalPlaneSegment)&&this.visible,e(this._lineVerticalPlaneSegment)&&(this.renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}syncPointDistance(){t(this.renderer)||(this.renderer.pointDistanceEnabled=e(this._pointDistanceLine)&&this.visible,e(this._pointDistanceLine)&&(this.renderer.pointDistanceOrigin=this._pointDistanceLine.origin,this.renderer.pointDistanceTarget=this._pointDistanceLine.target))}disposeRenderer(){e(this.renderer)&&this.view._stage&&(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)}}const d=i();export{c as LaserlineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import t from\"../../webgl-engine/lib/Object3D.js\";import r from\"../../webgl-engine/lib/Geometry.js\";import o from\"../../webgl-engine/lib/Layer.js\";import i from\"../../webgl-engine/lib/Texture.js\";import{VisualElement as c}from\"./VisualElement.js\";class n extends c{constructor(e){super(e.view),this._resources=null}get object(){return e(this._resources)?this._resources.object:null}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(s(this._resources))return;const e=this._resources.object,t=this.view._stage;e.geometries.forEach((e=>{t.remove(2,e.id)})),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),e.geometries.forEach((e=>{t.add(2,e)}))}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const s=new o(\"element\",{isPickable:!1});e.add(0,s),e.addToViewContent([s.id]);const r=new t({idHint:\"element\",castShadow:!1});this.createExternalResources(),this.createGeometries(r),r.geometries.forEach((s=>{e.add(2,s)})),this.forEachExternalResource((s=>{e.add(this._contentTypeFromResource(s),s)})),e.add(1,r),s.addObject(r),this.visible||r.setVisible(!1),this._resources={layer:s,object:r}}_contentTypeFromResource(e){return e instanceof r?2:e instanceof i?4:3}destroyResources(){const e=this.view._stage;!s(this._resources)&&e&&(e.remove(1,this._resources.object.id),e.remove(0,this._resources.layer.id),this.forEachExternalResource((s=>{e.remove(this._contentTypeFromResource(s),s.id),s.dispose()})),this._resources.object.geometries.forEach((s=>{e.remove(2,s.id)})),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){s(this._resources)||this._resources.object.setVisible(e)}}export{n as Object3DVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{k as i,n as r,f as s,g as a,b as o}from\"../../../../chunks/vec3.js\";import n from\"../../../../core/Handles.js\";import{i as l,t as u,s as h}from\"../../../../chunks/mat4.js\";import{a as d}from\"../../../../chunks/mat4f64.js\";import{c as _}from\"../../../../chunks/vec4.js\";import{sv3d as c}from\"../../support/stack.js\";import{GeometryData as m}from\"../../webgl-engine/lib/GeometryData.js\";import p from\"../../webgl-engine/lib/GeometryUtil.js\";import g from\"../../webgl-engine/lib/Geometry.js\";import{RibbonLineMaterial as f}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{ColorMaterial as M}from\"../../webgl-engine/materials/ColorMaterial.js\";import{f as O}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as y}from\"./Object3DVisualElement.js\";class z extends y{constructor(e){super(e),this._handles=new n,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=t(),this._up=t(),this._right=t(),this._transform=d(),this._renderOccluded=4,this._color=O(1,0,0,1),this._outlineColor=O(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=16,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){_(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){_(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:o}){this._maxSize=Math.min(i(t,e),i(t,o))/3,r(this._up,s(this._up,e,t)),r(this._right,s(this._right,o,t)),a(this._position,t),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new M(this.quadMaterialParameters,\"right-angle-quad\"),this._outlineMaterial=new f(this.outlineMaterialParameters,\"right-angle-quad-outline\"),this._handles.add(this.view.state.watch(\"camera\",(()=>{this._updateTransform()})))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalResource(e){e(this._quadMaterial),e(this._outlineMaterial)}createGeometries(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}_createQuadGeometry(e){const t=new g(this._quadGeometryData(this._up,this._right),\"right-angle-quad\");e.addGeometry(t,this._quadMaterial)}_createOutlineGeometry(e){if(0===this._outlineSize)return;const t=o(c.get(),this._up,this._right),i=new g(p.createPolylineGeometry([this._up,t,this._right]),\"right-angle-quad-outline\");e.addGeometry(i,this._outlineMaterial)}_updateTransform(t=this.object){const i=this.view.state.camera,r=this._size*i.computeScreenPixelSizeAt(this._position),s=Math.min(this._maxSize,r);l(this._transform),u(this._transform,this._transform,this._position),h(this._transform,this._transform,[s,s,s]),e(t)&&(t.objectTransformation=this._transform)}_quadGeometryData(e,t){const i=o(c.get(),e,t);return new m({position:{size:3,data:[0,0,0,...t,...e,...i]}},{position:new Uint32Array([0,1,2,1,2,3])})}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)}}export{z as RightAngleQuadVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch(\"ready\",(t=>{this._resourcesCreated&&(t?this._createResources():this._destroyResources())}))}applyProps(t){let e=!1;for(const s in t)s in this?\"attached\"===s?e=t[s]:this[s]=t[s]:console.error(\"Cannot set unknown property\",s);this.attached=e}destroy(){this.attached=!1}get attached(){return this._attached}set attached(t){t!==this._attached&&(this._attached=t,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.attached&&this.updateVisibility(t))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}export{t as VisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../core/compilerUtils.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{c as n}from\"../../../../chunks/mat4.js\";import{projectBuffer as o,computeLinearTransformation as r}from\"../../../../geometry/projection.js\";import{a as i}from\"../../../../chunks/mat4f64.js\";import{isDehydratedPoint as s}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{isSamplePosition as a,getElevationAtPoint as l}from\"../../support/ElevationProvider.js\";import{updateVertexAttributeAuxpos1w as c}from\"./graphicUtils.js\";function u(e,t,n,r,i,s,a,l,c,u,f){const m=E[f.mode];let d,p,g=0;if(o(e,t,n,r,c.spatialReference,i,l))return m.requiresAlignment(f)?(g=m.applyElevationAlignmentBuffer(r,i,s,a,l,c,u,f),d=s,p=a):(d=r,p=i),o(d,c.spatialReference,p,s,u.spatialReference,a,l)?g:void 0}function f(t,n,o,r,i){const c=(s(t)?t.z:a(t)?t.array[t.offset+2]:t[2])||0;switch(o.mode){case\"on-the-ground\":{const e=l(n,t,\"ground\")||0;return i&&(i.verticalDistanceToGround=0,i.sampledElevation=e),e}case\"relative-to-ground\":{const e=l(n,t,\"ground\")||0,s=o.geometryZWithOffset(c,r);return i&&(i.verticalDistanceToGround=s,i.sampledElevation=e),s+e}case\"relative-to-scene\":{const e=l(n,t,\"scene\")||0,s=o.geometryZWithOffset(c,r);return i&&(i.verticalDistanceToGround=s,i.sampledElevation=e),s+e}case\"absolute-height\":{const e=o.geometryZWithOffset(c,r);if(i){const o=l(n,t,\"ground\")||0;i.verticalDistanceToGround=e-o,i.sampledElevation=o}return e}default:return e(o.mode),0}}function m(e,t,n){return null==t||null==n?e.definedChanged:\"on-the-ground\"===t&&\"on-the-ground\"===n?e.staysOnTheGround:t===n||\"on-the-ground\"!==t&&\"on-the-ground\"!==n?v.UPDATE:e.onTheGroundChanged}function d(e){return\"relative-to-ground\"===e||\"relative-to-scene\"===e}function p(e){return\"absolute-height\"!==e}function g(e,t,o,i,s){const a=f(t,o,s,i,y);c(e,y.verticalDistanceToGround);const l=y.sampledElevation,u=n(h,e.objectTransformation);A[0]=t.x,A[1]=t.y,A[2]=a;return r(t.spatialReference,A,u,i.spatialReference)?e.objectTransformation=u:console.warn(\"Could not locate symbol object properly, it might be misplaced\"),l}var v;!function(e){e[e.NONE=0]=\"NONE\",e[e.UPDATE=1]=\"UPDATE\",e[e.RECREATE=2]=\"RECREATE\"}(v||(v={}));const E={\"absolute-height\":{applyElevationAlignmentBuffer:function(e,t,n,o,r,i,s,a){const l=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext;t*=3,o*=3;for(let i=0;i<r;++i){const r=e[t+0],i=e[t+1],s=e[t+2];n[o+0]=r,n[o+1]=i,n[o+2]=null==c?s+l:l,t+=3,o+=3}return 0},requiresAlignment:function(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},\"on-the-ground\":{applyElevationAlignmentBuffer:function(e,t,n,o,r,i){let s=0;const a=i.spatialReference;t*=3,o*=3;for(let l=0;l<r;++l){const r=e[t+0],l=e[t+1],c=e[t+2],u=i.getElevation(r,l,c,a,\"ground\")||0;s+=u,n[o+0]=r,n[o+1]=l,n[o+2]=u,t+=3,o+=3}return s/r},requiresAlignment:()=>!0},\"relative-to-ground\":{applyElevationAlignmentBuffer:function(e,t,n,o,r,i,s,a){let l=0;const c=a.calculateOffsetRenderUnits(s),u=a.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let s=0;s<r;++s){const r=e[t+0],s=e[t+1],a=e[t+2],m=i.getElevation(r,s,a,f,\"ground\")||0;l+=m,n[o+0]=r,n[o+1]=s,n[o+2]=null==u?a+m+c:m+c,t+=3,o+=3}return l/r},requiresAlignment:()=>!0},\"relative-to-scene\":{applyElevationAlignmentBuffer:function(e,t,n,o,r,i,s,a){let l=0;const c=a.calculateOffsetRenderUnits(s),u=a.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let s=0;s<r;++s){const r=e[t+0],s=e[t+1],a=e[t+2],m=i.getElevation(r,s,a,f,\"scene\")||0;l+=m,n[o+0]=r,n[o+1]=s,n[o+2]=null==u?a+m+c:m+c,t+=3,o+=3}return l/r},requiresAlignment:()=>!0}},h=i(),y={verticalDistanceToGround:0,sampledElevation:0},A=t();export{v as SymbolUpdateType,g as applyElevationAlignmentForHUD,u as applyPerVertexElevationAlignment,m as elevationModeChangeUpdateType,f as evaluateElevationAlignmentAtPoint,d as needsElevationUpdates2D,p as needsElevationUpdates3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst S={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7};export{S as DefaultTextureUnits};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{isPowerOfTwo as t}from\"../../../../core/mathUtils.js\";import r from\"../../../webgl/Texture.js\";const n=e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\");function o(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}const a=o(\"DXT1\"),i=o(\"DXT3\"),s=o(\"DXT5\");function l(e,t,n,o){const{textureData:a,internalFormat:i,width:s,height:l}=u(n,o);t.samplingMode=a.levels.length>1?9987:9729,t.hasMipmap=a.levels.length>1,t.internalFormat=i,t.width=s,t.height=l;const c=new r(e,t,a);return e.bindTexture(c,0),c}function u(e,r){const o=new Int32Array(e,0,31);if(542327876!==o[0])return n.error(\"Invalid magic number in DDS header\"),null;if(!(4&o[20]))return n.error(\"Unsupported format, must contain a FourCC code\"),null;const l=o[21];let u,c;switch(l){case a:u=8,c=33776;break;case i:u=16,c=33778;break;case s:u=16,c=33779;break;default:return n.error(\"Unsupported FourCC code:\",(m=l,String.fromCharCode(255&m,m>>8&255,m>>16&255,m>>24&255))),null}var m;let h=1,d=o[4],p=o[3];0==(3&d)&&0==(3&p)||(n.warn(\"Rounding up compressed texture size to nearest multiple of 4.\"),d=d+3&-4,p=p+3&-4);const g=d,f=p;let w,x;131072&o[2]&&!1!==r&&(h=Math.max(1,o[7])),1===h||t(d)&&t(p)||(n.warn(\"Ignoring mipmaps of non power of two sized compressed texture.\"),h=1);let C=o[1]+4;const D=[];for(let t=0;t<h;++t)x=(d+3>>2)*(p+3>>2)*u,w=new Uint8Array(e,C,x),D.push(w),C+=x,d=Math.max(1,d>>1),p=Math.max(1,p>>1);return{textureData:{type:\"compressed\",levels:D},internalFormat:c,width:g,height:f}}export{l as createDDSTexture,u as createDDSTextureData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../core/compilerUtils.js\";import{isArrayBuffer as t,isUint8Array as r}from\"../../../../core/typedArrayUtil.js\";import{isNone as i,isSome as s}from\"../../../../core/maybe.js\";import a from\"../../../../core/Error.js\";import{isBlobProtocol as o,isDataProtocol as n}from\"../../../../core/urlUtils.js\";import{createAbortController as h,create as l,onAbort as m,createAbortError as p}from\"../../../../core/promiseUtils.js\";import d from\"../../../../core/Evented.js\";import{isPowerOfTwo as u,nextHighestPowerOfTwo as c}from\"../../../../core/mathUtils.js\";import{loadImageAsync as g}from\"../../../../support/requestUtils.js\";import{requestImage as f}from\"../../../../support/requestImageUtils.js\";import{assert as w}from\"./Util.js\";import T from\"../../../webgl/Texture.js\";import{vertexCount as x}from\"../../../webgl/Util.js\";import{createQuadVAO as M}from\"./glUtil3D.js\";import{IdGen as y}from\"./IdGen.js\";import F from\"../../../webgl/FramebufferObject.js\";import D from\"../../../webgl/capabilities/isWebGL2Context.js\";import{createDDSTexture as b}from\"./DDSUtil.js\";class E{constructor(e,t,r){this.data=e,this.glTexture=null,this.powerOfTwoStretchInfo=null,this.loadingPromise=null,this.loadingController=null,this.events=new d,this.data=e,this.id=E.idGen.gen(t),this.params=r||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:10497,t:10497},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||1,this.estimatedTexMemRequired=E.estimateTexMemRequired(this.data,this.params),this.startPreload()}startPreload(){const e=this.data;i(e)||(e instanceof HTMLVideoElement?this.startPreloadVideoElement(e):e instanceof HTMLImageElement&&this.startPreloadImageElement(e))}startPreloadVideoElement(e){o(e.src)||\"auto\"===e.preload&&e.crossOrigin||(e.preload=\"auto\",e.crossOrigin=\"anonymous\",e.src=e.src)}startPreloadImageElement(e){n(e.src)||o(e.src)||e.crossOrigin||(e.crossOrigin=\"anonymous\",e.src=e.src)}static getDataDimensions(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}static estimateTexMemRequired(e,s){if(i(e))return 0;if(t(e)||r(e))return e.byteLength;const{width:a,height:o}=e instanceof Image||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?E.getDataDimensions(e):s;return(s.mipmap?4/3:1)*a*o*(s.components||4)||0}dispose(){this.data=void 0}get width(){return this.params.width}get height(){return this.params.height}createDescriptor(e){const t=this.params.mipmap&&!this.params.disableAnisotropy;return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:t?e.parameters.maxMaxAnisotropy:void 0}}load(e,a){if(s(this.glTexture))return this.glTexture;if(s(this.loadingPromise))return this.loadingPromise;const o=this.data;return i(o)?(this.glTexture=new T(e,this.createDescriptor(e),null),e.bindTexture(this.glTexture,0),this.glTexture):\"string\"==typeof o?this.loadFromURL(e,a,o):o instanceof Image?this.loadFromImageElement(e,a,o):o instanceof HTMLVideoElement?this.loadFromVideoElement(e,a,o):o instanceof ImageData||o instanceof HTMLCanvasElement?this.loadFromImage(e,o,a):(t(o)||r(o))&&this.params.encoding===E.DDS_ENCODING?this.loadFromDDSData(e,o):r(o)?this.loadFromPixelData(e,o):t(o)?this.loadFromPixelData(e,new Uint8Array(o)):null}get requiresFrameUpdates(){return this.data instanceof HTMLVideoElement}frameUpdate(e,t,r){if(!(this.data instanceof HTMLVideoElement)||i(this.glTexture))return r;if(this.data.readyState<2||r===this.data.currentTime)return r;if(s(this.powerOfTwoStretchInfo)){const{framebuffer:r,vao:i,sourceTexture:s}=this.powerOfTwoStretchInfo;s.setData(this.data),this.drawStretchedTexture(e,t,r,i,s,this.glTexture)}else{const{width:e,height:t}=this.data,{width:r,height:i}=this.glTexture.descriptor;e!==r||t!==i?this.glTexture.updateData(0,0,0,Math.min(e,r),Math.min(t,i),this.data):this.glTexture.setData(this.data)}return this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap(),this.data.currentTime}loadFromDDSData(e,t){return this.glTexture=b(e,this.createDescriptor(e),t,this.params.mipmap),e.bindTexture(this.glTexture,0),this.glTexture}loadFromPixelData(e,t){w(this.params.width>0&&this.params.height>0);const r=this.createDescriptor(e);return r.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,r.width=this.params.width,r.height=this.params.height,this.glTexture=new T(e,r,t),e.bindTexture(this.glTexture,0),this.glTexture}async loadAsync(e){const t=h();this.loadingController=t;const r=e(t.signal);this.loadingPromise=r;const i=()=>{this.loadingController===t&&(this.loadingController=null),this.loadingPromise===r&&(this.loadingPromise=null)};return r.then(i,i),r}loadFromURL(e,t,r){return this.loadAsync((async i=>{const s=await f(r,{signal:i});return this.loadFromImage(e,s,t)}))}loadFromImageElement(e,t,r){return r.complete?this.loadFromImage(e,r,t):this.loadAsync((async i=>{const s=await g(r,r.src,!1,i);return this.loadFromImage(e,s,t)}))}loadFromVideoElement(e,t,r){return r.readyState>=2?this.loadFromImage(e,r,t):this.loadFromVideoElementAsync(e,t,r)}loadFromVideoElementAsync(e,t,r){return this.loadAsync((i=>l(((o,n)=>{const h=()=>{r.removeEventListener(\"loadeddata\",l),r.removeEventListener(\"error\",d),s(u)&&u.remove()},l=()=>{r.readyState>=2&&(h(),o(this.loadFromImage(e,r,t)))},d=e=>{h(),n(e||new a(\"Failed to load video\"))};r.addEventListener(\"loadeddata\",l),r.addEventListener(\"error\",d);const u=m(i,(()=>d(p())))}))))}loadFromImage(e,t,r){const i=E.getDataDimensions(t);this.params.width=i.width,this.params.height=i.height;const s=this.createDescriptor(e);return s.pixelFormat=3===this.params.components?6407:6408,!this.requiresPowerOfTwo(e,s)||u(i.width)&&u(i.height)?(s.width=i.width,s.height=i.height,this.glTexture=new T(e,s,t),e.bindTexture(this.glTexture,0),this.glTexture):(this.glTexture=this.makePowerOfTwoTexture(e,t,i,s,r),e.bindTexture(this.glTexture,0),this.glTexture)}requiresPowerOfTwo(e,t){const r=33071,i=\"number\"==typeof t.wrapMode?t.wrapMode===r:t.wrapMode.s===r&&t.wrapMode.t===r;return!D(e.gl)&&(t.hasMipmap||!i)}makePowerOfTwoTexture(t,r,i,s,a){const{width:o,height:n}=i,h=c(o),l=c(n);let m;switch(s.width=h,s.height=l,this.params.powerOfTwoResizeMode){case 2:s.textureCoordinateScaleFactor=[o/h,n/l],m=new T(t,s),m.updateData(0,0,0,o,n,r);break;case 1:case null:case void 0:m=this.stretchToPowerOfTwo(t,r,s,a);break;default:e(this.params.powerOfTwoResizeMode)}return s.hasMipmap&&m.generateMipmap(),m}stretchToPowerOfTwo(e,t,r,i){const s=new T(e,r),a=new F(e,{colorTarget:0,depthStencilTarget:0},s),o=new T(e,{target:3553,pixelFormat:r.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!r.flipped,maxAnisotropy:8,preMultiplyAlpha:r.preMultiplyAlpha},t),n=M(e);return this.drawStretchedTexture(e,i,a,n,o,s),this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:n,sourceTexture:o,framebuffer:a}:(n.dispose(!0),o.dispose(),a.detachColorTexture(),e.bindFramebuffer(null),a.dispose()),s}drawStretchedTexture(e,t,r,i,s,a){e.bindFramebuffer(r);const o=e.getViewport();e.setViewport(0,0,a.descriptor.width,a.descriptor.height);const n=t.program;e.bindProgram(n),n.setUniform4f(\"color\",1,1,1,1),n.setUniform1i(\"tex\",0),e.bindTexture(s,0),e.bindVAO(i),e.setPipelineState(t.pipeline),e.drawArrays(5,0,x(i,\"geometry\")),e.bindFramebuffer(null),e.setViewport(o.x,o.y,o.width,o.height)}unload(){if(s(this.powerOfTwoStretchInfo)){const{framebuffer:e,vao:t,sourceTexture:r}=this.powerOfTwoStretchInfo;t.dispose(!0),r.dispose(),e.dispose(),this.glTexture=null,this.powerOfTwoStretchInfo=null}if(s(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null),s(this.loadingController)){const e=this.loadingController;this.loadingController=null,this.loadingPromise=null,e.abort()}this.events.emit(\"unloaded\")}}E.idGen=new y,E.DDS_ENCODING=\"image/vnd-ms.dds\";export default E;\n"],"sourceRoot":""}