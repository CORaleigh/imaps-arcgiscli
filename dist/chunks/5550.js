(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[5550,9647],{19647:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var s=i(56140),r=(i(95830),i(59472)),o=(i(36544),i(68055),i(65575)),a=i(79881),n=i(87566),l=i(60538),h=(i(10923),i(57002),i(86035),i(39105)),c=i(1721),u=i(87837),d=i(56700),p=i(90921),m=i(16137),y=i(43072),_=i(78910),v=i(57407),b=i(33716);let g=class extends((0,v.h)((0,_.q)((0,b.I)((0,m.Q)((0,p.K)((0,y.R)(d.Z))))))){constructor(e){super(e),this._visibilityHandles={},this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._visibilityWatcher=this._visibilityWatcher.bind(this)}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)}_writeLayers(e,t,i,s){const o=[];if(!e)return o;e.forEach((e=>{const t=(0,u.Nw)(e,s.webmap?s.webmap.getLayerJSONFromResourceInfo(e):null,s);(0,r.pC)(t)&&t.layerType&&o.push(t)})),t.layers=o}set portalItem(e){this._set("portalItem",e)}set visibilityMode(e){const t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e)),(0,h.resolve)(this)}loadAll(){return(0,c.GZ)(this,(e=>{e(this.layers)}))}layerAdded(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)}layerRemoved(e){const t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach((t=>{t!==e&&(t.visible=!1)}))}_enforceVisibility(e,t){if(!(0,o.vw)(this).initialized)return;const i=this.layers;let s=i.find((e=>e.visible));switch(e){case"exclusive":i.length&&!s&&(s=i.getItemAt(0),s.visible=!0),this._turnOffOtherLayers(s);break;case"inherited":i.forEach((e=>{e.visible=t}))}}_visibleWatcher(e){"inherited"===this.visibilityMode&&this.layers.forEach((t=>{t.visible=e}))}_visibilityWatcher(e,t,i,s){const r=s;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(r):this._isAnyLayerVisible()||(r.visible=!0);break;case"inherited":r.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some((e=>e.visible))}};(0,s._)([(0,a.Cb)()],g.prototype,"fullExtent",void 0),(0,s._)([(0,a.Cb)({json:{read:!1,write:{ignoreOrigin:!0}}})],g.prototype,"layers",void 0),(0,s._)([(0,l.c)("layers")],g.prototype,"_writeLayers",null),(0,s._)([(0,a.Cb)({type:["GroupLayer"]})],g.prototype,"operationalLayerType",void 0),(0,s._)([(0,a.Cb)({json:{origins:{"web-document":{read:!1,write:!1}}}})],g.prototype,"portalItem",null),(0,s._)([(0,a.Cb)()],g.prototype,"spatialReference",void 0),(0,s._)([(0,a.Cb)({json:{read:!1},readOnly:!0,value:"group"})],g.prototype,"type",void 0),(0,s._)([(0,a.Cb)({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{read:!1,write:!1}}}})],g.prototype,"visibilityMode",null),g=(0,s._)([(0,n.j)("esri.layers.GroupLayer")],g);const f=g},83873:(e,t,i)=>{"use strict";function s(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function r(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){let t=0,i=0;for(let s=0;s<e.length;s++){const r=e[s].size;"number"==typeof r&&(t+=r,i++)}return t/i}(e.stops):t}function o(e){const t=e&&e.renderer,i="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return i;const o="visualVariables"in t?function(e,t){if(!t)return e;const i=t.filter((e=>"size"===e.type)).map((t=>{const{maxSize:i,minSize:s}=t;return(r(i,e)+r(s,e))/2}));let s=0;const o=i.length;if(0===o)return e;for(let e=0;e<o;e++)s+=i[e];const a=Math.floor(s/o);return Math.max(a,e)}(i,t.visualVariables):i;if("simple"===t.type)return s(o,t.symbol);if("unique-value"===t.type){let e=o;return t.uniqueValueInfos.forEach((t=>{e=s(e,t.symbol)})),e}if("class-breaks"===t.type){let e=o;return t.classBreakInfos.forEach((t=>{e=s(e,t.symbol)})),e}return t.type,o}i.d(t,{k:()=>o})},65865:(e,t,i)=>{"use strict";i.d(t,{L:()=>f});var s=i(56140),r=(i(95830),i(59472)),o=i(36544),a=(i(68055),i(79881)),n=i(87566),l=(i(10923),i(57002),i(86035),i(82677)),h=i(35470),c=i(96071),u=i(77625),d=i(17387),p=i(17333),m=i(79710),y=i(5684),_=i(14286),v=i(46970),b=i(37694);const g=o.Z.getLogger("esri.views.interactive.GraphicManipulator");let f=class extends l.default{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new h.Z.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){"mesh"!==(0,r.U2)(e.geometry,"type")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e),this.attachSymbolChanged()):g.error("Mesh geometries are not supported")}get elevationInfo(){const e="elevationInfo"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=(0,v.vu)(this.graphic),i=e?e.offset:0;return new m.Z({mode:t,offset:i})}set focusedSymbol(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateGraphicSymbol())}set selected(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(e){const t=this._get("graphic");if(!1===t.visible)return null;const i=this._get("focusedSymbol"),s=(0,r.pC)(i)?i:t.symbol,o=t.geometry;return(0,r.Wi)(o)?null:"2d"===this.view.type?this._intersectDistance2D(this.view,e,o,s):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),(0,r.pC)(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),(0,r.pC)(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch("symbol",(e=>{(0,r.pC)(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&(0,r.pC)(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){(0,r.pC)(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&(0,r.pC)(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,i,s){if(s=s||(0,y.js)(i),(0,r.Wi)(s))return null;let o=this._circleCollisionCache;if("point"!==i.type||"simple-marker"!==s.type)return(0,b.D)(t,i,e)?1:null;if((0,r.Wi)(o)||!o.originalPoint.equals(i)){const t=i,r=e.spatialReference;if((0,p.Up)(t.spatialReference,r)){const e=(0,p.iV)(t,r);o={originalPoint:t.clone(),mapPoint:e,radiusPx:(0,c.F2)(s.size)},this._circleCollisionCache=o}}if((0,r.pC)(o)){const i=(0,c.md)(t,C),r=e.toScreen(o.mapPoint),a=o.radiusPx,n=r.x+(0,c.F2)(s.xoffset),l=r.y-(0,c.F2)(s.yoffset);return(0,_.j)(i,[n,l])<a*a?1:null}return null}_intersectDistance3D(e,t,i){const s=e.toMap(t,{include:[i]});return s&&(0,p.KC)(s,w,e.renderSpatialReference)?(0,d.k)(w,e.state.camera.eye):null}};(0,s._)([(0,a.Cb)({constructOnly:!0,nonNullable:!0})],f.prototype,"graphic",null),(0,s._)([(0,a.Cb)({readOnly:!0,dependsOn:["graphic"]})],f.prototype,"elevationInfo",null),(0,s._)([(0,a.Cb)({constructOnly:!0,nonNullable:!0})],f.prototype,"view",void 0),(0,s._)([(0,a.Cb)({value:null})],f.prototype,"focusedSymbol",null),(0,s._)([(0,a.Cb)({constructOnly:!0})],f.prototype,"layer",void 0),(0,s._)([(0,a.Cb)()],f.prototype,"interactive",void 0),(0,s._)([(0,a.Cb)()],f.prototype,"selectable",void 0),(0,s._)([(0,a.Cb)()],f.prototype,"grabbable",void 0),(0,s._)([(0,a.Cb)({value:!1})],f.prototype,"grabbing",null),(0,s._)([(0,a.Cb)()],f.prototype,"dragging",void 0),(0,s._)([(0,a.Cb)()],f.prototype,"hovering",null),(0,s._)([(0,a.Cb)({value:!1})],f.prototype,"selected",null),(0,s._)([(0,a.Cb)()],f.prototype,"cursor",void 0),f=(0,s._)([(0,n.j)("esri.views.interactive.GraphicManipulator")],f);const w=(0,u.c)(),C=(0,c.s1)()},37694:(e,t,i)=>{"use strict";i.d(t,{K:()=>n,D:()=>l});var s=i(59472),r=i(52937),o=(i(36348),i(93533)),a=i(83873);function n(e,t,i,a=new r.Z){let n;if("2d"===i.type)n=t*i.resolution;else if("3d"===i.type){const r=i.overlayPixelSizeInMapUnits(e),a=i.basemapSpatialReference;n=(0,s.pC)(a)&&!a.equals(i.spatialReference)?(0,o.c9)(a)/(0,o.c9)(i.spatialReference):t*r}const l=e.x-n,h=e.y-n,c=e.x+n,u=e.y+n,{spatialReference:d}=i;return a.xmin=Math.min(l,c),a.ymin=Math.min(h,u),a.xmax=Math.max(l,c),a.ymax=Math.max(h,u),a.spatialReference=d,a}function l(e,t,i){const r=i.toMap(e);return!(0,s.Wi)(r)&&n(r,(0,a.k)(),i,h).intersects(t)}const h=new r.Z},95550:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>X});var s=i(56140),r=(i(95830),i(36544)),o=(i(68055),i(79881)),a=i(51894),n=i(87566),l=(i(10923),i(57002),i(86035),i(39105)),h=i(93533),c=(i(40450),i(24258)),u=i(9200),d=i(90846),p=i(19401),m=i(90806),y=i(59691),_=i(80621),v=i(73032),b=i(61106),g=i(53817),f=i(93833),w=(i(36348),i(3766)),C=i(48142),S=i(49170),M=i(14071),O=(i(89771),i(5674)),L=i(88083),A=i(44190),D=(i(54734),i(15988)),x=i(17333),k=i(56888),G=i(98675),Z=i(70642),j=i(94394),V=i(19647),T=i(53640),U=i(76916),R=i(70573),E=i(65865);let q=class extends U.m{constructor(){super(...arguments),this._drawActive=!1,this._handles=new y.Z,this._graphicsLayer=new j.default,this._manipulatorLayer=new j.default,this._groupLayer=new V.default({layers:[this._graphicsLayer,this._manipulatorLayer],listMode:"hide",visible:!1}),this._vertices=[],this.deferCreation=!0,this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null}initialize(){(0,M.ME)("esri/core/t9n/Units").then((e=>{this.messages=e})),this._handles.add((0,w.qe)((async()=>{this.messages=await(0,M.ME)("esri/core/t9n/Units")})))}destroy(){this.detach(),this._draw&&(this._draw.destroy(),this._draw=null),this._handles&&(this._handles.destroy(),this._handles=null),this._graphicsLayer&&(this._graphicsLayer.destroy(),this._graphicsLayer=null),this._manipulatorLayer&&(this._manipulatorLayer.destroy(),this._manipulatorLayer=null)}set editable(e){this._set("editable",e),e||this._draw.reset()}activate(){this._drawActive||0!==this._vertices.length||this._startSketch()}onAttach(){const e=this.view;this._draw=new R.Z({view:e}),e.map.add(this._groupLayer),e.focus(),this._handles.add([(0,_.init)(this,["unit","geodesicDistanceThreshold","palette","messages"],(()=>{this._vertices.length>0&&this._updateGraphics()})),(0,_.init)(this,"view.spatialReference",(e=>{I(e)&&!(0,x.kR)()&&(0,x.zD)()}))]),this.create()}onDetach(){const{map:e}=this.view;this._draw.view=null,this._draw.destroy(),this._draw=null,e.remove(this._groupLayer),this._handles.removeAll(),this._graphicsLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null)}onShow(){this._groupLayer.visible=!0}onHide(){this._groupLayer.visible=!1}reset(){this._vertices=[],this._graphicsLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])}onInputEvent(e){"pointer-move"===e.type&&this._updateCursor()}_startSketch(){this._drawActive=!0;const e=this._draw.create("polyline",{mode:"click"});e.on(["vertex-add","vertex-update","vertex-remove","cursor-update","undo","redo"],(e=>this._updateSketch(e.vertices))),e.on("draw-complete",(()=>this._stopSketch()))}_stopSketch(){if(this._vertices.length<3)return this.reset(),void this._startSketch();this.manipulators.forEach((e=>{e.manipulator.interactive=!0})),this._drawActive=!1,this.complete()}_updateSketch(e){if(I(this.view.spatialReference)&&!(0,x.kR)())return;if(e.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._graphicsLayer.removeAll();this.create();const t=this.view.spatialReference;for(;this._vertices.length>e.length;){const{manipulatorId:e}=this._vertices.pop();this.manipulators.remove(e)}for(let i=this._vertices.length;i<e.length;i++){const[s,r]=e[i],o=W(new b.Z({x:s,y:r,spatialReference:t}),this.view,this._manipulatorLayer,this.palette),a=this.manipulators.add(o);(0,T.Xd)(o,((e,t)=>{t.next((0,T.Cf)(this.view)).next((0,T.a9)(e.graphic)).next((()=>{const t=e.graphic.geometry;this._vertices[i].coord=[t.x,t.y],this._updateGraphics()}))})),this._vertices.push({manipulatorId:a,coord:[s,r]})}const i=this._vertices.length-1,s=this._vertices[i],[r,o]=e[i];if(s.coord[0]!==r||s.coord[1]!==o){s.coord=[r,o];const e=new b.Z({x:r,y:o,spatialReference:t});this.manipulators.findById(s.manipulatorId).graphic.geometry=e}const a=this._drawActive?this._vertices[i].manipulatorId:null;this.manipulators.forEach((e=>{e.manipulator.interactive=null==a||e.id!==a})),this._updateGraphics()}_updateCursor(){this.cursor=this._drawActive?"crosshair":null}_updateGraphics(){this._graphicsLayer.removeAll();const e=function(e,t,i){if(2===e.length){const s=new f.Z({paths:e,spatialReference:t});let r;if(t.isGeographic)if((0,G.isSupported)(t))r=(0,G.geodesicDensify)(s,1e5);else{const e=(0,x.iV)(s,v.Z.WGS84),i=(0,G.geodesicDensify)(e,1e5);r=(0,x.iV)(i,t)}else if(t.isWebMercator)r=(0,Z.geodesicDensify)(s,1e5,"meters");else if((0,Z.planarLength)(s,"meters")>=i){const e=(0,x.iV)(s,v.Z.WGS84),i=(0,G.geodesicDensify)(e,1e5);r=(0,x.iV)(i,t)}else r=s;return{measurement:null,fillGeometry:null,outlineGeometry:r}}e.push(e[0]);const s=new f.Z({paths:[e],spatialReference:t}),r=new g.Z({rings:[e],spatialReference:t});let o,a,n=null,l=null;if(t.isGeographic)if((0,G.isSupported)(t)){if(n=(0,G.geodesicDensify)(s,1e5),l=(0,G.geodesicDensify)(r,1e5),l=(0,Z.simplify)(l),!l)return null;o=(0,G.geodesicLengths)([s],"meters")[0],a=(0,G.geodesicAreas)([l],"square-meters")[0]}else{const e=v.Z.WGS84,i=(0,x.iV)(s,e),h=(0,x.iV)(r,e);if(n=(0,G.geodesicDensify)(i,1e5),l=(0,G.geodesicDensify)(h,1e5),l=(0,Z.simplify)(l),!l)return null;o=(0,G.geodesicLengths)([i],"meters")[0],a=(0,G.geodesicAreas)([l],"square-meters")[0],n=(0,x.iV)(n,t),l=(0,x.iV)(l,t)}else if(t.isWebMercator){if(n=(0,Z.geodesicDensify)(s,1e5,"meters"),l=(0,Z.geodesicDensify)(r,1e5,"meters"),l=(0,Z.simplify)(l),!l)return null;o=(0,Z.geodesicLength)(s,"meters"),a=(0,Z.geodesicArea)(l,"square-meters")}else{const e=(0,Z.planarLength)(s,"meters");if(e>=i){const e=v.Z.WGS84,i=(0,x.iV)(s,e),h=(0,x.iV)(r,e);if(n=(0,G.geodesicDensify)(i,1e5),l=(0,G.geodesicDensify)(h,1e5),l=(0,Z.simplify)(l),!l)return null;o=(0,G.geodesicLengths)([i],"meters")[0],a=(0,G.geodesicAreas)([l],"square-meters")[0],n=(0,x.iV)(n,t),l=(0,x.iV)(l,t)}else{if(n=s,l=(0,Z.simplify)(r),!l)return null;o=e,a=(0,Z.planarArea)(l,"square-meters")}}return{measurement:{geometry:l,area:a,perimeter:o},fillGeometry:l,outlineGeometry:n}}(this._vertices.map((e=>e.coord)),this.view.spatialReference,this.geodesicDistanceThreshold);if(!e)return;const{measurement:t,fillGeometry:i,outlineGeometry:s}=e;this._set("measurement",t);const r=t?function(e,t,i){if(!t||!e)return null;const s={area:null,perimeter:null},{area:r,perimeter:o}=t;switch(i){case"metric":s.area=(0,k.ld)(e,r,"square-meters");break;case"imperial":s.area=(0,k.yc)(e,r,"square-meters");break;default:{const t=(0,h.En)(r,"square-meters",i);s.area=(0,k.VG)(e,t,i);break}}const a=function(e){switch(e){case"metric":return"metric";case"imperial":return"imperial";case"square-inches":return"inches";case"square-feet":return"feet";case"square-yards":return"yards";case"square-miles":return"miles";case"square-us-feet":return"us-feet";case"square-meters":return"meters";case"square-kilometers":return"kilometers";case"acres":return"imperial";case"ares":case"hectares":return"metric";case"square-millimeters":return"millimeters";case"square-centimeters":return"centimeters";case"square-decimeters":return"decimeters";default:return null}}(i);if(a)switch(a){case"metric":s.perimeter=(0,k.Rd)(e,o,"meters");break;case"imperial":s.perimeter=(0,k.Ud)(e,o,"meters");break;default:{const t=(0,h.En)(o,"meters",a);s.perimeter=(0,k.VG)(e,t,a);break}}else s.perimeter="";return s}(this.messages,t,this.unit):null;if(this._set("measurementLabel",r),!i&&!s)return;const{fillColor:o,pathColor:a,pathWidth:n}=this.palette,l=[];i&&l.push(new D.Z({geometry:i,symbol:new O.Z({color:o,outline:new C.Z({width:0})})})),s&&l.push(new D.Z({geometry:s,symbol:new C.Z({color:a,width:n})})),i&&r&&l.push(new D.Z({geometry:i.centroid,symbol:new A.Z({color:[255,255,255,1],font:new S.Z({size:14,family:"sans-serif"}),haloColor:[0,0,0,.5],haloSize:2,text:r.area})})),this._graphicsLayer.addMany(l)}};function W(e,t,i,s){const r=new L.Z({style:"circle",color:s.handleColor,size:s.handleWidth,outline:{type:"simple-line",width:0}}),o=new L.Z({style:"circle",color:s.handleColor,size:1.5*s.handleWidth,outline:{type:"simple-line",width:0}}),a=new D.Z({geometry:e,symbol:r});return new E.L({view:t,layer:i,graphic:a,focusedSymbol:o})}function I(e){if(!e)return!1;const{isGeographic:t,isWebMercator:i,isWGS84:s}=e;return t&&!s&&!(0,G.isSupported)(e)||!t&&!i}(0,s._)([(0,o.Cb)()],q.prototype,"cursor",void 0),(0,s._)([(0,o.Cb)({value:!0})],q.prototype,"editable",null),(0,s._)([(0,o.Cb)({type:Number})],q.prototype,"geodesicDistanceThreshold",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],q.prototype,"measurement",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],q.prototype,"measurementLabel",void 0),(0,s._)([(0,o.Cb)()],q.prototype,"messages",void 0),(0,s._)([(0,o.Cb)()],q.prototype,"palette",void 0),(0,s._)([(0,o.Cb)()],q.prototype,"unit",void 0),(0,s._)([(0,o.Cb)({constructOnly:!0})],q.prototype,"view",void 0),q=(0,s._)([(0,n.j)("esri.widgets.AreaMeasurement2D.AreaMeasurement2DTool")],q);const H=q;var z=i(65867),P=i(19539);const N={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:2,pathColor:[255,128,0,1],fillColor:[255,128,0,.3]},B=r.Z.getLogger("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel");let F=class extends P.V{constructor(e){super(e),this.supportedViewType="2d",this._handles=new y.Z,this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null,this.palette=N,this.tool=null}initialize(){this._handles.add([(0,_.init)(this,["unit","palette","geodesicDistanceThreshold"],((e,t,i)=>{this.tool&&(this.tool[i]=e)}))])}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}get state(){var e;return this.isDisabled?"disabled":function(e){return null!=e&&(!I(e)||(0,x.Gb)())}(null==(e=this.view)?void 0:e.spatialReference)?this.tool&&this.tool.measurement?this.tool.active?"measuring":"measured":"ready":"disabled"}get unit(){return this._validateUnit(this.defaultUnit)}set unit(e){void 0!==e?this._override("unit",this._validateUnit(e)):this._clearOverride("unit")}get unitOptions(){return h.fN}set unitOptions(e){void 0!==e?this._override("unitOptions",this._validateUnits(e)):this._clearOverride("unitOptions")}start(){return this.createTool()}clear(){this.removeTool()}newMeasurement(){(0,l.ignoreAbortErrors)(this.start())}clearMeasurement(){this.clear()}createToolParams(){return{toolConstructor:H,constructorArguments:()=>({geodesicDistanceThreshold:this.geodesicDistanceThreshold,palette:this.palette,unit:this.unit})}}logUnsupportedError(){B.error("AreaMeasurement2D widget is not implemented for SceneView")}logError(...e){B.error(...e)}_validateUnit(e){return-1!==this.unitOptions.indexOf(e)?e:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]}_validateUnits(e=[]){const t=e.filter((e=>-1!==h.fN.indexOf(e)));return 0===t.length?h.fN.slice():t}};(0,s._)([(0,o.Cb)(z.Y)],F.prototype,"defaultUnit",void 0),(0,s._)([(0,o.Cb)({type:Number})],F.prototype,"geodesicDistanceThreshold",void 0),(0,s._)([(0,o.Cb)({readOnly:!0,aliasOf:"tool.measurement"})],F.prototype,"measurement",void 0),(0,s._)([(0,o.Cb)({readOnly:!0,aliasOf:"tool.measurementLabel"})],F.prototype,"measurementLabel",void 0),(0,s._)([(0,o.Cb)()],F.prototype,"palette",void 0),(0,s._)([(0,o.Cb)({dependsOn:["isDisabled","tool.measurement","tool.active","view.spatialReference"],readOnly:!0})],F.prototype,"state",null),(0,s._)([(0,o.Cb)({constructOnly:!0,readOnly:!0})],F.prototype,"tool",void 0),(0,s._)([(0,o.Cb)({type:String,dependsOn:["unitOptions","defaultUnit"]})],F.prototype,"unit",null),(0,s._)([(0,o.Cb)({type:[String]})],F.prototype,"unitOptions",null),F=(0,s._)([(0,n.j)("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel")],F);const K=F,$="esri-area-measurement-2d__measurement-item",J="esri-area-measurement-2d__measurement-item-title";let Q=class extends m.default{constructor(e,t){super(e,t),this.active=null,this.iconClass="esri-icon-measure-area",this.label=void 0,this.messages=null,this.messagesUnits=null,this.unit=null,this.unitOptions=null,this.view=null,this.viewModel=new K}render(){const{id:e,viewModel:t,visible:i}=this,{active:s,isSupported:r,measurementLabel:o,state:a,unit:n,unitOptions:l}=t,c="disabled"===a,u="ready"===a,d="measuring"===a||"measured"===a,{messages:m,messagesUnits:y}=this,_=s&&u?(0,p.j)("section",{key:"hint",class:"esri-area-measurement-2d__hint"},(0,p.j)("p",{class:"esri-area-measurement-2d__hint-text"},m.hint)):null,v=r?null:(0,p.j)("section",{key:"unsupported",class:"esri-area-measurement-2d__panel--error"},(0,p.j)("p",null,m.unsupported)),b=(e,t,i)=>t?(0,p.j)("div",{key:`${i}-enabled`,class:$},(0,p.j)("span",{class:J},e),(0,p.j)("span",{class:"esri-area-measurement-2d__measurement-item-value"},t)):(0,p.j)("div",{key:`${i}-disabled`,class:this.classes($,"esri-area-measurement-2d__measurement-item--disabled"),"aria-disabled":"true"},(0,p.j)("span",{class:J},e)),g=d?(0,p.j)("section",{key:"measurement",class:"esri-area-measurement-2d__measurement"},b(m.area,o.area,"area"),b(m.perimeter,o.perimeter,"perimeter")):null,f=`${e}__units`,w=(0,p.j)("section",{key:"units",class:"esri-area-measurement-2d__units"},(0,p.j)("label",{class:"esri-area-measurement-2d__units-label",for:f},m.unit),(0,p.j)("div",{class:"esri-area-measurement-2d__units-select-wrapper"},(0,p.j)("select",{class:"esri-area-measurement-2d__units-select esri-select",id:f,onchange:this._changeUnit,bind:this,value:n},l.map((e=>{var t;return(0,p.j)("option",{key:e,value:e},(0,h.ZO)(e)?y.systems[e]:null==(t=y.units[e])?void 0:t.pluralCapitalized)}))))),C=d?(0,p.j)("div",{key:"settings",class:"esri-area-measurement-2d__settings"},w):null,S=!r||s&&!d?null:(0,p.j)("div",{class:"esri-area-measurement-2d__actions"},(0,p.j)("button",{disabled:c,class:this.classes("esri-button esri-button--secondary","esri-area-measurement-2d__clear-button",c&&"esri-button--disabled"),bind:this,onclick:this._newMeasurement,title:m.newMeasurement,type:"button","aria-label":m.newMeasurement},m.newMeasurement)),M=i?(0,p.j)("div",{class:"esri-area-measurement-2d__container"},v,_,C,g,S):null;return(0,p.j)("div",{class:this.classes("esri-area-measurement-2d","esri-widget","esri-widget--panel")},M)}_newMeasurement(){(0,l.ignoreAbortErrors)(this.viewModel.start())}_changeUnit(e){const t=e.target,i=t.options[t.selectedIndex];i&&(this.viewModel.unit=i.value)}};(0,s._)([(0,a.B)("viewModel.active"),(0,d.G)()],Q.prototype,"active",void 0),(0,s._)([(0,o.Cb)()],Q.prototype,"iconClass",void 0),(0,s._)([(0,o.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Q.prototype,"label",void 0),(0,s._)([(0,o.Cb)(),(0,d.G)(),(0,u.H)("esri/widgets/AreaMeasurement2D/t9n/AreaMeasurement2D")],Q.prototype,"messages",void 0),(0,s._)([(0,o.Cb)(),(0,d.G)(),(0,u.H)("esri/core/t9n/Units")],Q.prototype,"messagesUnits",void 0),(0,s._)([(0,a.B)("viewModel.unit")],Q.prototype,"unit",void 0),(0,s._)([(0,a.B)("viewModel.unitOptions")],Q.prototype,"unitOptions",void 0),(0,s._)([(0,a.B)("viewModel.view")],Q.prototype,"view",void 0),(0,s._)([(0,o.Cb)({type:K}),(0,d.G)(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurementLabel"])],Q.prototype,"viewModel",void 0),(0,s._)([(0,a.B)("viewModel.visible"),(0,d.G)()],Q.prototype,"visible",void 0),(0,s._)([(0,c.h)()],Q.prototype,"_newMeasurement",null),(0,s._)([(0,c.h)()],Q.prototype,"_changeUnit",null),Q=(0,s._)([(0,n.j)("esri.widgets.AreaMeasurement2D")],Q);const X=Q},19539:(e,t,i)=>{"use strict";i.d(t,{V:()=>d});var s=i(56140),r=(i(95830),i(36544),i(68055),i(79881)),o=i(87566),a=i(32656),n=(i(10923),i(57002),i(86035),i(39105)),l=i(82677),h=i(59691),c=i(80621),u=i(17519);let d=class extends l.default{constructor(e){super(e),this.tool=null,this._baseHandles=new h.Z,this._loggedUnsupportedErrorOnce=!1,this._creationAbortController=null,e&&null!=e.visible&&(this.visible=e.visible)}initialize(){this._baseHandles.add((0,c.init)(this,["view.ready","isSupported"],(()=>{this.view&&this.view.ready&&!this.isSupported?this._loggedUnsupportedErrorOnce||(this.logUnsupportedError(),this._loggedUnsupportedErrorOnce=!0):this._loggedUnsupportedErrorOnce=!1})))}destroy(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null}get isSupported(){return!this.view||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this._baseHandles.remove(t),e&&this._baseHandles.add(e.tools.on("change",(e=>{if(this.tool)for(const t of e.removed)if(this.tool===t){t.destroyed||t.destroy(),this._set("tool",null);break}})),t)}set visible(e){this._set("visible",e),this.tool&&(this.tool.visible=e),!e&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)}get active(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active}get isDisabled(){return!this.view||!this.view.ready||!this.isSupported}get creatingTool(){return!!this._creationAbortController}async createTool(){if(this.removeTool(),!this.isSupported)return(0,n.reject)(new a.Z("tool:create","The view does not support the tool"));const e=this.createToolParams(),t=()=>{const t=(0,u.J1)(e.constructorArguments);return{visible:this.visible,...t}},i=new AbortController,s=i.signal;this._creationAbortController=i;const r=()=>{i===this._creationAbortController&&(this._creationAbortController=null)};try{const i=await this.view.createTool(e.toolConstructor,t,{signal:s});this._set("tool",i),r()}catch(e){throw r(),e}}removeTool(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;const e=this.tool;e&&(this.view&&this.view.tools&&this.view.tools.remove(e),e.destroyed||e.destroy(),this._set("tool",null))}};(0,s._)([(0,r.Cb)({constructOnly:!0})],d.prototype,"tool",void 0),(0,s._)([(0,r.Cb)({dependsOn:["view.type"]})],d.prototype,"isSupported",null),(0,s._)([(0,r.Cb)({value:null})],d.prototype,"view",null),(0,s._)([(0,r.Cb)({type:Boolean,value:!0})],d.prototype,"visible",null),(0,s._)([(0,r.Cb)({dependsOn:["_creationAbortController","tool.active"]})],d.prototype,"active",null),(0,s._)([(0,r.Cb)({dependsOn:["view","view.ready","isSupported"]})],d.prototype,"isDisabled",null),(0,s._)([(0,r.Cb)()],d.prototype,"_creationAbortController",void 0),(0,s._)([(0,r.Cb)({readOnly:!0,dependsOn:["_creationAbortController"]})],d.prototype,"creatingTool",null),d=(0,s._)([(0,o.j)("esri.widgets.support.InteractiveToolViewModel")],d)}}]);
//# sourceMappingURL=5550.js.map