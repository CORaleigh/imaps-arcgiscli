{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/symbols/cim/Rasterizer.js","webpack://imaps/./node_modules/@arcgis/core/symbols/cim/SDFHelper.js","webpack://imaps/./node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js","webpack://imaps/./node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","webpack://imaps/./node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","webpack://imaps/./node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js"],"names":["this","_rasterizationCanvas","e","s","o","document","createElement","type","r","a","n","style","size","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","cap","m","l","f","frame","xmin","ymax","xmax","ymin","markerPlacement","t","c","h","p","y","u","width","height","i","getContext","ImageData","putImageData","setAttribute","drawImage","getImageData","Uint8Array","data","oldColor","length","newColor","Math","round","Uint8ClampedArray","symbolLayers","markerGraphics","geometry","symbol","geom","asFill","rings","paths","floor","max","x","M","g","push","Array","sqrt","d","S","v","b","angleToLine","async","N","error","primitiveOverrides","valueExpressionInfo","expression","spatialReference","fields","then","primitiveName","propertyName","value","angleAlignment","enable","k","O","C","P","L","X","I","w","color","JSON","stringify","toString","templateHash","materialHash","cim","materialOverrides","colorLocked","$","R","angle","offsetX","offsetY","scaleX","effects","tintColor","url","colorSubstitutions","rotation","filter","indexOf","separation","lineSymbol","A","capStyle","joinStyle","miterLimit","isOutline","join","referenceWidth","zOrder","Y","name","isDashed","stepY","gridAngle","scaleSymbolsProportionally","alignment","anchorPoint","isAbsoluteAnchorPoint","anchorPointUnits","outlineColor","outlineWidth","frameHeight","rotateClockwise","referenceSize","sizeRatio","J","z","underline","strikethrough","toLowerCase","weight","fontStyleName","font","family","fontFamilyName","decoration","haloSymbol","haloSize","H","Number","fontName","horizontalAlignment","verticalAlignment","text","textString","textCase","outlineSize","billboardMode3D","depth3D","respectFrame","clippingPath","parseInt","substr","NaN","toRgba","call","$view","geometryType","fn","j","parse","_textRasterizationCanvas","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","computeTextWidth","renderedLineHeight","pixelRatio","renderedHaloSize","halo","renderedWidth","renderedHeight","fillStyle","slice","haloStyle","textAlign","renderHalo","globalCompositeOperation","fillText","premultiplyColors","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","lineWidth","strokeText","textBaseline","measureText","cos","PI","sin","Legend","Preview","targetSize","scaleFactor","fill","legend","canvasPaths","preview","stroke","analyzedCIM","hash","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","_pictureMarkerCache","centroid","analyzeCIMSymbol","Object","keys","map","alias","attributes","rasterizeCIMSymbol","fetchPictureMarkerResource","get","responseType","signal","set","_getRasterizedResource","rotateClockWise","rasterizedResource","getSymbolImage","min","createImageData","rasterizedImage","_imageDataToCanvas","save","translate","rotate","restore","imageData","anchorPosition","_imageDataCanvas","_getPictureResource","_rasterizePictureResource","_embedCIMLayerInVectorMarker","rasterizeJSONResource","_rasterizeTextResource","preserveOutlineWidth","has","window","devicePixelRatio","rasterizeText","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","beginPath","moveTo","lineTo","closePath","apply","_imageTo32Array","maxSize","feature","fieldMap","node","opacity","clone","rasterizeCIMSymbolAsync","scale","ceil","Image","src","toDataURL","appendChild","referencesGeometry","transform","hasZ","hasM","repurposeFeature","evaluate","$feature","warn"],"mappings":"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","file":"chunks/7171.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{resampleHermite as e}from\"./utils.js\";import r from\"./Rect.js\";import{SymbolHelper as t,CIMSymbolHelper as a}from\"./CIMSymbolHelper.js\";import{getSDFInfo as n,buildSDF as i}from\"./SDFHelper.js\";export default class{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===e.type||\"esriSFS\"===e.type){const[r,a,n]=t.rasterizeSimpleFill(this._rasterizationCanvas,e.style,s);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===e.type||\"esriSLS\"===e.type){const[r,a,n]=t.rasterizeSimpleLine(e.style,e.cap);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===e.type||\"esriSMS\"===e.type||\"line-marker\"===e.type?(m=a.fromSimpleMarker(e),f=n(m)):\"CIMHatchFill\"===e.type?(m=a.fromCIMHatchFill(e),l=new r(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):e.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===e.markerPlacement.type?(m=a.fromCIMInsidePolygon(e),l=new r(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=e,f=n(m)),f&&!o){const[e,r,t]=i(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=a.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(r,t,a,n){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=r,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext(\"2d\");a instanceof ImageData?i.putImageData(a,0,0):(a.setAttribute(\"width\",`${r}px`),a.setAttribute(\"height\",`${t}px`),i.drawImage(a,0,0,r,t));const s=i.getImageData(0,0,r,t),o=new Uint8Array(s.data);if(n)for(const e of n)if(e&&e.oldColor&&4===e.oldColor.length&&e.newColor&&4===e.newColor.length){const[r,t,a,n]=e.oldColor,[i,s,m,l]=e.newColor;if(r===i&&t===s&&a===m&&n===l)continue;for(let e=0;e<o.length;e+=4)r===o[e]&&t===o[e+1]&&a===o[e+2]&&n===o[e+3]&&(o[e]=i,o[e+1]=s,o[e+2]=m,o[e+3]=l)}let m;for(let e=0;e<o.length;e+=4)m=o[e+3]/255,o[e]=o[e]*m,o[e+1]=o[e+1]*m,o[e+2]=o[e+2]*m;let l=o,f=r,c=t;const h=512;if(f>=h||c>=h){const a=f/c;a>1?(f=h,c=Math.round(h/a)):(c=h,f=Math.round(h*a)),l=new Uint8Array(4*f*c);const n=new Uint8ClampedArray(l.buffer);e(o,r,t,n,f,c,!1)}return{size:[r,t],image:new Uint32Array(l.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isExtent as t}from\"../../geometry/support/jsonUtils.js\";import n from\"./Rect.js\";import{packFloatRGBA as o}from\"./packingUtils.js\";function r(t){if(!t)return null;switch(t.type){case\"CIMPointSymbol\":{const n=t.symbolLayers;return n&&1===n.length?r(n[0]):null}case\"CIMVectorMarker\":{const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.geometry;if(!r)return null;const l=o.symbol;return!l||\"CIMPolygonSymbol\"!==l.type&&\"CIMLineSymbol\"!==l.type?null:{geom:r,asFill:\"CIMPolygonSymbol\"===l.type}}case\"sdf\":return{geom:t.geom,asFill:t.asFill}}return null}function l(t){const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.symbol;return!r||\"CIMPolygonSymbol\"!==r.type&&\"CIMLineSymbol\"!==r.type?null:r}function e(t){let n=1/0,o=-1/0,r=1/0,l=-1/0;for(const e of t)for(const t of e)t[0]<n&&(n=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>l&&(l=t[1]);return[n,r,o,l]}function i(n){return n?n.rings?e(n.rings):n.paths?e(n.paths):t(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function s(t,n,o,r,l){const[e,i,s,f]=t;if(s<e||f<i)return[0,0,0];const m=s-e,a=f-i,c=Math.floor(31.5),u=(128-2*(c+1))/Math.max(m,a),y=Math.round(m*u)+2*c,h=Math.round(a*u)+2*c;let x=1;if(n){x=h/u/(n.ymax-n.ymin)}let M=0,g=0;if(r)if(l){if(n&&o&&n.ymax-n.ymin>0){const t=(n.xmax-n.xmin)/(n.ymax-n.ymin);M=r.x/(o*t),g=r.y/o}}else M=r.x,g=r.y;M=.5*(n.xmax+n.xmin)+M*(n.xmax-n.xmin),g=.5*(n.ymax+n.ymin)+g*(n.ymax-n.ymin),M-=e,g-=i,M*=u,g*=u,M+=c,g+=c;return[x,M/y-.5,-(g/h-.5)]}function f(t){const o=(r=t.geom)?r.rings?r.rings:r.paths?r.paths:void 0!==r.xmin&&void 0!==r.ymin&&void 0!==r.xmax&&void 0!==r.ymax?[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]:null:null;var r;const l=function(t){let o=1/0,r=-1/0,l=1/0,e=-1/0;for(const n of t)for(const t of n)t[0]<o&&(o=t[0]),t[0]>r&&(r=t[0]),t[1]<l&&(l=t[1]),t[1]>e&&(e=t[1]);return new n(o,l,r-o,e-l)}(o),e=Math.floor(31.5),i=(128-2*(e+1))/Math.max(l.width,l.height),s=Math.round(l.width*i)+2*e,f=Math.round(l.height*i)+2*e,a=[];for(const n of o)if(n&&n.length>1){const o=[];for(const t of n){let[n,r]=t;n-=l.x,r-=l.y,n*=i,r*=i,n+=e-.5,r+=e-.5,o.push([n,r])}if(t.asFill){const t=o.length-1;o[0][0]===o[t][0]&&o[0][1]===o[t][1]||o.push(o[0])}a.push(o)}const c=function(t,n,o,r){const l=n*o,e=new Array(l),i=r*r+1;for(let t=0;t<l;++t)e[t]=i;for(const l of t){const t=l.length;for(let i=1;i<t;++i){const t=l[i-1],s=l[i];let f,m,a,c;t[0]<s[0]?(f=t[0],m=s[0]):(f=s[0],m=t[0]),t[1]<s[1]?(a=t[1],c=s[1]):(a=s[1],c=t[1]);let u=Math.floor(f)-r,y=Math.floor(m)+r,h=Math.floor(a)-r,x=Math.floor(c)+r;u<0&&(u=0),y>n&&(y=n),h<0&&(h=0),x>o&&(x=o);const M=s[0]-t[0],g=s[1]-t[1],p=M*M+g*g;for(let r=u;r<y;r++)for(let l=h;l<x;l++){let i,f,m=(r-t[0])*M+(l-t[1])*g;m<0?(i=t[0],f=t[1]):m>p?(i=s[0],f=s[1]):(m/=p,i=t[0]+m*M,f=t[1]+m*g);const a=(r-i)*(r-i)+(l-f)*(l-f),c=(o-l-1)*n+r;a<e[c]&&(e[c]=a)}}}for(let t=0;t<l;++t)e[t]=Math.sqrt(e[t]);return e}(a,s,f,e);return t.asFill&&function(t,n,o,r,l){for(const e of t){const t=e.length;for(let i=1;i<t;++i){const t=e[i-1],s=e[i];let f,m,a,c;t[0]<s[0]?(f=t[0],m=s[0]):(f=s[0],m=t[0]),t[1]<s[1]?(a=t[1],c=s[1]):(a=s[1],c=t[1]);let u=Math.floor(f),y=Math.floor(m)+1,h=Math.floor(a),x=Math.floor(c)+1;u<r&&(u=r),y>n-r&&(y=n-r),h<r&&(h=r),x>o-r&&(x=o-r);for(let e=h;e<x;++e){if(t[1]>e==s[1]>e)continue;const i=(o-e-1)*n;for(let n=u;n<y;++n)n<(s[0]-t[0])*(e-t[1])/(s[1]-t[1])+t[0]&&(l[i+n]=-l[i+n]);for(let t=r;t<u;++t)l[i+t]=-l[i+t]}}}}(a,s,f,e,c),[m(c,e),s,f]}function m(t,n){const r=2*n,l=t.length,e=new Uint8Array(4*l);for(let n=0;n<l;++n){const l=.5-t[n]/r;o(l,e,4*n)}return e}export{f as buildSDF,i as getExtent,r as getSDFInfo,s as getSDFMetrics,l as getSDFSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{numericHash as e}from\"../../core/string.js\";import t from\"../../core/Logger.js\";import{all as i}from\"../../core/promiseUtils.js\";import{createRendererExpression as o,ArcadeExpression as r}from\"../../support/arcadeOnDemand.js\";import n from\"../../Color.js\";import{pt2px as a}from\"../../core/screenUtils.js\";import{fromCIMColor as l,_adjustTextCase as s}from\"./utils.js\";import c from\"../../views/2d/arcade/callExpressionWithFeature.js\";import{CIMSymbolHelper as f,OverrideHelper as m}from\"./CIMSymbolHelper.js\";import{getExtent as p,getSDFMetrics as u}from\"./SDFHelper.js\";const y=t.getLogger(\"esri.symbols.cim.cimAnalyzer\");function h(e){switch(e){case\"Butt\":return 0;case\"Square\":return 2;case\"Round\":default:return 1}}function g(e){switch(e){case\"Bevel\":return 0;case\"Miter\":return 2;case\"Round\":default:return 1}}function d(e){switch(e){case\"Left\":default:return\"left\";case\"Right\":return\"right\";case\"Center\":return\"center\";case\"Justify\":return\"justify\"}}function S(e){switch(e){case\"Top\":default:return\"top\";case\"Center\":return\"middle\";case\"Baseline\":return\"baseline\";case\"Bottom\":return\"bottom\"}}function v(e,t,i,o){let r;e[t]?r=e[t]:(r={},e[t]=r),r[i]=o}function b(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}async function N(e,t,r,n){const a=r||[];if(!e)return a;let l,s;const c={};if(\"CIMSymbolReference\"!==e.type)return y.error(\"Expect cim type to be 'CIMSymbolReference'\"),a;if(l=e.symbol,s=e.primitiveOverrides,s){const e=[];for(const i of s){const r=i.valueExpressionInfo;if(r&&t){const n=r.expression,a=o(n,t.spatialReference,t.fields).then((e=>{e&&v(c,i.primitiveName,i.propertyName,e)}));e.push(a)}else null!=i.value&&v(c,i.primitiveName,i.propertyName,i.value)}await i(e)}switch(l.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":!function(e,t,i,o,r,n){if(!e)return;const a=e.symbolLayers;if(!a)return;let l;const s=f.getSize(e);\"CIMPointSymbol\"===e.type&&\"Map\"===e.angleAlignment&&(l=1);let c=a.length;for(;c--;){const f=a[c];if(!f||!1===f.enable)continue;const p=[];switch(m.findApplicableOverrides(f,t,p),f.type){case\"CIMSolidFill\":k(f,i,p,o,r);break;case\"CIMPictureFill\":O(f,i,p,o,r);break;case\"CIMHatchFill\":C(f,i,p,o,r);break;case\"CIMGradientFill\":P(f,i,p,o,r);break;case\"CIMSolidStroke\":L(f,i,p,o,r,\"CIMPolygonSymbol\"===e.type,s);break;case\"CIMPictureStroke\":M(f,i,p,o,r,\"CIMPolygonSymbol\"===e.type,s);break;case\"CIMGradientStroke\":X(f,i,p,o,r,\"CIMPolygonSymbol\"===e.type,s);break;case\"CIMCharacterMarker\":if(I(f,i,p,o,r))break;break;case\"CIMPictureMarker\":if(I(f,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(l=b(f)),x(f,i,p,o,r,l,s);break;case\"CIMVectorMarker\":if(I(f,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(l=b(f)),w(f,i,p,o,r,l,s,n);break;default:y.error(\"Cannot analyze CIM layer\",f.type)}}}(l,s,c,t,a,n)}return a}function k(t,i,o,r,n){const a=t.primitiveName,s=l(t.color),c=e(JSON.stringify(t)).toString();n.push({type:\"fill\",templateHash:c,materialHash:0===o.length?c:()=>c,cim:t,materialOverrides:null,colorLocked:t.colorLocked,color:$(a,i,\"Color\",r,s,R),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t.effects})}function O(t,i,o,r,n){const a=t.primitiveName,s=t.tintColor?l(t.tintColor):{r:255,g:255,b:255,a:1},c=e(JSON.stringify(t)).toString(),f=e(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString();n.push({type:\"fill\",templateHash:c,materialHash:0===o.length?f:()=>f,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:$(a,i,\"TintColor\",r,s,R),height:$(a,i,\"Height\",r,t.height),scaleX:$(a,i,\"ScaleX\",r,t.scaleX),angle:$(a,i,\"Rotation\",r,t.rotation),offsetX:$(a,i,\"OffsetX\",r,t.offsetX),offsetY:$(a,i,\"OffsetY\",r,t.offsetY)})}function C(t,i,o,r,n){const a=[\"Rotation\",\"OffsetX\",\"OffsetY\"],l=o.filter((e=>e.primitiveName!==t.primitiveName&&-1===a.indexOf(e.propertyName))),s=t.primitiveName,c=e(JSON.stringify(t)).toString(),f=e(`${t.separation}${JSON.stringify(t.lineSymbol)}`).toString();n.push({type:\"fill\",templateHash:c,materialHash:0===o.length?f:A(f,i,l,r),cim:t,materialOverrides:l,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:$(s,i,\"Separation\",r,t.separation),scaleX:1,angle:$(s,i,\"Rotation\",r,t.rotation),offsetX:$(s,i,\"OffsetX\",r,t.offsetX),offsetY:$(s,i,\"OffsetY\",r,t.offsetY)})}function P(t,i,o,r,n){const a=e(JSON.stringify(t)).toString();n.push({type:\"fill\",templateHash:a,materialHash:0===o.length?a:A(a,i,o,r),cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function L(t,i,o,r,n,a,s){const c=e(JSON.stringify(t)).toString(),f=t.primitiveName,m=l(t.color),p=void 0!==t.width?t.width:4,u=h(t.capStyle),y=g(t.joinStyle),d=t.miterLimit;n.push({type:\"line\",templateHash:c,materialHash:0===o.length?c:()=>c,cim:t,materialOverrides:null,isOutline:a,colorLocked:t.colorLocked,effects:t.effects,color:$(f,i,\"Color\",r,m,R),width:$(f,i,\"Width\",r,p),cap:$(f,i,\"CapStyle\",r,u),join:$(f,i,\"JoinStyle\",r,y),miterLimit:$(f,i,\"MiterLimit\",r,d),referenceWidth:s,zOrder:Y(t.name),isDashed:!1})}function M(t,i,o,r,n,a,s){const c=e(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString(),f=t.primitiveName,m=l(t.tintColor),p=void 0!==t.width?t.width:4,u=h(t.capStyle),y=g(t.joinStyle),d=t.miterLimit,S=e(JSON.stringify(t)).toString();n.push({type:\"line\",templateHash:S,materialHash:0===o.length?c:()=>c,cim:t,materialOverrides:null,isOutline:a,colorLocked:t.colorLocked,effects:t.effects,color:$(f,i,\"TintColor\",r,m,R),width:$(f,i,\"Width\",r,p),cap:$(f,i,\"CapStyle\",r,u),join:$(f,i,\"JoinStyle\",r,y),miterLimit:$(f,i,\"MiterLimit\",r,d),referenceWidth:s,zOrder:Y(t.name),isDashed:!1})}function X(t,i,o,r,n,a,l){const s=t.primitiveName,c=void 0!==t.width?t.width:4,f=h(t.capStyle),m=g(t.joinStyle),p=t.miterLimit,u=e(JSON.stringify(t)).toString();n.push({type:\"line\",templateHash:u,materialHash:0===o.length?u:A(u,i,o,r),cim:t,materialOverrides:null,isOutline:a,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},width:$(s,i,\"Width\",r,c),cap:$(s,i,\"CapStyle\",r,f),join:$(s,i,\"JoinStyle\",r,m),miterLimit:$(s,i,\"MiterLimit\",r,p),referenceWidth:l,zOrder:Y(t.name),isDashed:!1})}function I(t,i,o,r,n){const a=t.markerPlacement;if(!a||\"CIMMarkerPlacementInsidePolygon\"!==a.type)return!1;const l=a,s=[\"Rotation\",\"OffsetX\",\"OffsetY\"],c=o.filter((e=>e.primitiveName!==t.primitiveName&&-1===s.indexOf(e.propertyName))),f=e(JSON.stringify(t)).toString();return n.push({type:\"fill\",templateHash:f,materialHash:0===o.length?f:A(f,i,c,r),cim:t,materialOverrides:c,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:$(l.primitiveName,i,\"StepY\",r,l.stepY),scaleX:1,angle:$(l.primitiveName,i,\"GridAngle\",r,l.gridAngle),offsetX:$(l.primitiveName,i,\"OffsetX\",r,l.offsetX),offsetY:$(l.primitiveName,i,\"OffsetY\",r,l.offsetY)}),!0}function x(t,i,o,r,n,a,s){const c=t.primitiveName,f=t.size,m=t.scaleX,p=t.rotation,u=t.offsetX,y=t.offsetY,h=l(t.tintColor),g=e(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString();let d=!1,S=\"\";for(const e of o)e.primitiveName===c&&(void 0!==e.value?S+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(d=!0));n.push({type:\"marker\",templateHash:e(JSON.stringify(t)+S).toString(),materialHash:d?()=>g:g,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:!1,alignment:a,size:$(c,i,\"Size\",r,f),scaleX:$(c,i,\"ScaleX\",r,m),rotation:$(c,i,\"Rotation\",r,p),offsetX:$(c,i,\"OffsetX\",r,u),offsetY:$(c,i,\"OffsetY\",r,y),color:$(c,i,\"TintColor\",r,h,R),anchorPoint:t.anchorPoint,isAbsoluteAnchorPoint:\"Relative\"!==t.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:t.rotateClockwise,referenceSize:s,sizeRatio:1,markerPlacement:t.markerPlacement})}function w(e,t,i,o,r,n,a,l){const s=e.markerGraphics;if(!s)return;let c=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(c=t.ymax-t.ymin)}for(const f of s)if(f){const s=f.symbol;if(!s)continue;switch(s.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":J(e,f,i,t,o,r,n,a,c,l);break;case\"CIMTextSymbol\":z(e,f,t,i,o,r,n,a,c)}}}function z(t,i,o,r,n,a,c,p,u){m.findApplicableOverrides(i,r,[]);const y=i.geometry;if(!(\"x\"in y)||!(\"y\"in y))return;const h=i.symbol,g=(v=h).underline?\"underline\":v.strikethrough?\"line-through\":\"none\";var v;const b=function(e){let t=\"normal\",i=\"normal\";if(e){const o=e.toLowerCase();-1!==o.indexOf(\"italic\")?t=\"italic\":-1!==o.indexOf(\"oblique\")&&(t=\"oblique\"),-1!==o.indexOf(\"bold\")?i=\"bold\":-1!==o.indexOf(\"light\")&&(i=\"lighter\")}return{style:t,weight:i}}(h.fontStyleName);h.font={family:h.fontFamilyName,decoration:g,...b};const N=t.frame,k=y.x-.5*(N.xmin+N.xmax),O=y.y-.5*(N.ymin+N.ymax),C=t.size/u,P=t.primitiveName,L=(h.height||0)*C,M=h.angle||0,X=((h.offsetX||0)+k)*C,I=((h.offsetY||0)+O)*C,x=l(f.getFillColor(h));let w=l(f.getStrokeColor(h)),z=f.getStrokeWidth(h);z||(w=l(f.getFillColor(h.haloSymbol)),z=h.haloSize*C);let J=\"\";for(const e of r)e.primitiveName===P&&void 0!==e.value&&(J+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`);const H=JSON.stringify(t.effects)+Number(t.colorLocked)+JSON.stringify(t.anchorPoint)+t.anchorPointUnits+JSON.stringify(t.markerPlacement),Y=e(JSON.stringify(i)+H+J).toString();a.push({type:\"text\",templateHash:Y,materialHash:()=>e(JSON.stringify(h.font)).toString(),cim:h,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,alignment:c,anchorPoint:{x:t.anchorPoint?t.anchorPoint.x:0,y:t.anchorPoint?t.anchorPoint.y:0},isAbsoluteAnchorPoint:\"Relative\"!==t.anchorPointUnits,fontName:h.fontFamilyName,decoration:\"none\",weight:\"normal\",style:\"normal\",size:$(P,o,\"Size\",n,L),angle:$(P,o,\"Rotation\",n,M),offsetX:$(P,o,\"OffsetX\",n,X),offsetY:$(P,o,\"OffsetY\",n,I),horizontalAlignment:d(h.horizontalAlignment),verticalAlignment:S(h.verticalAlignment),text:$(i.primitiveName,o,\"TextString\",n,i.textString,s,h.textCase),color:x,outlineColor:w,outlineSize:z,referenceSize:p,sizeRatio:1,markerPlacement:t.markerPlacement})}function J(t,i,o,r,n,a,s,c,m,y){const h=i.symbol,g=i.geometry;if(!g)return;const d=h.symbolLayers;if(!d)return;if(y)return void H(t,i,r,o,n,a,s,c,m);let S=d.length;for(;S--;){const y=d[S];if(y&&!1!==y.enable)switch(y.type){case\"CIMSolidFill\":case\"CIMSolidStroke\":{const h=p(g);if(!h)continue;const[d,S,v]=u(h,t.frame,t.size,t.anchorPoint,\"Relative\"!==t.anchorPointUnits),b=\"CIMSolidFill\"===y.type,N={type:\"sdf\",geom:g,asFill:b},k=t.primitiveName,O=t.size,C=t.rotation||0,P=t.offsetX,L=t.offsetY,M=y.primitiveName,X=l(b?f.getFillColor(y):f.getStrokeColor(y)),I=b?{r:0,g:0,b:0,a:0}:l(f.getStrokeColor(y)),x=f.getStrokeWidth(y);if(!b&&!x)break;let w=!1,z=\"\";for(const e of o)e.primitiveName!==M&&e.primitiveName!==k||(void 0!==e.value?z+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(w=!0));const J=JSON.stringify({...t,markerGraphics:null}),H=e(JSON.stringify(N)).toString(),Y={type:\"marker\",templateHash:e(JSON.stringify(i)+JSON.stringify(y)+J+z).toString(),materialHash:w?()=>H:H,cim:N,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:S,y:v},isAbsoluteAnchorPoint:!1,size:$(t.primitiveName,r,\"Size\",n,O),rotation:$(t.primitiveName,r,\"Rotation\",n,C),offsetX:$(t.primitiveName,r,\"OffsetX\",n,P),offsetY:$(t.primitiveName,r,\"OffsetY\",n,L),scaleX:1,frameHeight:m,rotateClockwise:t.rotateClockwise,referenceSize:c,sizeRatio:d,color:$(M,r,\"Color\",n,X,R),outlineColor:$(M,r,\"Color\",n,I,R),outlineWidth:$(M,r,\"Width\",n,x),markerPlacement:t.markerPlacement};a.push(Y);break}default:H(t,i,r,o,n,a,s,c,m)}}}function H(t,i,o,r,n,l,s,c,m){const p=function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}(t,i);let u=[];const y=[\"Rotation\",\"OffsetX\",\"OffsetY\"];u=r.filter((e=>e.primitiveName!==t.primitiveName||-1===y.indexOf(e.propertyName)));let h=\"\";for(const e of r)void 0!==e.value&&(h+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`);const[g,d,S]=f.getTextureAnchor(p),v=t.primitiveName,b=t.rotation||0,N=t.offsetX||0,k=t.offsetY||0,O=e(JSON.stringify(p)+h).toString(),C={type:\"marker\",templateHash:O,materialHash:0===u.length?O:A(O,o,u,n),cim:p,materialOverrides:u,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:g,y:d},isAbsoluteAnchorPoint:!1,size:t.size,rotation:$(v,o,\"Rotation\",n,b),offsetX:$(v,o,\"OffsetX\",n,N),offsetY:$(v,o,\"OffsetY\",n,k),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:m,rotateClockwise:t.rotateClockwise,referenceSize:c,sizeRatio:S/a(t.size),markerPlacement:t.markerPlacement};l.push(C)}function Y(e){if(e&&0===e.indexOf(\"Level_\")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function R(e){if(!e||0===e.length)return null;const t=new n(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function $(e,t,i,o,n,a,l){const s=t[e];if(s){const e=s[i];if(\"string\"==typeof e||\"number\"==typeof e||e instanceof Array)return a?a.call(null,e,l):e;if(null!=e&&e instanceof r)return(t,i,r)=>{let s=c(e,t,{$view:r},o.geometryType,i);return null!==s&&a&&(s=a.call(null,s,l)),null!==s?s:n}}return n}function A(t,i,o,n){for(const e of o){if(e.valueExpressionInfo){const t=i[e.primitiveName]&&i[e.primitiveName][e.propertyName];t instanceof r&&(e.fn=(e,i,o)=>c(t,e,{$view:o},n.geometryType,i))}}return(i,r,n)=>{for(const e of o)e.fn&&(e.value=e.fn(i,r,n));return e(t+m.buildOverrideKey(o)).toString()}}function j(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return m.applyOverrides(i,t),i}export{j as analyzeCIMResource,N as analyzeCIMSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../core/screenUtils.js\";class e{constructor(){}rasterizeText(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const i=this._textRasterizationCanvas,s=i.getContext(\"2d\");this.setFontProperties(s,e),this.parameters=e,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const r=this.computeTextWidth(s,e),o=this.lineHeight*this.textLines.length;var n;i.width=r,i.height=o,this.renderedLineHeight=Math.round(this.lineHeight*e.pixelRatio),this.renderedHaloSize=e.halo.size*e.pixelRatio,this.renderedWidth=r*e.pixelRatio,this.renderedHeight=o*e.pixelRatio,this.fillStyle=`rgba(${(n=e.color).slice(0,3).toString()},${n[3]})`,this.haloStyle=function(t){return`rgb(${t.slice(0,3).toString()})`}(e.halo.color);const a=this.renderedLineHeight,h=this.renderedHaloSize;this.setFontProperties(s,e);const l=function(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}(s.textAlign,this.renderedWidth)+h,d=h;let c=0,g=0;h>0&&this.renderHalo(s,l,d,c,g,e),g+=d,c+=l;for(const t of this.textLines)s.globalCompositeOperation=\"destination-out\",s.fillStyle=\"rgb(0, 0, 0)\",s.fillText(t,c,g),s.globalCompositeOperation=\"source-over\",s.fillStyle=this.fillStyle,s.fillText(t,c,g),g+=a;const f=s.getImageData(0,0,this.renderedWidth,this.renderedHeight),p=new Uint8Array(f.data);if(e.premultiplyColors){let t;for(let e=0;e<p.length;e+=4)t=p[e+3]/255,p[e]=p[e]*t,p[e+1]=p[e+1]*t,p[e+2]=p[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(p.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,s,r,o){const n=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=n,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,n,a),this.setFontProperties(l,o),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,n,a,s,r,n,a),t.globalAlpha=1}renderHaloEmulated(t,e,s){const r=this.renderedLineHeight,o=this.renderedHaloSize;for(const n of this.textLines){for(const[r,a]of i)t.fillText(n,e+o*r,s+o*a);s+=r}}renderHaloNative(t,e,i){const s=this.renderedLineHeight,r=this.renderedHaloSize;for(const o of this.textLines){const n=2*r,a=5,h=.1;for(let s=0;s<a;s++){const r=1-(a-1)*h+s*h;t.lineWidth=r*n,t.strokeText(o,e,i)}i+=s}}setFontProperties(e,i){const s=i.font,r=`${s.style} ${s.weight} ${t(i.size*i.pixelRatio)}px ${s.family}, sans-serif`;let o;switch(e.font=r,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":o=\"left\";break;case\"right\":o=\"right\";break;case\"center\":o=\"center\";break;default:o=\"left\"}e.textAlign=o}computeTextWidth(t,e){let i=0;for(const e of this.textLines)i=Math.max(i,t.measureText(e).width);const s=e.font;return(\"italic\"===s.style||\"oblique\"===s.style||\"string\"==typeof s.weight&&(\"bold\"===s.weight||\"bolder\"===s.weight)||\"number\"==typeof s.weight&&s.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}const i=[];{const t=16;for(let e=0;e<360;e+=360/t)i.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}export default e;export{e as TextRasterizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{numericHash as e}from\"../../core/string.js\";import{throwIfAborted as t,all as r}from\"../../core/promiseUtils.js\";import{getJsonType as a,isPolygon as i,isPolyline as s}from\"../../geometry/support/jsonUtils.js\";import{pt2px as o}from\"../../core/screenUtils.js\";import n from\"../support/Symbol3DAnchorPosition2D.js\";import c from\"../../request.js\";import{createLabelOverrideFunction as l,evaluateValueOrFunction as m,colorToArray as h}from\"./utils.js\";import{scaleCIMMarker as f}from\"../support/cimSymbolUtils.js\";import{analyzeCIMSymbol as g,analyzeCIMResource as y}from\"./cimAnalyzer.js\";import u from\"./Rasterizer.js\";import{TextRasterizer as p}from\"./TextRasterizer.js\";var d;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(d||(d={}));const M=(e,t,r)=>{if(e&&e.targetSize){let a;if(r){const t=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);a=e.targetSize/o(t)}else a=e.targetSize/t.referenceSize;return a}return e&&e.scaleFactor?e.scaleFactor:1},C={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class I{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new u,this._textRasterizer=new p,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,r,i,s,o,n,c){i=i||(t?null!=t.centroid?\"esriGeometryPolygon\":a(t.geometry):null)||function(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}(e);const l=await this.analyzeCIMSymbol(e,t?function(e){const t=e?Object.keys(e):[];return t.map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}(t.attributes):null,r,i,c);return this.rasterizeCIMSymbol(l,t,i,s,o,n)}async analyzeCIMSymbol(e,a,i,s,o){const n=[],c=a?{geometryType:s,spatialReference:this._spatialReference,fields:a}:null;let m;await g(e.data,c,n,this._avoidSDF),t(o);for(const e of n)\"CIMPictureMarker\"!==e.cim.type&&\"CIMPictureFill\"!==e.cim.type&&\"CIMPictureStroke\"!==e.cim.type||(m||(m=[]),m.push(this.fetchPictureMarkerResource(e,o))),i&&\"text\"===e.type&&\"string\"==typeof e.text&&e.text.indexOf(\"[\")>-1&&(e.text=l(i,e.text,e.cim.textCase));return m&&await r(m),n}async fetchPictureMarkerResource(e,t){const r=e.materialHash;if(!this._pictureMarkerCache.get(r)){const a=(await c(e.cim.url,{responseType:\"image\",signal:t&&t.signal})).data;this._pictureMarkerCache.set(r,a)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,h=e.anchorY||0,f=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=M(a,n,null);if(g=m(n.offsetX,t,i,s)*e||0,y=m(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=m(n.rotation,t,i,s)||0,f=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=m(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":h=.5;break;case\"bottom\":h=-.5;break;case\"baseline\":h=-.25;break;default:h=0}}}null!=e&&o.push({angle:c,rotateClockWise:f,anchorX:l,anchorY:h,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),r=t.getContext(\"2d\");let a=0,i=0,s=0,c=0;const l=[];for(let t=0;t<e.length;t++){const n=e[t],m=n.rasterizedResource;if(!m)continue;const h=m.size,f=n.offsetX,g=n.offsetY,y=n.anchorX,u=n.anchorY,p=n.rotateClockWise||!1;let d=n.angle,M=o(f)-h[0]*(.5+y),C=o(g)-h[1]*(.5+u),I=M+h[0],z=C+h[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}a=M<a?M:a,i=C<i?C:i,s=I>s?I:s,c=z>c?z:c;const x=r.createImageData(m.size[0],m.size[1]);x.data.set(new Uint8ClampedArray(m.image.buffer));const P={offsetX:f,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:x,anchorX:y,anchorY:u};l.push(P)}t.width=s-a,t.height=c-i;const m=-a,h=c;for(let e=0;e<l.length;e++){const t=l[e],a=this._imageDataToCanvas(t.rasterizedImage),i=t.rasterizedImage.width,s=t.rasterizedImage.height,n=m-i*(.5+t.anchorX),c=h-s*(.5-t.anchorY);if(t.angle){const e=(360-t.angle)*Math.PI/180;r.save(),r.translate(o(t.offsetX),-o(t.offsetY)),r.translate(m,h),r.rotate(e),r.translate(-m,-h),r.drawImage(a,n,c),r.restore()}else r.drawImage(a,n+o(t.offsetX),c-o(t.offsetY))}const f=new n({x:m/t.width-.5,y:h/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:f}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(t,r,a,i,s,o){let n,c,l,h;if(\"esriGeometryPolyline\"===a||\"esriGeometryPolygon\"===a){const h=i&&i.style?i.style:d.Legend,f=\"esriGeometryPolyline\"===a?C.stroke[h]:C.fill[h];if(\"line\"===t.type){if(\"CIMSolidStroke\"!==t.cim.type){if(\"CIMPictureStroke\"===t.cim.type){const e=m(t.width,r,s,o);let a,i,n;return({image:a,width:i,height:n}=this._getPictureResource(t,e)),this._rasterizePictureResource(t,a,i,n,f,e)}return null}({analyzedCIM:n,hash:l}=z(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}else if(\"marker\"===t.type){if(\"CIMPictureMarker\"===t.cim.type)return null;if(\"CIMVectorMarker\"!==t.cim.type)return null;t.cim.offsetX=m(t.offsetX,r,s,o),t.cim.offsetY=m(t.offsetY,r,s,o),t.cim.rotation=m(t.rotation,r,s,o),t.cim.markerPlacement=t.markerPlacement,({analyzedCIM:n}=z(t,r,s,o)),l=e(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,f)}else{if(\"text\"===t.type)return null;if(\"fill\"===t.type){if(\"CIMHatchFill\"===t.cim.type||\"CIMVectorMarker\"===t.cim.type||\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type){const e=t.cim.size||t.cim.height;let a,i,c;if(\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type)({image:a,width:i,height:c}=this._getPictureResource(t,e));else{({analyzedCIM:n,hash:l}=z(t,r,s,o));const e=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=e.image,i=e.size[0],c=e.size[1]}return this._rasterizePictureResource(t,a,i,c,f,null)}if(\"CIMSolidFill\"!==t.cim.type)return null;({analyzedCIM:n,hash:l}=z(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}}}else{if(\"text\"===t.type)return h=this._rasterizeTextResource(t,r,i,s,o),h;({analyzedCIM:n,hash:l}=z(t,r,s,o));const e=M(i,t,null);if(\"CIMPictureMarker\"===t.cim.type){const a=m(t.size,r,s,o)*e,{image:i,width:n,height:c}=this._getPictureResource(t,a);return h={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:t.anchorPoint?t.anchorPoint.x:0,anchorY:t.anchorPoint?t.anchorPoint.y:0},h}f(n,e,{preserveOutlineWidth:!1}),c=n}l+=a,i&&(l+=JSON.stringify(i));const g=this._resourceCache;return g.has(l)?g.get(l):(h=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),g.set(l,h),h)}_rasterizeTextResource(e,t,r,a,i){const s=M(r,e,null),o=m(e.text,t,a,i);if(!o||0===o.length)return null;const n=m(e.fontName,t,a,i),c=m(e.style,t,a,i),l=m(e.weight,t,a,i),f=m(e.decoration,t,a,i),g=m(e.size,t,a,i)*s,y=m(e.horizontalAlignment,t,a,i),u=m(e.verticalAlignment,t,a,i),p=h(m(e.color,t,a,i)),d=h(m(e.outlineColor,t,a,i)),C={color:p,size:g,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:l,decoration:f},halo:{size:m(e.outlineSize,t,a,i)||0,color:d,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,r,a,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=o(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=o(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(r,a);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:o(e.cim.offsetX)||0,m42:o(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;i(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):s(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const e of d){const t=e?e.length:0;if(t>1){let r=e[0];m.moveTo(o(r[0]),o(r[1]));for(let a=1;a<t;++a)r=e[a],m.lineTo(o(r[0]),o(r[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const a=r.height/r.width,i=t?a>1?o(t):o(t)/a:r.width,s=t?a>1?o(t)*a:o(t):r.height;return{image:this._imageTo32Array(r,i,s),width:i,height:s}}_embedCIMLayerInVectorMarker(e,t){const r=i(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function z(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=y(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{I as CIMSymbolRasterizer,d as GeometryStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{px2pt as t}from\"../../core/screenUtils.js\";import{getCIMSymbolSize as e,scaleCIMSymbolTo as a}from\"./cimSymbolUtils.js\";import{CIMSymbolRasterizer as l}from\"../cim/CIMSymbolRasterizer.js\";const i=new l(null,!0);async function o(l,o={}){const{size:n,maxSize:s,feature:c,fieldMap:m,geometryType:r,style:y,node:d,opacity:h}=o,u=e(l),p=Math.min(null!=n?n:u,null!=s?s:t(120));p!==u&&(l=l.clone(),a(l,p,{preserveOutlineWidth:!0}));let g=3;l&&l.data&&l.data.symbol&&\"CIMPointSymbol\"!==l.data.symbol.type&&(g=1);const f=await i.rasterizeCIMSymbolAsync(l,c,m,r,{scaleFactor:g,style:y}),M=document.createElement(\"canvas\");M.width=f.imageData.width,M.height=f.imageData.height;M.getContext(\"2d\").putImageData(f.imageData,0,0);let b=M.width/g,w=M.height/g;if(null!=n&&(null==(null==o?void 0:o.scale)||(null==o?void 0:o.scale))){const t=b/w;b=t<=1?Math.ceil(p*t):p,w=t<=1?p:Math.ceil(p/t)}const C=new Image(b,w);return C.src=M.toDataURL(),null!=h&&(C.style.opacity=`${h}`),d&&d.appendChild(C),C}export{o as previewCIMSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import{unquantizeMultipoint as t,unquantizePolyline as o,unquantizePolygon as n,unquantizePoint as a}from\"../../../geometry/support/quantizationUtils.js\";function s(s,u,c,m,p){const g=s.referencesGeometry()&&p?function(s,u,c){const{transform:m,hasZ:p,hasM:g}=c;i.has(u)||i.set(u,function(s){const i={};switch(s){case\"esriGeometryPoint\":return(e,r,t,o)=>a(r,i,e,t,o);case\"esriGeometryPolygon\":return(e,r,t,o)=>n(r,i,e,t,o);case\"esriGeometryPolyline\":return(e,r,t,n)=>o(r,i,e,t,n);case\"esriGeometryMultipoint\":return(e,r,o,n)=>t(r,i,e,o,n);default:return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").error(new r(\"mapview-arcade\",`Unable to handle geometryType: ${s}`)),e=>e}}(u));const l=i.get(u)(s.geometry,m,p,g);return{...s,geometry:l}}(u,m,p):u,l=s.repurposeFeature(g);try{return s.evaluate({...c,$feature:l})}catch(r){return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",r),null}}const i=new Map;export default s;\n"],"sourceRoot":""}