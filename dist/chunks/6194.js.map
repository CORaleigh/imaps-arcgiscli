{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/tasks/support/FeatureSet.js"],"names":["h","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","mesh","d","e","super","this","displayFieldName","exceededTransferLimit","features","fields","geometryType","hasM","hasZ","queryGeometry","spatialReference","r","o","s","length","i","n","p","geometry","push","write","type","t","toJSON","Array","isArray","scale","translate","_getQuantizationFunction","Math","round","splice","transform","l","_getHydrationFunction","x","y","rings","paths","_quantizePoints","points","xmin","ymin","xmax","ymax","String","json","prototype","Boolean","overridePolicy","enabled","read","reader","types","isDefaultToJSON"],"mappings":"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","file":"chunks/6194.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t,unwrap as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as l}from\"../../core/JSONSupport.js\";import a from\"../../geometry/SpatialReference.js\";import{fromJSON as y,isPolygon as u}from\"../../geometry/support/jsonUtils.js\";import{geometryTypes as m}from\"../../geometry.js\";import c from\"../../Graphic.js\";import f from\"../../layers/support/Field.js\";const h=new s({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryEnvelope:\"extent\",mesh:\"mesh\",\"\":null});let d=class extends l{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,r){const o=a.fromJSON(r.spatialReference),s=[];for(let r=0;r<e.length;r++){const i=e[r],n=c.fromJSON(i),p=i.geometry&&i.geometry.spatialReference;t(n.geometry)&&!p&&(n.geometry.spatialReference=o),s.push(n)}return s}writeGeometryType(e,r,o,s){if(e)return void h.write(e,r,o,s);const{features:i}=this;if(i)for(const e of i)if(e&&t(e.geometry))return void h.write(e.geometry.type,r,o,s)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=y(e);return!r&&t.spatialReference&&(o.spatialReference=a.fromJSON(t.spatialReference)),o}writeSpatialReference(e,r){if(e)return void(r.spatialReference=e.toJSON());const{features:o}=this;if(o)for(const e of o)e&&t(e.geometry)&&e.geometry.spatialReference&&(r.spatialReference=e.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,o],translate:[s,i]}=e,n=this.features,p=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-s)/t)),(e=>Math.round((i-e)/o)));for(let e=0,t=n.length;e<t;e++)p(r(n[e].geometry))||(n.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:r,transform:o}=this;if(!o)return this;const{translate:[s,i],scale:[n,p]}=o,l=this._getHydrationFunction(e,(e=>e*n+s),(e=>i-e*p));for(const{geometry:e}of r)t(e)&&l(e);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const i=[];for(let n=0,p=e.length;n<p;n++){const p=e[n];if(n>0){const e=t(p[0]),n=r(p[1]);e===o&&n===s||(i.push([e-o,n-s]),o=e,s=n)}else o=t(p[0]),s=r(p[1]),i.push([o,s])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return\"point\"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):\"polyline\"===e||\"polygon\"===e?e=>{const o=u(e)?e.rings:e.paths,s=[];for(let e=0,i=o.length;e<i;e++){const i=o[e],n=this._quantizePoints(i,t,r);n&&s.push(n)}return s.length>0?(u(e)?e.rings=s:e.paths=s,e):null}:\"multipoint\"===e?e=>{let o;return o=this._quantizePoints(e.points,t,r),o.length>0?(e.points=o,e):null}:\"extent\"===e?e=>e:null}_getHydrationFunction(e,t,r){return\"point\"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:\"polyline\"===e||\"polygon\"===e?e=>{const o=u(e)?e.rings:e.paths;let s,i;for(let e=0,n=o.length;e<n;e++){const n=o[e];for(let e=0,o=n.length;e<o;e++){const o=n[e];e>0?(s+=o[0],i+=o[1]):(s=o[0],i=o[1]),o[0]=t(s),o[1]=r(i)}}}:\"extent\"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:\"multipoint\"===e?e=>{const o=e.points;let s,i;for(let e=0,n=o.length;e<n;e++){const n=o[e];e>0?(s+=n[0],i+=n[1]):(s=n[0],i=n[1]),n[0]=t(s),n[1]=r(i)}}:void 0}};e([o({type:String,json:{write:!0}})],d.prototype,\"displayFieldName\",void 0),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"exceededTransferLimit\",void 0),e([o({type:[c],json:{write:!0}})],d.prototype,\"features\",void 0),e([i(\"features\")],d.prototype,\"readFeatures\",null),e([o({type:[f],json:{write:!0}})],d.prototype,\"fields\",void 0),e([o({type:[\"point\",\"multipoint\",\"polyline\",\"polygon\",\"extent\",\"mesh\"],json:{read:{reader:h.read}}})],d.prototype,\"geometryType\",void 0),e([p(\"geometryType\")],d.prototype,\"writeGeometryType\",null),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasM\",void 0),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasZ\",void 0),e([o({types:m,json:{write:!0}})],d.prototype,\"queryGeometry\",void 0),e([i(\"queryGeometry\")],d.prototype,\"readQueryGeometry\",null),e([o({type:a,json:{write:!0}})],d.prototype,\"spatialReference\",void 0),e([p(\"spatialReference\")],d.prototype,\"writeSpatialReference\",null),e([o({json:{write:!0}})],d.prototype,\"transform\",void 0),d=e([n(\"esri.tasks.support.FeatureSet\")],d),d.prototype.toJSON.isDefaultToJSON=!0,d||(d={});var g=d;export default g;\n"],"sourceRoot":""}