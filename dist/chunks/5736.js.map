{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/chunks/TextureOnly.glsl.js","webpack://imaps/./node_modules/@arcgis/core/chunks/WaterSurface.glsl.js","webpack://imaps/./node_modules/@arcgis/core/core/MapUtils.js","webpack://imaps/./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js","webpack://imaps/./node_modules/@arcgis/core/geometry/support/triangulationUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/support/debugFlags.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/terrain/OverlayRenderTarget.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/localOrigin.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/terrain/Overlay.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/CommonUniformStore.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRep.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/rendererUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ResizableFloat32Array.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterTechnique.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterGLMaterial.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/Instance.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/statistics/RendererPerformanceInfo.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/MergedRenderer.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/SortedRenderGeometryRenderer.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechnique.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LongVectorMath.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SphericalHarmonics.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderContext.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/layers/graphics/constants.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/layers/graphics/lineUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Reprojection.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Gamma.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js"],"names":["n","include","fragment","uniforms","add","code","a","Object","freeze","__proto__","build","c","m","linearDepth","attributes","vertex","output","varyings","receiveShadows","OITEnabled","r","o","t","f","i","u","byteLength","Uint32Array","s","minReduction","h","originalIndices","g","componentOffsets","y","length","U","Math","floor","w","A","b","d","p","ceil","M","q","sqrt","l","e","x","buffer","indices","uniqueCount","Array","Float64Array","index","pathLengths","count","holeIndices","position","polygons","outlines","this","intensity","direction","castShadows","sh","S","super","arguments","SCENEVIEW_HITTEST_RETURN_INTERSECTOR","SCENEVIEW_LOCKING_LOG","HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED","HIGHLIGHTS_PROFILE_TO_CONSOLE","DECONFLICTOR_SHOW_VISIBLE","DECONFLICTOR_SHOW_INVISIBLE","DECONFLICTOR_SHOW_GRID","LABELS_SHOW_BORDER","OVERLAY_DRAW_DEBUG_TEXTURE","OVERLAY_SHOW_CENTER","SHOW_POI","TERRAIN_DEBUG_POPUP","TESTS_DISABLE_UPDATE_THRESHOLDS","DISABLE_DECONFLICTOR_VISIBILITY_OFFSET","DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES","DRAW_MESH_GEOMETRY_NORMALS","FEATURE_TILE_FETCH_SHOW_TILES","FEATURE_TILE_TREE_SHOW_TILES","I3S_TREE_SHOW_TILES","I3S_SHOW_MODIFICATIONS","ENABLE_PROFILE_DEPTH_RANGE","DISABLE_FAST_UPDATES","LOD_INSTANCE_RENDERER_DISABLE_UPDATES","LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL","EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES","prototype","_renderTarget","id","colorTarget","depthStencilTarget","target","pixelFormat","dataType","wrapMode","samplingMode","hasMipmap","maxAnisotropy","width","height","dispose","colorTexture","resize","bindFramebuffer","descriptor","generateMipmap","vec3","extent","resolution","renderLocalOrigin","pixelRatio","renderTargets","color","fbo","valid","lastUsed","colorWithoutRasterImage","highlight","water","occluded","drawPass","disposeRenderTargetMemory","validateUsage","getGpuMemoryUsage","_uniforms","proj","shadowMapDistance","viewportPixelSz","lightingMainDirection","hasUniform","push","technique","refCount","refZeroFrame","_context","_perConstructorInstances","Map","_frameCounter","_keepAliveFrameCount","viewingMode","forEach","clear","key","get","set","acquire","release","constructor","delete","size","commonUniformStore","getPrograms","shader","reload","name","find","refCnt","glMaterial","_","ROOT_ORIGIN_ID","_origins","_gridSize","testOrigin","getOrigin","random","abs","round","window","view","_stage","_object","_material","isPickable","idHint","castShadow","addObject","addToViewContent","Float32Array","spatialReference","I","data","j","addGeometry","console","log","_array","_size","subarray","waterTextureRepository","configuration","transparencyPassType","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","pbrMode","useCustomDTRExponentForWater","ssrEnabled","useSSR","highStepCount","rctx","generateSource","ready","updating","loadTextures","program","camera","projectionMatrix","lighting","setUniforms","bindRepo","setUniform4fv","origin","viewInverseTransposeMatrix","blending","transparent","depthTest","func","depthWrite","writeDepth","colorWrite","polygonOffset","enableOffset","setPipelineState","v","isDraped","updateParameters","techniqueRep","acquireAndReleaseExisting","material","getTechniqueConfig","params","animation","time","setUniform1f","animationSpeed","shadowMappingEnabled","setParameterValues","ensureResource","_updateShadowState","_updateSSRState","bindProgram","bindPass","setElapsedTimeUniform","from","to","isVisible","hasHighlights","hasOccludees","transformation","transformationNormal","first","drawCalls","triangles","begin","end","O","H","B","_pendingAddsRemoves","_adds","_removes","_updates","allocator","deallocator","renderGeometry","_materialRenderers","_sortedMaterialRenderers","_hasHighlights","_hasWater","prune","rendersOccluded","forAll","stopAtTime","updateAddsRemoves","toAdd","numToAdd","toRemove","numToRemove","toUpdate","numToUpdate","type","_dataByOrigin","_hasOccludees","_rctx","_materialRep","_glMaterials","_bufferWriter","createBufferWriter","vao","isEmpty","renderOccluded","updateGeometries","addAndRemoveGeometries","updateRenderCommands","vertexBufferLayout","stride","optimalCount","sparseCount","elementCount","createData","array","removeAndRebuild","removeByErasing","append","vertexBuffers","geometry","byteSize","setData","setSubData","drawCommandsDirty","updateType","instances","uniqueName","instanceParameters","visible","highlights","occludees","write","invTranspTransformation","createView","hasHiddenInstances","drawCommandsDefault","drawCommandsHighlight","drawCommandsOccludees","stats","default","layout","sort","values","update","pass","ensureResources","beginSlot","ensureParameters","getTechnique","getPipelineState","bind","bindDraw","ensureAttributeLocations","bindVAO","primitiveType","renderCommands","drawArrays","vertexAttributeLocations","erase","C","glMaterials","materialRepository","hasWater","modify","updateSortedMaterialRenderers","notifyChange","pushNew","materialRenderer","updateLogic","render","insertOrder","renderPriority","has","removeUnorderedIndex","sortedMaterialRenderers","hasAlpha","P","k","sphericalHarmonics","main","PI","_renderLighting","_shOrder","_oldSunlight","ambient","diffuse","setUniform3fv","_info","groundLightingFactor","globalFactor","setLightDirectionUniform","setUniform3f","setUniform4f","lights","W","F","_overlays","_rendersOccluded","_lighting","_localOrigins","_handles","_layerRenderers","_sortedLayerRenderersDirty","_sortedLayerRenderers","_geometries","_uniqueIdx","globalUnitScale","longitudeCyclical","renderView","renderingContext","_renderContext","lastFrameCamera","slot","highlightDepthTexture","renderOccludedMask","offscreenRenderingHelper","scenelightingData","shadowMap","ssaoHelper","sliceHelper","_stippleTextureRepository","_shaderTechniqueRepository","stippleTextureRepository","emitContentChanged","_materialRepository","_textureRep","_techniqueRep","onMaterialChanged","_id2glMaterialRef","ownMaterial","getGLMaterial","textureRep","incRefCnt","decRefCnt","getRefCnt","error","textureRepository","Y","updateRendersOccluded","_compositingHelper","compositingHelper","_bindParameters","inverseViewport","screenToWorldRatio","screenToWorldRatioGlobalWM","slicePlane","ssaoEnabled","linearDepthTexture","linearDepthTextureID","lastFrameColorTexture","lastFrameColorTextureID","reprojectionMat","destroy","commitChanges","remove","updateSortedLayerRenderers","updateHasHighlights","updateHasWater","center","ensureLayerRenderer","notifyGraphicUpdate","notifyUpdateGeometries","warn","graphicUid","numViews","_screenToWorldRatio","views","viewport","hasNonZeroSizedView","isValid","setClearColor","clearSafe","setViewParameters","drawDebugTexture","layerView","renderer","drapeSourceType","fullOpacity","bindTemporaryFramebuffer","draw","_temporaryRenderTarget","composite","getTexture","generateMipMap","resetRenderOccludedMask","hotReload","intersectRenderGeometry","bsRadius","min","range","max","N","intersect","getShaderTransformation","addIntersectionResult","layerUid","calculateShaderTransformation","metadata","results","ground","dist","normal","intersector","drapedLayerOrder","options","store","ray","all","stopAnimationsAtTime","watch","allLayerViews","keys","Set","z","near","far","viewMatrix","setGLViewport","fullViewport","onContentChanged","onHasHighlightsChanged","onRendersOccludedChanged","ensureDebugPatternResources","_debugTextureTechnique","pipeline","setUniform1i","bindTexture","_debugPatternTexture","_quadVAO","Uint8Array","layerRenderers","constructOnly","Boolean","readOnly","dependsOn","relativeElevation","attributeData","removeDuplicateStartEnd","offsetIdx","strideIdx","mapPosition","mapPos","colorFeature","sizeFeature","opacityFeature","join","E","uniformSize","rings","paths","hasZ","lines","projectionSuccess","sampledElevation","pow","bindUniforms","bindView","bindViewCustomOrigin","setUniformMatrix4fv","setUniform2fv","nearFar","waveStrength","waveTextureRepeat","flowStrength","flowOffset","setUniform2f","waveDirection","waveVelocity"],"mappings":"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","file":"chunks/5736.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as r}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ScreenSpacePass as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";function n(){const n=new r;return n.include(o),n.fragment.uniforms.add(\"tex\",\"sampler2D\"),n.fragment.uniforms.add(\"color\",\"vec4\"),n.fragment.code.add(e`\n    void main() {\n      vec4 texColor = texture2D(tex, uv);\n      gl_FragColor = texColor * color;\n    }\n  `),n}var a=Object.freeze({__proto__:null,build:n});export{a as T,n as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Transform as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ShaderBuilder as a}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ColorConversion as r}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{Slice as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{OutputHighlight as t}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{symbolAlphaCutoff as n}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ReadShadowMap as d}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{WaterDistortion as l}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js\";import{ForwardLinearDepth as s}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{NormalUtils as v}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js\";import{Water as g}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js\";function c(c){const m=new a;return m.include(o,{linearDepth:!1}),m.attributes.add(\"position\",\"vec3\"),m.attributes.add(\"uv0\",\"vec2\"),m.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"localOrigin\",\"vec3\"),m.vertex.uniforms.add(\"waterColor\",\"vec4\"),0!==c.output&&7!==c.output||(m.include(v,c),m.include(s,c),m.varyings.add(\"vuv\",\"vec2\"),m.varyings.add(\"vpos\",\"vec3\"),m.varyings.add(\"vnormal\",\"vec3\"),m.varyings.add(\"vtbnMatrix\",\"mat3\"),m.vertex.code.add(e`\n      void main(void) {\n        if (waterColor.a < ${e.float(n)}) {\n          // Discard this vertex\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          return;\n        }\n\n        vuv = uv0;\n        vpos = position;\n\n        vnormal = getLocalUp(vpos, localOrigin);\n        vtbnMatrix = getTBNMatrix(vnormal);\n\n        gl_Position = transformPosition(proj, view, vpos);\n        ${0===c.output?\"forwardLinearDepth();\":\"\"}\n      }\n    `)),7===c.output&&(m.include(i,c),m.fragment.uniforms.add(\"waterColor\",\"vec4\"),m.fragment.code.add(e`\n        void main() {\n          discardBySlice(vpos);\n\n          gl_FragColor = vec4(waterColor.a);\n        }\n      `)),0===c.output&&(m.include(l,c),m.include(i,c),c.receiveShadows&&m.include(d,c),m.include(g,c),m.fragment.uniforms.add(\"waterColor\",\"vec4\").add(\"lightingMainDirection\",\"vec3\").add(\"lightingMainIntensity\",\"vec3\").add(\"camPos\",\"vec3\").add(\"timeElapsed\",\"float\").add(\"view\",\"mat4\"),m.fragment.include(r),m.fragment.code.add(e`\n      void main() {\n        discardBySlice(vpos);\n        vec3 localUp = vnormal;\n        // the created normal is in tangent space\n        vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);\n\n        // we rotate the normal according to the tangent-bitangent-normal-Matrix\n        vec3 n = normalize(vtbnMatrix * tangentNormalFoam.xyz);\n        vec3 v = -normalize(vpos - camPos);\n        vec3 l = normalize(-lightingMainDirection);\n        float shadow = ${c.receiveShadows?e`1.0 - readShadowMap(vpos, linearDepth)`:\"1.0\"};\n        vec4 vPosView = view*vec4(vpos, 1.0);\n        vec4 final = vec4(getSeaColor(n, v, l, waterColor.rgb, lightingMainIntensity, localUp, shadow, tangentNormalFoam.w, vPosView.xyz), waterColor.w);\n\n        // gamma correction\n        gl_FragColor = delinearizeGamma(final);\n        gl_FragColor = highlightSlice(gl_FragColor, vpos);\n        ${c.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),2===c.output&&(m.include(v,c),m.include(l,c),m.include(i,c),m.varyings.add(\"vpos\",\"vec3\"),m.varyings.add(\"vuv\",\"vec2\"),m.vertex.code.add(e`\n        void main(void) {\n          if (waterColor.a < ${e.float(n)}) {\n            // Discard this vertex\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n            return;\n          }\n\n          vuv = uv0;\n          vpos = position;\n\n          gl_Position = transformPosition(proj, view, vpos);\n        }\n    `),m.fragment.uniforms.add(\"timeElapsed\",\"float\"),m.fragment.code.add(e`\n        void main() {\n          discardBySlice(vpos);\n\n          // the created normal is in tangent space and foam\n          vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);\n          tangentNormalFoam.xyz = normalize(tangentNormalFoam.xyz);\n\n          gl_FragColor = vec4((tangentNormalFoam.xyz + vec3(1.0)) * 0.5, tangentNormalFoam.w);\n        }\n    `)),5===c.output&&(m.varyings.add(\"vpos\",\"vec3\"),m.vertex.code.add(e`\n        void main(void) {\n          if (waterColor.a < ${e.float(n)}) {\n            // Discard this vertex\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n            return;\n          }\n\n          vpos = position;\n          gl_Position = transformPosition(proj, view, vpos);\n        }\n    `),m.fragment.uniforms.add(\"waterColor\",\"vec4\"),m.fragment.code.add(e`\n        void main() {\n          gl_FragColor = waterColor;\n        }\n    `)),4===c.output&&(m.include(t),m.varyings.add(\"vpos\",\"vec3\"),m.vertex.code.add(e`\n      void main(void) {\n        if (waterColor.a < ${e.float(n)}) {\n          // Discard this vertex\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          return;\n        }\n\n        vpos = position;\n        gl_Position = transformPosition(proj, view, vpos);\n      }\n    `),m.include(i,c),m.fragment.code.add(e`\n      void main() {\n        discardBySlice(vpos);\n        outputHighlight();\n      }\n    `)),m}var m=Object.freeze({__proto__:null,build:c});export{m as W,c as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction n(n,r){for(const[o,t]of n)if(r(t,o))return!0;return!1}function r(n,r){for(const[o,t]of n)if(r(t,o))return t;return null}export{r as findInMap,n as someMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../core/mathUtils.js\";function n(n,f,i){const u=n.byteLength/(4*f),c=new Uint32Array(n,0,u*f);let s=new Uint32Array(u);const a=i&&i.minReduction||0,h=i&&i.originalIndices||null,g=i&&i.componentOffsets||null;let y=0;if(g)for(let t=0;t<g.length-1;t++){const n=g[t+1]-g[t];n>y&&(y=n)}else y=u;const U=Math.floor(1.1*y)+1;(null==o||o.length<2*U)&&(o=new Uint32Array(t(2*U)));for(let t=0;t<2*U;t++)o[t]=0;let w=0;const A=!!g&&!!h,m=A?h.length:u,b=A?new Uint32Array(h.length):null,d=1.96;let p=0!==a?Math.ceil(4*d*d/(a*a)*a*(1-a)):m,M=1,q=g?g[1]:m;for(let t=0;t<m;t++){if(t===p){const n=1-w/t;if(n+d*Math.sqrt(n*(1-n)/t)<a)return null;p*=2}if(t===q){for(let t=0;t<2*U;t++)o[t]=0;if(h)for(let t=g[M-1];t<g[M];t++)b[t]=s[h[t]];q=g[++M]}const n=A?h[t]:t,r=n*f,i=l(c,r,f);let u=i%U,y=w;for(;0!==o[2*u+1];){if(o[2*u]===i){const t=o[2*u+1]-1;if(e(c,r,t*f,f)){y=s[t];break}}u++,u>=U&&(u-=U)}y===w&&(o[2*u]=i,o[2*u+1]=n+1,w++),s[n]=y}if(0!==a&&1-w/u<a)return null;if(A){for(let t=g[M-1];t<b.length;t++)b[t]=s[h[t]];s=b}const x=new Uint32Array(f*w);w=0;for(let t=0;t<m;t++)if(s[t]===w){r(c,(A?h[t]:t)*f,x,w*f,f),w++}if(h&&!A){const t=new Uint32Array(h.length);for(let n=0;n<t.length;n++)t[n]=s[h[n]];s=t}return{buffer:x.buffer,indices:s,uniqueCount:w}}function e(t,n,e,r){for(let l=0;l<r;l++)if(t[n+l]!==t[e+l])return!1;return!0}function r(t,n,e,r,l){for(let o=0;o<l;o++)e[r+o]=t[n+o]}function l(t,n,e){let r=0;for(let l=0;l<e;l++)r=t[n+l]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let o=null;export default n;export{n as deduplicate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isClockwise as n}from\"./coordsUtils.js\";import{earcut as t}from\"../../core/libs/earcut/earcut.js\";import{deduplicate as e}from\"./meshUtils/deduplicate.js\";function o(n){const o=r(n.rings,n.hasZ,1),l=[];let s=0,i=0;for(const n of o.polygons){const e=n.count,r=n.index,c=new Float64Array(o.position.buffer,3*r*o.position.BYTES_PER_ELEMENT,3*e),h=n.holeIndices.map((n=>n-r)),f=new Uint32Array(t(c,h,3));l.push({position:c,faces:f}),s+=c.length,i+=f.length}const c=function(n,t,e){if(1===n.length)return n[0];const o=new Float64Array(t),r=new Uint32Array(e);let l=0,s=0,i=0;for(const t of n){for(let n=0;n<t.position.length;n++)o[l++]=t.position[n];for(let n=0;n<t.faces.length;n++)r[s++]=t.faces[n]+i;i=l/3}return{position:o,faces:r}}(l,s,i),h=e(c.position.buffer,6,{originalIndices:c.faces});return c.position=new Float64Array(h.buffer),c.faces=h.indices,c}function r(t,e,o){const r=t.length,s=new Array(r),i=new Array(r),c=new Array(r);let h=0,f=0,g=0,a=0;for(let n=0;n<r;++n)a+=t[n].length;const u=new Float64Array(3*a);let p=0;for(let a=r-1;a>=0;a--){const d=t[a],y=1===o&&!n(d,!1,!1);if(y&&1!==r)s[h++]=d;else{let n=d.length;for(let t=0;t<h;++t)n+=s[t].length;const t={index:p,pathLengths:new Array(h+1),count:n,holeIndices:new Array(h)};t.pathLengths[0]=d.length,d.length>0&&(c[g++]={index:p,count:d.length}),p=y?l(d,d.length-1,-1,u,p,d.length,e):l(d,0,1,u,p,d.length,e);for(let n=0;n<h;++n){const o=s[n];t.holeIndices[n]=p,t.pathLengths[n+1]=o.length,o.length>0&&(c[g++]={index:p,count:o.length}),p=l(o,0,1,u,p,o.length,e)}h=0,t.count>0&&(i[f++]=t)}}for(let n=0;n<h;++n){const t=s[n];t.length>0&&(c[g++]={index:p,count:t.length}),p=l(t,0,1,u,p,t.length,e)}return f<r&&(i.length=f),g<r&&(c.length=g),{position:u,polygons:i,outlines:c}}function l(n,t,e,o,r,l,s){r*=3;for(let i=0;i<l;++i){const l=n[t];o[r++]=l[0],o[r++]=l[1],o[r++]=s?l[2]:0,t+=e}return r/3}export{r as pathsToTriangulationInfo,o as triangulate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{c as s,f as t}from\"../../../../chunks/vec3f64.js\";class i{constructor(i=s(),c=t(.57735,.57735,.57735),n=!0){this.intensity=i,this.direction=c,this.castShadows=n}}class c{constructor(i=s(),c=t(.57735,.57735,.57735)){this.intensity=s(),this.direction=s(),this.intensity=i,this.direction=c}}class n{constructor(t=s()){this.intensity=t}}class o{constructor(){this.sh={r:[0],g:[0],b:[0]}}}export{n as AmbientLight,c as FillLight,i as MainLight,o as SphericalHarmonicsLight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as E}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as _}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import I from\"../../../core/Accessor.js\";let S=class extends I{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.SCENEVIEW_LOCKING_LOG=!1,this.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1,this.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TERRAIN_DEBUG_POPUP=!1,this.TESTS_DISABLE_UPDATE_THRESHOLDS=!1,this.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=!1,this.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.ENABLE_PROFILE_DEPTH_RANGE=!1,this.DISABLE_FAST_UPDATES=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1}};E([_()],S.prototype,\"SCENEVIEW_HITTEST_RETURN_INTERSECTOR\",void 0),E([_()],S.prototype,\"SCENEVIEW_LOCKING_LOG\",void 0),E([_()],S.prototype,\"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED\",void 0),E([_()],S.prototype,\"HIGHLIGHTS_PROFILE_TO_CONSOLE\",void 0),E([_()],S.prototype,\"DECONFLICTOR_SHOW_VISIBLE\",void 0),E([_()],S.prototype,\"DECONFLICTOR_SHOW_INVISIBLE\",void 0),E([_()],S.prototype,\"DECONFLICTOR_SHOW_GRID\",void 0),E([_()],S.prototype,\"LABELS_SHOW_BORDER\",void 0),E([_()],S.prototype,\"OVERLAY_DRAW_DEBUG_TEXTURE\",void 0),E([_()],S.prototype,\"OVERLAY_SHOW_CENTER\",void 0),E([_()],S.prototype,\"SHOW_POI\",void 0),E([_()],S.prototype,\"TERRAIN_DEBUG_POPUP\",void 0),E([_()],S.prototype,\"TESTS_DISABLE_UPDATE_THRESHOLDS\",void 0),E([_()],S.prototype,\"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET\",void 0),E([_()],S.prototype,\"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES\",void 0),E([_()],S.prototype,\"DRAW_MESH_GEOMETRY_NORMALS\",void 0),E([_()],S.prototype,\"FEATURE_TILE_FETCH_SHOW_TILES\",void 0),E([_()],S.prototype,\"FEATURE_TILE_TREE_SHOW_TILES\",void 0),E([_()],S.prototype,\"I3S_TREE_SHOW_TILES\",void 0),E([_()],S.prototype,\"I3S_SHOW_MODIFICATIONS\",void 0),E([_()],S.prototype,\"ENABLE_PROFILE_DEPTH_RANGE\",void 0),E([_()],S.prototype,\"DISABLE_FAST_UPDATES\",void 0),E([_()],S.prototype,\"LOD_INSTANCE_RENDERER_DISABLE_UPDATES\",void 0),E([_()],S.prototype,\"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL\",void 0),E([_()],S.prototype,\"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES\",void 0),S=E([o(\"esri.views.3d.support.DebugFlags\")],S);const t=new S;export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import\"../../../core/mathUtils.js\";import\"../../../chunks/builtins.js\";import{getGpuMemoryUsage as e}from\"../../webgl/Util.js\";import r from\"../../webgl/FramebufferObject.js\";import\"../../webgl/RenderingContext.js\";class t{constructor(e,t,i,s){this._renderTarget=null,this.id=`${t}_${++i}`,this._renderTarget=new r(e,{colorTarget:0,depthStencilTarget:0},{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9987,hasMipmap:s,maxAnisotropy:8,width:0,height:0})}dispose(){this._renderTarget.dispose(),this._renderTarget=null}getTexture(){return this._renderTarget?this._renderTarget.colorTexture:null}isValid(){return null!==this._renderTarget}resize(e,r){this._renderTarget.resize(e,r)}bind(e){e.bindFramebuffer(this._renderTarget)}generateMipMap(){this._renderTarget.colorTexture.descriptor.hasMipmap&&this._renderTarget.colorTexture.generateMipmap()}disposeRenderTargetMemory(){this._renderTarget&&this._renderTarget.resize(0,0)}getGpuMemoryUsage(){let r=0;return this._renderTarget&&(r+=e(this._renderTarget)),r}}export{t as OverlayRenderTarget};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{b as n,f as t}from\"../../../../chunks/vec3f64.js\";class r{constructor(n,t){this.vec3=n,this.id=t}}function s(t,s){return new r(n(t),s)}function c(n,s,c,e){return new r(t(n,s,c),e)}export{r as LocalOrigin,c as fromValues,s as fromVector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{OverlayRenderTarget as r}from\"./OverlayRenderTarget.js\";import{fromValues as t}from\"../webgl-engine/lib/localOrigin.js\";class s{constructor(s,a){this.extent=e(),this.resolution=0,this.renderLocalOrigin=t(0,0,0,\"O\"),this.pixelRatio=1,this.renderTargets={color:{fbo:new r(s,\"overlay\",a,!0),valid:!1,lastUsed:1/0},colorWithoutRasterImage:{fbo:new r(s,\"overlayWithoutRasterImage\",a,!0),valid:!1,lastUsed:1/0},highlight:{fbo:new r(s,\"overlayHighlight\",a,!1),valid:!1,lastUsed:1/0},water:{fbo:new r(s,\"overlayWaterMask\",a,!0),valid:!1,lastUsed:1/0},occluded:{fbo:new r(s,\"overlayOccluded\",a,!0),valid:!1,lastUsed:1/0}}}dispose(){this.renderTargets.color.fbo.dispose(),this.renderTargets.colorWithoutRasterImage.fbo.dispose(),this.renderTargets.highlight.fbo.dispose(),this.renderTargets.water.fbo.dispose(),this.renderTargets.occluded.fbo.dispose()}drawRenderTargets(e,r,t){const s=this.renderTargets;s.color.valid=e.drawPass(0,s.color.fbo,r),s.highlight.valid=e.drawPass(5,s.highlight.fbo,r),s.water.valid=e.drawPass(3,s.water.fbo,r),s.occluded.valid=e.drawPass(0,s.occluded.fbo,r,1),s.colorWithoutRasterImage.valid=t&&e.drawPass(0,s.colorWithoutRasterImage.fbo,r,2)}computeRenderTargetValidityBitfield(){const e=this.renderTargets;return+e.color.valid|+e.colorWithoutRasterImage.valid<<1|+e.highlight.valid<<2|+e.water.valid<<3|+e.occluded.valid<<4}validateUsage(e,r){if(e.valid)e.lastUsed=r;else if(r-e.lastUsed>a)e.fbo.disposeRenderTargetMemory(),e.lastUsed=1/0;else if(e.lastUsed<1/0)return!0;return!1}collectUnusedMemory(e){let r=!1;return r=this.validateUsage(this.renderTargets.color,e)||r,r=this.validateUsage(this.renderTargets.colorWithoutRasterImage,e)||r,r=this.validateUsage(this.renderTargets.highlight,e)||r,r=this.validateUsage(this.renderTargets.occluded,e)||r,r=this.validateUsage(this.renderTargets.water,e)||r,r}getGpuMemoryUsage(){return this.renderTargets.color.fbo.getGpuMemoryUsage()+this.renderTargets.colorWithoutRasterImage.fbo.getGpuMemoryUsage()+this.renderTargets.highlight.fbo.getGpuMemoryUsage()+this.renderTargets.water.fbo.getGpuMemoryUsage()+this.renderTargets.occluded.fbo.getGpuMemoryUsage()}}const a=1e3;export{s as Overlay};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{removeUnordered as s}from\"../../../../../core/arrayUtils.js\";class r{constructor(){this._uniforms={proj:[],shadowMapDistance:[],viewportPixelSz:[],lightingMainDirection:[]}}dispose(){this._uniforms=null}getPrograms(s){return this._uniforms[s]||[]}subscribeProgram(s){for(const r in this._uniforms)s.hasUniform(r)&&this._uniforms[r].push(s)}unsubscribeProgram(r){for(const i in this._uniforms)s(this._uniforms[i],r)}}export{r as CommonUniformStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../../core/maybe.js\";import{all as t}from\"../../../../../core/promiseUtils.js\";class r{constructor(e){this.technique=e,this.refCount=0,this.refZeroFrame=0}}class s{constructor(e){this._context=e,this._perConstructorInstances=new Map,this._frameCounter=0,this._keepAliveFrameCount=1200}get viewingMode(){return this._context.viewingMode}get constructionContext(){return this._context}dispose(){this._perConstructorInstances.forEach((e=>e.forEach((e=>e.technique.dispose())))),this._perConstructorInstances.clear()}acquire(e,t){const s=t.key;let o=this._perConstructorInstances.get(e);o||(o=new Map,this._perConstructorInstances.set(e,o));let n=o.get(s);return void 0===n&&(n=new r(new e(this._context,t)),o.set(s,n)),++n.refCount,n.technique}acquireAndReleaseExisting(t,r,s){return e(s)?this.acquire(t,r):r.key===s.key&&s instanceof t?s:(this.release(s),this.acquire(t,r))}release(e){const t=this._perConstructorInstances.get(e.constructor).get(e.key);t.refCount-=1,0===t.refCount&&(t.refZeroFrame=this._frameCounter)}frameUpdate(){this._frameCounter++,this._perConstructorInstances.forEach(((e,t)=>{e.forEach(((t,r)=>{0===t.refCount&&t.refZeroFrame+this._keepAliveFrameCount<this._frameCounter&&(t.technique.dispose(),e.delete(r))})),0===e.size&&this._perConstructorInstances.delete(t)}))}getProgramsUsingUniform(e){return this._context.commonUniformStore.getPrograms(e)}async hotReload(){const e=new Array;this._perConstructorInstances.forEach(((t,r)=>{e.push((async(e,t)=>{const r=t.shader;r&&(await r.reload(),e.forEach((e=>{e.technique.reload(this._context)})))})(t,r))})),await t(e)}}export{s as ShaderTechniqueRepository};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst t=[{output:0,name:\"color\"},{output:1,name:\"depth\"},{output:2,name:\"normal\"},{output:3,name:\"depthShadowMap\"},{output:4,name:\"highlight\"},{output:5,name:\"draped\"},{output:6,name:\"occlusion\"},{output:7,name:\"alpha\"}];function u(u,o){return u+\"_\"+t.find((t=>t.output===o)).name}export{t as ShaderOutputTypes,u as getShaderOutputID};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import t from\"../../../../core/Logger.js\";import{assert as i}from\"./Util.js\";import{getShaderOutputID as r,ShaderOutputTypes as a}from\"../core/shaderLibrary/ShaderOutputOptions.js\";const s=t.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRep\");class o{constructor(e){this.refCnt=0,this.glMaterial=e}incRefCnt(){++this.refCnt}decRefCnt(){--this.refCnt,i(this.refCnt>=0)}getRefCnt(){return this.refCnt}getGLMaterial(){return this.glMaterial}}export default class{constructor(e,t,i){this._textureRep=e,this._techniqueRep=t,this.onMaterialChanged=i,this._id2glMaterialRef=new Map}dispose(){this._textureRep.dispose()}acquire(e,t){this.ownMaterial(e);const i=r(e.id,t);let a=this._id2glMaterialRef.get(i);if(null==a){const r=e.getGLMaterial({material:e,techniqueRep:this._techniqueRep,textureRep:this._textureRep,output:t});return a=new o(r),a.incRefCnt(),this._id2glMaterialRef.set(i,a),r}return a.incRefCnt(),a.getGLMaterial()}release(e,t){const i=r(e.id,t),a=this._id2glMaterialRef.get(i);if(a.decRefCnt(),0===a.getRefCnt()){const e=a.getGLMaterial();e&&e.dispose(),this._id2glMaterialRef.delete(i)}}materialChanged(e){for(const t of a)if(5!==t.output&&6!==t.output){const i=this._id2glMaterialRef.get(r(e.id,t.output));if(i&&i.getGLMaterial()){const e=i.getGLMaterial();e.updateParameters&&e.updateParameters()}}this.onMaterialChanged&&this.onMaterialChanged(e)}ownMaterial(t){e(t.materialRepository)&&t.materialRepository!==this&&s.error(\"Material is already owned by a different material repository\"),t.materialRepository=this}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import i from\"../../../../geometry/SpatialReference.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{f as o}from\"../../../../chunks/vec3.js\";import{projectBuffer as s}from\"../../../../geometry/projection.js\";import{I as e}from\"../../../../chunks/mat4f64.js\";import{VertexAttrConstants as n}from\"./Util.js\";import{GeometryData as a}from\"./GeometryData.js\";import c from\"./Object3D.js\";import h from\"./Geometry.js\";import{fromValues as m}from\"./localOrigin.js\";import d from\"./Layer.js\";import{RibbonLineMaterial as O}from\"../materials/RibbonLineMaterial.js\";let _=0;class l{constructor(){this.ROOT_ORIGIN_ID=\"rg_root_\"+_++,this._origins=new Map,this._gridSize=42e5}getOrigin(i){const r=this._origins.get(this.ROOT_ORIGIN_ID);if(null==r){if(t(l.testOrigin)){const t=l.testOrigin;return this._origins.set(this.ROOT_ORIGIN_ID,m(t[0],t[1],t[2],this.ROOT_ORIGIN_ID)),this.getOrigin(i)}const r=m(i[0]+Math.random()-.5,i[1]+Math.random()-.5,i[2]+Math.random()-.5,this.ROOT_ORIGIN_ID);return this._origins.set(this.ROOT_ORIGIN_ID,r),r}o(g,i,r.vec3),g[0]=Math.abs(g[0]),g[1]=Math.abs(g[1]),g[2]=Math.abs(g[2]);const s=this._gridSize;if(g[0]<s&&g[1]<s&&g[2]<s)return r;const e=Math.round(i[0]/s),n=Math.round(i[1]/s),a=Math.round(i[2]/s),c=`rg_${e}/${n}/${a}`;let h=this._origins.get(c);return h||(h=m(e*s,n*s,a*s,c),this._origins.set(c,h)),h}_drawOriginBox(t){const r=window.view,o=r._stage;if(null==this._object){this._material=new O({width:2,color:[0,1,0,1]},\"GridLocalOriginMaterial\"),o.add(3,this._material);const t=new d(\"GridLocalOrigin\",{isPickable:!1});o.add(0,t),this._object=new c({idHint:\"GridLocalOrigin\",castShadow:!1}),o.add(1,this._object),t.addObject(this._object),o.addToViewContent([t.id])}const m=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],_=m.length,l=new Float32Array(3*_),g=new Uint32Array(2*(_-1)),f=.5*this._gridSize;for(let i=0;i<_;i++)l[3*i+0]=t[0]+(1&m[i]?f:-f),l[3*i+1]=t[1]+(2&m[i]?f:-f),l[3*i+2]=t[2]+(4&m[i]?f:-f),i>0&&(g[2*i+0]=i-1,g[2*i+1]=i);s(l,i.WebMercator,0,l,r.spatialReference,0,_);const I={};I[n.POSITION]={size:3,data:l};const j={};j[n.POSITION]=g;const p=new a(I,j,\"line\"),u=new h(p,\"GridLocalOriginBox\");o.add(2,u),this._object.addGeometry(u,this._material,e),console.log(this._origins.size,t)}}const g=r();!function(t){t.testOrigin=null}(l||(l={}));var f=l;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{getFirstObjectValue as t}from\"./Util.js\";function e(t){const e=new Map;let n=null,r=null;const d=t=>{if(t===n)return r;let o=e.get(t);return o||(o={toAdd:[],numToAdd:-1,toRemove:[],numToRemove:-1,toUpdate:[],numToUpdate:-1},e.set(t,o)),n=t,r=o,o};for(let e=0;e<t.numToAdd;e++){const n=t.toAdd[e];if(o(n)){d(n.material).toAdd.push(n)}}for(let e=0;e<t.numToRemove;e++){const n=t.toRemove[e];if(o(n)){d(n.material).toRemove.push(n)}}for(let e=0;e<t.numToUpdate;e++){const n=t.toUpdate[e];if(o(n.renderGeometry)){d(n.renderGeometry.material).toUpdate.push(n)}}return e}function o(e){return o=e.data,t(o.indices).length>=1;var o}export{e as splitRenderGeometryChangeSetByMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as r}from\"../../../../core/mathUtils.js\";class t{constructor(t){null==t?t=16:t<65536&&(t=r(t)),this._array=new Float32Array(t),this._size=0}resize(r,t){if(this._size=r,this._size>this._array.length){let r=this._array.length||1;for(;r<this._size;)r*=2;const s=new Float32Array(r);return t&&s.set(this._array),this._array=s,!0}const s=2*this._size;if(s<=this._array.length){let r=this._array.length;for(;r>=s;)r=Math.floor(r/2);const a=new Float32Array(r);return t&&a.set(this._array.subarray(0,r)),this._array=a,!0}return!1}append(r){const t=this._size;this.resize(this._size+r.length,!0),this._array.set(r,t)}erase(r,t){for(let s=r;s<t;++s)this._array[s]=0}get array(){return this._array}get size(){return this._size}}export{t as ResizableFloat32Array};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as i,parameter as o}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"../lib/DefaultVertexAttributeLocations.js\";import a from\"../../../webgl/Program.js\";import{makePipelineState as n,defaultDepthWriteParams as p,defaultColorWriteParams as u}from\"../../../webgl/renderState.js\";import{View as h}from\"../core/shaderLibrary/util/View.glsl.js\";import{DefaultTextureUnits as c}from\"../lib/DefaultTextureUnits.js\";import{Slice as d}from\"../core/shaderLibrary/Slice.glsl.js\";import{OutputHighlight as l}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{blendingDefault as g,OITBlending as m,OITDepthTest as f,OITDepthWrite as b,getOITPolygonOffset as y}from\"../lib/OrderIndependentTransparency.js\";import{ReadShadowMap as w}from\"../core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{ScreenSpaceReflections as S}from\"../core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js\";import{WaterDistortion as T}from\"../core/shaderLibrary/shading/WaterDistortion.glsl.js\";import{W as x}from\"../../../../chunks/WaterSurface.glsl.js\";class j extends r{constructor(t,e){super(t,e),this.waterTextureRepository=t.waterTextureRepository}initializeProgram(t){const e=j.shader.get(),r=this.configuration,i=e.build({OITEnabled:0===r.transparencyPassType,output:r.output,viewingMode:t.viewingMode,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,receiveShadows:r.receiveShadows,pbrMode:3,useCustomDTRExponentForWater:!0,ssrEnabled:r.useSSR,highStepCount:!0});return new a(t.rctx,i.generateSource(\"vertex\"),i.generateSource(\"fragment\"),s)}ensureResource(t){return this.waterTextureRepository.ready||this.waterTextureRepository.updating||this.waterTextureRepository.loadTextures(t),this.waterTextureRepository.ready?2:1}bindPass(t,e,r){h.bindProjectionMatrix(this.program,r.camera.projectionMatrix),0===this.configuration.output&&(r.lighting.setUniforms(this.program,!1),S.bindUniforms(this.program,t,r)),0!==this.configuration.output&&2!==this.configuration.output||(T.bindUniforms(this.program,e),this.waterTextureRepository.bindRepo(t)),this.program.setUniform4fv(\"waterColor\",e.color),4===this.configuration.output&&l.bindOutputHighlight(t,this.program,r)}bindDraw(t){h.bindView(this.program,t),0!==this.configuration.output&&7!==this.configuration.output||h.bindCamPosition(this.program,t.origin,t.camera.viewInverseTransposeMatrix),0===this.configuration.output&&w.bindUniforms(this.program,t,c.SHADOW_MAP),0!==this.configuration.output&&7!==this.configuration.output&&4!==this.configuration.output||d.bindUniformsWithOrigin(this.program,this.configuration,t)}setPipelineState(t){const e=this.configuration,r=3===t,i=2===t;return n({blending:2!==e.output&&4!==e.output&&e.transparent?r?g:m(t):null,depthTest:{func:f(t)},depthWrite:r?e.writeDepth&&p:b(t),colorWrite:u,polygonOffset:r||i?null:y(e.enableOffset)})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}j.shader=new e(x,(()=>import(\"../shaders/WaterSurface.glsl.js\")));class v extends i{constructor(){super(...arguments),this.output=0,this.receiveShadows=!1,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!1,this.useSSR=!1,this.isDraped=!1,this.transparencyPassType=3}}t([o({count:8})],v.prototype,\"output\",void 0),t([o()],v.prototype,\"receiveShadows\",void 0),t([o()],v.prototype,\"slicePlaneEnabled\",void 0),t([o()],v.prototype,\"transparent\",void 0),t([o()],v.prototype,\"enableOffset\",void 0),t([o()],v.prototype,\"writeDepth\",void 0),t([o()],v.prototype,\"useSSR\",void 0),t([o()],v.prototype,\"isDraped\",void 0),t([o({count:4})],v.prototype,\"transparencyPassType\",void 0);export{j as WaterTechnique,v as WaterTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../lib/GLMaterial.js\";import{WaterTechnique as e}from\"./WaterTechnique.js\";class a extends t{constructor(t){super(t),this.updateParameters()}updateParameters(t){this.technique=this.techniqueRep.acquireAndReleaseExisting(e,this.material.getTechniqueConfig(this.output,t),this.technique)}beginSlot(t){if(2===this.output)return 22===t;if(5===this.output)return null==t;if(4===this.output)return 3===t;let e=3;return this.material.params.transparent&&(e=this.material.params.writeDepth?5:8),t===e}setElapsedTimeUniform(t){const e=.001*this.material.animation.time;t.setUniform1f(\"timeElapsed\",e*this.material.params.animationSpeed)}_updateShadowState(t){t.shadowMappingEnabled!==this.material.params.receiveShadows&&this.material.setParameterValues({receiveShadows:t.shadowMappingEnabled})}_updateSSRState(t){t.ssrEnabled!==this.material.params.ssrEnabled&&this.material.setParameterValues({ssrEnabled:t.ssrEnabled})}ensureResources(t){return this.technique.ensureResource(t)}ensureParameters(t){0===this.output&&(this._updateShadowState(t),this._updateSSRState(t)),this.updateParameters(t)}bind(t,e){t.bindProgram(this.technique.program),this.technique.bindPass(t,this.material.params,e),2!==this.output&&0!==this.output||this.setElapsedTimeUniform(this.technique.program)}}export{a as WaterGLMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{a as t,b as o}from\"../../../../../chunks/mat4.js\";import{b as r}from\"../../../../../chunks/mat4f64.js\";class s{constructor(s,i,n,m,f,a){this.from=s,this.to=i,this.isVisible=n,this.hasHighlights=m,this.hasOccludees=f,this.transformation=a,null!=a&&(this.transformationNormal=r(a),t(this.transformationNormal,this.transformationNormal),o(this.transformationNormal,this.transformationNormal))}}function i(t){return t.sort(((t,o)=>t.from===o.from?t.to>o.to?1:t.to<o.to?-1:0:t.from>o.from?1:t.from<o.from?-1:0))}function n(t,o){const r=t=>({first:t.from,count:t.to-t.from});if(0===t.length)return void t.push(r(o));const s=t[t.length-1];if(n=o,(i=s).first+i.count>=n.from){const t=o.from-s.first+o.to-o.from;s.count=t}else t.push(r(o));var i,n}export{s as Instance,n as addOrMerge,i as sortInstancesAccordingToRange};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{once as t}from\"../../../../core/accessorSupport/utils.js\";import s from\"../../../../core/PerformanceSampler.js\";import{startMeasurement as r}from\"../../../webgl/Measurement.js\";const i=[\"prepare\",\"shadowmap\",\"lineardepth\",\"normals\",\"ssao\",\"opaque\",\"opaque edges\",\"transparent\",\"transparent edges\",\"hudvisibility\",\"transparent terrain\",\"atmosphere\",\"laserline\",\"occluded\",\"antialiasing\",\"highlights\",\"hudOccluded\",\"hudNotoccluded\"];class a{constructor(){this.triangles=0,this.drawCalls=0}reset(){this.triangles=0,this.drawCalls=0}}function o(t,s,r){e(r)&&(r.drawCalls+=t,r.triangles+=s)}class n extends s{constructor(){super(\"total\"),this.total=0,this.frameCount=0}}class l{constructor(){this._startTime=0,this._lastSample=0,this._enableGPUTimer=0,this.totalTime=new n,this.gpuTime=new s(\"gpu\",9),this.renderPassTimings=i.map((e=>new s(e))),this.stats=new a}enableGPUTimer(){return++this._enableGPUTimer,{remove:t((()=>--this._enableGPUTimer))}}prerender(e){this._startTime=this._lastSample=performance.now(),this._enableGPUTimer&&(this._gpuTimer=r(e))}advance(e){const t=performance.now();this.renderPassTimings[e].record(t-this._lastSample),this._lastSample=t}postrender(){e(this._gpuTimer)&&(this._gpuTimer.stop((t=>e(t)&&this.gpuTime.record(t)),16),this._gpuTimer=null);const t=performance.now()-this._startTime;this.totalTime.record(t),this.totalTime.total+=t,this.totalTime.frameCount++}}export{a as RenderStats,n as RenderTime,l as RendererPerformanceInfo,o as addToRenderStats,i as performanceStatsCategories};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../../core/maybe.js\";import{m as s,a,b as i}from\"../../../../../chunks/mat4.js\";import{someMap as r}from\"../../../../../core/MapUtils.js\";import{a as n}from\"../../../../../chunks/mat4f64.js\";import{glLayout as o}from\"../../../support/buffer/glUtil.js\";import{assert as l,setMatrixTranslation3 as d}from\"../../lib/Util.js\";import h from\"../../../../webgl/BufferObject.js\";import{getStride as m}from\"../../../../webgl/Util.js\";import u from\"../../../../webgl/VertexArrayObject.js\";import{acquireMaterials as c,releaseMaterials as f,calculateTransformRelToOrigin as g}from\"./utils.js\";import{ResizableFloat32Array as p}from\"../../lib/ResizableFloat32Array.js\";import{WaterGLMaterial as b}from\"../WaterGLMaterial.js\";import{Instance as y,sortInstancesAccordingToRange as C,addOrMerge as _}from\"./Instance.js\";import{addToRenderStats as w}from\"../../statistics/RendererPerformanceInfo.js\";const v={begin:0,end:0},O=n(),H=n(),B=n();export default class{constructor(e,t,s){this.type=\"MergedRenderer\",this._dataByOrigin=new Map,this._hasHighlights=!1,this._hasOccludees=!1,this._rctx=e,this._material=s,this._materialRep=t,this._glMaterials=c(this._material,this._materialRep),this._bufferWriter=s.createBufferWriter()}dispose(){f(this._material,this._materialRep),this._dataByOrigin&&(this._dataByOrigin.forEach((e=>{e.vao.dispose(!0),e.vao=null})),this._dataByOrigin.clear(),this._dataByOrigin=null),this._glMaterials&&(this._glMaterials.forEach((e=>{e&&e.dispose()})),this._glMaterials.clear(),this._glMaterials=null)}get isEmpty(){return 0===this._dataByOrigin.size}get hasHighlights(){return this._hasHighlights}get hasOccludees(){return this._hasOccludees}get hasWater(){return!this.isEmpty&&r(this._glMaterials,(e=>e instanceof b))}get rendersOccluded(){return!this.isEmpty&&1!==this._material.renderOccluded}modify(e){this.updateGeometries(e.toUpdate),this.addAndRemoveGeometries(e.toAdd,e.toRemove),this.updateRenderCommands()}addAndRemoveGeometries(e,t){const s=this._bufferWriter,a=s.vertexBufferLayout,i=a.stride/4,r=this._dataByOrigin,n=function(e,t,s,a){const i=new Map,r=t.vertexBufferLayout.stride/4,n=(s,a)=>{const n=s.origin,o=e.get(n.id);let l=i.get(n.id);null==l&&(l={optimalCount:null==o?0:o.optimalCount,sparseCount:null==o?0:o.buffer.size,toAdd:[],toRemove:[],origin:n.vec3},i.set(n.id,l));const d=t.elementCount(s.data)*r;a?(l.optimalCount+=d,l.sparseCount+=d,l.toAdd.push(s)):(l.optimalCount-=d,l.toRemove.push(s))};for(const e of s)n(e,!0);for(const e of a)n(e,!1);return i}(r,s,e,t);n.forEach(((e,t)=>{n.delete(t);const s=e.optimalCount,o=e.sparseCount;let h=r.get(t);if(null==h)l(s>0),h=this.createData(a,s,e.origin),r.set(t,h);else if(0===s)return h.vao.dispose(!0),h.vao=null,void r.delete(t);const m=s<e.sparseCount/2,u=m?s:o,c=v,f=h.buffer.size,g=h.buffer.array,p=h.buffer.resize(u,!1);m||p?this.removeAndRebuild(h,e.toRemove,i,g,c):e.toRemove.length>0?(this.removeByErasing(h,e.toRemove,i,c),e.toAdd.length>0&&(c.end=f)):(c.begin=f,c.end=f);const b=O;d(b,-e.origin[0],-e.origin[1],-e.origin[2]),this.append(h,e.toAdd,i,b,c);const y=h.vao.vertexBuffers.geometry;if(y.byteSize!==h.buffer.array.buffer.byteLength)y.setData(h.buffer.array);else{const{begin:e,end:t}=c;if(e<t){const s=h.buffer.array,a=4,i=e*a,r=t*a;y.setSubData(s,i,i,r)}}h.drawCommandsDirty=!0}))}updateGeometries(e){const t=this._bufferWriter,s=t.vertexBufferLayout.stride/4;for(const a of e){const e=a.updateType,i=a.renderGeometry,r=this._dataByOrigin.get(i.origin.id),n=r&&r.instances.get(i.uniqueName);if(!n)return;if(1&e&&(n.isVisible=i.instanceParameters.visible),9&e){const e=i.instanceParameters.visible;n.hasHighlights=!!i.instanceParameters.highlights&&e}if(16&e&&(n.hasOccludees=!!i.instanceParameters.occludees),6&e){const e=r.buffer.array,a=r.vao;g(i,H,B),t.write({transformation:H,invTranspTransformation:B},i.data,t.vertexBufferLayout.createView(e.buffer),n.from),l(n.from+t.elementCount(i.data)===n.to,\"material VBO layout has changed\"),a.vertexBuffers.geometry.setSubData(e,n.from*s*4,n.from*s*4,n.to*s*4)}r.drawCommandsDirty=!0}}updateRenderCommands(){this._hasHighlights=!1,this._hasOccludees=!1,this._dataByOrigin.forEach((e=>{e.hasHiddenInstances=!1,e.hasHighlights=!1,e.hasOccludees=!1,r(e.instances,(t=>(t.isVisible?(t.hasHighlights&&(this._hasHighlights=!0,e.hasHighlights=!0),t.hasOccludees&&(this._hasOccludees=!0,e.hasOccludees=!0)):e.hasHiddenInstances=!0,e.hasHiddenInstances&&e.hasHighlights&&e.hasOccludees)))}));this._dataByOrigin.forEach((e=>{e.drawCommandsDirty&&((e=>{if(e.drawCommandsDefault=null,e.drawCommandsHighlight=null,e.drawCommandsOccludees=null,e.stats={default:0,highlight:0,occludees:0},0===e.instances.size)return;if(!(e.hasOccludees||e.hasHighlights||e.hasHiddenInstances)){const t=4*e.buffer.size/m(e.vao.layout.geometry);return e.drawCommandsDefault=[{first:0,count:t}],void(e.stats={default:t,highlight:0,occludees:0})}const t=C([...e.instances.values()]);e.drawCommandsDefault=[],e.drawCommandsHighlight=[],e.drawCommandsOccludees=[];for(const s of t)s.isVisible&&(s.hasOccludees?_(e.drawCommandsOccludees,s):_(e.drawCommandsDefault,s),s.hasHighlights&&_(e.drawCommandsHighlight,s));const s=e=>{let t=0;for(const s of e)t+=s.count;return t/3};e.stats={default:s(e.drawCommandsDefault),highlight:s(e.drawCommandsHighlight),occludees:s(e.drawCommandsOccludees)}})(e),e.drawCommandsDirty=!1)}))}updateLogic(e){return this._material.update(e)}render(s,a,i,r){const n=this._rctx,o=this._glMaterials.get(a.pass),l=5===a.pass;let d=s;if(3===a.pass&&null===d&&(d=22),!o||2!==o.ensureResources(n)||null!=d&&!o.beginSlot(d)||l&&!this._hasHighlights)return!1;o.ensureParameters(i);const h=o.getTechnique(),m=o.getPipelineState(d,!1);n.setPipelineState(m),o.bind(n,i);let u=!1;return this._dataByOrigin.forEach((s=>{if(e(s.drawCommandsDefault)&&e(s.drawCommandsHighlight)&&e(s.drawCommandsOccludees))return;if(l&&!s.hasHighlights)return;i.origin=s.origin,h.bindDraw(i),h.ensureAttributeLocations(s.vao),n.bindVAO(s.vao);const a=h.primitiveType;let c=l?s.drawCommandsHighlight:s.drawCommandsDefault;const f=l?s.stats.highlight:s.stats.default;if(t(c)&&(this.renderCommands(n,a,c),w(c.length,f,r),u=!0),!l&&(c=s.drawCommandsOccludees,t(c))){const e=o.getPipelineState(d,!0);n.setPipelineState(e),this.renderCommands(n,a,c),n.setPipelineState(m),w(c.length,s.stats.occludees,r),u=!0}})),u}renderCommands(e,t,s){for(let a=0;a<s.length;a++)e.drawArrays(t,s[a].first,s[a].count)}createData(e,t,s){return{instances:new Map,vao:new u(this._rctx,this._material.vertexAttributeLocations,{geometry:o(e)},{geometry:h.createVertex(this._rctx,35044)}),buffer:new p(t),optimalCount:0,origin:s,hasHiddenInstances:!1,hasHighlights:!1,hasOccludees:!1,drawCommandsDirty:!1,drawCommandsDefault:null,drawCommandsOccludees:null,drawCommandsHighlight:null,stats:{default:0,highlight:0,occludees:0}}}removeAndRebuild(e,t,s,a,i){for(const a of t){const t=a.uniqueName,i=e.instances.get(t);e.optimalCount-=(i.to-i.from)*s,e.instances.delete(t)}let r=0;const n=e.buffer.array;i.begin=0,i.end=0;let o=-1,l=-1,d=0;e.instances.forEach((e=>{const t=e.from*s,i=e.to*s,h=i-t;o!==l&&l!==t?(n.set(a.subarray(o,l),d),d+=l-o,o=t):-1===o&&(o=t),l=i,e.from=r/s,r+=h,e.to=r/s})),o!==l&&n.set(a.subarray(o,l),d),i.end=r}removeByErasing(e,t,s,a){a.begin=1/0,a.end=-1/0;let i=-1,r=-1;for(const n of t){const t=n.uniqueName,o=e.instances.get(t),l=o.from*s,d=o.to*s;i!==r&&r!==l?(e.buffer.erase(i,r),i=l):-1===i&&(i=l),r=d,e.instances.delete(t),e.optimalCount-=d-l,l<a.begin&&(a.begin=l),d>a.end&&(a.end=d)}i!==r&&e.buffer.erase(i,r)}append(e,r,n,o,d){const h=this._bufferWriter;for(const m of r){const r=t(m.transformation)?s(H,o,m.transformation):o;a(B,r),i(B,B);const u=d.end;h.write({transformation:r,invTranspTransformation:B},m.data,h.vertexBufferLayout.createView(e.buffer.array.buffer),d.end/n);const c=h.elementCount(m.data)*n,f=u+c;l(null==e.instances.get(m.uniqueName));const g=m.instanceParameters.visible,p=!!m.instanceParameters.highlights&&g,b=!!m.instanceParameters.occludees,C=new y(u/n,f/n,g,p,b);e.instances.set(m.uniqueName,C),e.optimalCount+=c,d.end+=c}}get test(){return{material:this._material,glMaterials:this._glMaterials}}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{applySome as t}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import i from\"../../../../core/PooledArray.js\";import a from\"../../../../core/Accessor.js\";import{someMap as d}from\"../../../../core/MapUtils.js\";import{materialPredicate as o}from\"./Material.js\";import{splitRenderGeometryChangeSetByMaterial as n}from\"./rendererUtils.js\";import h from\"../materials/renderers/MergedRenderer.js\";class l{}let p=class extends a{constructor(){super(...arguments),this._pendingAddsRemoves=new Map,this._adds=new i,this._removes=new i,this._updates=new i({allocator:e=>e||new l,deallocator:e=>(e.renderGeometry=null,e)}),this._materialRenderers=new Map,this._sortedMaterialRenderers=new i,this._hasHighlights=!1,this._hasWater=!1}dispose(){this._adds.prune(),this._removes.prune(),this._updates.prune(),this._materialRenderers&&(this._materialRenderers.forEach((e=>e.dispose())),this._materialRenderers.clear(),this._sortedMaterialRenderers.clear())}get updating(){return this._pendingAddsRemoves.size>0||this._updates.length>0}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return d(this._materialRenderers,(e=>e.rendersOccluded))}stopAnimationsAtTime(e){this._sortedMaterialRenderers.forAll((r=>t(r.material.animation,(t=>t.stopAtTime(e)))))}get isEmpty(){return!this.updating&&0===this._materialRenderers.size}commitChanges(){let e=!1;if(!this.updating)return!1;this.updateAddsRemoves();const t={numToAdd:this._adds.length,toAdd:this._adds.data,numToRemove:this._removes.length,toRemove:this._removes.data,numToUpdate:this._updates.length,toUpdate:this._updates.data},r=n(t);let s=!1,i=!1;return r.forEach(((t,r)=>{let a=this._materialRenderers.get(r);if(!a&&t.toAdd.length>0&&(a=new h(this.rctx,this.materialRepository,r),this._materialRenderers.set(r,a),e=!0,s=!0,i=!0),!a)return;const d=s||a.hasHighlights,o=i||a.hasWater;a.modify(t),s=s||d!==a.hasHighlights,i=i||o!==a.hasWater,a.isEmpty&&(this._materialRenderers.delete(r),a.dispose(),e=!0)})),this._adds.clear(),this._removes.clear(),this._updates.clear(),this._pendingAddsRemoves.clear(),e&&this.updateSortedMaterialRenderers(),s&&(this._hasHighlights=d(this._materialRenderers,(e=>e.hasHighlights))),i&&(this._hasWater=d(this._materialRenderers,(e=>e.hasWater))),this.notifyChange(\"updating\"),!0}add(e){if(0===e.length)return;const t=0===this._pendingAddsRemoves.size;for(const t of e)this._pendingAddsRemoves.set(t,0);t&&this.notifyChange(\"updating\")}remove(e){const t=0===this._pendingAddsRemoves.size;for(const t of e){const e=this._pendingAddsRemoves.get(t);0===e?this._pendingAddsRemoves.set(t,2):2!==e&&this._pendingAddsRemoves.set(t,1)}t&&this._pendingAddsRemoves.size>0&&this.notifyChange(\"updating\")}modify(e,t){const r=0===this._updates.length;for(const r of e){const e=this._updates.pushNew();e.renderGeometry=r,e.updateType=t}r&&this._updates.length>0&&this.notifyChange(\"updating\")}updateLogic(e){let t=!1;return this._sortedMaterialRenderers.forAll((({materialRenderer:r})=>{r.updateLogic&&r.updateLogic(e)&&(t=!0)})),t}draw(e,t){for(let r=0;r<this._sortedMaterialRenderers.length;r++){const s=this._sortedMaterialRenderers.data[r];o(s.material,e)&&s.materialRenderer.render(null,e,t,null)}}updateSortedMaterialRenderers(){this._sortedMaterialRenderers.clear();let e=0;this._materialRenderers.forEach(((t,r)=>{r.insertOrder=e++,this._sortedMaterialRenderers.push({material:r,materialRenderer:t})})),this._sortedMaterialRenderers.sort(((e,t)=>{const r=t.material.renderPriority-e.material.renderPriority;return 0!==r?r:e.material.insertOrder-t.material.insertOrder}))}updateAddsRemoves(){this._adds.clear(),this._removes.clear(),this._pendingAddsRemoves.forEach(((e,t)=>{switch(e){case 0:this._adds.push(t);break;case 1:this._removes.push(t)}}));let e=0;for(;e<this._updates.length;){const t=this._updates.data[e].renderGeometry;this._pendingAddsRemoves.has(t)?this._updates.removeUnorderedIndex(e):e++}}get test(){return{sortedMaterialRenderers:this._sortedMaterialRenderers}}};e([r()],p.prototype,\"rctx\",void 0),e([r()],p.prototype,\"materialRepository\",void 0),e([r()],p.prototype,\"updating\",null),p=e([s(\"esri.views.3d.webgl-engine.lib.SortedRenderGeometryRenderer\")],p);export{p as SortedRenderGeometryRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as o,parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"./DefaultVertexAttributeLocations.js\";import a from\"../../../webgl/Program.js\";import{makePipelineState as n,separateBlendingParams as l,defaultColorWriteParams as h}from\"../../../webgl/renderState.js\";import{T as c}from\"../../../../chunks/TextureOnly.glsl.js\";class u extends t{initializeProgram(e){const r=u.shader.get().build();return new a(e.rctx,r.generateSource(\"vertex\"),r.generateSource(\"fragment\"),s)}initializePipeline(){return this.configuration.hasAlpha?n({blending:l(770,1,771,771),colorWrite:h}):n({colorWrite:h})}}u.shader=new r(c,(()=>import(\"../core/shaderLibrary/util/TextureOnly.glsl.js\")));class m extends o{constructor(){super(...arguments),this.hasAlpha=!1}}e([i()],m.prototype,\"hasAlpha\",void 0);export{u as TextureTechnique,m as TextureTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,n){let e=0;for(let l=0;l<t.length;l++)e+=t[l]*n[l];return e}function n(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n[l];return e}function e(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n;return e}function l(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]+n[l];return e}export{l as add,t as dotProduct,n as elementwiseProduct,e as scalarProduct};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{clamp as n}from\"../../../../core/mathUtils.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{p as i,s,g as o}from\"../../../../chunks/vec3.js\";import{MainLight as r,FillLight as e,AmbientLight as c,SphericalHarmonicsLight as a}from\"./Lightsources.js\";import{elementwiseProduct as h,scalarProduct as f,add as m}from\"../lib/LongVectorMath.js\";function u(n){return(n+1)*(n+1)}function l(n){return 2*n+1}function g(t){return n(Math.floor(Math.sqrt(t)-1),0,2)}function p(n,t,i){const s=n[0],o=n[1],r=n[2],e=i||[];return e.length=u(t),t>=0&&(e[0]=.28209479177),t>=1&&(e[1]=.4886025119*s,e[2]=.4886025119*r,e[3]=.4886025119*o),t>=2&&(e[4]=1.09254843059*s*o,e[5]=1.09254843059*o*r,e[6]=.31539156525*(3*r*r-1),e[7]=1.09254843059*s*r,e[8]=.54627421529*(s*s-o*o)),e}function y(n,t){const i=u(n),s=t||{r:[],g:[],b:[]};s.r.length=s.g.length=s.b.length=i;for(let n=0;n<i;n++)s.r[n]=s.g[n]=s.b[n]=0;return s}function b(n,t){const s=g(t.r.length);for(const o of n)i(v,o.direction),p(v,s,P),h(P,w),f(P,o.intensity[0],k),m(t.r,k),f(P,o.intensity[1],k),m(t.g,k),f(P,o.intensity[2],k),m(t.b,k);return t}function H(n,t){p(v,0,P);for(const i of n)t.r[0]+=P[0]*w[0]*i.intensity[0]*4*Math.PI,t.g[0]+=P[0]*w[0]*i.intensity[1]*4*Math.PI,t.b[0]+=P[0]*w[0]*i.intensity[2]*4*Math.PI;return t}function M(n,t,i){y(t,i.sphericalHarmonics.sh),s(i.main.intensity,0,0,0);let h=!1;const f=d,u=j,l=I;f.length=0,u.length=0,l.length=0;for(const t of n)t instanceof r&&!h?(o(i.main.direction,t.direction),i.main.intensity[0]=t.intensity[0],i.main.intensity[1]=t.intensity[1],i.main.intensity[2]=t.intensity[2],i.main.castShadows=t.castShadows,h=!0):t instanceof r||t instanceof e?f.push(t):t instanceof c?u.push(t):t instanceof a&&l.push(t);b(f,i.sphericalHarmonics.sh),H(u,i.sphericalHarmonics.sh);for(const n of l)m(i.sphericalHarmonics.sh.r,n.sh.r),m(i.sphericalHarmonics.sh.g,n.sh.g),m(i.sphericalHarmonics.sh.b,n.sh.b)}const d=[],j=[],I=[],P=[0],k=[0],v=t(),w=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];export{M as combineLights,p as computeCoefficients,y as initSHCoefficients,u as numberOfCoefficients,l as numberOfCoefficientsInBand,g as orderFromNumberOfCoefficients,H as projectAmbientLights,b as projectFillLights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{c as i,f as t}from\"../../../../chunks/vec3f64.js\";import{p as n,g as r,a as s,b as o}from\"../../../../chunks/vec3.js\";import{combineLights as e}from\"./SphericalHarmonics.js\";const h=i();class g{constructor(){this._renderLighting={main:{intensity:i(),direction:t(1,0,0),castShadows:!1},sphericalHarmonics:{sh:{r:[0],g:[0],b:[0]}}},this._shOrder=2,this._oldSunlight={direction:i(),ambient:{color:i(),intensity:0},diffuse:{color:i(),intensity:0}}}setLightDirectionUniform(i){i.setUniform3fv(\"lightingMainDirection\",this._renderLighting.main.direction)}setUniforms(i,t=!1){if(t){const t=(1-this._info.groundLightingFactor)*(1-this._info.globalFactor);i.setUniform1f(\"lightingFixedFactor\",t)}else i.setUniform1f(\"lightingFixedFactor\",0);i.setUniform1f(\"lightingGlobalFactor\",this._info.globalFactor),this.setLightDirectionUniform(i),i.setUniform3fv(\"lightingMainIntensity\",this._renderLighting.main.intensity),i.setUniform1f(\"ambientBoostFactor\",.4);const n=this._renderLighting.sphericalHarmonics.sh;0===this._shOrder?i.setUniform3f(\"lightingAmbientSH0\",n.r[0],n.g[0],n.b[0]):1===this._shOrder?(i.setUniform4f(\"lightingAmbientSH_R\",n.r[0],n.r[1],n.r[2],n.r[3]),i.setUniform4f(\"lightingAmbientSH_G\",n.g[0],n.g[1],n.g[2],n.g[3]),i.setUniform4f(\"lightingAmbientSH_B\",n.b[0],n.b[1],n.b[2],n.b[3])):2===this._shOrder&&(i.setUniform3f(\"lightingAmbientSH0\",n.r[0],n.g[0],n.b[0]),i.setUniform4f(\"lightingAmbientSH_R1\",n.r[1],n.r[2],n.r[3],n.r[4]),i.setUniform4f(\"lightingAmbientSH_G1\",n.g[1],n.g[2],n.g[3],n.g[4]),i.setUniform4f(\"lightingAmbientSH_B1\",n.b[1],n.b[2],n.b[3],n.b[4]),i.setUniform4f(\"lightingAmbientSH_R2\",n.r[5],n.r[6],n.r[7],n.r[8]),i.setUniform4f(\"lightingAmbientSH_G2\",n.g[5],n.g[6],n.g[7],n.g[8]),i.setUniform4f(\"lightingAmbientSH_B2\",n.b[5],n.b[6],n.b[7],n.b[8]))}set(i){this._info=i,e(i.lights,this._shOrder,this._renderLighting),n(this._oldSunlight.direction,this._renderLighting.main.direction);const t=1/Math.PI;this._oldSunlight.ambient.color[0]=.282095*this._renderLighting.sphericalHarmonics.sh.r[0]*t,this._oldSunlight.ambient.color[1]=.282095*this._renderLighting.sphericalHarmonics.sh.g[0]*t,this._oldSunlight.ambient.color[2]=.282095*this._renderLighting.sphericalHarmonics.sh.b[0]*t,this._oldSunlight.ambient.intensity=1,this._oldSunlight.diffuse.color[0]=this._renderLighting.main.intensity[0]*t,this._oldSunlight.diffuse.color[1]=this._renderLighting.main.intensity[1]*t,this._oldSunlight.diffuse.color[2]=this._renderLighting.main.intensity[2]*t,this._oldSunlight.diffuse.intensity=1;const g=r(h,this._oldSunlight.diffuse.color);s(g,g,.4*this._info.globalFactor),o(this._oldSunlight.ambient.color,this._oldSunlight.ambient.color,g)}get globalFactor(){return this._info.globalFactor}get old(){return this._oldSunlight}}export{g as SceneLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isSome as t,isNone as r,unwrap as s}from\"../../../core/maybe.js\";import i from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/PooledArray.js\";import l from\"../../../core/Accessor.js\";import{f as h,c as d}from\"../../../chunks/vec3f64.js\";import u from\"../../../core/Handles.js\";import{init as p}from\"../../../core/watchUtils.js\";import{o as c,i as g,t as m}from\"../../../chunks/mat4.js\";import{someMap as y}from\"../../../core/MapUtils.js\";import{a as _}from\"../../../chunks/vec2f64.js\";import f from\"../../webgl/Texture.js\";import{vertexCount as R}from\"../../webgl/Util.js\";import{createEmptyDepthTexture as w,createQuadVAO as x}from\"../webgl-engine/lib/glUtil3D.js\";import{AmbientLight as b}from\"../webgl-engine/lighting/Lightsources.js\";import{IntersectorResult as T}from\"../webgl-engine/lib/intersectorUtils.js\";import v from\"../webgl-engine/lib/Camera.js\";import O from\"../support/debugFlags.js\";import{AutoDisposableMixin as C,autoDispose as j}from\"../webgl-engine/lib/AutoDisposable.js\";import{OverlayRenderTarget as L}from\"./OverlayRenderTarget.js\";import{Overlay as U}from\"./Overlay.js\";import{CommonUniformStore as V}from\"../webgl-engine/core/shaderTechnique/CommonUniformStore.js\";import{ShaderTechniqueRepository as M}from\"../webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js\";import q from\"../webgl-engine/lib/GLMaterialRep.js\";import D from\"../webgl-engine/lib/GridLocalOriginFactory.js\";import E from\"../webgl-engine/lib/RenderContext.js\";import{SortedRenderGeometryRenderer as G}from\"../webgl-engine/lib/SortedRenderGeometryRenderer.js\";import{TextureTechniqueConfiguration as S,TextureTechnique as P}from\"../webgl-engine/lib/TextureTechnique.js\";import{SceneLighting as A}from\"../webgl-engine/lighting/SceneLighting.js\";import{StippleTextureRepository as H}from\"../webgl-engine/materials/lineStippleUtils.js\";const W=i.getLogger(\"esri.views.3d.webgl-engine.lib.OverlayRenderer\");let F=class extends(C(l)){constructor(e){super(e),this._overlays=null,this._hasHighlights=!1,this._rendersOccluded=!1,this._hasWater=!1,this._lighting=new A,this._localOrigins=new D,this._handles=new u,this._layerRenderers=new Map,this._sortedLayerRenderersDirty=!1,this._sortedLayerRenderers=new a,this._geometries=new Map,this._uniqueIdx=0,this.globalUnitScale=1,this.longitudeCyclical=null}initialize(){this._rctx=this.renderView.renderingContext,this._renderContext=new E(this._rctx,null,null,null,null,null),this._stippleTextureRepository=new H,this.waterTextureRepository=this.renderView.waterTextureRepository,this._shaderTechniqueRepository=new M({rctx:this._rctx,viewingMode:2,commonUniformStore:new V,stippleTextureRepository:this._stippleTextureRepository,waterTextureRepository:this.waterTextureRepository}),p(this.waterTextureRepository,\"loadingState\",(()=>this.emitContentChanged())),this._materialRepository=new q(this.renderView.textureRepository,this._shaderTechniqueRepository),this._materialRepository.onMaterialChanged=e=>{(e.renderOccluded&Y)>0!==this._rendersOccluded&&this.updateRendersOccluded(),this.emitContentChanged(),this.notifyChange(\"updating\")},this._compositingHelper=this.renderView.compositingHelper,this._lighting.set({lights:[new b(h(1,1,1))],groundLightingFactor:1,globalFactor:0}),this._bindParameters={slot:null,highlightDepthTexture:w(this._rctx),camera:I,inverseViewport:_(),origin:null,screenToWorldRatio:null,screenToWorldRatioGlobalWM:null,shadowMappingEnabled:!1,slicePlane:null,ssaoEnabled:!1,hasOccludees:!1,linearDepthTexture:null,linearDepthTextureID:0,lastFrameColorTexture:null,lastFrameColorTextureID:0,reprojectionMat:null,ssrEnabled:!1,lighting:this._lighting,transparencyPassType:3}}dispose(){this._handles.destroy(),this._layerRenderers.forEach((e=>e.dispose())),this._layerRenderers.clear(),this._bindParameters.highlightDepthTexture.dispose(),this._bindParameters.highlightDepthTexture=null,this._shaderTechniqueRepository.dispose(),this._shaderTechniqueRepository=null}get updating(){return this._sortedLayerRenderersDirty||y(this._layerRenderers,(e=>e.updating))||this.waterTextureRepository.updating}get hasOverlays(){return t(this._overlays)}get gpuMemoryUsage(){return t(this._overlays)?this._overlays[0].getGpuMemoryUsage()+this._overlays[1].getGpuMemoryUsage():0}get overlays(){return this._overlays}forEachOverlay(e){t(this._overlays)&&(e(this._overlays[0],0),e(this._overlays[1],1))}ensureOverlays(){if(r(this._overlays)){const e=this.renderView.renderingContext;this._overlays=[new U(e,0),new U(e,1)]}}disposeOverlays(){t(this._overlays)&&(this._overlays.forEach((e=>e.dispose())),this._overlays=null)}commitChanges(){let e=!1;this._layerRenderers.forEach(((t,r)=>{t.commitChanges()&&(e=!0),t.isEmpty&&(this._layerRenderers.delete(r),this._sortedLayerRenderersDirty=!0,this._handles.remove(r))})),this._sortedLayerRenderersDirty&&(this.updateSortedLayerRenderers(),e=!0),e&&(this.notifyChange(\"updating\"),this.emitContentChanged(),this.updateHasHighlights(),this.updateRendersOccluded(),this.updateHasWater())}addGeometries(e,t,r){for(const t of e)null==t.origin&&(t.origin=this._localOrigins.getOrigin(t.center)),t.uniqueName||(t.uniqueName=\"ov:\"+this._uniqueIdx++),this._geometries.set(t.uniqueName,t);this.ensureLayerRenderer(t).add(e),2===r&&this.notifyGraphicUpdate(e,t,2)}removeGeometries(e,t,r){for(const t of e)this._geometries.delete(t.uniqueName);const s=this._layerRenderers.get(t);s&&(s.remove(e),2===r&&this.notifyGraphicUpdate(e,t,2))}updateGeometries(e,t,r){const s=this._layerRenderers.get(t);s?(s.modify(e,r),this.notifyUpdateGeometries(e,t,r)):W.warn(\"Attempted to update geometry for nonexistent layer\")}notifyUpdateGeometries(e,t,r){const s=4===r||2===r?2:1===r?1:0;this.notifyGraphicUpdate(e,t,s)}notifyGraphicUpdate(e,t,s){if(0===s||r(t.notifyGraphicUpdate))return;let i=-1;for(const r of e){const e=r.data.graphicUid;e!==i&&(t.notifyGraphicUpdate(e,s),i=e)}}updateHighlights(e,t){const r=this._layerRenderers.get(t);r?r.modify(e,8):W.warn(\"Attempted to update highlights for nonexistent layer\")}isEmpty(){return 0===this._geometries.size&&!O.OVERLAY_DRAW_DEBUG_TEXTURE}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return this._rendersOccluded}updateLogic(e){let t=!1;return this._layerRenderers.forEach((r=>{r.updateLogic(e)&&(t=!0)})),t}updateLayerOrder(){this._sortedLayerRenderersDirty=!0}drawPass(e,r,i,n=0){if(0===i.numViews)return!1;if(this._screenToWorldRatio=i.pixelRatio*Math.abs(i.views[0].extent[2]-i.views[0].extent[0])/Math.abs(i.views[0].viewport[2]-i.views[0].viewport[0]),this.isEmpty()||5===e&&!this.hasHighlights||3===e&&!this.hasWater)return!1;if(!this.hasNonZeroSizedView(i))return!1;const o=i.width,a=i.height;if(!r.isValid())return!1;r.resize(o,a);const l=this._rctx;if(I.pixelRatio=i.pixelRatio||1,this._renderContext.pass=e,this._bindParameters.screenToWorldRatio=this._screenToWorldRatio,this._bindParameters.screenToWorldRatioGlobalWM=this._screenToWorldRatio*this.globalUnitScale,r.bind(l),l.setClearColor(0,0,0,0),l.clearSafe(16384),1===n&&(this._renderContext.renderOccludedMask=Y),O.OVERLAY_DRAW_DEBUG_TEXTURE&&1!==n)for(let e=0;e<i.numViews;e++)this.setViewParameters(i.views[e],I),this.drawDebugTexture(o,a,k[i.index%k.length]);return this._layerRenderers.size>0&&this._sortedLayerRenderers.forAll((({layerView:h,renderer:d})=>{if(2===n&&t(h)&&0===h.drapeSourceType)return;const u=t(h)&&t(h.fullOpacity)&&h.fullOpacity<1&&0===e;u&&(this.bindTemporaryFramebuffer(this._rctx,o,a),l.clearSafe(16384));for(let e=0;e<i.numViews;e++)this.setViewParameters(i.views[e],I),d.draw(this._renderContext,this._bindParameters);u&&t(this._temporaryRenderTarget)&&(r.bind(l),this._compositingHelper.composite(this._temporaryRenderTarget.getTexture(),2,s(s(h).fullOpacity)))})),l.bindFramebuffer(null),r.generateMipMap(),this._renderContext.resetRenderOccludedMask(),!0}bindTemporaryFramebuffer(e,t,s){r(this._temporaryRenderTarget)&&(this._temporaryRenderTarget=new L(e,\"temp\",0,!1)),this._temporaryRenderTarget.resize(t,s),this._temporaryRenderTarget.bind(e)}async reloadShaders(){await this._shaderTechniqueRepository.hotReload()}intersect(e,t,r){let s=0;this._geometries.forEach((i=>{if(r&&!r(i))return;this.intersectRenderGeometry(i,t,0,e,s);const n=this.longitudeCyclical;n&&(i.center[0]-i.bsRadius<n.min&&this.intersectRenderGeometry(i,t,n.range,e,s),i.center[0]+i.bsRadius>n.max&&this.intersectRenderGeometry(i,t,-n.range,e,s)),s++}))}intersectRenderGeometry(e,r,s,i,n){let o=0;t(e.transformation)&&(s+=e.transformation[12],o=e.transformation[13]),N[0]=r[0]-s,N[1]=r[1]-o,N[2]=1,B[0]=r[0]-s,B[1]=r[1]-o,B[2]=0,e.screenToWorldRatio=this._screenToWorldRatio,e.material.intersect(e,null,e.getShaderTransformation(),i,N,B,((t,r,s)=>{this.addIntersectionResult(s,e.material.renderPriority,n,i,e.data.layerUid,e.data.graphicUid)}),e.calculateShaderTransformation,!0)}addIntersectionResult(e,t,r,s,i,n){const o={type:\"external\",metadata:{layerUid:i,graphicUid:n}},a=i=>{i.set(o,null,s.results.ground.dist,s.results.ground.normal,s.results.ground.transformation,t,null,null,e,r),i.intersector=\"OverlayRenderer\"};if((null==s.results.min.drapedLayerOrder||t>=s.results.min.drapedLayerOrder)&&(null==s.results.min.dist||s.results.ground.dist<=s.results.min.dist)&&a(s.results.min),0!==s.options.store&&(null==s.results.max.drapedLayerOrder||t<s.results.max.drapedLayerOrder)&&(null==s.results.max.dist||s.results.ground.dist>s.results.max.dist)&&a(s.results.max),2===s.options.store){const e=new T(s.ray);a(e),s.results.all.push(e)}}stopAnimationsAtTime(e){this._sortedLayerRenderers.forAll((t=>t.renderer.stopAnimationsAtTime(e)))}ensureLayerRenderer(e){let t=this._layerRenderers.get(e);return t||(t=new G({rctx:this._rctx,materialRepository:this._materialRepository}),this._layerRenderers.set(e,t),this._sortedLayerRenderersDirty=!0,\"fullOpacity\"in e&&this._handles.add(e.watch(\"fullOpacity\",(()=>this.emitContentChanged())),e),this._handles.add(p(t,\"updating\",(()=>this.notifyChange(\"updating\"))),e)),t}updateSortedLayerRenderers(){if(!this._sortedLayerRenderersDirty)return;if(this._sortedLayerRenderersDirty=!1,this._sortedLayerRenderers.clear(),0===this._layerRenderers.size)return;const[{view:{allLayerViews:e}}]=this._layerRenderers.keys(),t=new Set(this._layerRenderers.values());e.forEach((e=>{const r=e,s=this._layerRenderers.get(r);s&&(this._sortedLayerRenderers.push(new z(r,s)),t.delete(s))})),t.forEach((e=>{this._sortedLayerRenderers.push(new z(null,e))}))}setViewParameters(e,t){t.viewport=e.viewport;const r=e.extent;c(t.projectionMatrix,0,r[2]-r[0],0,r[3]-r[1],t.near,t.far),g(t.viewMatrix),m(t.viewMatrix,t.viewMatrix,[-e.extent[0],-e.extent[1],0]),t.setGLViewport(this._rctx),this._renderContext.camera=t,this._bindParameters.camera=t,this._bindParameters.inverseViewport[0]=1/t.fullViewport[2],this._bindParameters.inverseViewport[1]=1/t.fullViewport[3]}hasNonZeroSizedView(e){for(let t=0;t<e.numViews;t++){const r=e.views[t];if(r.extent[0]!==r.extent[2]&&r.extent[1]!==r.extent[3])return!0}return!1}emitContentChanged(){this.onContentChanged&&this.onContentChanged()}updateHasWater(){const e=y(this._layerRenderers,(e=>e.hasWater));e!==this._hasWater&&(this._hasWater=e)}updateHasHighlights(){const e=y(this._layerRenderers,(e=>e.hasHighlights));e!==this._hasHighlights&&(this._hasHighlights=e,this.onHasHighlightsChanged&&this.onHasHighlightsChanged(this._hasHighlights))}updateRendersOccluded(){const e=y(this._layerRenderers,(e=>e.rendersOccluded));e!==this._rendersOccluded&&(this._rendersOccluded=e,this.onRendersOccludedChanged&&this.onRendersOccludedChanged(this.rendersOccluded))}drawDebugTexture(e,t,r){const s=this._rctx;this.ensureDebugPatternResources(e,t);const i=this._debugTextureTechnique.program;s.bindProgram(i),s.setPipelineState(this._debugTextureTechnique.pipeline),i.setUniform4f(\"color\",r[0],r[1],r[2],1),i.setUniform1i(\"tex\",0),s.bindTexture(this._debugPatternTexture,0),s.bindVAO(this._quadVAO),s.drawArrays(5,0,R(this._quadVAO,\"geometry\"))}ensureDebugPatternResources(e,t){if(this._debugPatternTexture)return;const r=new Uint8Array(e*t*4);let s=0;for(let i=0;i<t;i++)for(let n=0;n<e;n++){const o=Math.floor(n/10),a=Math.floor(i/10);o<2||a<2||10*o>e-20||10*a>t-20?(r[s++]=255,r[s++]=255,r[s++]=255,r[s++]=255):(r[s++]=255,r[s++]=255,r[s++]=255,r[s++]=1&o&&1&a?1&n^1&i?0:255:1&o^1&a?0:128)}this._debugPatternTexture=new f(this._rctx,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:e,height:t},r);const i=new S;i.hasAlpha=!0,this._debugTextureTechnique=this._shaderTechniqueRepository.acquireAndReleaseExisting(P,i,this._debugTextureTechnique),this._quadVAO=x(this._rctx)}get test(){return{layerRenderers:this._layerRenderers}}};e([j()],F.prototype,\"_shaderTechniqueRepository\",void 0),e([j()],F.prototype,\"_stippleTextureRepository\",void 0),e([n(),j()],F.prototype,\"waterTextureRepository\",void 0),e([n({constructOnly:!0})],F.prototype,\"renderView\",void 0),e([n()],F.prototype,\"globalUnitScale\",void 0),e([n({type:Boolean,readOnly:!0,dependsOn:[\"waterTextureRepository.updating\"]})],F.prototype,\"updating\",null),F=e([o(\"esri.views.3d.terrain.OverlayRenderer\")],F);class z{constructor(e,t){this.layerView=e,this.renderer=t}}const k=[[1,.5,.5],[.5,.5,1],[.5,1,.5]],I=new v;I.near=1,I.far=1e4,I.relativeElevation=null;const N=d(),B=d(),X=-2,Y=4;export{X as DRAPED_Z,F as OverlayRenderer,Y as overlayRenderOccludedFlag};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport s from\"./Camera.js\";const e=13;export default class{constructor(t,i,h,r,a,l){this.camera=null,this.lastFrameCamera=new s,this.pass=0,this.slot=0,this.highlightDepthTexture=null,this.renderOccludedMask=e,this.hasOccludees=!1,this.rctx=t,this.offscreenRenderingHelper=i,this.scenelightingData=h,this.shadowMap=r,this.ssaoHelper=a,this.sliceHelper=l}resetRenderOccludedMask(){this.renderOccludedMask=e}get isHighlightPass(){return 5===this.pass}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{Z as s,O as o}from\"../../../../chunks/vec4f64.js\";const c=1,r=1.2,t=s,a=o;export{r as SUSPEND_RESUME_EXTENT_OPTIMISM,t as TRANSPARENT_UNIT,a as WHITE_UNIT,c as defaultIconElevationOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{slice as t}from\"../../../../core/typedArrayUtil.js\";import{isNone as e,isSome as o,unwrapOr as n}from\"../../../../core/maybe.js\";import{acosClamped as r}from\"../../../../core/mathUtils.js\";import{c as i}from\"../../../../chunks/vec3f64.js\";import{s as a,n as s,d as f,a as c}from\"../../../../chunks/vec3.js\";import{projectBuffer as u}from\"../../../../geometry/projection.js\";import{pathsToTriangulationInfo as l}from\"../../../../geometry/support/triangulationUtils.js\";import{GeometryData as I}from\"../../webgl-engine/lib/GeometryData.js\";import{applyPerVertexElevationAlignment as p}from\"./elevationAlignmentUtils.js\";import{RibbonVertexAttributeConstants as d}from\"../../webgl-engine/shaders/RibbonLineTechnique.js\";import{DRAPED_Z as m}from\"../../terrain/OverlayRenderer.js\";import{WHITE_UNIT as T}from\"./constants.js\";function y(i){const u={},l={};!function(e,o,n){const{attributeData:{position:r},removeDuplicateStartEnd:i}=e,a=function(t){const e=t.length;return t[0]===t[e-3]&&t[1]===t[e-2]&&t[2]===t[e-1]}(r)&&1===i,s=r.length/3-(a?1:0),f=new Uint32Array(2*(s-1)),c=a?t(r,0,r.length-3):r;let u=0;for(let t=0;t<s-1;t++)f[u++]=t,f[u++]=t+1;o[d.POSITION]={size:3,data:c,offsetIdx:0,strideIdx:3},n[d.POSITION]=f}(i,l,u);const p=new Uint32Array(u[d.POSITION].length);return function(t,o,n){const r=t.attributeData.mapPosition;if(e(r))return;n.mapPos=n[d.POSITION],o.mapPos={size:3,data:r,offsetIdx:0,strideIdx:3}}(i,l,u),function(t,e,r,i){if(o(t.attributeData.colorFeature))return;const a=t.attributeData.color;e[d.COLOR]={size:4,data:n(a,T),offsetIdx:0,strideIdx:4},r[d.COLOR]=i}(i,l,u,p),function(t,e,r,i){if(o(t.attributeData.sizeFeature))return;const a=t.attributeData.size;e[d.SIZE]={size:1,data:new Float32Array([n(a,1)]),offsetIdx:0,strideIdx:1},r[d.SIZE]=i}(i,l,u,p),function(t,o,n,r){const i=t.attributeData.colorFeature;if(e(i))return;o[d.COLORFEATUREATTRIBUTE]={size:1,data:new Float32Array([i]),offsetIdx:0,strideIdx:1},n[d.COLOR]=r}(i,l,u,p),function(t,o,n,r){const i=t.attributeData.sizeFeature;if(e(i))return;o[d.SIZEFEATUREATTRIBUTE]={size:1,data:new Float32Array([i]),offsetIdx:0,strideIdx:1},n[d.SIZEFEATUREATTRIBUTE]=r}(i,l,u,p),function(t,o,n,r){const i=t.attributeData.opacityFeature;if(e(i))return;o[d.OPACITYFEATUREATTRIBUTE]={size:1,data:new Float32Array([i]),offsetIdx:0,strideIdx:1},n[d.OPACITYFEATUREATTRIBUTE]=r}(i,l,u,p),function(t,e,o){if(\"round\"!==t.join)return;const i=e[d.POSITION].data,u=i.length/3,l=new Float32Array(u),I=E,p=S;a(I,0,0,0);const m=n(t.uniformSize,1);for(let t=-1;t<u;++t){const e=t<0?u+t:t,o=(t+1)%u;if(a(p,i[3*o+0]-i[3*e+0],i[3*o+1]-i[3*e+1],i[3*o+2]-i[3*e+2]),s(p,p),t>=0){const e=1*((Math.PI-r(f(I,p)))*x)*A(m);l[t]=Math.max(Math.floor(e),0)}c(I,p,-1)}e[d.SUBDIVISIONS]={size:1,data:l,offsetIdx:0,strideIdx:1},o[d.SUBDIVISIONS]=o[d.POSITION]}(i,l,u),new I(l,u,\"line\")}function O(t,e,o,n){const r=\"polygon\"===t.type?1:0,i=\"polygon\"===t.type?t.rings:t.paths,{position:a,outlines:s}=l(i,t.hasZ,r),f=new Float64Array(a.length),c=p(a,t.spatialReference,0,f,0,a,0,a.length/3,e,o,n),u=null!=c;return{lines:u?g(s,a,f):[],projectionSuccess:u,sampledElevation:c}}function g(t,e,o){const n=new Array;for(const{index:r,count:i}of t){if(i<=1)continue;const t=3*r,a=t+3*i;n.push({position:e.subarray(t,a),mapPosition:o?o.subarray(t,a):void 0})}return n}function h(t,e){const o=\"polygon\"===t.type?1:0,n=\"polygon\"===t.type?t.rings:t.paths,{position:r,outlines:i}=l(n,!1,o),a=u(r,t.spatialReference,0,r,e,0,r.length/3);for(let t=2;t<r.length;t+=3)r[t]=m;return{lines:a?g(i,r):[],projectionSuccess:a}}function A(t){return 1.863798+-2.0062872/Math.pow(1+t/18.2313,.8856294)}const E=i(),S=i(),x=4/Math.PI;export{y as createGeometryData,O as geometryToRenderInfo,h as geometryToRenderInfoDraped};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function a(a,r){0===r.output&&r.receiveShadows?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.code.add(e`\n      void forwardLinearDepth() { linearDepth = gl_Position.w; }\n    `)):1===r.output||3===r.output?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.uniforms.add(\"uCameraNearFar\",\"vec2\"),a.vertex.code.add(e`\n      void forwardLinearDepth() {\n        linearDepth = (-position_view().z - uCameraNearFar[0]) / (uCameraNearFar[1] - uCameraNearFar[0]);\n      }\n    `)):a.vertex.code.add(e`\n      void forwardLinearDepth() {}\n    `)}export{a as ForwardLinearDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as t}from\"../../shaderModules/interfaces.js\";function o(o){o.fragment.code.add(t`\n    float normals2FoamIntensity(vec3 n, float waveStrength){\n      float normalizationFactor =  max(0.015, waveStrength);\n      return max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);\n    }\n  `)}function n(o){o.fragment.code.add(t`\n    vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){\n      return foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;\n    }\n  `)}export{n as FoamColor,o as FoamIntensity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function n(n,r){1===r.viewingMode?n.vertex.code.add(e`\n      vec3 getLocalUp(in vec3 pos, in vec3 origin) {\n          return normalize(pos + origin);\n      }\n    `):n.vertex.code.add(e`\n      vec3 getLocalUp(in vec3 pos, in vec3 origin) {\n          return vec3(0.0, 0.0, 1.0); // WARNING: up-axis dependent code\n      }\n    `),1===r.viewingMode?n.vertex.code.add(e`\n        mat3 getTBNMatrix(in vec3 n) {\n            vec3 t = normalize(cross(vec3(0.0, 0.0, 1.0), n));\n            vec3 b = normalize(cross(n, t));\n            return mat3(t, b, n);\n        }\n    `):n.vertex.code.add(e`\n        mat3 getTBNMatrix(in vec3 n) {\n            vec3 t = vec3(1.0, 0.0, 0.0);\n            vec3 b = normalize(cross(n, t));\n            return mat3(t, b, n);\n        }\n    `)}export{n as NormalUtils};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){const a=t.fragment.code;a.add(e`\n    vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)\n    {\n      return ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;\n    }\n    `),a.add(e`\n    float integratedRadiance(float cosTheta2, float roughness)\n    {\n      return (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);\n    }\n    `),a.add(e`\n    vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)\n    {\n      float cosTheta2 = 1.0 - RdotNG * RdotNG;\n      float intRadTheta = integratedRadiance(cosTheta2, roughness);\n\n      // Calculate the integrated directional radiance of the ground and the sky\n      float ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;\n      float sky = 2.0 - ground;\n      return (ground * ambientGround + sky * ambientSky) * 0.5;\n    }\n    `)}export{t as AnalyticalSkyModel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{PiUtils as o}from\"./PiUtils.glsl.js\";import{AnalyticalSkyModel as t}from\"./AnalyticalSkyModel.glsl.js\";function n(n,a){const r=n.fragment.code;n.include(o),3===a.pbrMode||4===a.pbrMode?(r.add(e`\n    struct PBRShadingWater\n    {\n        float NdotL;   // cos angle between normal and light direction\n        float NdotV;   // cos angle between normal and view direction\n        float NdotH;   // cos angle between normal and half vector\n        float VdotH;   // cos angle between view direction and half vector\n        float LdotH;   // cos angle between light direction and half vector\n        float VdotN;   // cos angle between view direction and normal vector\n    };\n\n    float dtrExponent = ${a.useCustomDTRExponentForWater?\"2.2\":\"2.0\"};\n    `),r.add(e`\n    vec3 fresnelReflection(float angle, vec3 f0, float f90) {\n      return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n    }\n    `),r.add(e`\n    float normalDistributionWater(float NdotH, float roughness)\n    {\n      float r2 = roughness * roughness;\n      float NdotH2 = NdotH * NdotH;\n      float denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;\n      return r2 / denom;\n    }\n    `),r.add(e`\n    float geometricOcclusionKelemen(float LoH)\n    {\n        return 0.25 / (LoH * LoH);\n    }\n    `),r.add(e`\n    vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)\n    {\n      vec3  F = fresnelReflection(props.VdotH, F0, F0Max);\n      float dSun = normalDistributionWater(props.NdotH, roughness);\n      float V = geometricOcclusionKelemen(props.LdotH);\n\n      float diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);\n      float strengthSunHaze  = 1.2;\n      float dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze)*strengthSunHaze;\n\n      return ((dSun + dSunHaze) * V) * F;\n    }\n\n    vec3 tonemapACES(const vec3 x) {\n      return (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);\n    }\n    `)):1!==a.pbrMode&&2!==a.pbrMode||(n.include(t),r.add(e`\n    struct PBRShadingInfo\n    {\n        float NdotL;                  // cos angle between normal and light direction\n        float NdotV;                  // cos angle between normal and view direction\n        float NdotH;                  // cos angle between normal and half vector\n        float VdotH;                  // cos angle between view direction and half vector\n        float LdotH;                  // cos angle between view light direction and half vector\n        float NdotNG;                 // cos angle between normal and normal of the ground\n        float RdotNG;                 // cos angle between view direction reflected of the normal and normal of the ground\n        float NdotAmbDir;             // cos angle between view direction and the fill light in ambient illumination\n        float NdotH_Horizon;          // cos angle between normal and half vector defined with horizon illumination\n        vec3 skyRadianceToSurface;         // integrated radiance of the sky based on the surface roughness (used for specular reflection)\n        vec3 groundRadianceToSurface;      // integrated radiance of the ground based on the surface roughness (used for specular reflection)\n        vec3 skyIrradianceToSurface;       // irradiance of the sky (used for diffuse reflection)\n        vec3 groundIrradianceToSurface;    // irradiance of the ground (used for diffuse reflection)\n\n        float averageAmbientRadiance;      // average ambient radiance used to deduce black level in gamut mapping\n        float ssao;                   // ssao coefficient\n        vec3 albedoLinear;            // linear color of the albedo\n        vec3 f0;                      // fresnel value at normal incident light\n        vec3 f90;                     // fresnel value at 90o of incident light\n\n        vec3 diffuseColor;            // diffuse color of the material used in environment illumination\n        float metalness;              // metalness of the material\n        float roughness;              // roughness of the material\n    };\n    `),r.add(e`\n    float normalDistribution(float NdotH, float roughness)\n    {\n        float a = NdotH * roughness;\n        float b = roughness / (1.0 - NdotH * NdotH + a * a);\n        return b * b * INV_PI;\n    }\n    `),r.add(e`\n    const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);\n    const vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);\n    const vec2 c2 = vec2(-1.04, 1.04);\n\n    vec2 prefilteredDFGAnalytical(float roughness, float NdotV) {\n        vec4 r = roughness * c0 + c1;\n        float a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;\n        return c2 * a004 + r.zw;\n    }\n    `),r.add(e`\n    vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {\n      vec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);\n      vec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);\n\n      // From diffuse illumination calculate reflected color\n      vec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;\n\n      // From specular illumination calculate reflected color\n      vec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);\n      vec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;\n      vec3 specularComponent = specularColor * indirectSpecular;\n\n      return (diffuseComponent + specularComponent);\n    }\n    `),r.add(e`\n    float gamutMapChanel(float x, vec2 p){\n      return (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );\n    }`),r.add(e`\n    vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){\n      vec3 outColor;\n      vec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));\n      outColor.x = gamutMapChanel(inColor.x, p) ;\n      outColor.y = gamutMapChanel(inColor.y, p) ;\n      outColor.z = gamutMapChanel(inColor.z, p) ;\n      return outColor;\n    }\n    `))}export{n as PhysicallyBasedRendering};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{RgbaFloatEncoding as a}from\"../util/RgbaFloatEncoding.glsl.js\";function i(i){i.fragment.include(a),i.fragment.uniforms.add(\"depthTex\",\"sampler2D\"),i.fragment.uniforms.add(\"shadowMapNum\",\"int\"),i.fragment.uniforms.add(\"shadowMapDistance\",\"vec4\"),i.fragment.uniforms.add(\"shadowMapMatrix\",\"mat4\",4),i.fragment.uniforms.add(\"depthHalfPixelSz\",\"float\"),i.fragment.code.add(e`\n    float readShadowMap(const in vec3 _vpos, float _linearDepth) {\n      float halfPixelSize = depthHalfPixelSz;\n      vec4 distance = shadowMapDistance;\n      float depth = _linearDepth;\n\n      //choose correct cascade\n      int i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;\n\n      if (i >= shadowMapNum) { return 0.0; }\n\n      mat4 mat = i == 0 ? shadowMapMatrix[0] : i == 1 ? shadowMapMatrix[1] : i == 2 ? shadowMapMatrix[2] : shadowMapMatrix[3];\n\n      vec4 lv = mat * vec4(_vpos, 1.0);\n      lv.xy /= lv.w;\n\n      // vertex completely outside? -> no shadow\n      vec3 lvpos = 0.5 * lv.xyz + vec3(0.5);\n      if (lvpos.z >= 1.0) { return 0.0; }\n      if (lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }\n\n      // calc coord in cascade texture\n      vec2 uv = vec2(float(i - 2 * (i / 2)) * 0.5, float(i / 2) * 0.5) + 0.5 * lvpos.xy;\n\n      float texSize = 0.5 / halfPixelSize;\n\n      // filter, offset by half pixels\n      vec2 st = fract((vec2(halfPixelSize) + uv) * texSize);\n\n      float s00 = rgba2float(texture2D(depthTex, uv + vec2(-halfPixelSize, -halfPixelSize))) < lvpos.z ? 1.0 : 0.0;\n      float s10 = rgba2float(texture2D(depthTex, uv + vec2(halfPixelSize, -halfPixelSize))) < lvpos.z ? 1.0 : 0.0;\n      float s11 = rgba2float(texture2D(depthTex, uv + vec2(halfPixelSize, halfPixelSize))) < lvpos.z ? 1.0 : 0.0;\n      float s01 = rgba2float(texture2D(depthTex, uv + vec2(-halfPixelSize, halfPixelSize))) < lvpos.z ? 1.0 : 0.0;\n\n      return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n    }\n  `)}!function(e){e.bindUniforms=function(e,a,i){a.shadowMappingEnabled&&(a.shadowMap.bind(e,i),a.shadowMap.bindView(e,a.origin))},e.bindViewCustomOrigin=function(e,a,i){a.shadowMappingEnabled&&a.shadowMap.bindView(e,i)},e.bindView=function(e,a){a.shadowMappingEnabled&&a.shadowMap.bindView(e,a.origin)}}(i||(i={}));export{i as ReadShadowMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as r}from\"../../shaderModules/interfaces.js\";function o(o){o.fragment.uniforms.add(\"lastFrameColorMap\",\"sampler2D\"),o.fragment.uniforms.add(\"reprojectionMat\",\"mat4\"),o.fragment.uniforms.add(\"rpProjectionMat\",\"mat4\"),o.fragment.code.add(r`\n  vec2 reprojectionCoordinate(vec3 projectionCoordinate)\n  {\n    vec4 zw = rpProjectionMat * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);\n    vec4 reprojectedCoord = reprojectionMat * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);\n    reprojectedCoord.xy /= reprojectedCoord.w;\n    return reprojectedCoord.xy*0.5 + 0.5;\n  }\n  `)}!function(r){r.bindUniforms=function(r,o,e){r.setUniform1i(\"lastFrameColorMap\",e.lastFrameColorTextureID),o.bindTexture(e.lastFrameColorTexture,e.lastFrameColorTextureID),r.setUniformMatrix4fv(\"reprojectionMat\",e.reprojectionMat),r.setUniformMatrix4fv(\"rpProjectionMat\",e.camera.projectionMatrix)}}(o||(o={}));export{o as Reprojection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{ReadLinearDepth as t}from\"../output/ReadLinearDepth.glsl.js\";import{Reprojection as o}from\"./Reprojection.glsl.js\";function r(r,a){r.fragment.uniforms.add(\"nearFar\",\"vec2\"),r.fragment.uniforms.add(\"depthMapView\",\"sampler2D\"),r.fragment.uniforms.add(\"ssrViewMat\",\"mat4\"),r.fragment.uniforms.add(\"invResolutionHeight\",\"float\"),r.include(t),r.include(o),r.fragment.code.add(e`\n  const int maxSteps = ${a.highStepCount?\"150;\":\"75;\"}\n\n  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)\n  {\n    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);\n    projectedCoord.xy /= projectedCoord.w;\n    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;\n    return projectedCoord;\n  }\n\n  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)\n  {\n    vec3 viewPos = startPosition;\n    vec3 viewPosEnd = startPosition;\n\n    // Project the start position to the screen\n    vec4 projectedCoordStart = applyProjectionMat(rpProjectionMat, viewPos);\n    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space\n    float k0 = 1.0/ projectedCoordStart.w;\n\n    // advance the position in the direction of the reflection\n    viewPos += dir;\n\n    vec4 projectedCoordVanishingPoint = applyProjectionMat(rpProjectionMat, dir);\n\n    // Project the advanced position to the screen\n    vec4 projectedCoordEnd = applyProjectionMat(rpProjectionMat, viewPos);\n    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space\n    float k1 = 1.0/ projectedCoordEnd.w;\n\n    // calculate the reflection direction in the screen space\n    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);\n    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);\n\n    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);\n\n    float projectedCoordDirLength = length(projectedCoordDir);\n    float maxSt = float(maxSteps);\n\n    // normalize the projection direction depending on maximum steps\n    // this determines how blocky the reflection looks\n    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);\n\n    // Normalize the homogeneous camera space coordinates\n    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);\n    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);\n\n    // initialize the variables for ray marching\n    vec2 P = projectedCoordStart.xy;\n    vec3 Q = Q0;\n    float k = k0;\n    float rayStartZ = -startPosition.z; // estimated ray start depth value\n    float rayEndZ = -startPosition.z;   // estimated ray end depth value\n    float prevEstimateZ = -startPosition.z;\n    float rayDiffZ = 0.0;\n    float dDepth;\n    float depth;\n    float rayDiffZOld = 0.0;\n\n    // early outs\n    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)\n      return vec3(P, 0.0);\n\n    for(int i = 0; i < maxSteps-1; i++)\n    {\n      depth = -linearDepthFromTexture(depthMapView, P, nearFar); // get linear depth from the depth buffer\n\n      // estimate depth of the marching ray\n      rayStartZ = prevEstimateZ;\n      dDepth = -rayStartZ - depth;\n      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));\n      rayDiffZ = rayEndZ- rayStartZ;\n      prevEstimateZ = rayEndZ;\n\n      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )\n      {\n        return vec3(P, 0.);\n      }\n\n      // If we detect a hit - return the intersection point, two conditions:\n      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth\n      //  - if difference between dDepth and rayDiffZOld is not too large\n      //  - if difference between dDepth and 0.025/abs(k) is not too large\n      //  - if the sampled depth is not behind far plane or in front of near plane\n\n      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)\n      {\n          return vec3(P, depth);\n      }\n\n      // continue with ray marching\n      P += dP;\n      Q.z += dQ.z;\n      k += dk;\n      rayDiffZOld = rayDiffZ;\n    }\n    return vec3(P, 0.0);\n  }\n  `)}!function(e){e.bindUniforms=function(e,t,r){r.ssrEnabled&&(e.setUniform1i(\"depthMapView\",r.linearDepthTextureID),t.bindTexture(r.linearDepthTexture,r.linearDepthTextureID),e.setUniform2fv(\"nearFar\",r.camera.nearFar),e.setUniformMatrix4fv(\"ssrViewMat\",r.camera.viewMatrix),e.setUniform1f(\"invResolutionHeight\",1/r.camera.height),o.bindUniforms(e,t,r))}}(r||(r={}));export{r as ScreenSpaceReflections};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function e(e){e.fragment.code.add(o`\n    const float GAMMA = 2.2;\n    const float INV_GAMMA = 0.4545454545;\n\n    vec4 delinearizeGamma(vec4 color) {\n      return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.w);\n    }\n\n    vec3 linearizeGamma(vec3 color) {\n      return pow(color, vec3(GAMMA));\n    }\n  `)}export{e as Gamma};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{ScreenSpaceReflections as o}from\"./ScreenSpaceReflections.glsl.js\";import{FoamColor as t}from\"./FoamRendering.glsl.js\";import{Gamma as r}from\"./Gamma.glsl.js\";import{PhysicallyBasedRendering as i}from\"./PhysicallyBasedRendering.glsl.js\";function a(a,n){a.include(i,n),a.include(r),a.include(t),n.ssrEnabled&&a.include(o,n),a.fragment.code.add(e`\n    const vec3 fresnelSky =  vec3(0.02, 1.0, 15.0); // f0, f0max, exp\n    const vec2 fresnelMaterial =  vec2(0.02, 0.1); // f0, f0max for specular term\n    const float roughness = 0.015;\n    const float foamIntensityExternal = 1.7;\n    const float ssrIntensity = 0.65;\n    const float ssrHeightFadeStart = 300000.0;\n    const float ssrHeightFadeEnd = 500000.0;\n    const float waterDiffusion = 0.775;\n    const float waterSeeColorMod = 0.8;\n    const float correctionViewingPowerFactor = 0.4;\n\n    const vec3 skyZenitColor = vec3(0.52, 0.68, 0.90);\n    const vec3 skyColor = vec3(0.67, 0.79, 0.9);\n\n    PBRShadingWater shadingInfo;\n\n    /*\n    *   This function is an approximation for the sky gradient reflected\n    *   the water surface and describes a combination of two fresnel terms.\n    *   @parameter: cosTheta = is the result of max(dot(n,v), 0.0)\n    *   @parameter: horizon = the dominant color of the sky horizon\n    *   @parameter: cosTheta = the dominant color of the sky zenit\n    */\n    vec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {\n      float exponent = pow((1.0 - cosTheta), fresnelSky[2]);\n      return mix(zenit, horizon, exponent);\n    }\n\n    /*\n    *   This function determines the water color per pixel.\n    *   @parameter: n = normal facing away from the surface\n    *   @parameter: v = view direction facing away from the surface.\n    *   @parameter: l = light direction facing away from the surface\n    *   @parameter: lightIntensity = light intensity, currently between 0...PI\n    *   @parameter: localUp = a normal for the general direction of the surface\n    *   @parameter: shadow = the amount of shadow at this pixel (0 = no shadow)\n    */\n    vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 positionView) {\n\n      float reflectionHit = 0.;\n      vec3 seaWaterColor = linearizeGamma(color);\n      // using half vector to determine the specular light\n      vec3 h = normalize(l + v);\n      shadingInfo.NdotL = clamp(dot(n, l), 0.0, 1.0);\n      shadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);\n      shadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);\n      shadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);\n      shadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);\n      shadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);\n\n      // angle between vertex normal and view direction\n      float upDotV = max(dot(localUp,v), 0.0);\n      // reflected sky color: the reflected sky color consists of two main colors, the\n      // reflected color at the horizon and the reflected color of the zenit.\n      // the reflected sky color is then an approximation based on the fresnel term.\n      vec3 skyHorizon = linearizeGamma(skyColor);\n      vec3 skyZenit = linearizeGamma(skyZenitColor);\n      vec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );\n\n      // we use the upDotL to smoothen out the\n      // reflected color of the water\n      float upDotL = max(dot(localUp,l),0.0);\n\n      // The approximated sky color is adjusted according to the sun position.\n      // This is done as approximation for e.g. night views.\n      float daytimeMod = 0.1 + upDotL * 0.9;\n      skyColor *= daytimeMod;\n\n      // If a water surface is in shadow we just use a slight darkening of the\n      // water surface expressed with this shadowModifier.\n      float shadowModifier = clamp(shadow, 0.8, 1.0);\n\n      // The reflected sky color consists of the fresnel reflection multiplied with the approximated sky color.\n      // The shadow is influencing the frensel term to keep the shadow impression for really near views. As long\n      // as reflection are absent there is a need to have a slight shadow for depth perception.\n      vec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);\n      vec3 reflSky = fresnelModifier * skyColor * shadowModifier;\n\n      // The reflected sea color is the input water color combined with the reflected sky color.\n      // The reflected sky color is modified by the incoming light.\n      vec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;\n\n      vec3 specular = vec3(0.0);\n      // This prevents the specular light to be rendered when:\n      // - sun is behind a polygon (e.g. sundown for elevated polygons where nDotL might be still ok)\n      // - viewer is under water (for this localUp is better than n)\n      if(upDotV > 0.0 && upDotL > 0.0) {\n        // calculate the cook torrance BRDF but with simplified occlusion\n        vec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);\n\n        // Normalize light intensity to be between 0...1. Shadow cancels out specular light here\n        vec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;\n\n        specular = shadingInfo.NdotL * incidentLight * specularSun;\n      }\n\n      vec3 foam = vec3(0.0);\n      if(upDotV > 0.0) {\n        foam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);\n      }\n      `),n.ssrEnabled?a.fragment.code.add(e`\n      // Convert the world position to view position\n      vec4 viewPosition = vec4(positionView.xyz, 1.0);\n      vec3 viewDir = normalize(viewPosition.xyz);\n      vec4 viewNormalVectorCoordinate = ssrViewMat *vec4(n, 0.0);\n      vec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);\n      vec4 viewUp = ssrViewMat *vec4(localUp, 0.0);\n\n      // at steeper viewing angles we use more of a vertex normal (in this case up) then the wave normal\n      // this removes some artifacts of normal mapping\n      float correctionViewingFactor = pow(max(dot(-viewDir, viewUp.xyz), 0.0), correctionViewingPowerFactor);\n      vec3 viewNormalCorrected = mix(viewUp.xyz, viewNormal, correctionViewingFactor);\n\n      vec3 reflected = normalize(reflect(viewDir, viewNormalCorrected));\n\n      // perform screen space reflection to detect hit\n      vec3 hitCoordinate = screenSpaceIntersection( normalize(reflected), viewPosition.xyz, viewDir, viewUp.xyz);\n      vec3 reflectedColor = vec3(0.0);\n\n      // if there is a hit with ssr find reflected color from the reprojeted frame\n      if (hitCoordinate.z > 0.0)\n      {\n        vec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);\n\n        // fade out if there if the hit is near end of Y axis\n        vec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));\n        float heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -positionView.z);\n        reflectionHit = waterDiffusion * clamp(1.0 - (1.3*dCoords.y), 0.0, 1.0) * heightMod;\n\n        reflectedColor = linearizeGamma(texture2D(lastFrameColorMap, reprojectedCoordinate).xyz)* reflectionHit * fresnelModifier.y * ssrIntensity;\n      }\n      float seeColorMod =  mix(waterSeeColorMod, waterSeeColorMod*0.5, reflectionHit);\n      // combining reflected sky, reflected sea, specular highlight and SSR reflections.\n      return tonemapACES((1. - reflectionHit) * reflSky + reflectedColor + reflSea * seeColorMod + specular + foam);\n    }\n  `):a.fragment.code.add(e`\n      // combining reflected sky, reflected sea, specular highlight and SSR reflections.\n      return tonemapACES(reflSky + reflSea * waterSeeColorMod + specular + foam);\n    }\n  `)}export{a as Water};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{FoamIntensity as t}from\"./FoamRendering.glsl.js\";function r(r){r.fragment.uniforms.add(\"texWaveNormal\",\"sampler2D\"),r.fragment.uniforms.add(\"texWavePerturbation\",\"sampler2D\"),r.fragment.uniforms.add(\"waveParams\",\"vec4\"),r.fragment.uniforms.add(\"waveDirection\",\"vec2\"),r.include(t),r.fragment.code.add(e`\n      const vec2  FLOW_JUMP = vec2(6.0/25.0, 5.0/24.0);\n\n      vec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {\n        return 2.0 * texture2D(_tex, _uv).rg - 1.0;\n      }\n\n      float sampleNoiseTexture(vec2 _uv) {\n        return texture2D(texWavePerturbation, _uv).b;\n      }\n\n      vec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {\n        return 2.0 * texture2D(_tex, _uv).rgb - 1.0;\n      }\n\n      float computeProgress(vec2 uv, float time) {\n        return fract(time);\n      }\n\n      float computeWeight(vec2 uv, float time) {\n        float progress = computeProgress(uv, time);\n        return 1.0 - abs(1.0 - 2.0 * progress);\n      }\n\n      vec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, float time, float phaseOffset) {\n        float flowStrength = waveParams[2];\n        float flowOffset = waveParams[3];\n\n        vec2 flowVector = textureDenormalized2D(texFlow, uv) * flowStrength;\n\n        float progress = computeProgress(uv, time + phaseOffset);\n        float weight = computeWeight(uv, time + phaseOffset);\n\n        vec2 result = uv;\n        result -= flowVector * (progress + flowOffset);\n        result += phaseOffset;\n        result += (time - progress) * FLOW_JUMP;\n\n        return vec3(result, weight);\n      }\n\n      const float TIME_NOISE_TEXTURE_REPEAT = 0.3737;\n      const float TIME_NOISE_STRENGTH = 7.77;\n\n      vec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {\n        float waveStrength = waveParams[0];\n\n        // overall directional shift in uv's for directional wave movement for\n        // now we do a hard coded scale for wave speed such that a unit length\n        // direction is not too fast.\n        vec2 waveMovement = time * -_waveDir;\n\n        float timeNoise = sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;\n\n        // compute two perturbed uvs and blend weights\n        // then sample the wave normals at the two positions and blend\n        vec3 uv_A = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.0);\n        vec3 uv_B = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.5);\n\n        vec3 normal_A = textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;\n        vec3 normal_B = textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;\n\n        // logic to flatten the wave pattern\n        // scale xy components of the normal, then adjust z (up) component\n        vec3 mixNormal = normalize(normal_A + normal_B);\n        mixNormal.xy *= waveStrength;\n        mixNormal.z = sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));\n\n        return mixNormal;\n      }\n\n      vec4 getSurfaceNormalAndFoam(vec2 _uv, float _time) {\n        float waveTextureRepeat = waveParams[1];\n        vec3 normal = getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);\n        float foam  = normals2FoamIntensity(normal, waveParams[0]);\n        return vec4(normal, foam);\n      }\n    `)}!function(e){e.bindUniforms=function(e,t){e.setUniform1i(\"texWaveNormal\",0),e.setUniform1i(\"texWavePerturbation\",1),e.setUniform4f(\"waveParams\",t.waveStrength,t.waveTextureRepeat,t.flowStrength,t.flowOffset),e.setUniform2f(\"waveDirection\",t.waveDirection[0]*t.waveVelocity,t.waveDirection[1]*t.waveVelocity)}}(r||(r={}));export{r as WaterDistortion};\n"],"sourceRoot":""}