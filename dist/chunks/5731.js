(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[5731],{77204:(e,t,r)=>{"use strict";r.d(t,{r:()=>h,p:()=>d});var s=r(56140),i=r(79881),o=r(87566),n=r(82677),a=r(59691),l=r(45671);const d=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new a.Z}get updatingHandles(){return this._get("updatingHandles")||new l.t}};return(0,s._)([(0,i.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,s._)([(0,i.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,s._)([(0,o.j)("esri.core.HandleOwner")],t),t};let h=class extends(d(n.default)){};h=(0,s._)([(0,o.j)("esri.core.HandleOwner")],h)},59351:(e,t,r)=>{"use strict";r.d(t,{Ed:()=>i,UI:()=>o,q6:()=>n});var s=r(39105);function i(e,t,r){return(0,s.eachAlways)(e.map(((e,s)=>t.apply(r,[e,s]))))}function o(e,t,r){return(0,s.eachAlways)(e.map(((e,s)=>t.apply(r,[e,s])))).then((e=>e.map((e=>e.value))))}function n(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}},19048:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var s,i=r(56140),o=(r(95830),r(36544),r(68055),r(79881)),n=r(56274),a=r(30590),l=r(15307),d=r(87566),h=r(60538),u=(r(10923),r(57002),r(86035),r(19677)),p=r(58385),c=r(93533);const y=(0,n.wY)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),m=y.jsonValues.slice();(0,u.e$)(m,"orthometric");const g=(0,n.wY)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let b=s=class extends p.wq{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return y.write(e,t,r)}readHeightModel(e,t,r){return y.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new l.Z("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return g.read(e)||(r&&r.messages&&r.messages.push(v(e,{context:r})),null)}readHeightUnitService(e,t,r){return(0,c.$C)(e)||g.read(e)||(r&&r.messages&&r.messages.push(v(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new s({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=(0,c.cM)(t);return new s({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new s;return t.read(e,{origin:"web-scene"}),t}};function v(e,t){return new l.Z("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,i._)([(0,o.Cb)({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m,default:"ellipsoidal"}}}})],b.prototype,"heightModel",void 0),(0,i._)([(0,h.c)("web-scene","heightModel")],b.prototype,"writeHeightModel",null),(0,i._)([(0,a.r)(["web-scene","service"],"heightModel")],b.prototype,"readHeightModel",null),(0,i._)([(0,o.Cb)({type:g.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g.jsonValues,write:g.write}}}})],b.prototype,"heightUnit",void 0),(0,i._)([(0,a.r)("web-scene","heightUnit")],b.prototype,"readHeightUnit",null),(0,i._)([(0,a.r)("service","heightUnit")],b.prototype,"readHeightUnitService",null),(0,i._)([(0,o.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],b.prototype,"vertCRS",void 0),(0,i._)([(0,a.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],b.prototype,"readVertCRS",null),b=s=(0,i._)([(0,d.j)("esri.geometry.HeightModelInfo")],b);const w=b},66002:(e,t,r)=>{"use strict";r.d(t,{D9:()=>o,yZ:()=>i});var s=r(93533);function i(e,t){const r=t||e.extent,i=e.width,o=(0,s.c9)(r&&r.spatialReference);return r&&i?r.width/i*o*s.hd*96:0}function o(e,t){const r=e.extent,i=e.width,o=function(e,t){return e/((0,s.c9)(t)*s.hd*96)}(t,r.spatialReference);return r.clone().expand(o*i/r.width)}},62933:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var s=r(56140),i=(r(95830),r(59472)),o=(r(36544),r(68055)),n=r(79881),a=r(30590),l=r(87566),d=r(60538),h=r(32656),u=(r(10923),r(57002),r(9678)),p=(r(86035),r(39105)),c=r(52937),y=r(54721),m=r(1721),g=r(56700),b=r(87864),v=r(43072),w=r(18152),f=r(78910),_=r(48899),C=r(57407),S=r(63795),j=r(33716),x=r(2194),M=r(10113),I=r(2584),O=r(77204),R=r(66002),k=r(5698),U=r(41452),N=r(24681),P=r(49708),H=r(11555);let Z=class extends((0,C.h)((0,I.n)((0,M.M)((0,x.Q)((0,P.x)((0,k.O)((0,_.Y)((0,f.q)((0,j.I)((0,v.R)((0,S.N)((0,O.p)(g.Z))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.labelsVisible=!1,this.isReference=null,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=(0,i.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then((()=>this._fetchService(t)),(()=>this._fetchService(t)))),(0,p.resolve)(this)}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,t,r,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let o=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=(0,u.M9)(s.origin);if(3===e){const e=this.createSublayersForOrigin("service").sublayers;o=(0,N.QV)(i,e,2)}else if(e>3){const e=this.createSublayersForOrigin("portal-item");o=(0,N.QV)(i,e.sublayers,(0,u.M9)(e.origin))}}const n=[],a={writeSublayerStructure:o,...s};let l=o;i.forEach((e=>{const t=e.write({},a);n.push(t),l=l||"user"===e.originOf("visible")})),n.some((e=>Object.keys(e).length>1))&&(t.layers=n),l&&(t.visibleLayers=i.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,t,r,s){const i=s&&s.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const o=new H.R({layer:this,scale:(0,R.yZ)({extent:e,width:t})*i}),n=o.toJSON();o.destroy();const a=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},l=e&&e.spatialReference,d=l.wkid||JSON.stringify(l.toJSON());n.dpi*=i;const h={};if(null!=s&&s.timeExtent){const{start:e,end:t}=s.timeExtent.toJSON();h.time=e&&t&&e===t?""+e:`${null==e?"null":e},${null==t?"null":t}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(h.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:d,imageSR:d,size:t+","+r,...n,...a,...h}}async fetchImage(e,t,r,s){const i={responseType:"image"};s&&s.timestamp&&(i.query={...i.query,_ts:s.timestamp}),s&&s.signal&&(i.signal=s.signal),this.customParameters&&Object.keys(this.customParameters).length&&(i.query={...this.customParameters,...i.query});const o=this.parsedUrl.path+"/export",n={...this.parsedUrl.query,...this.createExportImageParameters(e,t,r,s),f:"image",_ts:this.alwaysRefetch?Date.now():null};return null==n.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(i.query?i.query={...n,...i.query}:i.query=n,(0,y.default)(o,i).then((e=>e.data)).catch((e=>{if((0,p.isAbortError)(e))throw e;throw new h.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${o}`,{error:e})}))):(0,p.reject)(new h.Z("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:n}))}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json"}},{data:r}=await(0,y.default)(this.url,t),{extent:s,fullExtent:i,timeExtent:o}=r,n=s||i;return{fullExtent:n&&c.Z.fromJSON(n),timeExtent:o&&b.Z.fromJSON({start:o[0],end:o[1]})}}loadAll(){return(0,m.GZ)(this,(e=>{e(this.allSublayers)}))}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:r}=await(0,y.default)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};(0,s._)([(0,n.Cb)()],Z.prototype,"alwaysRefetch",void 0),(0,s._)([(0,n.Cb)()],Z.prototype,"dpi",void 0),(0,s._)([(0,n.Cb)()],Z.prototype,"gdbVersion",void 0),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1}})],Z.prototype,"popupEnabled",void 0),(0,s._)([(0,n.Cb)()],Z.prototype,"imageFormat",void 0),(0,s._)([(0,a.r)("imageFormat",["supportedImageFormatTypes"])],Z.prototype,"readImageFormat",null),(0,s._)([(0,n.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],Z.prototype,"imageMaxHeight",void 0),(0,s._)([(0,n.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],Z.prototype,"imageMaxWidth",void 0),(0,s._)([(0,n.Cb)()],Z.prototype,"imageTransparency",void 0),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1}})],Z.prototype,"labelsVisible",void 0),(0,s._)([(0,n.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Z.prototype,"isReference",void 0),(0,s._)([(0,n.Cb)({type:["ArcGISMapServiceLayer"]})],Z.prototype,"operationalLayerType",void 0),(0,s._)([(0,n.Cb)()],Z.prototype,"sourceJSON",void 0),(0,s._)([(0,n.Cb)({json:{write:{ignoreOrigin:!0}}})],Z.prototype,"sublayers",void 0),(0,s._)([(0,d.c)("sublayers",{layers:{type:[U.Z]},visibleLayers:{type:[o.z8]}})],Z.prototype,"writeSublayers",null),(0,s._)([(0,n.Cb)({type:["show","hide","hide-children"]})],Z.prototype,"listMode",void 0),(0,s._)([(0,n.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],Z.prototype,"type",void 0),(0,s._)([(0,n.Cb)(w.HQ)],Z.prototype,"url",void 0),Z=(0,s._)([(0,l.j)("esri.layers.MapImageLayer")],Z);const A=Z},48899:(e,t,r)=>{"use strict";r.d(t,{Y:()=>d});var s=r(56140),i=(r(95830),r(59472)),o=r(36544),n=(r(68055),r(79881)),a=r(87566),l=(r(10923),r(57002),r(86035),r(97849));const d=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,l.Qc)(this.url);if((0,i.pC)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,l.Nm)(e,o.Z.getLogger(this.declaredClass)))}};return(0,s._)([(0,n.Cb)({dependsOn:["url"]})],t.prototype,"title",null),(0,s._)([(0,n.Cb)({type:String})],t.prototype,"url",null),t=(0,s._)([(0,a.j)("esri.layers.mixins.ArcGISService")],t),t}},63795:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});var s=r(56140),i=(r(95830),r(36544),r(68055),r(79881)),o=r(87566);r(10923),r(57002),r(86035);const n=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,s._)([(0,i.Cb)({json:{write:!0,origins:{"web-scene":{write:!1}}}})],t.prototype,"customParameters",void 0),t=(0,s._)([(0,o.j)("esri.layers.mixins.CustomParametersMixin")],t),t}},99322:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>p,JN:()=>h,$o:()=>u});var s=r(56140),i=(r(95830),r(36544),r(68055),r(79881)),o=r(87566),n=(r(10923),r(57002),r(86035),r(83477)),a=r(32105),l=r(15988);const d=n.Z.ofType(l.Z);let h=class extends d{constructor(e){super(e),this.on("before-add",(e=>{e.item||e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(({item:e})=>{e.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())}_createNewInstance(e){return new d(e)}_ownAll(){this.items.forEach((e=>this._own(e)))}_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_unownAll(){this.items.forEach((e=>this._unown(e)))}_unown(e){e.layer===this.owner&&(e.layer=null)}};(0,s._)([(0,i.Cb)()],h.prototype,"owner",null),h=(0,s._)([(0,o.j)("esri.support.GraphicsCollection")],h);const u=(e="graphics")=>({type:h,cast:a.R,set(t){const r=(0,a.Z)(t,this._get(e),h);r.owner=this,this._set(e,r)}});const p=h},7354:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var s,i=r(56140),o=(r(95830),r(82550)),n=(r(36544),r(68055)),a=r(79881),l=r(87566),d=r(60538),h=(r(10923),r(57002),r(86035),r(58385));let u=s=class extends h.wq{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new s((0,o.d9)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],u.prototype,"attachmentTypes",void 0),(0,i._)([(0,a.Cb)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],u.prototype,"attachmentsWhere",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],u.prototype,"keywords",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],u.prototype,"globalIds",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],u.prototype,"name",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],u.prototype,"num",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],u.prototype,"objectIds",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{default:!1,write:!0}})],u.prototype,"returnMetadata",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],u.prototype,"size",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],u.prototype,"start",void 0),(0,i._)([(0,d.c)("start"),(0,d.c)("num")],u.prototype,"writeStart",null),(0,i._)([(0,a.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],u.prototype,"where",void 0),u=s=(0,i._)([(0,l.j)("esri.tasks.support.AttachmentQuery")],u),u.from=(0,n.se)(u);const p=u},11047:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var s,i=r(56140),o=(r(95830),r(82550)),n=(r(36544),r(68055)),a=r(79881),l=r(87566),d=r(60538),h=(r(10923),r(57002),r(86035),r(58385)),u=r(73032),p=(r(36348),r(60853));let c=s=class extends h.wq{constructor(e){super(e),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}clone(){return new s((0,o.d9)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,i._)([(0,a.Cb)({type:p.D,json:{write:!0}})],c.prototype,"dynamicDataSource",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],c.prototype,"gdbVersion",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{write:!0}})],c.prototype,"geometryPrecision",void 0),(0,i._)([(0,a.Cb)({type:Date})],c.prototype,"historicMoment",void 0),(0,i._)([(0,d.c)("historicMoment")],c.prototype,"_writeHistoricMoment",null),(0,i._)([(0,a.Cb)({type:Number,json:{write:!0}})],c.prototype,"maxAllowableOffset",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],c.prototype,"objectIds",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],c.prototype,"orderByFields",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],c.prototype,"outFields",void 0),(0,i._)([(0,a.Cb)({type:u.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],c.prototype,"outSpatialReference",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],c.prototype,"relationshipId",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],c.prototype,"start",void 0),(0,i._)([(0,d.c)("start"),(0,d.c)("num")],c.prototype,"writeStart",null),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],c.prototype,"num",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],c.prototype,"returnGeometry",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],c.prototype,"returnM",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],c.prototype,"returnZ",void 0),(0,i._)([(0,a.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],c.prototype,"where",void 0),c=s=(0,i._)([(0,l.j)("esri.tasks.support.RelationshipQuery")],c),c.from=(0,n.se)(c);const y=c},45671:(e,t,r)=>{"use strict";r.d(t,{t:()=>p});var s=r(56140),i=r(95844),o=r(79881),n=r(87566),a=r(74386),l=r(3059),d=r(82677),h=r(59691),u=r(80621);let p=class extends d.default{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new h.Z,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,s=0){const i=0!=(1&s),o=++this.handleId;i||this.installSyncUpdatingWatch(e,t,o);const n=0!=(2&s)?(0,u.init)(e,t,r,i):e.watch(t,r,i);return this.handles.add(n,o),{remove:()=>{this.handles.remove(o)}}}addOnCollectionPropertyChange(e,t,r,s=0){const i=0!=(2&s),o=++this.handleId;return this.handles.add([(0,u.on)(e,t,"after-changes",this.createSyncUpdatingCallback()),(0,u.on)(e,t,"change",r,i?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],o),{remove:()=>{this.handles.remove(o)}}}addOnCollectionChange(e,t,r=0){const s=0!=(2&r),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),s&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(i)}}}addPromise(e){if(!e)return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(c)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const s=this.createSyncUpdatingCallback(),o=(0,l.QU)((()=>(0,i.$z)(e,t)),s);return this.handles.add(o,r),o}createSyncUpdatingCallback(){return()=>{this.handles.remove(c),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,a.Os)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(c))})),c)}}};(0,s._)([(0,o.Cb)({readOnly:!0})],p.prototype,"updating",void 0),p=(0,s._)([(0,n.j)("esri.views.support.WatchUpdatingTracking")],p);const c=-42}}]);
//# sourceMappingURL=5731.js.map