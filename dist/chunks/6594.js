(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[6594],{18355:(e,t,n)=>{"use strict";n.d(t,{Q:()=>b,a:()=>T,b:()=>_,c:()=>v,d:()=>Y,e:()=>F,g:()=>O,n:()=>P,t:()=>x});var r=n(59472),o=n(56274),s=n(32656),i=n(39105),l=n(27780),u=n(47005),c=n(80685),a=n(59933),f=n(56885),h=n(93533),g=n(91535),d=n(73127),p=n(31036),m=n(71951);function y(e,t){return e?t?4:3:t?3:2}function w(e,t,n,r,o,s){const i=y(o,s),{coords:l,lengths:u}=r;if(!u)return!1;for(let r=0,o=0;r<u.length;r++,o+=i)if(!R(e,t,n,l[o],l[o+1]))return!1;return!0}function R(e,t,n,r,o){if(!e)return!1;const s=y(t,n),{coords:i,lengths:l}=e;let u=!1,c=0;for(const e of l)u=I(u,i,s,c,e,r,o),c+=e*s;return u}function I(e,t,n,r,o,s,i){let l=e,u=r;for(let e=r,c=r+o*n;e<c;e+=n){u=e+n,u===c&&(u=r);const o=t[e],a=t[e+1],f=t[u],h=t[u+1];(a<i&&h>=i||h<i&&a>=i)&&o+(i-a)/(h-a)*(f-o)<s&&(l=!l)}return l}const Z=new o.Xn({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),b=Object.freeze({}),S=new d.Z,N=new d.Z,G=new d.Z,M={esriGeometryPoint:p.fQ,esriGeometryPolyline:p.J6,esriGeometryPolygon:p.eG,esriGeometryMultipoint:p.Iv};function x(e,t,n,r=e.hasZ,o=e.hasM){const s=e.hasZ&&r,i=e.hasM&&o;if(n){const l=(0,p.Nh)(G,t,e.hasZ,e.hasM,"esriGeometryPoint",n,r,o);return(0,p.fQ)(l,s,i)}return(0,p.fQ)(t,s,i)}function F(e,t,n,r,o,s,i=t,l=n){const u=t&&i,c=n&&l,a=r?"coords"in r?r:r.geometry:null;if(!a)return null;if(o){let r=(0,p.zj)(N,a,t,n,e,o,i,l);return s&&(r=(0,p.Nh)(G,r,u,c,e,s)),M[e](r,u,c)}if(s){const r=(0,p.Nh)(G,a,t,n,e,s,i,l);return M[e](r,u,c)}return(0,p.hY)(S,a,t,n,i,l),M[e](S,u,c)}async function T(e,t,n){const{outFields:r,orderByFields:o,groupByFieldsForStatistics:s,outStatistics:i}=e;if(r)for(let e=0;e<r.length;e++)r[e]=r[e].trim();if(o)for(let e=0;e<o.length;e++)o[e]=o[e].trim();if(s)for(let e=0;e<s.length;e++)s[e]=s[e].trim();if(i)for(let e=0;e<i.length;e++)i[e].onStatisticField&&(i[e].onStatisticField=i[e].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),P(e,t,n)}async function P(e,t,n){if(!e)return null;let{where:o}=e;if(e.where=o=o&&o.trim(),(!o||/^1 *= *1$/.test(o)||t&&t===o)&&(e.where=null),!e.geometry)return e;let s=await async function(e){const{geometry:t,distance:n,units:r}=e;if(null==n||"vertexAttributes"in t)return t;const o=t.spatialReference,s=r?Z.fromJSON(r):(0,h.qE)(o),i=o&&((0,l.sT)(o)||(0,l.sS)(o))?t:await(0,m._W)(o,l.Zn).then((()=>(0,m.iV)(t,l.Zn)));return(await J().then((e=>e.geodesicBuffer)))(i.spatialReference,i,n,s)}(e);if(e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel){const{spatialReference:t}=e.geometry;s=(0,a.aO)(s),s.spatialReference=t}e.geometry=s,await(0,m._W)(s.spatialReference,n);const i=(await(0,g.aX)((0,f.im)(s)))[0];if((0,r.Wi)(i))throw b;const u=i.toJSON(),c=await(0,m.iV)(u,u.spatialReference,n);if(!c)throw b;return c.spatialReference=n,e.geometry=c,e}function v(e){return e&&q in e?JSON.parse(JSON.stringify(e,k)):e}const q="_geVersion",k=(e,t)=>e!==q?t:void 0,U={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},A={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},j={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},E={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function J(){return Promise.all([n.e(5798),n.e(508)]).then(n.bind(n,93134))}function O(e,t,n,r,o){if((0,f.oU)(t)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){const e=(0,p.Uy)(new d.Z,t,!1,!1);return(0,i.resolve)((t=>function(e,t,n,r){return R(e,t,n,r.coords[0],r.coords[1])}(e,!1,!1,t)))}if((0,f.oU)(t)&&"esriGeometryMultipoint"===n){const n=(0,p.Uy)(new d.Z,t,!1,!1);if("esriSpatialRelContains"===e)return(0,i.resolve)((e=>w(n,!1,!1,e,r,o)))}if((0,f.YX)(t)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return(0,i.resolve)((e=>(0,u.aV)(t,F(n,r,o,e))));if((0,f.YX)(t)&&"esriGeometryMultipoint"===n&&"esriSpatialRelContains"===e)return(0,i.resolve)((e=>(0,u.lQ)(t,F(n,r,o,e))));if((0,f.YX)(t)&&"esriSpatialRelIntersects"===e){const e=(0,c.v$)(n);return(0,i.resolve)((s=>e(t,F(n,r,o,s))))}return J().then((s=>{const i=s[U[e]].bind(null,t.spatialReference,t);return e=>i(F(n,r,o,e))}))}async function Y(e,t,n){const{spatialRel:r,geometry:o}=e;if(o){if(!0!==A[r])throw new s.Z("feature-store:unsupported-query","Unsupported query spatial relationship",{query:e});if((0,l.JY)(o.spatialReference)&&(0,l.JY)(n)){if(!function(e){return!0===j[(0,f.Ji)(e)]}(o))throw new s.Z("feature-store:unsupported-query","Unsupported query geometry type",{query:e});if(!function(e){return!0===E[e]}(t))throw new s.Z("feature-store:unsupported-query","Unsupported layer geometry type",{query:e});if(e.outSR)return(0,m._W)(e.geometry&&e.geometry.spatialReference,e.outSR)}}}function _(e){if((0,f.YX)(e))return!0;if((0,f.oU)(e)){for(const t of e.rings){if(5!==t.length)return!1;if(t[0][0]!==t[1][0]||t[0][0]!==t[4][0]||t[2][0]!==t[3][0]||t[0][1]!==t[3][1]||t[0][1]!==t[4][1]||t[1][1]!==t[2][1])return!1}return!0}return!1}},91535:(e,t,n)=>{"use strict";n.d(t,{aX:()=>x,or:()=>F,hR:()=>N});var r=n(34926),o=n(59472),s=n(36544),i=n(32656),l=n(39105),u=n(27780),c=n(73032),a=n(41241),f=n(53817),h=n(93833),g=n(10923),d=n(56885),p=(n(36348),n(54721));async function m(e,t,n){const r="string"==typeof e?(0,g.mN)(e):e,o=t[0].spatialReference,s=(0,d.Ji)(t[0]),i={...n,query:{...r.query,f:"json",sr:o.wkid?o.wkid:JSON.stringify(o),geometries:JSON.stringify((l=t,{geometryType:(0,d.Ji)(l[0]),geometries:l.map((e=>e.toJSON()))}))}};var l;return function(e,t,n){const r=(0,d.q9)(t);return e.map((e=>{const t=r.fromJSON(e);return t.spatialReference=n,t}))}((await(0,p.default)(r.path+"/simplify",i)).data,s,o)}const y=s.Z.getLogger("esri.geometry.support.normalizeUtils"),w={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new h.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:c.Z.WebMercator}),minus180Line:new h.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:c.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new h.Z({paths:[[[180,-180],[180,180]]],spatialReference:c.Z.WGS84}),minus180Line:new h.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:c.Z.WGS84})}};function R(e){return"polygon"===e.type}function I(e){return"polyline"===e[0].type}function Z(e){return R(e)?e.rings:e.paths}function b(e,t){return Math.ceil((e-t)/(2*t))}function S(e,t){const n=Z(e);for(const e of n)for(const n of e)n[0]+=t;return e}function N(e,t){if(!(e instanceof h.Z||e instanceof f.Z)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw y.error(e),new i.Z(e)}const n=Z(e),r=[];for(const e of n){const n=[];r.push(n),n.push([e[0][0],e[0][1]]);for(let r=0;r<e.length-1;r++){const o=e[r][0],s=e[r][1],i=e[r+1][0],l=e[r+1][1],u=Math.sqrt((i-o)*(i-o)+(l-s)*(l-s)),c=(l-s)/u,a=(i-o)/u,f=u/t;if(f>1){for(let e=1;e<=f-1;e++){const r=e*t,i=a*r+o,l=c*r+s;n.push([i,l])}const e=(u+Math.floor(f-1)*t)/2,r=a*e+o,i=c*e+s;n.push([r,i])}n.push([i,l])}}return R(e)?new f.Z({rings:r,spatialReference:e.spatialReference}):new h.Z({paths:r,spatialReference:e.spatialReference})}function G(e,t,n){if(t){const t=N(e,1e6);e=(0,a.Sx)(t,!0)}return n&&(e=S(e,n)),e}function M(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const n=b(r,t);e[0]=r+n*(-2*t)}else if(r<n){const t=b(r,n);e[0]=r+t*(-2*n)}}else{const r=e.x;if(r>t){const n=b(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<n){const t=b(r,n);e=e.clone().offset(t*(-2*n),0)}}return e}async function x(e,t,n){if(!Array.isArray(e))return x([e],t);const s=t?t.url:r.Z.geometryServiceUrl;let i,c,y,R,N,F,T,P,v=0;const q=[],k=[];for(const t of e)if((0,o.Wi)(t))k.push(t);else if(i||(i=t.spatialReference,c=(0,u.C5)(i),y=i.isWebMercator,F=y?102100:4326,R=w[F].maxX,N=w[F].minX,T=w[F].plus180Line,P=w[F].minus180Line),c)if("mesh"===t.type)k.push(t);else if("point"===t.type)k.push(M(t.clone(),R,N));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>M(e,R,N))),k.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,c);k.push(e.rings?new f.Z(e):e)}else if(t.extent){const e=t.extent,n=b(e.xmin,N)*(2*R);let r=0===n?t.clone():S(t.clone(),n);e.offset(n,0),e.intersects(T)&&e.xmax!==R?(v=e.xmax>v?e.xmax:v,r=G(r,y),q.push(r),k.push("cut")):e.intersects(P)&&e.xmin!==N?(v=e.xmax*(2*R)>v?e.xmax*(2*R):v,r=G(r,y,360),q.push(r),k.push("cut")):k.push(r)}else k.push(t.clone());else k.push(t);let U=b(v,R),A=-90;const j=U,E=new h.Z;for(;U>0;){const e=360*U-180;E.addPath([[e,A],[e,-1*A]]),A*=-1,U--}if(q.length>0&&j>0){const t=function(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const o=t.cutIndexes[r],s=t.geometries[r],i=Z(s);for(let e=0;e<i.length;e++){const t=i[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const r=t[e][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*b(n,180);for(let n=0;n<t.length;n++){const t=s.getPoint(e,n);s.setPoint(e,n,t.clone().offset(r,0))}return!0}}))}if(o===n){if("polygon"===e[0].type)for(const t of Z(s))e[o]=e[o].addRing(t);else if(I(e))for(const t of Z(s))e[o]=e[o].addPath(t)}else n=o,e[o]=s}return e}(q,await async function(e,t,n,r){const o="string"==typeof e?(0,g.mN)(e):e,s=t[0].spatialReference,i={...r,query:{...o.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:(0,d.Ji)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},l=await(0,p.default)(o.path+"/cut",i),{cutIndexes:u,geometries:c=[]}=l.data;return{cutIndexes:u,geometries:c.map((e=>{const t=(0,d.im)(e);return t.spatialReference=s,t}))}}(s,q,E,n)),r=[],i=[];for(let n=0;n<k.length;n++){const s=k[n];if("cut"!==s)i.push(s);else{const s=t.shift(),l=e[n];(0,o.pC)(l)&&"polygon"===l.type&&l.rings&&l.rings.length>1&&s.rings.length>=l.rings.length?(r.push(s),i.push("simplify")):i.push(y?(0,a.$)(s):s)}}if(!r.length)return i;const l=await m(s,r,n),u=[];for(let e=0;e<i.length;e++){const t=i[e];"simplify"!==t?u.push(t):u.push(y?(0,a.$)(l.shift()):l.shift())}return u}const J=[];for(let e=0;e<k.length;e++){const t=k[e];if("cut"!==t)J.push(t);else{const e=q.shift();J.push(!0===y?(0,a.$)(e):e)}}return(0,l.resolve)(J)}function F(e,t){const n=(0,u.C5)(t);if(n){const[t,r]=n.valid,o=r-t;if(e<t)for(;e<t;)e+=o;if(e>r)for(;e>r;)e-=o}return e}},44195:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});class r{constructor(e=null,t={},n,r){this.displayId=0,this.geohashIndexed=!1,this.geohashX=0,this.geohashY=0,this.geometry=e,t&&(this.attributes=t),n&&(this.centroid=n),null!=r&&(this.objectId=r)}get hasGeometry(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}weakClone(){const e=new r(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashIndexed=this.geohashIndexed,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}const o=r},60151:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new r;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}const o=r},73127:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});class r{constructor(e=[],t=[],n=!1){this.lengths=null!=e?e:[],this.coords=null!=t?t:[],this.hasIndeterminateRingOrder=n}get isPoint(){return 0===this.lengths.length}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=r}}clone(){return new r(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}const o=r},90440:(e,t,n)=>{"use strict";function r(e,t){if(!e)return null;const n=t.featureAdapter,{startTimeField:r,endTimeField:o}=e;let s=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(r&&o)t.forEach((e=>{const t=n.getAttribute(e,r),l=n.getAttribute(e,o);null==t||isNaN(t)||(s=Math.min(s,t)),null==l||isNaN(l)||(i=Math.max(i,l))}));else{const e=r||o;t.forEach((t=>{const r=n.getAttribute(t,e);null==r||isNaN(r)||(s=Math.min(s,r),i=Math.max(i,r))}))}return{start:s,end:i}}function o(e,t,n){if(!t||!e)return null;const{startTimeField:r,endTimeField:o}=e;if(!r&&!o)return null;const{start:s,end:i}=t;return null===s&&null===i?null:void 0===s&&void 0===i?()=>!1:r&&o?function(e,t,n,r,o){return null!=r&&null!=o?s=>{const i=e.getAttribute(s,t),l=e.getAttribute(s,n);return(null==i||i<=o)&&(null==l||l>=r)}:null!=r?t=>{const o=e.getAttribute(t,n);return null==o||o>=r}:null!=o?n=>{const r=e.getAttribute(n,t);return null==r||r<=o}:void 0}(n,r,o,s,i):function(e,t,n,r){return null!=n&&null!=r&&n===r?r=>e.getAttribute(r,t)===n:null!=n&&null!=r?o=>{const s=e.getAttribute(o,t);return s>=n&&s<=r}:null!=n?r=>e.getAttribute(r,t)>=n:null!=r?n=>e.getAttribute(n,t)<=r:void 0}(n,r||o,s,i)}n.d(t,{R:()=>r,y:()=>o})},31036:(e,t,n)=>{"use strict";n.d(t,{XA:()=>L,h_:()=>H,Yn:()=>z,GH:()=>V,E7:()=>W,ks:()=>_,Uy:()=>Y,u0:()=>E,EI:()=>$,cn:()=>D,di:()=>Q,Iv:()=>q,fQ:()=>Z,eG:()=>J,J6:()=>A,oB:()=>ce,zj:()=>te,$:()=>oe,lz:()=>ue,RZ:()=>K,Nh:()=>ee,Jd:()=>y,IN:()=>w,hY:()=>ie,$g:()=>se});var r=n(36544),o=n(32656),s=n(56885),i=n(44195),l=n(60151),u=n(73127);function c(e,t){return e?t?4:3:t?3:2}const a=r.Z.getLogger("esri.tasks.support.optimizedFeatureSet"),f={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},h=(e,t,n,r,o,s)=>{e[n]=o,e[n+1]=s},g=(e,t,n,r,o,s)=>{e[n]=o,e[n+1]=s,e[n+2]=t[r+2]},d=(e,t,n,r,o,s)=>{e[n]=o,e[n+1]=s,e[n+2]=t[r+3]},p=(e,t,n,r,o,s)=>{e[n]=o,e[n+1]=s,e[n+2]=t[r+2],e[n+3]=t[r+3]};function m(e,t,n,r){if(e){if(n)return t&&r?p:g;if(t&&r)return d}else if(t&&r)return g;return h}function y({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function w({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function R({scale:e,translate:t},n){return n*e[0]+t[0]}function I({scale:e,translate:t},n){return t[1]-n*e[1]}function Z(e,t,n){return e?t?n?F(e):N(e):n?M(e):b(e):null}function b(e){const t=e.coords;return{x:t[0],y:t[1]}}function S(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function N(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function G(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function M(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function x(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function F(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function T(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function P(e,t){return e&&t?T:e?G:t?x:S}function v(e,t,n,r,o){const s=P(n,r);for(const n of t){const{geometry:t,attributes:r}=n;let l;t&&(l=s(new u.Z,t)),e.push(new i.Z(l,r,null,r[o]))}return e}function q(e,t,n){if(!e)return null;const r=c(t,n),o=[];for(let t=0;t<e.coords.length;t+=r){const n=[];for(let o=0;o<r;o++)n.push(e.coords[t+o]);o.push(n)}return t?n?{points:o,hasZ:t,hasM:n}:{points:o,hasZ:t}:n?{points:o,hasM:n}:{points:o}}function k(e,t,n,r,o){const s=c(n,r);for(const n of t){const t=n.geometry,r=n.attributes;let l;t&&(l=U(new u.Z,t,s)),e.push(new i.Z(l,r,null,r[o]))}return e}function U(e,t,n=c(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let o=0;for(const e of t.points)for(let t=0;t<n;t++)r[o++]=e[t];return e}function A(e,t,n){if(!e)return null;const r=c(t,n),{coords:o,lengths:s}=e,i=[];let l=0;for(const e of s){const t=[];for(let n=0;n<e;n++){const e=[];for(let t=0;t<r;t++)e.push(o[l++]);t.push(e)}i.push(t)}return t?n?{paths:i,hasZ:t,hasM:n}:{paths:i,hasZ:t}:n?{paths:i,hasM:n}:{paths:i}}function j(e,t,n,r,o){const s=c(n,r);for(const n of t){const t=n.geometry,r=n.attributes;let l;t&&(l=E(new u.Z,t,s)),e.push(new i.Z(l,r,null,r[o]))}return e}function E(e,t,n=c(t.hasZ,t.hasM)){const{lengths:r,coords:o}=e;let s=0;for(const e of t.paths){for(const t of e)for(let e=0;e<n;e++)o[s++]=t[e];r.push(e.length)}return e}function J(e,t,n){if(!e)return null;const r=c(t,n),{coords:o,lengths:s}=e,i=[];let l=0;for(const e of s){const t=[];for(let n=0;n<e;n++){const e=[];for(let t=0;t<r;t++)e.push(o[l++]);t.push(e)}i.push(t)}return t?n?{rings:i,hasZ:t,hasM:n}:{rings:i,hasZ:t}:n?{rings:i,hasM:n}:{rings:i}}function O(e,t,n,r,o){for(const s of t){const t=s.geometry,l=s.centroid,c=s.attributes;let a;t&&(a=Y(new u.Z,t,n,r)),l?e.push(new i.Z(a,c,S(new u.Z,l),c[o])):e.push(new i.Z(a,c,null,c[o]))}return e}function Y(e,t,n=t.hasZ,r=t.hasM){return _(e,t.rings,n,r),e}function _(e,t,n,r){const o=c(n,r),{lengths:s,coords:i}=e;let l=0;s.length=i.length=0;for(const e of t){for(const t of e)for(let e=0;e<o;e++)i[l++]=t[e];s.push(e.length)}return e}const X=[],C=[];function L(e,t,n,r,o){X[0]=e;const[s]=z(C,X,t,n,r,o);return X.length=C.length=0,s}function z(e,t,n,r,s,l){if(e.length=0,!n){for(const n of t){const t=n.attributes[l];e.push(new i.Z(null,n.attributes,null,t))}return e}switch(n){case"esriGeometryPoint":return v(e,t,r,s,l);case"esriGeometryMultipoint":return k(e,t,r,s,l);case"esriGeometryPolyline":return j(e,t,r,s,l);case"esriGeometryPolygon":return O(e,t,r,s,l);default:a.error("convertToFeatureSet:unknown-geometry",new o.Z(`Unable to parse unknown geometry type '${n}'`)),e.length=0}return e}function W(e,t,n,r,s,i){const l=e.length;switch(n){case"esriGeometryPoint":v(e,t,r,s,i);break;case"esriGeometryMultipoint":k(e,t,r,s,i);break;case"esriGeometryPolyline":j(e,t,r,s,i);break;case"esriGeometryPolygon":O(e,t,r,s,i);break;default:a.error("convertToFeatureSet:unknown-geometry",new o.Z(`Unable to parse unknown geometry type '${n}'`))}for(let r=0;r<t.length;r++)e[r+l].geometryType=n,e[r+l].insertAfter=t[r].insertAfter,e[r+l].groupId=t[r].groupId;return e}function $(e,t,n,r){C[0]=e,B(X,C,t,n,r);const o=X[0];return X.length=C.length=0,o}function V(e,t,n){if(!e)return null;const r=new u.Z;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),(0,s.wp)(e)?P(null!=t?t:null!=e.z,null!=n?n:null!=e.m)(r,e):(0,s.oU)(e)?Y(r,e,t,n):(0,s.l9)(e)?E(r,e,c(t,n)):(0,s.aW)(e)?U(r,e,c(t,n)):void a.error("convertFromGeometry:unknown-geometry",new o.Z(`Unable to parse unknown geometry type '${e}'`))}function Q(e,t,n,r){const s=e&&("coords"in e?e:e.geometry);if(!s)return null;switch(t){case"esriGeometryPoint":{let e=b;return n&&r?e=F:n?e=N:r&&(e=M),e(s)}case"esriGeometryMultipoint":return q(s,n,r);case"esriGeometryPolyline":return A(s,n,r);case"esriGeometryPolygon":return J(s,n,r);default:return void a.error("convertToGeometry:unknown-geometry",new o.Z(`Unable to parse unknown geometry type '${t}'`))}}function B(e,t,n,r,s){switch(e.length=0,n){case"esriGeometryPoint":return function(e,t,n,r){let o=b;n&&r?o=F:n?o=N:r&&(o=M);for(const n of t){const{geometry:t,attributes:r}=n,s=t?o(t):null;e.push({attributes:r,geometry:s})}return e}(e,t,r,s);case"esriGeometryMultipoint":return function(e,t,n,r){for(const o of t){const{geometry:t,attributes:s}=o;let i;t&&(i=q(t,n,r)),e.push({attributes:s,geometry:i})}return e}(e,t,r,s);case"esriGeometryPolyline":return function(e,t,n,r){for(const o of t){const{geometry:t,attributes:s}=o;let i;t&&(i=A(t,n,r)),e.push({attributes:s,geometry:i})}return e}(e,t,r,s);case"esriGeometryPolygon":return function(e,t,n,r){for(const o of t){const{geometry:t,attributes:s,centroid:i}=o;let l;if(t&&(l=J(t,n,r)),i){const t=b(i);e.push({attributes:s,centroid:t,geometry:l})}else e.push({attributes:s,geometry:l})}return e}(e,t,r,s);default:a.error("convertToFeatureSet:unknown-geometry",new o.Z(`Unable to parse unknown geometry type '${n}'`))}return e}function D(e){const{objectIdFieldName:t,spatialReference:n,transform:r,fields:o,hasM:s,hasZ:i,features:l,geometryType:u,exceededTransferLimit:c,uniqueIdField:a,queryGeometry:f,queryGeometryType:h}=e,g={features:B([],l,u,i,s),fields:o,geometryType:u,objectIdFieldName:t,spatialReference:n,uniqueIdField:a,queryGeometry:Q(f,h,!1,!1)};return r&&(g.transform=r),c&&(g.exceededTransferLimit=c),s&&(g.hasM=s),i&&(g.hasZ=i),g}function H(e,t){const n=new l.Z,{hasM:r,hasZ:s,features:i,objectIdFieldName:u,spatialReference:c,geometryType:f,exceededTransferLimit:h,transform:g,fields:d}=e;return d&&(n.fields=d),n.geometryType=f,n.objectIdFieldName=u||t,n.spatialReference=c,n.objectIdFieldName?(i&&z(n.features,i,f,s,r,n.objectIdFieldName),h&&(n.exceededTransferLimit=h),r&&(n.hasM=r),s&&(n.hasZ=s),g&&(n.transform=g),n):(a.error(new o.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function K(e,t){const{geometryType:n,features:r,hasM:o,hasZ:s}=t;if(!e)return t;for(let t=0;t<r.length;t++){const i=r[t],l=i.weakClone();l.geometry=new u.Z,ee(l.geometry,i.geometry,o,s,n,e),i.centroid&&(l.centroid=new u.Z,ee(l.centroid,i.centroid,o,s,"esriGeometryPoint",e)),r[t]=l}return t.transform=e,t}function ee(e,t,n,r,o,s,i=n,l=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const u=f[o],{coords:a,lengths:h}=t,g=c(n,r),d=c(n&&i,r&&l),p=m(n,r,i,l);if(!h.length)return p(e.coords,a,0,0,y(s,a[0]),w(s,a[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=g,e;let R,I,Z,b,S=0,N=0,G=N;for(const t of h){if(t<u)continue;let n=0;N=G,Z=R=y(s,a[S]),b=I=w(s,a[S+1]),p(e.coords,a,N,S,Z,b),n++,S+=g,N+=d;for(let r=1;r<t;r++,S+=g)Z=y(s,a[S]),b=w(s,a[S+1]),Z===R&&b===I||(p(e.coords,a,N,S,Z-R,b-I),N+=d,n++,R=Z,I=b);n>=u&&(e.lengths.push(n),G=N)}return e.coords.length=G,e.coords.length?e:null}function te(e,t,n,r,o,s,i=n,l=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const u=f[o],{coords:a,lengths:h}=t,g=c(n,r),d=c(n&&i,r&&l),p=m(n,r,i,l);if(!h.length)return p(e.coords,a,0,0,a[0],a[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=g,e;let y=0;const w=s*s;for(const t of h){if(t<u){y+=t*g;continue}const n=e.coords.length/d,r=y,o=y+(t-1)*g;p(e.coords,a,e.coords.length,r,a[r],a[r+1]),re(e.coords,a,g,w,p,r,o),p(e.coords,a,e.coords.length,o,a[o],a[o+1]);const s=e.coords.length/d-n;s>=u?e.lengths.push(s):e.coords.length=n*d,y+=t*g}return e.coords.length?e:null}function ne(e,t,n,r){const o=e[t],s=e[t+1],i=e[n],l=e[n+1],u=e[r],c=e[r+1];let a=i,f=l,h=u-a,g=c-f;if(0!==h||0!==g){const e=((o-a)*h+(s-f)*g)/(h*h+g*g);e>1?(a=u,f=c):e>0&&(a+=h*e,f+=g*e)}return h=o-a,g=s-f,h*h+g*g}function re(e,t,n,r,o,s,i){let l,u=r,c=0;for(let e=s+n;e<i;e+=n)l=ne(t,e,s,i),l>u&&(c=e,u=l);u>r&&(c-s>n&&re(e,t,n,r,o,s,c),o(e,t,e.length,c,t[c],t[c+1]),i-c>n&&re(e,t,n,r,o,c,i))}function oe(e,t,n,r){if(!t||!t.coords||!t.coords.length)return null;const o=c(n,r);let s=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=o){const n=e[t],r=e[t+1];s=Math.min(s,n),l=Math.max(l,n),i=Math.min(i,r),u=Math.max(u,r)}}return e[0]=s,e[1]=i,e[2]=l,e[3]=u,e}function se(e,t,n,r,o){const{coords:s,lengths:i}=t,l=n?r?p:g:r?g:h,u=c(n,r);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!i.length)return l(e.coords,s,0,0,R(o,s[0]),I(o,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=u),e;const[a,f]=o.scale;let d=0;for(let t=0;t<i.length;t++){const n=i[t];e.lengths[t]=n;let r=R(o,s[d]),c=I(o,s[d+1]);l(e.coords,s,d,d,r,c),d+=u;for(let t=1;t<n;t++,d+=u)r+=s[d]*a,c-=s[d+1]*f,l(e.coords,s,d,d,r,c)}return e!==t&&(e.lengths.length=i.length,e.coords.length=s.length),e}function ie(e,t,n,r,o,s){const i=c(n,r),l=m(n,r,o,s),u=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let t=0;t<u.length;t+=i)l(e.coords,u,e.coords.length,t,u[t],u[t+1]);return e}function le(e,t,n,r){let o=0,s=e[r*t],i=e[r*(t+1)];for(let l=1;l<n;l++){const n=s+e[r*(t+l)],u=i+e[r*(t+l)+1],c=(n-s)*(u+i);s=n,i=u,o+=c}return.5*o}function ue(e,t){const{coords:n,lengths:r}=e;let o=0,s=0;for(let e=0;e<r.length;e++)s+=le(n,o,r[e],t),o+=e;return Math.abs(s)}function ce(e,t){const n=e.clone(),r=e.coords,o=e.lengths;let s=0;for(let e=0;e<o.length;e++){const i=o[e];let l=r[t*s],u=r[t*s+1];for(let e=1;e<i;e++){const o=l+r[t*(s+e)],i=u+r[t*(s+e)+1];n.coords[t*(s+e)]=o,n.coords[t*(s+e)+1]=i,l=o,u=i}s+=i}return n}}}]);
//# sourceMappingURL=6594.js.map