/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkimaps_redux"] = self["webpackChunkimaps_redux"] || []).push([["node_modules_arcgis_core_views_2d_layers_KMLLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/layers/support/kmlUtils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/kmlUtils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"computeExtent\": () => (/* binding */ P),\n/* harmony export */   \"fetchService\": () => (/* binding */ g),\n/* harmony export */   \"getGraphics\": () => (/* binding */ h),\n/* harmony export */   \"parseKML\": () => (/* binding */ d),\n/* harmony export */   \"sublayersFromJSON\": () => (/* binding */ S)\n/* harmony export */ });\n/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/lang.js */ \"./node_modules/@arcgis/core/core/lang.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config.js */ \"./node_modules/@arcgis/core/config.js\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../geometry/support/boundsUtils.js */ \"./node_modules/@arcgis/core/geometry/support/boundsUtils.js\");\n/* harmony import */ var _PopupTemplate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../PopupTemplate.js */ \"./node_modules/@arcgis/core/PopupTemplate.js\");\n/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../kernel.js */ \"./node_modules/@arcgis/core/kernel.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/* harmony import */ var _renderers_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../renderers/support/jsonUtils.js */ \"./node_modules/@arcgis/core/renderers/support/jsonUtils.js\");\n/* harmony import */ var _tasks_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../tasks/support/FeatureSet.js */ \"./node_modules/@arcgis/core/tasks/support/FeatureSet.js\");\n/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../geometry/support/aaBoundingBox.js */ \"./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst c={esriGeometryPoint:\"points\",esriGeometryPolyline:\"polylines\",esriGeometryPolygon:\"polygons\"};function d(o){const t=o.folders||[],r=t.slice(),s=new Map,n=new Map,i=new Map,a=new Map,f=new Map,l={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:a};(o.featureCollection&&o.featureCollection.layers||[]).forEach((o=>{const t=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.clone)(o);t.featureSet.features=[];const r=o.featureSet.geometryType;s.set(r,t);const f=o.layerDefinition.objectIdField;\"esriGeometryPoint\"===r?G(n,f,o.featureSet.features):\"esriGeometryPolyline\"===r?G(i,f,o.featureSet.features):\"esriGeometryPolygon\"===r&&G(a,f,o.featureSet.features)})),o.groundOverlays&&o.groundOverlays.forEach((e=>{f.set(e.id,e)})),t.forEach((e=>{e.networkLinkIds.forEach((t=>{const s=function(e,o,t){const r=function(e,o){let t;return o.some((o=>o.id===e&&(t=o,!0))),t}(e,t);r&&(r.parentFolderId=o,r.networkLink=r);return r}(t,e.id,o.networkLinks);s&&r.push(s)}))})),r.forEach((o=>{o.featureInfos&&(o.points=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.clone)(s.get(\"esriGeometryPoint\")),o.polylines=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.clone)(s.get(\"esriGeometryPolyline\")),o.polygons=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.clone)(s.get(\"esriGeometryPolygon\")),o.mapImages=[],o.featureInfos.map((e=>{switch(e.type){case\"esriGeometryPoint\":case\"esriGeometryPolyline\":case\"esriGeometryPolygon\":{const t=l[e.type].get(e.id);t&&o[c[e.type]].featureSet.features.push(t);break}case\"GroundOverlay\":{const t=f.get(e.id);t&&o.mapImages.push(t);break}}})),o.fullExtent=P([o]))}));const u=P(r);return{folders:t,sublayers:r,extent:u}}function g(e,r,s,n){const f=_kernel_js__WEBPACK_IMPORTED_MODULE_6__.id&&_kernel_js__WEBPACK_IMPORTED_MODULE_6__.id.findCredential(e);e=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.addQueryParameters)(e,{token:f&&f.token});const l=_config_js__WEBPACK_IMPORTED_MODULE_1__.default.kmlServiceUrl;return (0,_request_js__WEBPACK_IMPORTED_MODULE_7__.default)(l,{query:{url:e,model:\"simple\",folders:\"\",refresh:0!==s||void 0,outSR:JSON.stringify(r)},responseType:\"json\",signal:n})}function S(e,o,t=null,r=[]){const s=[],n={},i=o.sublayers,a=o.folders.map((e=>e.id));return i.forEach((o=>{const i=new e;if(t?i.read(o,t):i.read(o),r.length&&a.indexOf(i.id)>-1&&(i.visible=-1!==r.indexOf(i.id)),n[o.id]=i,null!=o.parentFolderId&&-1!==o.parentFolderId){const e=n[o.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(i)}else s.unshift(i)})),s}function G(e,o,t){t.forEach((t=>{e.set(t.attributes[o],t)}))}async function h(e){const o=_tasks_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_9__.default.fromJSON(e.featureSet).features,t=e.layerDefinition,r=(0,_renderers_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_8__.fromJSON)(t.drawingInfo.renderer),s=_PopupTemplate_js__WEBPACK_IMPORTED_MODULE_5__.default.fromJSON(e.popupInfo),i=[];for(const e of o){const o=await r.getSymbolAsync(e);e.symbol=o,e.popupTemplate=s,e.visible=!0,i.push(e)}return i}function P(e){const o=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__.create)(),t=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__.create)(_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__.NEGATIVE_INFINITY);for(const r of e){if(r.polygons&&r.polygons.featureSet&&r.polygons.featureSet.features)for(const e of r.polygons.featureSet.features)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_4__.getBoundsXYZ)(o,e.geometry),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__.expandWithAABB)(t,o);if(r.polylines&&r.polylines.featureSet&&r.polylines.featureSet.features)for(const e of r.polylines.featureSet.features)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_4__.getBoundsXYZ)(o,e.geometry),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__.expandWithAABB)(t,o);if(r.points&&r.points.featureSet&&r.points.featureSet.features)for(const e of r.points.featureSet.features)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_4__.getBoundsXYZ)(o,e.geometry),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__.expandWithAABB)(t,o);if(r.mapImages)for(const e of r.mapImages)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_4__.getBoundsXYZ)(o,e.extent),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__.expandWithAABB)(t,o)}return (0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__.equals)(t,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__.NEGATIVE_INFINITY)?null:{xmin:t[0],ymin:t[1],zmin:t[2],xmax:t[3],ymax:t[4],zmax:t[5],spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__.default.WGS84}}\n\n\n//# sourceURL=webpack://imaps-redux/./node_modules/@arcgis/core/layers/support/kmlUtils.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/Bitmap.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/Bitmap.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Bitmap\": () => (/* binding */ c)\n/* harmony export */ });\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../chunks/mat3.js */ \"./node_modules/@arcgis/core/chunks/mat3.js\");\n/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/mat3f32.js */ \"./node_modules/@arcgis/core/chunks/mat3f32.js\");\n/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../chunks/vec2f32.js */ \"./node_modules/@arcgis/core/chunks/vec2f32.js\");\n/* harmony import */ var _chunks_builtins_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../chunks/builtins.js */ \"./node_modules/@arcgis/core/chunks/builtins.js\");\n/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl/Texture.js */ \"./node_modules/@arcgis/core/views/webgl/Texture.js\");\n/* harmony import */ var _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webgl/FramebufferObject.js */ \"./node_modules/@arcgis/core/views/webgl/FramebufferObject.js\");\n/* harmony import */ var _webgl_RenderingContext_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl/RenderingContext.js */ \"./node_modules/@arcgis/core/views/webgl/RenderingContext.js\");\n/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DisplayObject.js */ \"./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js\");\n/* harmony import */ var _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ImageryBitmapSource.js */ \"./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction d(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_5__.default(t,s)}class c extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_8__.DisplayObject{constructor(t=null,e=!0){super(),this.requestRenderOnSourceChangedEnabled=e,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__.c)()},this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(h){const o=(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.i)(this.transforms.dvs),[u,a]=h.toScreenNoRotation([0,0],this.x,this.y),d=this.resolution/this.pixelRatio/h.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.a)(o,o,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(u,a)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.a)(o,o,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(c/2,l/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.r)(o,o,-x),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.a)(o,o,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(-c/2,-l/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.j)(o,o,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(c,l)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.m)(this.transforms.dvs,h.displayViewMat3,o)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind({context:t},e){this._texture&&t.bindTexture(this._texture,e)}updateTexture({context:t}){var e;if(!this.stage)return null==(e=this._texture)||e.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=d(t,this.sourceWidth,this.sourceHeight):this._texture=d(t));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(t){return t&&\"render\"in t}(i))if(i instanceof _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_9__.default){const t=i.getRenderedRasterPixels();this._texture.setData(t.renderedRasterPixels)}else this._texture.setData(function(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}(i));else(function(t){return t&&!(\"render\"in t)})(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}\n\n\n//# sourceURL=webpack://imaps-redux/./node_modules/@arcgis/core/views/2d/engine/Bitmap.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BitmapContainer\": () => (/* binding */ t)\n/* harmony export */ });\n/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./webgl/enums.js */ \"./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js\");\n/* harmony import */ var _brushes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./brushes.js */ \"./node_modules/@arcgis/core/views/2d/engine/brushes.js\");\n/* harmony import */ var _webgl_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./webgl/WGLContainer.js */ \"./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t extends _webgl_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__.default{prepareRenderPasses(s){const t=s.registerRenderPass({name:\"bitmap\",brushes:[_brushes_js__WEBPACK_IMPORTED_MODULE_1__.brushes.bitmap],target:()=>this.children,drawPhase:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.WGLDrawPhase.MAP});return[...super.prepareRenderPasses(s),t]}}\n\n\n//# sourceURL=webpack://imaps-redux/./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),l=i.pixelBlock.getAsRGBA(),h=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);h.data.set(l),e.putImageData(h,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}});\n\n\n//# sourceURL=webpack://imaps-redux/./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ \"./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/uuid.js */ \"./node_modules/@arcgis/core/core/uuid.js\");\n/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../portal/support/resourceExtension.js */ \"./node_modules/@arcgis/core/portal/support/resourceExtension.js\");\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _core_scheduling_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/scheduling.js */ \"./node_modules/@arcgis/core/core/scheduling.js\");\n/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../geometry/support/webMercatorUtils.js */ \"./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js\");\n/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/Extent.js */ \"./node_modules/@arcgis/core/geometry/Extent.js\");\n/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/Collection.js */ \"./node_modules/@arcgis/core/core/Collection.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/* harmony import */ var _core_Handles_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/Handles.js */ \"./node_modules/@arcgis/core/core/Handles.js\");\n/* harmony import */ var _core_watchUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../core/watchUtils.js */ \"./node_modules/@arcgis/core/core/watchUtils.js\");\n/* harmony import */ var _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../support/GraphicsCollection.js */ \"./node_modules/@arcgis/core/support/GraphicsCollection.js\");\n/* harmony import */ var _layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../layers/support/kmlUtils.js */ \"./node_modules/@arcgis/core/layers/support/kmlUtils.js\");\n/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../layers/LayerView.js */ \"./node_modules/@arcgis/core/views/layers/LayerView.js\");\n/* harmony import */ var _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./graphics/GraphicsView2D.js */ \"./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js\");\n/* harmony import */ var _engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../engine/Bitmap.js */ \"./node_modules/@arcgis/core/views/2d/engine/Bitmap.js\");\n/* harmony import */ var _engine_BitmapContainer_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../engine/BitmapContainer.js */ \"./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js\");\n/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./LayerView2D.js */ \"./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet C=class extends((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_23__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_19__.default)){constructor(){super(...arguments),this._handles=new _core_Handles_js__WEBPACK_IMPORTED_MODULE_15__.default,this._bitmapIndex=new Map,this._mapImageContainer=new _engine_BitmapContainer_js__WEBPACK_IMPORTED_MODULE_22__.BitmapContainer,this._featuresMap=new Map,this.allVisiblePoints=new _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_17__.GraphicsCollection,this.allVisiblePolylines=new _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_17__.GraphicsCollection,this.allVisiblePolygons=new _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_17__.GraphicsCollection,this.allVisibleMapImages=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_13__.default}hitTest(e,i){if(this.suspended||!this._pointsView&&!this._polylinesView&&!this._polygonsView)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__.resolve)(null);const s=[this._pointsView.hitTest(e,i),this._polylinesView.hitTest(e,i),this._polygonsView.hitTest(e,i)];return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__.all)(s).then((e=>e.filter((e=>(e&&(e.layer=this.layer,e.sourceLayer=this.layer),!!e)))[0]||null))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._handles.add([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))}))]),this.container.addChild(this._mapImageContainer),this._polygonsView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_20__.default({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate()}),this.container.addChild(this._polygonsView.container),this._polylinesView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_20__.default({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate()}),this.container.addChild(this._polylinesView.container),this._pointsView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_20__.default({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate()}),this.container.addChild(this._pointsView.container),this.watch(\"layer.visibleSublayers\",(()=>this._refreshCollections())),this._fetchingPromise=this._fetchService().then((()=>{this._fetchingPromise=null,this.notifyChange(\"updating\")}))}detach(){this._handles.removeAll(),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return null!=this._fetchingPromise||this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference.isWGS84||this.view.spatialReference.isWebMercator)&&(0,_request_js__WEBPACK_IMPORTED_MODULE_14__.default)(e.href,{responseType:\"image\"}).then((({data:i})=>{let s=_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__.default.fromJSON(e.extent);(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_11__.canProject)(s,this.view.spatialReference)&&(s=(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_11__.project)(s,this.view.spatialReference));const t=new _engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_21__.Bitmap(i);t.x=s.xmin,t.y=s.ymax,t.resolution=s.width/i.naturalWidth,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}_fetchService(){return this._handles.remove(\"refresh-collections\"),this._getParsedKML().then((e=>this._fetchSublayerService(this.layer,e)))}_fetchSublayerService(e,i){const s=e.sublayers;if(!s||0===s.length)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__.resolve)();const a=[];return s.forEach((e=>{const s=(0,_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_16__.whenTrueOnce)(e,\"visible\").then((()=>e.load())).then((()=>this._getGraphicsForSublayer(e,i))).then((i=>(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__.create)((s=>{e.networkLink?s():(this._featuresMap.set(e,i),this._handles.add((0,_core_scheduling_js__WEBPACK_IMPORTED_MODULE_10__.schedule)((()=>{this._refreshCollections(),s()})),\"refresh-collections\"))})))).then((()=>this._fetchSublayerService(e,e.sourceJSON||i)));e.visible&&a.push(s)})),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__.all)(a).then((()=>{}))}_getParsedKML(){return (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_18__.fetchService)(this.layer.url,this.view.spatialReference,this.layer.refreshInterval).then((e=>(0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_18__.parseKML)(e.data)))}async _getGraphicsForSublayer(e,i){let s=null;return i.sublayers.some((i=>(s=i,i.id===e.id)))?{points:s.points&&await (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_18__.getGraphics)(s.points),polylines:s.polylines&&await (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_18__.getGraphics)(s.polylines),polygons:s.polygons&&await (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_18__.getGraphics)(s.polygons),mapImages:s.mapImages}:null}_refreshCollections(){const e=this.get(\"layer.visibleSublayers\");this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),e&&e.length&&e.forEach((e=>{const i=this._featuresMap.get(e);i&&(this.allVisiblePoints.addMany(i.points),this.allVisiblePolylines.addMany(i.polylines),this.allVisiblePolygons.addMany(i.polygons),this.allVisibleMapImages.addMany(i.mapImages))}))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],C.prototype,\"_pointsView\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],C.prototype,\"_polylinesView\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],C.prototype,\"_polygonsView\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],C.prototype,\"_fetchingPromise\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({dependsOn:[\"_fetchingPromise\",\"_pointsView.updating\",\"_polygonsView.updating\",\"_polylinesView.updating\"]})],C.prototype,\"updating\",void 0),C=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)(\"esri.views.2d.layers.KMLLayerView2D\")],C);var j=C;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (j);\n\n\n//# sourceURL=webpack://imaps-redux/./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js?");

/***/ })

}]);