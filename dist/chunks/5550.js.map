{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/layers/GroupLayer.js","webpack://imaps/./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","webpack://imaps/./node_modules/@arcgis/core/views/support/drapedUtils.js","webpack://imaps/./node_modules/@arcgis/core/widgets/AreaMeasurement2D/AreaMeasurement2DTool.js","webpack://imaps/./node_modules/@arcgis/core/widgets/AreaMeasurement2D/AreaMeasurement2DViewModel.js","webpack://imaps/./node_modules/@arcgis/core/widgets/AreaMeasurement2D.js","webpack://imaps/./node_modules/@arcgis/core/widgets/support/InteractiveToolViewModel.js"],"names":["b","i","super","this","_visibilityHandles","fullExtent","operationalLayerType","spatialReference","type","_visibilityWatcher","bind","_enforceVisibility","visibilityMode","visible","watch","_visibleWatcher","t","s","r","o","forEach","webmap","getLayerJSONFromResourceInfo","layerType","push","layers","_set","e","_get","addResolvingPromise","loadFromPortal","supportedTypes","_turnOffOtherLayers","uid","remove","initialized","find","length","getItemAt","_isAnyLayerVisible","some","prototype","json","read","write","ignoreOrigin","origins","readOnly","value","xoffset","Math","max","abs","yoffset","stops","n","size","renderer","event","pointerType","filter","map","maxSize","minSize","f","floor","visualVariables","symbol","uniqueValueInfos","classBreakInfos","j","C","layer","interactive","selectable","grabbable","dragging","cursor","events","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","geometry","attachSymbolChanged","error","graphic","elevationInfo","offset","mode","_updateGraphicSymbol","emit","action","detachSymbolChanged","_resetGraphicSymbol","l","view","_intersectDistance2D","_intersectDistance3D","add","focusedSymbol","_focused","originalPoint","equals","clone","mapPoint","radiusPx","G","toScreen","a","x","y","toMap","include","w","renderSpatialReference","state","camera","eye","constructOnly","nonNullable","dependsOn","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","m","p","c","xmin","min","ymin","xmax","ymax","intersects","N","arguments","_drawActive","_handles","_graphicsLayer","_manipulatorLayer","_groupLayer","listMode","_vertices","deferCreation","geodesicDistanceThreshold","measurement","measurementLabel","then","messages","detach","_draw","destroy","reset","_startSketch","focus","_updateGraphics","V","create","removeAll","_updateSketch","_updateCursor","on","vertices","_stopSketch","manipulators","manipulator","complete","manipulatorId","pop","J","palette","next","coord","findById","id","paths","isGeographic","isWebMercator","fillGeometry","outlineGeometry","rings","h","area","perimeter","K","X","unit","fillColor","pathColor","pathWidth","color","outline","width","centroid","font","family","haloColor","haloSize","text","addMany","style","handleColor","handleWidth","isWGS84","Number","supportedViewType","tool","isDisabled","active","_validateUnit","defaultUnit","_override","_clearOverride","_validateUnits","createTool","removeTool","start","clear","toolConstructor","constructorArguments","unitOptions","indexOf","aliasOf","String","U","z","iconClass","label","messagesUnits","viewModel","isSupported","d","v","B","E","H","key","class","hint","I","unsupported","T","classes","W","q","for","onchange","_changeUnit","systems","units","pluralCapitalized","F","disabled","onclick","_newMeasurement","title","newMeasurement","target","options","selectedIndex","source","overridable","_baseHandles","_loggedUnsupportedErrorOnce","_creationAbortController","ready","logUnsupportedError","tools","removed","destroyed","abort","createToolParams","AbortController","signal","Boolean"],"mappings":"iXAI6kC,IAAIA,EAAE,eAAc,QAAE,QAAE,QAAE,QAAE,QAAE,OAAE,WAAS,YAAYC,GAAGC,MAAMD,GAAGE,KAAKC,mBAAmB,GAAGD,KAAKE,gBAAW,EAAOF,KAAKG,qBAAqB,aAAaH,KAAKI,sBAAiB,EAAOJ,KAAKK,KAAK,QAAQL,KAAKM,mBAAmBN,KAAKM,mBAAmBC,KAAKP,MAAM,aAAaA,KAAKQ,mBAAmBR,KAAKS,eAAeT,KAAKU,SAASV,KAAKW,MAAM,UAAUX,KAAKY,gBAAgBL,KAAKP,OAAM,GAAI,aAAaF,EAAEe,EAAEC,EAAEC,GAAG,MAAMC,EAAE,GAAG,IAAIlB,EAAE,OAAOkB,EAAElB,EAAEmB,SAASnB,IAAI,MAAMe,GAAE,QAAEf,EAAEiB,EAAEG,OAAOH,EAAEG,OAAOC,6BAA6BrB,GAAG,KAAKiB,IAAG,QAAEF,IAAIA,EAAEO,WAAWJ,EAAEK,KAAKR,MAAMA,EAAES,OAAON,EAAE,eAAelB,GAAGE,KAAKuB,KAAK,aAAazB,GAAG,mBAAmBA,GAAG,MAAM0B,EAAExB,KAAKyB,KAAK,oBAAoB3B,EAAEE,KAAKuB,KAAK,iBAAiBzB,GAAG0B,GAAGxB,KAAKQ,mBAAmBV,EAAEE,KAAKU,SAAS,KAAKZ,GAAG,OAAOE,KAAK0B,oBAAoB1B,KAAK2B,eAAe,CAACC,eAAe,CAAC,kBAAkB,qBAAqB,kBAAkB9B,KAAI,aAAEE,MAAM,UAAU,OAAO,QAAEA,MAAMF,IAAIA,EAAEE,KAAKsB,WAAW,WAAWxB,GAAGA,EAAEY,SAAS,cAAcV,KAAKS,eAAeT,KAAK6B,oBAAoB/B,GAAG,cAAcE,KAAKS,iBAAiBX,EAAEY,QAAQV,KAAKU,SAASV,KAAKC,mBAAmBH,EAAEgC,KAAKhC,EAAEa,MAAM,UAAUX,KAAKM,oBAAmB,GAAI,aAAaR,GAAG,MAAM0B,EAAExB,KAAKC,mBAAmBH,EAAEgC,KAAKN,IAAIA,EAAEO,gBAAgB/B,KAAKC,mBAAmBH,EAAEgC,MAAM9B,KAAKQ,mBAAmBR,KAAKS,eAAeT,KAAKU,SAAS,oBAAoBZ,GAAGE,KAAKsB,OAAOL,SAASO,IAAIA,IAAI1B,IAAI0B,EAAEd,SAAQ,MAAO,mBAAmBZ,EAAE0B,GAAG,KAAI,QAAExB,MAAMgC,YAAY,OAAO,MAAMlB,EAAEd,KAAKsB,OAAO,IAAIP,EAAED,EAAEmB,MAAMnC,GAAGA,EAAEY,UAAU,OAAOZ,GAAG,IAAI,YAAYgB,EAAEoB,SAASnB,IAAIA,EAAED,EAAEqB,UAAU,GAAGpB,EAAEL,SAAQ,GAAIV,KAAK6B,oBAAoBd,GAAG,MAAM,IAAI,YAAYD,EAAEG,SAASnB,IAAIA,EAAEY,QAAQc,MAAM,gBAAgB1B,GAAG,cAAcE,KAAKS,gBAAgBT,KAAKsB,OAAOL,SAASO,IAAIA,EAAEd,QAAQZ,KAAK,mBAAmBA,EAAE0B,EAAEX,EAAEC,GAAG,MAAMC,EAAED,EAAE,OAAOd,KAAKS,gBAAgB,IAAI,YAAYX,EAAEE,KAAK6B,oBAAoBd,GAAGf,KAAKoC,uBAAuBrB,EAAEL,SAAQ,GAAI,MAAM,IAAI,YAAYK,EAAEL,QAAQV,KAAKU,SAAS,qBAAqB,OAAOV,KAAKsB,OAAOe,MAAMvC,GAAGA,EAAEY,aAAY,OAAE,EAAC,WAAKb,EAAEyC,UAAU,kBAAa,IAAQ,OAAE,EAAC,QAAE,CAACC,KAAK,CAACC,MAAK,EAAGC,MAAM,CAACC,cAAa,OAAQ7C,EAAEyC,UAAU,cAAS,IAAQ,OAAE,EAAC,OAAE,WAAWzC,EAAEyC,UAAU,eAAe,OAAM,OAAE,EAAC,QAAE,CAACjC,KAAK,CAAC,iBAAiBR,EAAEyC,UAAU,4BAAuB,IAAQ,OAAE,EAAC,QAAE,CAACC,KAAK,CAACI,QAAQ,CAAC,eAAe,CAACH,MAAK,EAAGC,OAAM,QAAS5C,EAAEyC,UAAU,aAAa,OAAM,OAAE,EAAC,WAAKzC,EAAEyC,UAAU,wBAAmB,IAAQ,OAAE,EAAC,QAAE,CAACC,KAAK,CAACC,MAAK,GAAII,UAAS,EAAGC,MAAM,WAAWhD,EAAEyC,UAAU,YAAO,IAAQ,OAAE,EAAC,QAAE,CAACjC,KAAK,CAAC,cAAc,YAAY,aAAawC,MAAM,cAAcN,KAAK,CAACE,OAAM,EAAGE,QAAQ,CAAC,UAAU,CAACH,MAAK,EAAGC,OAAM,QAAS5C,EAAEyC,UAAU,iBAAiB,MAAMzC,GAAE,OAAE,EAAC,OAAE,2BAA2BA,GAAW,QAAFA,G,6BCAhsH,SAASgB,EAAEA,EAAEW,GAAG,OAAOA,EAAE,YAAYA,GAAGA,EAAEsB,QAAQC,KAAKC,IAAInC,EAAEkC,KAAKE,IAAIzB,EAAEsB,UAAU,YAAYtB,GAAGA,EAAE0B,QAAQH,KAAKC,IAAInC,EAAEkC,KAAKE,IAAIzB,EAAE0B,SAAS,IAAIrC,EAAEA,EAAE,SAASW,EAAEX,EAAEW,GAAG,MAAM,iBAAiBX,EAAEA,EAAEA,GAAGA,EAAEsC,OAAOtC,EAAEsC,MAAMjB,OAAO,SAASrB,GAAG,IAAIW,EAAE,EAAE4B,EAAE,EAAE,IAAI,IAAIrC,EAAE,EAAEA,EAAEF,EAAEqB,OAAOnB,IAAI,CAAC,MAAMD,EAAED,EAAEE,GAAGsC,KAAK,iBAAiBvC,IAAIU,GAAGV,EAAEsC,KAAK,OAAO5B,EAAE4B,EAA9G,CAAiHvC,EAAEsC,OAAO3B,EAAE,SAAS4B,EAAEA,GAAG,MAAMrC,EAAEqC,GAAGA,EAAEE,SAASxC,EAAE,WAAWsC,GAAGA,EAAEG,OAAOH,EAAEG,MAAMC,aAAa,EAAE,EAAE,IAAIzC,EAAE,OAAOD,EAAE,MAAME,EAAE,oBAAoBD,EAAE,SAASF,EAAEuC,GAAG,IAAIA,EAAE,OAAOvC,EAAE,MAAME,EAAEqC,EAAEK,QAAQ5C,GAAG,SAASA,EAAER,OAAOqD,KAAKN,IAAI,MAAMO,QAAQ5C,EAAE6C,QAAQ9C,GAAGsC,EAAE,OAAO5B,EAAET,EAAEF,GAAGW,EAAEV,EAAED,IAAI,KAAK,IAAIC,EAAE,EAAE,MAAME,EAAED,EAAEmB,OAAO,GAAG,IAAIlB,EAAE,OAAOH,EAAE,IAAI,IAAIA,EAAE,EAAEA,EAAEG,EAAEH,IAAIC,GAAGC,EAAEF,GAAG,MAAMgD,EAAEd,KAAKe,MAAMhD,EAAEE,GAAG,OAAO+B,KAAKC,IAAIa,EAAEhD,GAAtP,CAA0PC,EAAEC,EAAEgD,iBAAiBjD,EAAE,GAAG,WAAWC,EAAEV,KAAK,OAAOQ,EAAEG,EAAED,EAAEiD,QAAQ,GAAG,iBAAiBjD,EAAEV,KAAK,CAAC,IAAImB,EAAER,EAAE,OAAOD,EAAEkD,iBAAiBhD,SAASmC,IAAI5B,EAAEX,EAAEW,EAAE4B,EAAEY,WAAWxC,EAAE,GAAG,iBAAiBT,EAAEV,KAAK,CAAC,IAAImB,EAAER,EAAE,OAAOD,EAAEmD,gBAAgBjD,SAASmC,IAAI5B,EAAEX,EAAEW,EAAE4B,EAAEY,WAAWxC,EAAE,OAAOT,EAAEV,KAAKW,E,sSCAkM,MAAMmD,EAAE,cAAY,6CAA6C,IAAIC,EAAE,cAAc,UAAE,YAAY5C,GAAGzB,MAAMyB,GAAGxB,KAAKqE,MAAM,KAAKrE,KAAKsE,aAAY,EAAGtE,KAAKuE,YAAW,EAAGvE,KAAKwE,WAAU,EAAGxE,KAAKyE,UAAS,EAAGzE,KAAK0E,OAAO,KAAK1E,KAAK2E,OAAO,IAAI,iBAAe3E,KAAK4E,sBAAsB,KAAK5E,KAAK6E,4BAA4B,KAAK7E,KAAK8E,gBAAgB,KAAK,YAAYtD,GAAG,UAAS,QAAEA,EAAEuD,SAAS,SAAS/E,KAAK4E,sBAAsB,KAAK5E,KAAK8E,gBAAgBtD,EAAEwC,OAAOhE,KAAKuB,KAAK,UAAUC,GAAGxB,KAAKgF,uBAAuBb,EAAEc,MAAM,qCAAqC,oBAAoB,MAAMzD,EAAE,kBAAkBxB,KAAKkF,QAAQb,OAAOrE,KAAKkF,QAAQb,MAAMc,cAActE,GAAE,QAAEb,KAAKkF,SAASpF,EAAE0B,EAAEA,EAAE4D,OAAO,EAAE,OAAO,IAAI,IAAE,CAACC,KAAKxE,EAAEuE,OAAOtF,IAAI,kBAAkB0B,GAAGA,IAAIxB,KAAKyB,KAAK,mBAAmBzB,KAAKuB,KAAK,gBAAgBC,GAAGxB,KAAKsF,uBAAuBtF,KAAK4E,sBAAsB,MAAM,oBAAoB,OAAM,EAAG,aAAapD,GAAGA,IAAIxB,KAAKyB,KAAK,cAAczB,KAAKuB,KAAK,WAAWC,GAAGxB,KAAKsF,wBAAwB,aAAa9D,GAAGA,IAAIxB,KAAKyB,KAAK,cAAczB,KAAKuB,KAAK,WAAWC,GAAGxB,KAAKsF,wBAAwB,aAAa9D,GAAGA,IAAIxB,KAAKyB,KAAK,cAAczB,KAAKuB,KAAK,WAAWC,GAAGxB,KAAKsF,uBAAuBtF,KAAK2E,OAAOY,KAAK,iBAAiB,CAACC,OAAOhE,EAAE,SAAS,cAAc,eAAe,OAAOxB,KAAKyB,KAAK,aAAazB,KAAKyB,KAAK,YAAY,UAAUzB,KAAKyF,sBAAsBzF,KAAK0F,sBAAsB1F,KAAKuB,KAAK,OAAO,MAAM,qBAAqBC,GAAG,MAAMX,EAAEb,KAAKyB,KAAK,WAAW,IAAG,IAAKZ,EAAEH,QAAQ,OAAO,KAAK,MAAMI,EAAEd,KAAKyB,KAAK,iBAAiBV,GAAE,QAAED,GAAGA,EAAED,EAAEmD,OAAO2B,EAAE9E,EAAEkE,SAAS,OAAO,QAAEY,GAAG,KAAK,OAAO3F,KAAK4F,KAAKvF,KAAKL,KAAK6F,qBAAqB7F,KAAK4F,KAAKpE,EAAEmE,EAAE5E,GAAGf,KAAK8F,qBAAqB9F,KAAK4F,KAAKpE,EAAEX,GAAG,SAASb,KAAKgF,uBAAsB,QAAEhF,KAAKqE,QAAQrE,KAAKqE,MAAM0B,IAAI/F,KAAKkF,SAAS,SAASlF,KAAKyF,sBAAsBzF,KAAK0F,uBAAsB,QAAE1F,KAAKqE,QAAQrE,KAAKqE,MAAMtC,OAAO/B,KAAKkF,SAAS,sBAAsBlF,KAAKyF,sBAAsBzF,KAAK6E,4BAA4B7E,KAAKkF,QAAQvE,MAAM,UAAUa,KAAI,QAAEA,IAAIA,IAAIxB,KAAKgG,eAAexE,IAAIxB,KAAK8E,kBAAkB9E,KAAK8E,gBAAgBtD,EAAExB,KAAKiG,WAAU,QAAEjG,KAAKgG,iBAAiBhG,KAAKkF,QAAQlB,OAAOhE,KAAKgG,mBAAkB,GAAI,uBAAsB,QAAEhG,KAAK6E,+BAA+B7E,KAAK6E,4BAA4B9C,SAAS/B,KAAK6E,4BAA4B,MAAM,uBAAuB7E,KAAKkF,QAAQlB,OAAOhE,KAAKiG,WAAU,QAAEjG,KAAKgG,eAAehG,KAAKgG,cAAchG,KAAK8E,gBAAgB,sBAAsB9E,KAAKkF,QAAQlB,OAAOhE,KAAK8E,gBAAgB,qBAAqBtD,EAAEX,EAAEC,EAAEC,GAAG,GAAGA,EAAEA,IAAG,QAAED,IAAG,QAAEC,GAAG,OAAO,KAAK,IAAI4E,EAAE3F,KAAK4E,sBAAsB,GAAG,UAAU9D,EAAET,MAAM,kBAAkBU,EAAEV,KAAK,OAAO,OAAEQ,EAAEC,EAAEU,GAAG,EAAE,KAAK,IAAG,QAAEmE,KAAKA,EAAEO,cAAcC,OAAOrF,GAAG,CAAC,MAAMD,EAAEC,EAAEhB,EAAE0B,EAAEpB,iBAAiB,IAAG,QAAES,EAAET,iBAAiBN,GAAG,CAAC,MAAM0B,GAAE,QAAEX,EAAEf,GAAG6F,EAAE,CAACO,cAAcrF,EAAEuF,QAAQC,SAAS7E,EAAE8E,UAAS,QAAEvF,EAAEsC,OAAOrD,KAAK4E,sBAAsBe,GAAG,IAAG,QAAEA,GAAG,CAAC,MAAM7F,GAAE,QAAEe,EAAE0F,GAAGvF,EAAEQ,EAAEgF,SAASb,EAAEU,UAAUvF,EAAE6E,EAAEW,SAASG,EAAEzF,EAAE0F,GAAE,QAAE3F,EAAE+B,SAASM,EAAEpC,EAAE2F,GAAE,QAAE5F,EAAEmC,SAAS,OAAO,OAAEpD,EAAE,CAAC2G,EAAErD,IAAItC,EAAEA,EAAE,EAAE,KAAK,OAAO,KAAK,qBAAqBU,EAAEX,EAAEf,GAAG,MAAMkB,EAAEQ,EAAEoF,MAAM/F,EAAE,CAACgG,QAAQ,CAAC/G,KAAK,OAAOkB,IAAG,QAAEA,EAAE8F,EAAEtF,EAAEuF,yBAAwB,OAAED,EAAEtF,EAAEwF,MAAMC,OAAOC,KAAK,QAAO,OAAE,EAAC,QAAE,CAACC,eAAc,EAAGC,aAAY,KAAMhD,EAAE9B,UAAU,UAAU,OAAM,OAAE,EAAC,QAAE,CAACM,UAAS,EAAGyE,UAAU,CAAC,cAAcjD,EAAE9B,UAAU,gBAAgB,OAAM,OAAE,EAAC,QAAE,CAAC6E,eAAc,EAAGC,aAAY,KAAMhD,EAAE9B,UAAU,YAAO,IAAQ,OAAE,EAAC,QAAE,CAACO,MAAM,QAAQuB,EAAE9B,UAAU,gBAAgB,OAAM,OAAE,EAAC,QAAE,CAAC6E,eAAc,KAAM/C,EAAE9B,UAAU,aAAQ,IAAQ,OAAE,EAAC,WAAK8B,EAAE9B,UAAU,mBAAc,IAAQ,OAAE,EAAC,WAAK8B,EAAE9B,UAAU,kBAAa,IAAQ,OAAE,EAAC,WAAK8B,EAAE9B,UAAU,iBAAY,IAAQ,OAAE,EAAC,QAAE,CAACO,OAAM,KAAMuB,EAAE9B,UAAU,WAAW,OAAM,OAAE,EAAC,WAAK8B,EAAE9B,UAAU,gBAAW,IAAQ,OAAE,EAAC,WAAK8B,EAAE9B,UAAU,WAAW,OAAM,OAAE,EAAC,QAAE,CAACO,OAAM,KAAMuB,EAAE9B,UAAU,WAAW,OAAM,OAAE,EAAC,WAAK8B,EAAE9B,UAAU,cAAS,GAAQ8B,GAAE,OAAE,EAAC,OAAE,8CAA8CA,GAAG,MAAM0C,GAAE,SAAIP,GAAE,W,iHCAhoJ,SAASE,EAAE5F,EAAEf,EAAE2G,EAAEzF,EAAE,IAAI,KAAG,IAAIF,EAAE,GAAG,OAAO2F,EAAEpG,KAAKS,EAAEhB,EAAE2G,EAAEa,gBAAgB,GAAG,OAAOb,EAAEpG,KAAK,CAAC,MAAMU,EAAE0F,EAAEc,2BAA2B1G,GAAGG,EAAEyF,EAAEe,wBAAwB1G,GAAE,QAAEE,KAAKA,EAAEmF,OAAOM,EAAErG,mBAAkB,QAAEY,IAAG,QAAEyF,EAAErG,kBAAkBN,EAAEiB,EAAE,MAAM0G,EAAE5G,EAAE6F,EAAE5F,EAAE4G,EAAE7G,EAAE8F,EAAE7F,EAAE6G,EAAE9G,EAAE6F,EAAE5F,EAAE6E,EAAE9E,EAAE8F,EAAE7F,GAAGV,iBAAiByD,GAAG4C,EAAE,OAAOzF,EAAE4G,KAAK7E,KAAK8E,IAAIJ,EAAEE,GAAG3G,EAAE8G,KAAK/E,KAAK8E,IAAIH,EAAE/B,GAAG3E,EAAE+G,KAAKhF,KAAKC,IAAIyE,EAAEE,GAAG3G,EAAEgH,KAAKjF,KAAKC,IAAI0E,EAAE/B,GAAG3E,EAAEZ,iBAAiByD,EAAE7C,EAAE,SAASA,EAAEQ,EAAET,EAAEqC,GAAG,MAAMpC,EAAEoC,EAAEwD,MAAMpF,GAAG,QAAG,QAAER,IAAmByF,EAAEzF,GAAE,SAAIoC,EAAEtC,GAAGmH,WAAWlH,GAAG,MAAMD,EAAE,IAAI,K,uiBCA21C,IAAIoH,EAAE,cAAc,IAAE,cAAcnI,SAASoI,WAAWnI,KAAKoI,aAAY,EAAGpI,KAAKqI,SAAS,IAAI,IAAErI,KAAKsI,eAAe,IAAI,UAAEtI,KAAKuI,kBAAkB,IAAI,UAAEvI,KAAKwI,YAAY,IAAI,UAAE,CAAClH,OAAO,CAACtB,KAAKsI,eAAetI,KAAKuI,mBAAmBE,SAAS,OAAO/H,SAAQ,IAAKV,KAAK0I,UAAU,GAAG1I,KAAK2I,eAAc,EAAG3I,KAAK4I,0BAA0B,IAAI5I,KAAK6I,YAAY,KAAK7I,KAAK8I,iBAAiB,KAAK,cAAa,QAAE,uBAAuBC,MAAMvH,IAAIxB,KAAKgJ,SAASxH,KAAKxB,KAAKqI,SAAStC,KAAI,SAAE,UAAW/F,KAAKgJ,eAAe,QAAE,2BAA2B,UAAUhJ,KAAKiJ,SAASjJ,KAAKkJ,QAAQlJ,KAAKkJ,MAAMC,UAAUnJ,KAAKkJ,MAAM,MAAMlJ,KAAKqI,WAAWrI,KAAKqI,SAASc,UAAUnJ,KAAKqI,SAAS,MAAMrI,KAAKsI,iBAAiBtI,KAAKsI,eAAea,UAAUnJ,KAAKsI,eAAe,MAAMtI,KAAKuI,oBAAoBvI,KAAKuI,kBAAkBY,UAAUnJ,KAAKuI,kBAAkB,MAAM,aAAa/G,GAAGxB,KAAKuB,KAAK,WAAWC,GAAGA,GAAGxB,KAAKkJ,MAAME,QAAQ,WAAWpJ,KAAKoI,aAAa,IAAIpI,KAAK0I,UAAUxG,QAAQlC,KAAKqJ,eAAe,WAAW,MAAM7H,EAAExB,KAAK4F,KAAK5F,KAAKkJ,MAAM,IAAI,IAAE,CAACtD,KAAKpE,IAAIA,EAAEkC,IAAIqC,IAAI/F,KAAKwI,aAAahH,EAAE8H,QAAQtJ,KAAKqI,SAAStC,IAAI,EAAC,UAAE/F,KAAK,CAAC,OAAO,4BAA4B,UAAU,aAAY,KAAMA,KAAK0I,UAAUxG,OAAO,GAAGlC,KAAKuJ,sBAAqB,UAAEvJ,KAAK,yBAAyBwB,IAAIgI,EAAEhI,MAAK,YAAK,eAASxB,KAAKyJ,SAAS,WAAW,MAAM/F,IAAIlC,GAAGxB,KAAK4F,KAAK5F,KAAKkJ,MAAMtD,KAAK,KAAK5F,KAAKkJ,MAAMC,UAAUnJ,KAAKkJ,MAAM,KAAK1H,EAAEO,OAAO/B,KAAKwI,aAAaxI,KAAKqI,SAASqB,YAAY1J,KAAKsI,eAAeoB,YAAY1J,KAAKuI,kBAAkBmB,YAAY1J,KAAKuB,KAAK,cAAc,MAAMvB,KAAKuB,KAAK,mBAAmB,MAAM,SAASvB,KAAKwI,YAAY9H,SAAQ,EAAG,SAASV,KAAKwI,YAAY9H,SAAQ,EAAG,QAAQV,KAAK0I,UAAU,GAAG1I,KAAKsI,eAAeoB,YAAY1J,KAAKuB,KAAK,cAAc,MAAMvB,KAAKuB,KAAK,mBAAmB,MAAMvB,KAAKkJ,MAAME,QAAQpJ,KAAKoI,aAAY,EAAGpI,KAAK2J,cAAc,IAAI,aAAanI,GAAG,iBAAiBA,EAAEnB,MAAML,KAAK4J,gBAAgB,eAAe5J,KAAKoI,aAAY,EAAG,MAAM5G,EAAExB,KAAKkJ,MAAMO,OAAO,WAAW,CAACpE,KAAK,UAAU7D,EAAEqI,GAAG,CAAC,aAAa,gBAAgB,gBAAgB,gBAAgB,OAAO,SAASrI,GAAGxB,KAAK2J,cAAcnI,EAAEsI,YAAYtI,EAAEqI,GAAG,iBAAgB,IAAK7J,KAAK+J,gBAAgB,cAAc,GAAG/J,KAAK0I,UAAUxG,OAAO,EAAE,OAAOlC,KAAKoJ,aAAapJ,KAAKqJ,eAAerJ,KAAKgK,aAAa/I,SAASO,IAAIA,EAAEyI,YAAY3F,aAAY,KAAMtE,KAAKoI,aAAY,EAAGpI,KAAKkK,WAAW,cAAc1I,GAAG,GAAGgI,EAAExJ,KAAK4F,KAAKxF,qBAAoB,UAAI,OAAO,GAAGoB,EAAEU,OAAO,EAAE,OAAOlC,KAAK0I,UAAU,GAAG1I,KAAKgK,aAAaN,iBAAiB1J,KAAKsI,eAAeoB,YAAY1J,KAAKyJ,SAAS,MAAM5I,EAAEb,KAAK4F,KAAKxF,iBAAiB,KAAKJ,KAAK0I,UAAUxG,OAAOV,EAAEU,QAAQ,CAAC,MAAMiI,cAAc3I,GAAGxB,KAAK0I,UAAU0B,MAAMpK,KAAKgK,aAAajI,OAAOP,GAAG,IAAI,IAAIT,EAAEf,KAAK0I,UAAUxG,OAAOnB,EAAES,EAAEU,OAAOnB,IAAI,CAAC,MAAMD,EAAEE,GAAGQ,EAAET,GAAG0F,EAAE4D,EAAE,IAAI,IAAE,CAAC3D,EAAE5F,EAAE6F,EAAE3F,EAAEZ,iBAAiBS,IAAIb,KAAK4F,KAAK5F,KAAKuI,kBAAkBvI,KAAKsK,SAASlH,EAAEpD,KAAKgK,aAAajE,IAAIU,IAAG,QAAEA,GAAE,CAAEjF,EAAEX,KAAKA,EAAE0J,MAAK,QAAEvK,KAAK4F,OAAO2E,MAAK,QAAE/I,EAAE0D,UAAUqF,MAAK,KAAM,MAAM1J,EAAEW,EAAE0D,QAAQH,SAAS/E,KAAK0I,UAAU3H,GAAGyJ,MAAM,CAAC3J,EAAE6F,EAAE7F,EAAE8F,GAAG3G,KAAKuJ,wBAAwBvJ,KAAK0I,UAAUrH,KAAK,CAAC8I,cAAc/G,EAAEoH,MAAM,CAAC1J,EAAEE,KAAK,MAAMD,EAAEf,KAAK0I,UAAUxG,OAAO,EAAEpB,EAAEd,KAAK0I,UAAU3H,IAAIC,EAAEyF,GAAGjF,EAAET,GAAG,GAAGD,EAAE0J,MAAM,KAAKxJ,GAAGF,EAAE0J,MAAM,KAAK/D,EAAE,CAAC3F,EAAE0J,MAAM,CAACxJ,EAAEyF,GAAG,MAAMjF,EAAE,IAAI,IAAE,CAACkF,EAAE1F,EAAE2F,EAAEF,EAAErG,iBAAiBS,IAAIb,KAAKgK,aAAaS,SAAS3J,EAAEqJ,eAAejF,QAAQH,SAASvD,EAAE,MAAM4B,EAAEpD,KAAKoI,YAAYpI,KAAK0I,UAAU3H,GAAGoJ,cAAc,KAAKnK,KAAKgK,aAAa/I,SAASO,IAAIA,EAAEyI,YAAY3F,YAAY,MAAMlB,GAAG5B,EAAEkJ,KAAKtH,KAAKpD,KAAKuJ,kBAAkB,gBAAgBvJ,KAAK0E,OAAO1E,KAAKoI,YAAY,YAAY,KAAK,kBAAkBpI,KAAKsI,eAAeoB,YAAY,MAAMlI,EAAm/B,SAAWA,EAAEX,EAAEE,GAAG,GAAG,IAAIS,EAAEU,OAAO,CAAC,MAAMpC,EAAE,IAAI,IAAE,CAAC6K,MAAMnJ,EAAEpB,iBAAiBS,IAAI,IAAIG,EAAE,GAAGH,EAAE+J,aAAa,IAAG,iBAAE/J,GAAGG,GAAE,qBAAElB,EAAE,SAAS,CAAC,MAAM0B,GAAE,QAAE1B,EAAE,WAASiB,GAAE,qBAAES,EAAE,KAAKR,GAAE,QAAED,EAAEF,QAAQ,GAAGA,EAAEgK,cAAc7J,GAAE,qBAAElB,EAAE,IAAI,eAAe,IAAG,kBAAEA,EAAE,WAAWiB,EAAE,CAAC,MAAMS,GAAE,QAAE1B,EAAE,WAASiB,GAAE,qBAAES,EAAE,KAAKR,GAAE,QAAED,EAAEF,QAAQG,EAAElB,EAAE,MAAM,CAAC+I,YAAY,KAAKiC,aAAa,KAAKC,gBAAgB/J,GAAGQ,EAAEH,KAAKG,EAAE,IAAI,MAAM1B,EAAE,IAAI,IAAE,CAAC6K,MAAM,CAACnJ,GAAGpB,iBAAiBS,IAAIuC,EAAE,IAAI,IAAE,CAAC4H,MAAM,CAACxJ,GAAGpB,iBAAiBS,IAAI,IAAI8E,EAAE8B,EAAEE,EAAE,KAAKsD,EAAE,KAAK,GAAGpK,EAAE+J,aAAa,IAAG,iBAAE/J,GAAG,CAAC,GAAG8G,GAAE,qBAAE7H,EAAE,KAAKmL,GAAE,qBAAE7H,EAAE,KAAK6H,GAAE,cAAEA,IAAIA,EAAE,OAAO,KAAKtF,GAAE,qBAAE,CAAC7F,GAAG,UAAU,GAAG2H,GAAE,mBAAE,CAACwD,GAAG,iBAAiB,OAAO,CAAC,MAAMzJ,EAAE,UAAQT,GAAE,QAAEjB,EAAE0B,GAAGR,GAAE,QAAEoC,EAAE5B,GAAG,GAAGmG,GAAE,qBAAE5G,EAAE,KAAKkK,GAAE,qBAAEjK,EAAE,KAAKiK,GAAE,cAAEA,IAAIA,EAAE,OAAO,KAAKtF,GAAE,qBAAE,CAAC5E,GAAG,UAAU,GAAG0G,GAAE,mBAAE,CAACwD,GAAG,iBAAiB,GAAGtD,GAAE,QAAEA,EAAE9G,GAAGoK,GAAE,QAAEA,EAAEpK,QAAQ,GAAGA,EAAEgK,cAAc,CAAC,GAAGlD,GAAE,qBAAE7H,EAAE,IAAI,UAAUmL,GAAE,qBAAE7H,EAAE,IAAI,UAAU6H,GAAE,cAAEA,IAAIA,EAAE,OAAO,KAAKtF,GAAE,oBAAE7F,EAAE,UAAU2H,GAAE,kBAAEwD,EAAE,qBAAqB,CAAC,MAAMzJ,GAAE,kBAAE1B,EAAE,UAAU,GAAG0B,GAAGT,EAAE,CAAC,MAAMS,EAAE,UAAQT,GAAE,QAAEjB,EAAE0B,GAAGR,GAAE,QAAEoC,EAAE5B,GAAG,GAAGmG,GAAE,qBAAE5G,EAAE,KAAKkK,GAAE,qBAAEjK,EAAE,KAAKiK,GAAE,cAAEA,IAAIA,EAAE,OAAO,KAAKtF,GAAE,qBAAE,CAAC5E,GAAG,UAAU,GAAG0G,GAAE,mBAAE,CAACwD,GAAG,iBAAiB,GAAGtD,GAAE,QAAEA,EAAE9G,GAAGoK,GAAE,QAAEA,EAAEpK,OAAO,CAAC,GAAG8G,EAAE7H,EAAEmL,GAAE,cAAE7H,IAAI6H,EAAE,OAAO,KAAKtF,EAAEnE,EAAEiG,GAAE,gBAAEwD,EAAE,kBAAkB,MAAM,CAACpC,YAAY,CAAC9D,SAASkG,EAAEC,KAAKzD,EAAE0D,UAAUxF,GAAGmF,aAAaG,EAAEF,gBAAgBpD,GAApqEyD,CAAEpL,KAAK0I,UAAUhF,KAAKlC,GAAGA,EAAEgJ,QAAQxK,KAAK4F,KAAKxF,iBAAiBJ,KAAK4I,2BAA2B,IAAIpH,EAAE,OAAO,MAAMqH,YAAYhI,EAAEiK,aAAa/J,EAAEgK,gBAAgBjK,GAAGU,EAAExB,KAAKuB,KAAK,cAAcV,GAAG,MAAMf,EAAEe,EAAunE,SAAWW,EAAEX,EAAEE,GAAG,IAAIF,IAAIW,EAAE,OAAO,KAAK,MAAMV,EAAE,CAACoK,KAAK,KAAKC,UAAU,OAAOD,KAAKpL,EAAEqL,UAAUnK,GAAGH,EAAE,OAAOE,GAAG,IAAI,SAASD,EAAEoK,MAAK,QAAE1J,EAAE1B,EAAE,iBAAiB,MAAM,IAAI,WAAWgB,EAAEoK,MAAK,QAAE1J,EAAE1B,EAAE,iBAAiB,MAAM,QAAQ,CAAC,MAAMe,GAAE,QAAEf,EAAE,gBAAgBiB,GAAGD,EAAEoK,MAAK,QAAE1J,EAAEX,EAAEE,GAAG,OAAO,MAAM0F,EAAE,SAASjF,GAAG,OAAOA,GAAG,IAAI,SAAS,MAAM,SAAS,IAAI,WAAW,MAAM,WAAW,IAAI,gBAAgB,MAAM,SAAS,IAAI,cAAc,MAAM,OAAO,IAAI,eAAe,MAAM,QAAQ,IAAI,eAAe,MAAM,QAAQ,IAAI,iBAAiB,MAAM,UAAU,IAAI,gBAAgB,MAAM,SAAS,IAAI,oBAAoB,MAAM,aAAa,IAAI,QAAQ,MAAM,WAAW,IAAI,OAAO,IAAI,WAAW,MAAM,SAAS,IAAI,qBAAqB,MAAM,cAAc,IAAI,qBAAqB,MAAM,cAAc,IAAI,oBAAoB,MAAM,aAAa,QAAQ,OAAO,MAAniB,CAA0iBT,GAAG,GAAG0F,EAAE,OAAOA,GAAG,IAAI,SAAS3F,EAAEqK,WAAU,QAAE3J,EAAER,EAAE,UAAU,MAAM,IAAI,WAAWF,EAAEqK,WAAU,QAAE3J,EAAER,EAAE,UAAU,MAAM,QAAQ,CAAC,MAAMH,GAAE,QAAEG,EAAE,SAASyF,GAAG3F,EAAEqK,WAAU,QAAE3J,EAAEX,EAAE4F,GAAG,YAAY3F,EAAEqK,UAAU,GAAG,OAAOrK,EAAhoGuK,CAAErL,KAAKgJ,SAASnI,EAAEb,KAAKsL,MAAM,KAAK,GAAGtL,KAAKuB,KAAK,mBAAmBzB,IAAIiB,IAAID,EAAE,OAAO,MAAMyK,UAAUvK,EAAEwK,UAAU/E,EAAEgF,UAAUrI,GAAGpD,KAAKsK,QAAQ3C,EAAE,GAAG5G,GAAG4G,EAAEtG,KAAK,IAAI,IAAE,CAAC0D,SAAShE,EAAEiD,OAAO,IAAI,IAAE,CAAC0H,MAAM1K,EAAE2K,QAAQ,IAAI,IAAE,CAACC,MAAM,SAAS9K,GAAG6G,EAAEtG,KAAK,IAAI,IAAE,CAAC0D,SAASjE,EAAEkD,OAAO,IAAI,IAAE,CAAC0H,MAAMjF,EAAEmF,MAAMxI,OAAOrC,GAAGjB,GAAG6H,EAAEtG,KAAK,IAAI,IAAE,CAAC0D,SAAShE,EAAE8K,SAAS7H,OAAO,IAAI,IAAE,CAAC0H,MAAM,CAAC,IAAI,IAAI,IAAI,GAAGI,KAAK,IAAI,IAAE,CAACzI,KAAK,GAAG0I,OAAO,eAAeC,UAAU,CAAC,EAAE,EAAE,EAAE,IAAIC,SAAS,EAAEC,KAAKpM,EAAEoL,UAAUlL,KAAKsI,eAAe6D,QAAQxE,KAAK,SAAS0C,EAAE7I,EAAEX,EAAEE,EAAED,GAAG,MAAMhB,EAAE,IAAI,IAAE,CAACsM,MAAM,SAASV,MAAM5K,EAAEuL,YAAYhJ,KAAKvC,EAAEwL,YAAYX,QAAQ,CAACtL,KAAK,cAAcuL,MAAM,KAAK5K,EAAE,IAAI,IAAE,CAACoL,MAAM,SAASV,MAAM5K,EAAEuL,YAAYhJ,KAAK,IAAIvC,EAAEwL,YAAYX,QAAQ,CAACtL,KAAK,cAAcuL,MAAM,KAAKnF,EAAE,IAAI,IAAE,CAAC1B,SAASvD,EAAEwC,OAAOlE,IAAI,OAAO,IAAI,IAAE,CAAC8F,KAAK/E,EAAEwD,MAAMtD,EAAEmE,QAAQuB,EAAET,cAAchF,IAAquC,SAASwI,EAAEhI,GAAG,IAAIA,EAAE,OAAM,EAAG,MAAMoJ,aAAa/J,EAAEgK,cAAc9J,EAAEwL,QAAQzL,GAAGU,EAAE,OAAOX,IAAIC,KAAI,iBAAEU,KAAKX,IAAIE,GAA+gC,OAAE,EAAC,WAAKmH,EAAE5F,UAAU,cAAS,IAAQ,OAAE,EAAC,QAAE,CAACO,OAAM,KAAMqF,EAAE5F,UAAU,WAAW,OAAM,OAAE,EAAC,QAAE,CAACjC,KAAKmM,UAAUtE,EAAE5F,UAAU,iCAA4B,IAAQ,OAAE,EAAC,QAAE,CAACM,UAAS,KAAMsF,EAAE5F,UAAU,mBAAc,IAAQ,OAAE,EAAC,QAAE,CAACM,UAAS,KAAMsF,EAAE5F,UAAU,wBAAmB,IAAQ,OAAE,EAAC,WAAK4F,EAAE5F,UAAU,gBAAW,IAAQ,OAAE,EAAC,WAAK4F,EAAE5F,UAAU,eAAU,IAAQ,OAAE,EAAC,WAAK4F,EAAE5F,UAAU,YAAO,IAAQ,OAAE,EAAC,QAAE,CAAC6E,eAAc,KAAMe,EAAE5F,UAAU,YAAO,GAAQ4F,GAAE,OAAE,EAAC,OAAE,yDAAyDA,GAAW,QAAFA,E,0BCAnhR,MAAM+C,EAAE,CAACqB,YAAY,EAAED,YAAY,CAAC,IAAI,IAAI,EAAE,IAAIZ,UAAU,EAAED,UAAU,CAAC,IAAI,IAAI,EAAE,GAAGD,UAAU,CAAC,IAAI,IAAI,EAAE,KAAK9D,EAAE,cAAY,6DAA6D,IAAIE,EAAE,cAAc,IAAE,YAAYnG,GAAGzB,MAAMyB,GAAGxB,KAAKyM,kBAAkB,KAAKzM,KAAKqI,SAAS,IAAI,IAAErI,KAAK4I,0BAA0B,IAAI5I,KAAK6I,YAAY,KAAK7I,KAAK8I,iBAAiB,KAAK9I,KAAKsK,QAAQW,EAAEjL,KAAK0M,KAAK,KAAK,aAAa1M,KAAKqI,SAAStC,IAAI,EAAC,UAAE/F,KAAK,CAAC,OAAO,UAAU,8BAA6B,CAAEwB,EAAEX,EAAEE,KAAKf,KAAK0M,OAAO1M,KAAK0M,KAAK3L,GAAGS,QAAQ,UAAUxB,KAAKqI,WAAWrI,KAAKqI,SAASc,UAAUnJ,KAAKqI,SAAS,MAAM,YAAY,IAAI7G,EAAE,OAAOxB,KAAK2M,WAAW,WDA0vM,SAAWnL,GAAG,OAAO,MAAMA,KAAKgI,EAAEhI,KAAI,WCArxM,CAAE,OAAOA,EAAExB,KAAK4F,WAAM,EAAOpE,EAAEpB,kBAAkBJ,KAAK0M,MAAM1M,KAAK0M,KAAK7D,YAAY7I,KAAK0M,KAAKE,OAAO,YAAY,WAAW,QAAQ,WAAW,WAAW,OAAO5M,KAAK6M,cAAc7M,KAAK8M,aAAa,SAAStL,QAAG,IAASA,EAAExB,KAAK+M,UAAU,OAAO/M,KAAK6M,cAAcrL,IAAIxB,KAAKgN,eAAe,QAAQ,kBAAkB,OAAO,KAAE,gBAAgBxL,QAAG,IAASA,EAAExB,KAAK+M,UAAU,cAAc/M,KAAKiN,eAAezL,IAAIxB,KAAKgN,eAAe,eAAe,QAAQ,OAAOhN,KAAKkN,aAAa,QAAQlN,KAAKmN,aAAa,kBAAiB,uBAAEnN,KAAKoN,SAAS,mBAAmBpN,KAAKqN,QAAQ,mBAAmB,MAAM,CAACC,gBAAgB,EAAEC,qBAAqB,KAAI,CAAE3E,0BAA0B5I,KAAK4I,0BAA0B0B,QAAQtK,KAAKsK,QAAQgB,KAAKtL,KAAKsL,QAAQ,sBAAsB7D,EAAExC,MAAM,6DAA6D,YAAYzD,GAAGiG,EAAExC,SAASzD,GAAG,cAAcA,GAAG,OAAO,IAAIxB,KAAKwN,YAAYC,QAAQjM,GAAGA,GAAG,IAAIxB,KAAKwN,YAAYC,QAAQzN,KAAK8M,aAAa9M,KAAK8M,YAAY9M,KAAKwN,YAAY,GAAG,eAAehM,EAAE,IAAI,MAAMX,EAAEW,EAAEiC,QAAQjC,IAAI,IAAI,aAAUA,KAAK,OAAO,IAAIX,EAAEqB,OAAO,aAAUrB,KAAI,OAAE,EAAC,QAAE,MAAI8G,EAAErF,UAAU,mBAAc,IAAQ,OAAE,EAAC,QAAE,CAACjC,KAAKmM,UAAU7E,EAAErF,UAAU,iCAA4B,IAAQ,OAAE,EAAC,QAAE,CAACM,UAAS,EAAG8K,QAAQ,sBAAsB/F,EAAErF,UAAU,mBAAc,IAAQ,OAAE,EAAC,QAAE,CAACM,UAAS,EAAG8K,QAAQ,2BAA2B/F,EAAErF,UAAU,wBAAmB,IAAQ,OAAE,EAAC,WAAKqF,EAAErF,UAAU,eAAU,IAAQ,OAAE,EAAC,QAAE,CAAC+E,UAAU,CAAC,aAAa,mBAAmB,cAAc,yBAAyBzE,UAAS,KAAM+E,EAAErF,UAAU,QAAQ,OAAM,OAAE,EAAC,QAAE,CAAC6E,eAAc,EAAGvE,UAAS,KAAM+E,EAAErF,UAAU,YAAO,IAAQ,OAAE,EAAC,QAAE,CAACjC,KAAKsN,OAAOtG,UAAU,CAAC,cAAc,kBAAkBM,EAAErF,UAAU,OAAO,OAAM,OAAE,EAAC,QAAE,CAACjC,KAAK,CAACsN,WAAWhG,EAAErF,UAAU,cAAc,MAAMqF,GAAE,OAAE,EAAC,OAAE,8DAA8DA,GAAW,QAAFA,ECAl9D,EAAE,6CAAsGiG,EAAE,mDAAwZ,IAAIC,EAAE,cAAc,UAAE,YAAYrM,EAAEV,GAAGf,MAAMyB,EAAEV,GAAGd,KAAK4M,OAAO,KAAK5M,KAAK8N,UAA/2B,yBAA23B9N,KAAK+N,WAAM,EAAO/N,KAAKgJ,SAAS,KAAKhJ,KAAKgO,cAAc,KAAKhO,KAAKsL,KAAK,KAAKtL,KAAKwN,YAAY,KAAKxN,KAAK4F,KAAK,KAAK5F,KAAKiO,UAAU,IAAI,EAAE,SAAS,MAAMvD,GAAGlJ,EAAEyM,UAAUnN,EAAEJ,QAAQG,GAAGb,MAAM4M,OAAO7L,EAAEmN,YAAYpO,EAAEgJ,iBAAiB9H,EAAEgG,MAAM5D,EAAEkI,KAAK3F,EAAE6H,YAAY/F,GAAG3G,EAAEqN,EAAE,aAAa/K,EAAEgL,EAAE,UAAUhL,EAAEyK,EAAE,cAAczK,GAAG,aAAaA,GAAG4F,SAASqF,EAAEL,cAAcM,GAAGtO,KAAKuO,EAAExN,GAAGqN,GAAE,OAAE,UAAU,CAACI,IAAI,OAAOC,MAAvnC,mCAAgoC,OAAE,IAAI,CAACA,MAApmC,uCAA6mCJ,EAAEK,OAAO,KAAKC,EAAE7O,EAAE,MAAK,OAAE,UAAU,CAAC0O,IAAI,cAAcC,MAA3nC,2CAAooC,OAAE,IAAI,KAAKJ,EAAEO,cAAcC,EAAE,CAACrN,EAAEV,EAAED,IAAIC,GAAE,OAAE,MAAM,CAAC0N,IAAI,GAAG3N,YAAY4N,MAAM,IAAG,OAAE,OAAO,CAACA,MAAMb,GAAGpM,IAAG,OAAE,OAAO,CAACiN,MAA//B,oDAAwgC3N,KAAI,OAAE,MAAM,CAAC0N,IAAI,GAAG3N,aAAa4N,MAAMzO,KAAK8O,QAAQ,EAA1qC,wDAA+qC,gBAAgB,SAAQ,OAAE,OAAO,CAACL,MAAMb,GAAGpM,IAAIgI,EAAEqE,GAAE,OAAE,UAAU,CAACW,IAAI,cAAcC,MAA11C,yCAAm2CI,EAAER,EAAEnD,KAAKlK,EAAEkK,KAAK,QAAQ2D,EAAER,EAAElD,UAAUnK,EAAEmK,UAAU,cAAc,KAAK4D,EAAE,GAAGvN,WAAWwN,GAAE,OAAE,UAAU,CAACR,IAAI,QAAQC,MAAhrC,oCAAyrC,OAAE,QAAQ,CAACA,MAAhqC,wCAAwqCQ,IAAIF,GAAGV,EAAE/C,OAAM,OAAE,MAAM,CAACmD,MAA/lC,mDAAwmC,OAAE,SAAS,CAACA,MAA3qC,qDAAmrC/D,GAAGqE,EAAEG,SAASlP,KAAKmP,YAAY5O,KAAKP,KAAK6C,MAAM8C,GAAG8B,EAAE/D,KAAKlC,IAAI,IAAIV,EAAE,OAAO,OAAE,SAAS,CAAC0N,IAAIhN,EAAEqB,MAAMrB,IAAG,QAAEA,GAAG8M,EAAEc,QAAQ5N,GAAG,OAAOV,EAAEwN,EAAEe,MAAM7N,SAAI,EAAOV,EAAEwO,yBAAyBC,EAAE1B,GAAE,OAAE,MAAM,CAACW,IAAI,WAAWC,MAAl/C,sCAA2/CO,GAAG,KAAKzI,GAAGzG,GAAGiB,IAAI8M,EAAE,MAAK,OAAE,MAAM,CAACY,MAA9zC,sCAAu0C,OAAE,SAAS,CAACe,SAASrB,EAAEM,MAAMzO,KAAK8O,QAAloE,qCAA+zB,yCAA+0CX,GAAvmE,yBAA6mE5N,KAAKP,KAAKyP,QAAQzP,KAAK0P,gBAAgBC,MAAMtB,EAAEuB,eAAevP,KAAK,SAAS,aAAagO,EAAEuB,gBAAgBvB,EAAEuB,iBAAiBvF,EAAExJ,GAAE,OAAE,MAAM,CAAC4N,MAA/nE,uCAAwoEE,EAAEJ,EAAEgB,EAAE/F,EAAEjD,GAAG,KAAK,OAAO,OAAE,MAAM,CAACkI,MAAMzO,KAAK8O,QAAvvE,2BAA6B,cAAgB,uBAA0tEzE,GAAG,mBAAkB,uBAAErK,KAAKiO,UAAUb,SAAS,YAAY5L,GAAG,MAAMV,EAAEU,EAAEqO,OAAOhP,EAAEC,EAAEgP,QAAQhP,EAAEiP,eAAelP,IAAIb,KAAKiO,UAAU3C,KAAKzK,EAAEgC,UAAS,OAAE,EAAC,OAAE,qBAAoB,UAAKgL,EAAEvL,UAAU,cAAS,IAAQ,OAAE,EAAC,WAAKuL,EAAEvL,UAAU,iBAAY,IAAQ,OAAE,EAAC,QAAE,CAACoL,QAAQ,CAACsC,OAAO,uBAAuBC,aAAY,MAAOpC,EAAEvL,UAAU,aAAQ,IAAQ,OAAE,EAAC,WAAI,UAAI,OAAE,yDAAyDuL,EAAEvL,UAAU,gBAAW,IAAQ,OAAE,EAAC,WAAI,UAAI,OAAE,wBAAwBuL,EAAEvL,UAAU,qBAAgB,IAAQ,OAAE,EAAC,OAAE,mBAAmBuL,EAAEvL,UAAU,YAAO,IAAQ,OAAE,EAAC,OAAE,0BAA0BuL,EAAEvL,UAAU,mBAAc,IAAQ,OAAE,EAAC,OAAE,mBAAmBuL,EAAEvL,UAAU,YAAO,IAAQ,OAAE,EAAC,QAAE,CAACjC,KAAK,KAAI,OAAE,CAAC,kBAAkB,wBAAwB,iBAAiB,gCAAgCwN,EAAEvL,UAAU,iBAAY,IAAQ,OAAE,EAAC,OAAE,sBAAqB,UAAKuL,EAAEvL,UAAU,eAAU,IAAQ,OAAE,EAAC,UAAKuL,EAAEvL,UAAU,kBAAkB,OAAM,OAAE,EAAC,UAAKuL,EAAEvL,UAAU,cAAc,MAAMuL,GAAE,OAAE,EAAC,OAAE,mCAAmCA,GAAW,QAAFA,G,+MCAtkH,IAAIpH,EAAE,cAAc,UAAE,YAAY5F,GAAGd,MAAMc,GAAGb,KAAK0M,KAAK,KAAK1M,KAAKkQ,aAAa,IAAI,IAAElQ,KAAKmQ,6BAA4B,EAAGnQ,KAAKoQ,yBAAyB,KAAKvP,GAAG,MAAMA,EAAEH,UAAUV,KAAKU,QAAQG,EAAEH,SAAS,aAAaV,KAAKkQ,aAAanK,KAAI,UAAE/F,KAAK,CAAC,aAAa,gBAAe,KAAMA,KAAK4F,MAAM5F,KAAK4F,KAAKyK,QAAQrQ,KAAKkO,YAAYlO,KAAKmQ,8BAA8BnQ,KAAKsQ,sBAAsBtQ,KAAKmQ,6BAA4B,GAAInQ,KAAKmQ,6BAA4B,MAAO,UAAUnQ,KAAKmN,aAAanN,KAAK4F,KAAK,KAAK5F,KAAKkQ,aAAa/G,UAAUnJ,KAAKkQ,aAAa,KAAK,kBAAkB,OAAOlQ,KAAK4F,MAAM5F,KAAK4F,KAAKvF,OAAOL,KAAKyM,kBAAkB,WAAW,OAAOzM,KAAKyB,KAAK,QAAQ,SAASZ,GAAG,GAAGA,IAAIb,KAAK4F,KAAK,OAAO5F,KAAKmN,aAAanN,KAAKuB,KAAK,OAAOV,GAAG,MAAMG,EAAE,QAAQhB,KAAKkQ,aAAanO,OAAOf,GAAGH,GAAGb,KAAKkQ,aAAanK,IAAIlF,EAAE0P,MAAM1G,GAAG,UAAUhJ,IAAI,GAAGb,KAAK0M,KAAK,IAAI,MAAM1L,KAAKH,EAAE2P,QAAQ,GAAGxQ,KAAK0M,OAAO1L,EAAE,CAACA,EAAEyP,WAAWzP,EAAEmI,UAAUnJ,KAAKuB,KAAK,OAAO,MAAM,UAAUP,GAAG,YAAYH,GAAGb,KAAKuB,KAAK,UAAUV,GAAGb,KAAK0M,OAAO1M,KAAK0M,KAAKhM,QAAQG,IAAIA,GAAGb,KAAKoQ,2BAA2BpQ,KAAKoQ,yBAAyBM,QAAQ1Q,KAAKoQ,yBAAyB,MAAM,aAAa,OAAO,MAAMpQ,KAAKoQ,0BAA0B,MAAMpQ,KAAK0M,MAAM1M,KAAK0M,KAAKE,OAAO,iBAAiB,OAAO5M,KAAK4F,OAAO5F,KAAK4F,KAAKyK,QAAQrQ,KAAKkO,YAAY,mBAAmB,QAAQlO,KAAKoQ,yBAAyB,mBAAmB,GAAGpQ,KAAKmN,cAAcnN,KAAKkO,YAAY,OAAO,YAAE,IAAI,IAAE,cAAc,uCAAuC,MAAMrN,EAAEb,KAAK2Q,mBAAmB3P,EAAE,KAAK,MAAMA,GAAE,QAAEH,EAAE0M,sBAAsB,MAAM,CAAC7M,QAAQV,KAAKU,WAAWM,IAAIQ,EAAE,IAAIoP,gBAAgB9Q,EAAE0B,EAAEqP,OAAO7Q,KAAKoQ,yBAAyB5O,EAAE,MAAMmE,EAAE,KAAKnE,IAAIxB,KAAKoQ,2BAA2BpQ,KAAKoQ,yBAAyB,OAAO,IAAI,MAAM5O,QAAQxB,KAAK4F,KAAKsH,WAAWrM,EAAEyM,gBAAgBtM,EAAE,CAAC6P,OAAO/Q,IAAIE,KAAKuB,KAAK,OAAOC,GAAGmE,IAAI,MAAM9E,GAAG,MAAM8E,IAAI9E,GAAG,aAAab,KAAKoQ,0BAA0BpQ,KAAKoQ,yBAAyBM,QAAQ1Q,KAAKoQ,yBAAyB,KAAK,MAAMvP,EAAEb,KAAK0M,KAAK7L,IAAIb,KAAK4F,MAAM5F,KAAK4F,KAAK2K,OAAOvQ,KAAK4F,KAAK2K,MAAMxO,OAAOlB,GAAGA,EAAE4P,WAAW5P,EAAEsI,UAAUnJ,KAAKuB,KAAK,OAAO,UAAS,OAAE,EAAC,QAAE,CAAC4F,eAAc,KAAMV,EAAEnE,UAAU,YAAO,IAAQ,OAAE,EAAC,QAAE,CAAC+E,UAAU,CAAC,gBAAgBZ,EAAEnE,UAAU,cAAc,OAAM,OAAE,EAAC,QAAE,CAACO,MAAM,QAAQ4D,EAAEnE,UAAU,OAAO,OAAM,OAAE,EAAC,QAAE,CAACjC,KAAKyQ,QAAQjO,OAAM,KAAM4D,EAAEnE,UAAU,UAAU,OAAM,OAAE,EAAC,QAAE,CAAC+E,UAAU,CAAC,2BAA2B,kBAAkBZ,EAAEnE,UAAU,SAAS,OAAM,OAAE,EAAC,QAAE,CAAC+E,UAAU,CAAC,OAAO,aAAa,kBAAkBZ,EAAEnE,UAAU,aAAa,OAAM,OAAE,EAAC,WAAKmE,EAAEnE,UAAU,gCAA2B,IAAQ,OAAE,EAAC,QAAE,CAACM,UAAS,EAAGyE,UAAU,CAAC,+BAA+BZ,EAAEnE,UAAU,eAAe,MAAMmE,GAAE,OAAE,EAAC,OAAE,kDAAkDA","file":"chunks/5550.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as e}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{getProperties as t}from\"../core/accessorSupport/utils.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../core/accessorSupport/decorators/writer.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{resolve as l}from\"../core/promiseUtils.js\";import{loadAll as a}from\"../core/loadAll.js\";import{getLayerJSON as p}from\"../webdoc/support/writeUtils.js\";import n from\"./Layer.js\";import{LayersMixin as y}from\"../support/LayersMixin.js\";import{TablesMixin as c}from\"../support/TablesMixin.js\";import{MultiOriginJSONMixin as h}from\"../core/MultiOriginJSONSupport.js\";import{OperationalLayer as d}from\"./mixins/OperationalLayer.js\";import{BlendLayer as m}from\"./mixins/BlendLayer.js\";import{PortalLayer as u}from\"./mixins/PortalLayer.js\";let b=class extends(m(d(u(c(y(h(n))))))){constructor(i){super(i),this._visibilityHandles={},this.fullExtent=void 0,this.operationalLayerType=\"GroupLayer\",this.spatialReference=void 0,this.type=\"group\",this._visibilityWatcher=this._visibilityWatcher.bind(this)}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch(\"visible\",this._visibleWatcher.bind(this),!0)}_writeLayers(i,t,s,r){const o=[];if(!i)return o;i.forEach((i=>{const t=p(i,r.webmap?r.webmap.getLayerJSONFromResourceInfo(i):null,r);e(t)&&t.layerType&&o.push(t)})),t.layers=o}set portalItem(i){this._set(\"portalItem\",i)}set visibilityMode(i){const e=this._get(\"visibilityMode\")!==i;this._set(\"visibilityMode\",i),e&&this._enforceVisibility(i,this.visible)}load(i){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Service\",\"Feature Collection\",\"Scene Service\"]},i)),l(this)}loadAll(){return a(this,(i=>{i(this.layers)}))}layerAdded(i){i.visible&&\"exclusive\"===this.visibilityMode?this._turnOffOtherLayers(i):\"inherited\"===this.visibilityMode&&(i.visible=this.visible),this._visibilityHandles[i.uid]=i.watch(\"visible\",this._visibilityWatcher,!0)}layerRemoved(i){const e=this._visibilityHandles[i.uid];e&&(e.remove(),delete this._visibilityHandles[i.uid]),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(i){this.layers.forEach((e=>{e!==i&&(e.visible=!1)}))}_enforceVisibility(i,e){if(!t(this).initialized)return;const s=this.layers;let r=s.find((i=>i.visible));switch(i){case\"exclusive\":s.length&&!r&&(r=s.getItemAt(0),r.visible=!0),this._turnOffOtherLayers(r);break;case\"inherited\":s.forEach((i=>{i.visible=e}))}}_visibleWatcher(i){\"inherited\"===this.visibilityMode&&this.layers.forEach((e=>{e.visible=i}))}_visibilityWatcher(i,e,t,s){const r=s;switch(this.visibilityMode){case\"exclusive\":i?this._turnOffOtherLayers(r):this._isAnyLayerVisible()||(r.visible=!0);break;case\"inherited\":r.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some((i=>i.visible))}};i([s()],b.prototype,\"fullExtent\",void 0),i([s({json:{read:!1,write:{ignoreOrigin:!0}}})],b.prototype,\"layers\",void 0),i([o(\"layers\")],b.prototype,\"_writeLayers\",null),i([s({type:[\"GroupLayer\"]})],b.prototype,\"operationalLayerType\",void 0),i([s({json:{origins:{\"web-document\":{read:!1,write:!1}}}})],b.prototype,\"portalItem\",null),i([s()],b.prototype,\"spatialReference\",void 0),i([s({json:{read:!1},readOnly:!0,value:\"group\"})],b.prototype,\"type\",void 0),i([s({type:[\"independent\",\"inherited\",\"exclusive\"],value:\"independent\",json:{write:!0,origins:{\"web-map\":{read:!1,write:!1}}}})],b.prototype,\"visibilityMode\",null),b=i([r(\"esri.layers.GroupLayer\")],b);var v=b;export default v;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t,e){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?function(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}(t.stops):e}function n(n){const r=n&&n.renderer,s=\"touch\"===(n&&n.event&&n.event.pointerType)?9:6;if(!r)return s;const o=\"visualVariables\"in r?function(t,n){if(!n)return t;const r=n.filter((t=>\"size\"===t.type)).map((n=>{const{maxSize:r,minSize:s}=n;return(e(r,t)+e(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let t=0;t<o;t++)s+=r[t];const f=Math.floor(s/o);return Math.max(f,t)}(s,r.visualVariables):s;if(\"simple\"===r.type)return t(o,r.symbol);if(\"unique-value\"===r.type){let e=o;return r.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===r.type){let e=o;return r.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return r.type,o}export{n as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isSome as i,isNone as o}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as g,project as y,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),i=e?e.offset:0;return new b({mode:t,offset:i})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this._get(\"graphic\");if(!1===t.visible)return null;const s=this._get(\"focusedSymbol\"),r=i(s)?s:t.symbol,l=t.geometry;return o(l)?null:\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,l,r):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;let l=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?1:null;if(o(l)||!l.originalPoint.equals(s)){const t=s,i=e.spatialReference;if(g(t.spatialReference,i)){const e=y(t,i);l={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=l}}if(i(l)){const i=h(t,G),o=e.toScreen(l.mapPoint),s=l.radiusPx,a=o.x+c(r.xoffset),n=o.y-c(r.yoffset);return _(i,[a,n])<s*s?1:null}return null}_intersectDistance3D(e,t,i){const o=e.toMap(t,{include:[i]});return o&&d(o,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0,dependsOn:[\"graphic\"]})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import s from\"../../geometry/SpatialReference.js\";import i from\"../../geometry/Point.js\";import o from\"../../geometry/Polygon.js\";import a from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import{onLocaleChange as n}from\"../../intl/locale.js\";import l from\"../../symbols/SimpleLineSymbol.js\";import m from\"../../symbols/Font.js\";import{fetchMessageBundle as c}from\"../../intl/messages.js\";import\"../../intl.js\";import h from\"../../symbols/SimpleFillSymbol.js\";import p from\"../../symbols/SimpleMarkerSymbol.js\";import u from\"../../symbols/TextSymbol.js\";import\"../../chunks/symbols.js\";import d from\"../../Graphic.js\";import y from\"../../core/Handles.js\";import{init as f}from\"../../core/watchUtils.js\";import{convertUnit as _}from\"../../core/unitUtils.js\";import{isLoaded as v,load as w,project as g,isSupported as b}from\"../../geometry/projection.js\";import{formatDecimal as j,formatImperialArea as L,formatMetricArea as S,formatImperialLength as G,formatMetricLength as k}from\"../../core/unitFormatUtils.js\";import{isSupported as q,geodesicDensify as A,geodesicLengths as x,geodesicAreas as W}from\"../../geometry/support/geodesicUtils.js\";import{geodesicDensify as R,planarLength as D,simplify as M,geodesicLength as C,geodesicArea as T,planarArea as I}from\"../../geometry/geometryEngine.js\";import U from\"../../layers/GraphicsLayer.js\";import E from\"../../layers/GroupLayer.js\";import{createManipulatorDragEventPipeline as z,screenToMap as P,dragGraphic as F}from\"../../views/interactive/dragEventPipeline.js\";import{InteractiveToolBase as O}from\"../../views/interactive/InteractiveToolBase.js\";import B from\"../../views/draw/Draw.js\";import{GraphicManipulator as H}from\"../../views/interactive/GraphicManipulator.js\";let N=class extends O{constructor(){super(...arguments),this._drawActive=!1,this._handles=new y,this._graphicsLayer=new U,this._manipulatorLayer=new U,this._groupLayer=new E({layers:[this._graphicsLayer,this._manipulatorLayer],listMode:\"hide\",visible:!1}),this._vertices=[],this.deferCreation=!0,this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null}initialize(){c(\"esri/core/t9n/Units\").then((e=>{this.messages=e})),this._handles.add(n((async()=>{this.messages=await c(\"esri/core/t9n/Units\")})))}destroy(){this.detach(),this._draw&&(this._draw.destroy(),this._draw=null),this._handles&&(this._handles.destroy(),this._handles=null),this._graphicsLayer&&(this._graphicsLayer.destroy(),this._graphicsLayer=null),this._manipulatorLayer&&(this._manipulatorLayer.destroy(),this._manipulatorLayer=null)}set editable(e){this._set(\"editable\",e),e||this._draw.reset()}activate(){this._drawActive||0!==this._vertices.length||this._startSketch()}onAttach(){const e=this.view;this._draw=new B({view:e}),e.map.add(this._groupLayer),e.focus(),this._handles.add([f(this,[\"unit\",\"geodesicDistanceThreshold\",\"palette\",\"messages\"],(()=>{this._vertices.length>0&&this._updateGraphics()})),f(this,\"view.spatialReference\",(e=>{V(e)&&!v()&&w()}))]),this.create()}onDetach(){const{map:e}=this.view;this._draw.view=null,this._draw.destroy(),this._draw=null,e.remove(this._groupLayer),this._handles.removeAll(),this._graphicsLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set(\"measurement\",null),this._set(\"measurementLabel\",null)}onShow(){this._groupLayer.visible=!0}onHide(){this._groupLayer.visible=!1}reset(){this._vertices=[],this._graphicsLayer.removeAll(),this._set(\"measurement\",null),this._set(\"measurementLabel\",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])}onInputEvent(e){\"pointer-move\"===e.type&&this._updateCursor()}_startSketch(){this._drawActive=!0;const e=this._draw.create(\"polyline\",{mode:\"click\"});e.on([\"vertex-add\",\"vertex-update\",\"vertex-remove\",\"cursor-update\",\"undo\",\"redo\"],(e=>this._updateSketch(e.vertices))),e.on(\"draw-complete\",(()=>this._stopSketch()))}_stopSketch(){if(this._vertices.length<3)return this.reset(),void this._startSketch();this.manipulators.forEach((e=>{e.manipulator.interactive=!0})),this._drawActive=!1,this.complete()}_updateSketch(e){if(V(this.view.spatialReference)&&!v())return;if(e.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._graphicsLayer.removeAll();this.create();const t=this.view.spatialReference;for(;this._vertices.length>e.length;){const{manipulatorId:e}=this._vertices.pop();this.manipulators.remove(e)}for(let r=this._vertices.length;r<e.length;r++){const[s,o]=e[r],a=J(new i({x:s,y:o,spatialReference:t}),this.view,this._manipulatorLayer,this.palette),n=this.manipulators.add(a);z(a,((e,t)=>{t.next(P(this.view)).next(F(e.graphic)).next((()=>{const t=e.graphic.geometry;this._vertices[r].coord=[t.x,t.y],this._updateGraphics()}))})),this._vertices.push({manipulatorId:n,coord:[s,o]})}const r=this._vertices.length-1,s=this._vertices[r],[o,a]=e[r];if(s.coord[0]!==o||s.coord[1]!==a){s.coord=[o,a];const e=new i({x:o,y:a,spatialReference:t});this.manipulators.findById(s.manipulatorId).graphic.geometry=e}const n=this._drawActive?this._vertices[r].manipulatorId:null;this.manipulators.forEach((e=>{e.manipulator.interactive=null==n||e.id!==n})),this._updateGraphics()}_updateCursor(){this.cursor=this._drawActive?\"crosshair\":null}_updateGraphics(){this._graphicsLayer.removeAll();const e=K(this._vertices.map((e=>e.coord)),this.view.spatialReference,this.geodesicDistanceThreshold);if(!e)return;const{measurement:t,fillGeometry:r,outlineGeometry:s}=e;this._set(\"measurement\",t);const i=t?X(this.messages,t,this.unit):null;if(this._set(\"measurementLabel\",i),!r&&!s)return;const{fillColor:o,pathColor:a,pathWidth:n}=this.palette,c=[];r&&c.push(new d({geometry:r,symbol:new h({color:o,outline:new l({width:0})})})),s&&c.push(new d({geometry:s,symbol:new l({color:a,width:n})})),r&&i&&c.push(new d({geometry:r.centroid,symbol:new u({color:[255,255,255,1],font:new m({size:14,family:\"sans-serif\"}),haloColor:[0,0,0,.5],haloSize:2,text:i.area})})),this._graphicsLayer.addMany(c)}};function J(e,t,r,s){const i=new p({style:\"circle\",color:s.handleColor,size:s.handleWidth,outline:{type:\"simple-line\",width:0}}),o=new p({style:\"circle\",color:s.handleColor,size:1.5*s.handleWidth,outline:{type:\"simple-line\",width:0}}),a=new d({geometry:e,symbol:i});return new H({view:t,layer:r,graphic:a,focusedSymbol:o})}function K(e,t,r){if(2===e.length){const i=new a({paths:e,spatialReference:t});let o;if(t.isGeographic)if(q(t))o=A(i,1e5);else{const e=g(i,s.WGS84),r=A(e,1e5);o=g(r,t)}else if(t.isWebMercator)o=R(i,1e5,\"meters\");else{if(D(i,\"meters\")>=r){const e=g(i,s.WGS84),r=A(e,1e5);o=g(r,t)}else o=i}return{measurement:null,fillGeometry:null,outlineGeometry:o}}e.push(e[0]);const i=new a({paths:[e],spatialReference:t}),n=new o({rings:[e],spatialReference:t});let l,m,c=null,h=null;if(t.isGeographic)if(q(t)){if(c=A(i,1e5),h=A(n,1e5),h=M(h),!h)return null;l=x([i],\"meters\")[0],m=W([h],\"square-meters\")[0]}else{const e=s.WGS84,r=g(i,e),o=g(n,e);if(c=A(r,1e5),h=A(o,1e5),h=M(h),!h)return null;l=x([r],\"meters\")[0],m=W([h],\"square-meters\")[0],c=g(c,t),h=g(h,t)}else if(t.isWebMercator){if(c=R(i,1e5,\"meters\"),h=R(n,1e5,\"meters\"),h=M(h),!h)return null;l=C(i,\"meters\"),m=T(h,\"square-meters\")}else{const e=D(i,\"meters\");if(e>=r){const e=s.WGS84,r=g(i,e),o=g(n,e);if(c=A(r,1e5),h=A(o,1e5),h=M(h),!h)return null;l=x([r],\"meters\")[0],m=W([h],\"square-meters\")[0],c=g(c,t),h=g(h,t)}else{if(c=i,h=M(n),!h)return null;l=e,m=I(h,\"square-meters\")}}return{measurement:{geometry:h,area:m,perimeter:l},fillGeometry:h,outlineGeometry:c}}function Q(e){return null!=e&&(!V(e)||b())}function V(e){if(!e)return!1;const{isGeographic:t,isWebMercator:r,isWGS84:s}=e;return t&&!s&&!q(e)||!t&&!r}function X(e,t,r){if(!t||!e)return null;const s={area:null,perimeter:null},{area:i,perimeter:o}=t;switch(r){case\"metric\":s.area=S(e,i,\"square-meters\");break;case\"imperial\":s.area=L(e,i,\"square-meters\");break;default:{const t=_(i,\"square-meters\",r);s.area=j(e,t,r);break}}const a=function(e){switch(e){case\"metric\":return\"metric\";case\"imperial\":return\"imperial\";case\"square-inches\":return\"inches\";case\"square-feet\":return\"feet\";case\"square-yards\":return\"yards\";case\"square-miles\":return\"miles\";case\"square-us-feet\":return\"us-feet\";case\"square-meters\":return\"meters\";case\"square-kilometers\":return\"kilometers\";case\"acres\":return\"imperial\";case\"ares\":case\"hectares\":return\"metric\";case\"square-millimeters\":return\"millimeters\";case\"square-centimeters\":return\"centimeters\";case\"square-decimeters\":return\"decimeters\";default:return null}}(r);if(a)switch(a){case\"metric\":s.perimeter=k(e,o,\"meters\");break;case\"imperial\":s.perimeter=G(e,o,\"meters\");break;default:{const t=_(o,\"meters\",a);s.perimeter=j(e,t,a);break}}else s.perimeter=\"\";return s}e([t()],N.prototype,\"cursor\",void 0),e([t({value:!0})],N.prototype,\"editable\",null),e([t({type:Number})],N.prototype,\"geodesicDistanceThreshold\",void 0),e([t({readOnly:!0})],N.prototype,\"measurement\",void 0),e([t({readOnly:!0})],N.prototype,\"measurementLabel\",void 0),e([t()],N.prototype,\"messages\",void 0),e([t()],N.prototype,\"palette\",void 0),e([t()],N.prototype,\"unit\",void 0),e([t({constructOnly:!0})],N.prototype,\"view\",void 0),N=e([r(\"esri.widgets.AreaMeasurement2D.AreaMeasurement2DTool\")],N);var Y=N;export default Y;export{K as createAreaMeasurementInfo2D,X as createAreaMeasurementLabel,Q as isSupported};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{ignoreAbortErrors as s}from\"../../core/promiseUtils.js\";import i from\"../../core/Handles.js\";import{init as n}from\"../../core/watchUtils.js\";import{measurementAreaUnits as a}from\"../../core/unitUtils.js\";import l,{isSupported as p}from\"./AreaMeasurement2DTool.js\";import{defaultUnitPropertyMetadata as d}from\"../support/commonProperties.js\";import{InteractiveToolViewModel as u}from\"../support/InteractiveToolViewModel.js\";const h={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:2,pathColor:[255,128,0,1],fillColor:[255,128,0,.3]},m=t.getLogger(\"esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel\");let c=class extends u{constructor(e){super(e),this.supportedViewType=\"2d\",this._handles=new i,this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null,this.palette=h,this.tool=null}initialize(){this._handles.add([n(this,[\"unit\",\"palette\",\"geodesicDistanceThreshold\"],((e,t,r)=>{this.tool&&(this.tool[r]=e)}))])}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}get state(){var e;return this.isDisabled?\"disabled\":p(null==(e=this.view)?void 0:e.spatialReference)?this.tool&&this.tool.measurement?this.tool.active?\"measuring\":\"measured\":\"ready\":\"disabled\"}get unit(){return this._validateUnit(this.defaultUnit)}set unit(e){void 0!==e?this._override(\"unit\",this._validateUnit(e)):this._clearOverride(\"unit\")}get unitOptions(){return a}set unitOptions(e){void 0!==e?this._override(\"unitOptions\",this._validateUnits(e)):this._clearOverride(\"unitOptions\")}start(){return this.createTool()}clear(){this.removeTool()}newMeasurement(){s(this.start())}clearMeasurement(){this.clear()}createToolParams(){return{toolConstructor:l,constructorArguments:()=>({geodesicDistanceThreshold:this.geodesicDistanceThreshold,palette:this.palette,unit:this.unit})}}logUnsupportedError(){m.error(\"AreaMeasurement2D widget is not implemented for SceneView\")}logError(...e){m.error(...e)}_validateUnit(e){return-1!==this.unitOptions.indexOf(e)?e:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]}_validateUnits(e=[]){const t=e.filter((e=>-1!==a.indexOf(e)));return 0===t.length?a.slice():t}};e([r(d)],c.prototype,\"defaultUnit\",void 0),e([r({type:Number})],c.prototype,\"geodesicDistanceThreshold\",void 0),e([r({readOnly:!0,aliasOf:\"tool.measurement\"})],c.prototype,\"measurement\",void 0),e([r({readOnly:!0,aliasOf:\"tool.measurementLabel\"})],c.prototype,\"measurementLabel\",void 0),e([r()],c.prototype,\"palette\",void 0),e([r({dependsOn:[\"isDisabled\",\"tool.measurement\",\"tool.active\",\"view.spatialReference\"],readOnly:!0})],c.prototype,\"state\",null),e([r({constructOnly:!0,readOnly:!0})],c.prototype,\"tool\",void 0),e([r({type:String,dependsOn:[\"unitOptions\",\"defaultUnit\"]})],c.prototype,\"unit\",null),e([r({type:[String]})],c.prototype,\"unitOptions\",null),c=e([o(\"esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel\")],c);var f=c;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{aliasOf as t}from\"../core/accessorSupport/decorators/aliasOf.js\";import{subclass as r}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{ignoreAbortErrors as i}from\"../core/promiseUtils.js\";import{isMeasurementSystem as a}from\"../core/unitUtils.js\";import\"./support/widgetUtils.js\";import{accessibleHandler as o}from\"./support/decorators/accessibleHandler.js\";import{messageBundle as n}from\"./support/decorators/messageBundle.js\";import{renderable as l}from\"./support/decorators/renderable.js\";import{j as u}from\"../chunks/index.js\";import m from\"./Widget.js\";import d from\"./AreaMeasurement2D/AreaMeasurement2DViewModel.js\";const p=\"esri-button esri-button--secondary\",c=\"esri-button--disabled\",v=\"esri-icon-measure-area\",_=\"esri-area-measurement-2d\",w=\"esri-widget\",b=\"esri-widget--panel\",h=\"esri-area-measurement-2d__container\",y=\"esri-area-measurement-2d__hint\",M=\"esri-area-measurement-2d__hint-text\",g=\"esri-area-measurement-2d__panel--error\",j=\"esri-area-measurement-2d__measurement\",f=\"esri-area-measurement-2d__measurement-item\",k=\"esri-area-measurement-2d__measurement-item--disabled\",U=\"esri-area-measurement-2d__measurement-item-title\",O=\"esri-area-measurement-2d__measurement-item-value\",x=\"esri-area-measurement-2d__settings\",A=\"esri-area-measurement-2d__units\",D=\"esri-area-measurement-2d__units-label\",S=\"esri-area-measurement-2d__units-select esri-select\",L=\"esri-area-measurement-2d__units-select-wrapper\",C=\"esri-area-measurement-2d__actions\",$=\"esri-area-measurement-2d__clear-button\";let z=class extends m{constructor(e,s){super(e,s),this.active=null,this.iconClass=v,this.label=void 0,this.messages=null,this.messagesUnits=null,this.unit=null,this.unitOptions=null,this.view=null,this.viewModel=new d}render(){const{id:e,viewModel:s,visible:t}=this,{active:r,isSupported:i,measurementLabel:o,state:n,unit:l,unitOptions:m}=s,d=\"disabled\"===n,v=\"ready\"===n,z=\"measuring\"===n||\"measured\"===n,{messages:B,messagesUnits:E}=this,H=r&&v?u(\"section\",{key:\"hint\",class:y},u(\"p\",{class:M},B.hint)):null,I=i?null:u(\"section\",{key:\"unsupported\",class:g},u(\"p\",null,B.unsupported)),T=(e,s,t)=>s?u(\"div\",{key:`${t}-enabled`,class:f},u(\"span\",{class:U},e),u(\"span\",{class:O},s)):u(\"div\",{key:`${t}-disabled`,class:this.classes(f,k),\"aria-disabled\":\"true\"},u(\"span\",{class:U},e)),V=z?u(\"section\",{key:\"measurement\",class:j},T(B.area,o.area,\"area\"),T(B.perimeter,o.perimeter,\"perimeter\")):null,W=`${e}__units`,q=u(\"section\",{key:\"units\",class:A},u(\"label\",{class:D,for:W},B.unit),u(\"div\",{class:L},u(\"select\",{class:S,id:W,onchange:this._changeUnit,bind:this,value:l},m.map((e=>{var s;return u(\"option\",{key:e,value:e},a(e)?E.systems[e]:null==(s=E.units[e])?void 0:s.pluralCapitalized)}))))),F=z?u(\"div\",{key:\"settings\",class:x},q):null,G=!i||r&&!z?null:u(\"div\",{class:C},u(\"button\",{disabled:d,class:this.classes(p,$,d&&c),bind:this,onclick:this._newMeasurement,title:B.newMeasurement,type:\"button\",\"aria-label\":B.newMeasurement},B.newMeasurement)),J=t?u(\"div\",{class:h},I,H,F,V,G):null;return u(\"div\",{class:this.classes(_,w,b)},J)}_newMeasurement(){i(this.viewModel.start())}_changeUnit(e){const s=e.target,t=s.options[s.selectedIndex];t&&(this.viewModel.unit=t.value)}};e([t(\"viewModel.active\"),l()],z.prototype,\"active\",void 0),e([s()],z.prototype,\"iconClass\",void 0),e([s({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],z.prototype,\"label\",void 0),e([s(),l(),n(\"esri/widgets/AreaMeasurement2D/t9n/AreaMeasurement2D\")],z.prototype,\"messages\",void 0),e([s(),l(),n(\"esri/core/t9n/Units\")],z.prototype,\"messagesUnits\",void 0),e([t(\"viewModel.unit\")],z.prototype,\"unit\",void 0),e([t(\"viewModel.unitOptions\")],z.prototype,\"unitOptions\",void 0),e([t(\"viewModel.view\")],z.prototype,\"view\",void 0),e([s({type:d}),l([\"viewModel.state\",\"viewModel.unitOptions\",\"viewModel.unit\",\"viewModel.measurementLabel\"])],z.prototype,\"viewModel\",void 0),e([t(\"viewModel.visible\"),l()],z.prototype,\"visible\",void 0),e([o()],z.prototype,\"_newMeasurement\",null),e([o()],z.prototype,\"_changeUnit\",null),z=e([r(\"esri.widgets.AreaMeasurement2D\")],z);var B=z;export default B;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import r from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{reject as s}from\"../../core/promiseUtils.js\";import i from\"../../core/Accessor.js\";import l from\"../../core/Handles.js\";import{init as n}from\"../../core/watchUtils.js\";import{evaluateToolConstructorArguments as p}from\"../../views/interactive/interactiveToolUtils.js\";let a=class extends i{constructor(t){super(t),this.tool=null,this._baseHandles=new l,this._loggedUnsupportedErrorOnce=!1,this._creationAbortController=null,t&&null!=t.visible&&(this.visible=t.visible)}initialize(){this._baseHandles.add(n(this,[\"view.ready\",\"isSupported\"],(()=>{this.view&&this.view.ready&&!this.isSupported?this._loggedUnsupportedErrorOnce||(this.logUnsupportedError(),this._loggedUnsupportedErrorOnce=!0):this._loggedUnsupportedErrorOnce=!1})))}destroy(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null}get isSupported(){return!this.view||this.view.type===this.supportedViewType}get view(){return this._get(\"view\")}set view(t){if(t===this.view)return;this.removeTool(),this._set(\"view\",t);const o=\"tools\";this._baseHandles.remove(o),t&&this._baseHandles.add(t.tools.on(\"change\",(t=>{if(this.tool)for(const o of t.removed)if(this.tool===o){o.destroyed||o.destroy(),this._set(\"tool\",null);break}})),o)}set visible(t){this._set(\"visible\",t),this.tool&&(this.tool.visible=t),!t&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)}get active(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active}get isDisabled(){return!this.view||!this.view.ready||!this.isSupported}get creatingTool(){return!!this._creationAbortController}async createTool(){if(this.removeTool(),!this.isSupported)return s(new r(\"tool:create\",\"The view does not support the tool\"));const t=this.createToolParams(),o=()=>{const o=p(t.constructorArguments);return{visible:this.visible,...o}},e=new AbortController,i=e.signal;this._creationAbortController=e;const l=()=>{e===this._creationAbortController&&(this._creationAbortController=null)};try{const e=await this.view.createTool(t.toolConstructor,o,{signal:i});this._set(\"tool\",e),l()}catch(t){throw l(),t}}removeTool(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;const t=this.tool;t&&(this.view&&this.view.tools&&this.view.tools.remove(t),t.destroyed||t.destroy(),this._set(\"tool\",null))}};t([o({constructOnly:!0})],a.prototype,\"tool\",void 0),t([o({dependsOn:[\"view.type\"]})],a.prototype,\"isSupported\",null),t([o({value:null})],a.prototype,\"view\",null),t([o({type:Boolean,value:!0})],a.prototype,\"visible\",null),t([o({dependsOn:[\"_creationAbortController\",\"tool.active\"]})],a.prototype,\"active\",null),t([o({dependsOn:[\"view\",\"view.ready\",\"isSupported\"]})],a.prototype,\"isDisabled\",null),t([o()],a.prototype,\"_creationAbortController\",void 0),t([o({readOnly:!0,dependsOn:[\"_creationAbortController\"]})],a.prototype,\"creatingTool\",null),a=t([e(\"esri.widgets.support.InteractiveToolViewModel\")],a);export{a as InteractiveToolViewModel};\n"],"sourceRoot":""}