(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[956],{97849:(e,a,r)=>{"use strict";r.d(a,{ld:()=>y,B5:()=>o,M8:()=>f,h3:()=>p,G:()=>m,Qc:()=>c,Nm:()=>b,XG:()=>h,a7:()=>d,wH:()=>w});var t=r(59472),n=r(10923),l=r(37704);const s=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],i=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),u=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i");function o(e){return!!i.test(e)}function c(e){const a=(0,n.mN)(e),r=a.path.match(i)||a.path.match(u);if(!r)return null;const[,t,l,s,o]=r,c=l.indexOf("/");return{title:y(-1!==c?l.slice(c+1):l),serverType:s,sublayer:null!=o&&""!==o?parseInt(o,10):null,url:{path:t}}}function y(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function d(e,a){const r=[];if(e){const a=c(e);(0,t.pC)(a)&&a.title&&r.push(a.title)}if(a){const e=y(a);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function f(e){if(!e)return!1;const a=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return a&&r}function b(e,a){return e?(0,n.Qj)((0,n.Hu)(e,a)):e}function h(e,a,r){if(!a)return{url:a};a=(0,n.Hu)(a,r);const l=c((0,n.mN)(a).path);let s;return(0,t.pC)(l)&&(null!=l.sublayer&&null==e.layerId&&(s=l.sublayer),a=l.url.path),{url:(0,n.Qj)(a),layerId:s}}function w(e,a,r,t,s){(0,l.w)(a,t,"url",s),t.url&&null!=e.layerId&&(t.url=(0,n.v_)(t.url,r,e.layerId.toString()))}function m(e){if(!e)return!1;const a=e.toLowerCase(),r=-1!==a.indexOf("/services/"),t=-1!==a.indexOf("/mapserver/wmsserver"),n=-1!==a.indexOf("/imageserver/wmsserver"),l=-1!==a.indexOf("/wmsserver");return r&&(t||n||l)}function p(e){if(!e)return!1;const a=new n.R9((0,n.hF)(e)).authority.toLowerCase();return"server.arcgisonline.com"===a||"services.arcgisonline.com"===a}},50956:(e,a,r)=>{"use strict";r.r(a),r.d(a,{fromUrl:()=>u});var t=r(59472),n=r(32656),l=r(54721),s=r(97849),i=r(6357);async function u(e){const a=await async function(e){const a=(0,s.Qc)(e);if((0,t.Wi)(a))throw new n.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:r,sublayer:l}=a;let u;const o={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(r){case"MapServer":u=null!=l?"FeatureLayer":async function(e){return(await y(e)).tileInfo}(e).then((e=>e?"TileLayer":"MapImageLayer"));break;case"ImageServer":u=y(e).then((e=>{const a=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!a||"LERC"!==a.toUpperCase()||e.cacheType&&"elevation"!==e.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"}));break;case"SceneServer":u=y(a.url.path).then((e=>{const a={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const r=e.layers[0].layerType;if(null!=a[r])return a[r]}return"SceneLayer"}));break;default:u=o[r]}const d="FeatureServer"===r,f={parsedUrl:a,Constructor:null,layerOrTableId:d?l:null,sublayerIds:null,tableIds:null},b=await u;if({FeatureLayer:!0,SceneLayer:!0}[b]&&null==l){const a=await async function(e,a){var r,t;let n,l=!1;if("FeatureServer"===a){const a=await async function(e){var a,r;let t=await y(e);t=t||{},t.layers=(null==(a=t.layers)?void 0:a.filter(c))||[];const n={serviceJSON:t};if(t.currentVersion<10.5)return n;const l=await y(e+"/layers");return n.layersJSON={layers:(null==l||null==(r=l.layers)?void 0:r.filter(c))||[],tables:(null==l?void 0:l.tables)||[]},n}(e);l=!!a.layersJSON,n=a.layersJSON||a.serviceJSON}else n=await y(e);const s=null==(r=n)?void 0:r.layers,i=null==(t=n)?void 0:t.tables;return{layerIds:(null==s?void 0:s.map((e=>e.id)).reverse())||[],tableIds:(null==i?void 0:i.map((e=>e.id)).reverse())||[],layerInfos:l?s:[],tableInfos:l?i:[]}}(e,r);if(d&&(f.sublayerInfos=a.layerInfos,f.tableInfos=a.tableInfos),1!==a.layerIds.length+a.tableIds.length)f.sublayerIds=a.layerIds,f.tableIds=a.tableIds;else if(d){var h,w;f.layerOrTableId=null!=(h=a.layerIds[0])?h:a.tableIds[0],f.sourceJSON=null!=(w=a.layerInfos[0])?w:a.tableInfos[0]}}return f.Constructor=await async function(e){return(0,i.T[e])()}(b),f}(e.url),l={...e.properties,url:e.url};if(!a.sublayerIds)return null!=a.layerOrTableId&&(l.layerId=a.layerOrTableId,l.sourceJSON=a.sourceJSON),new a.Constructor(l);const u=new(0,(await Promise.all([r.e(3716),r.e(9647),r.e(409)]).then(r.bind(r,19647))).default)({title:a.parsedUrl.title});return function(e,a,r){function n(e,n){const l={...r,layerId:e,sublayerTitleMode:"service-name"};return(0,t.pC)(n)&&(l.sourceJSON=n),new a.Constructor(l)}a.sublayerIds.forEach((r=>{const t=n(r,o(a.sublayerInfos,r));e.add(t)})),a.tableIds.forEach((r=>{const t=n(r,o(a.tableInfos,r));e.tables.add(t)}))}(u,a,l),u}function o(e,a){return e?e.find((e=>e.id===a)):null}function c(e){return!e.type||"Feature Layer"===e.type}async function y(e){return(await(0,l.default)(e,{responseType:"json",query:{f:"json"}})).data}},6357:(e,a,r)=>{"use strict";r.d(a,{T:()=>t});const t={BingMapsLayer:async()=>(await r.e(2081).then(r.bind(r,42081))).default,BuildingSceneLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(2673),r.e(8591),r.e(142),r.e(6603),r.e(9694),r.e(4686),r.e(1318)]).then(r.bind(r,31318))).default,CSVLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(2673),r.e(8591),r.e(142),r.e(6603),r.e(9524)]).then(r.bind(r,54479))).default,ElevationLayer:async()=>(await Promise.all([r.e(3716),r.e(2673),r.e(9760),r.e(1373)]).then(r.bind(r,87790))).default,FeatureLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(2673),r.e(8591),r.e(142),r.e(6603),r.e(4792)]).then(r.bind(r,76603))).default,GroupLayer:async()=>(await Promise.all([r.e(3716),r.e(9647),r.e(3368)]).then(r.bind(r,19647))).default,GeoRSSLayer:async()=>(await Promise.all([r.e(3716),r.e(2303)]).then(r.bind(r,32303))).default,ImageryLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(2673),r.e(8591),r.e(2551),r.e(4464),r.e(6399),r.e(8627),r.e(6881)]).then(r.bind(r,20928))).default,ImageryTileLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(8834),r.e(4139),r.e(2673),r.e(8157),r.e(7333),r.e(4464),r.e(9760),r.e(6399),r.e(8627),r.e(9076)]).then(r.bind(r,69866))).default,IntegratedMeshLayer:async()=>(await Promise.all([r.e(3716),r.e(8157),r.e(7333),r.e(9694),r.e(5209)]).then(r.bind(r,69640))).default,KMLLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(8834),r.e(4139),r.e(142),r.e(6332)]).then(r.bind(r,66184))).default,MapImageLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(8591),r.e(142),r.e(2551),r.e(3347),r.e(2406),r.e(5666),r.e(2696),r.e(6426),r.e(1462),r.e(5731),r.e(7521)]).then(r.bind(r,62933))).default,MapNotesLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(2673),r.e(8591),r.e(142),r.e(6603),r.e(2335)]).then(r.bind(r,42386))).default,OpenStreetMapLayer:async()=>(await Promise.all([r.e(3716),r.e(6601),r.e(8742)]).then(r.bind(r,68742))).default,PointCloudLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(8342)]).then(r.bind(r,78342))).default,RouteLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(2673),r.e(8591),r.e(142),r.e(6603),r.e(9890)]).then(r.bind(r,53504))).default,SceneLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(2673),r.e(8591),r.e(142),r.e(6603),r.e(9694),r.e(4686),r.e(3687)]).then(r.bind(r,93687))).default,StreamLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(8591),r.e(142),r.e(33)]).then(r.bind(r,65034))).default,TileLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(1518),r.e(8834),r.e(4139),r.e(142),r.e(1462),r.e(9760),r.e(6884)]).then(r.bind(r,66416))).default,UnknownLayer:async()=>(await Promise.all([r.e(3716),r.e(2095)]).then(r.bind(r,32095))).default,UnsupportedLayer:async()=>(await Promise.all([r.e(3716),r.e(1983)]).then(r.bind(r,51983))).default,VectorTileLayer:async()=>(await Promise.all([r.e(3716),r.e(9760),r.e(7680),r.e(3309)]).then(r.bind(r,57680))).default,WebTileLayer:async()=>(await Promise.all([r.e(3716),r.e(6601)]).then(r.bind(r,16601))).default,WMSLayer:async()=>(await Promise.all([r.e(3716),r.e(8484),r.e(8591),r.e(9269)]).then(r.bind(r,5612))).default,WMTSLayer:async()=>(await Promise.all([r.e(3716),r.e(6601),r.e(5155)]).then(r.bind(r,65155))).default}}}]);
//# sourceMappingURL=956.js.map