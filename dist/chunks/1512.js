(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[1512],{31512:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>S});var i=t(56140),s=(t(95830),t(36544),t(68055),t(79881)),o=t(87566),a=(t(10923),t(57002),t(86035),t(39105)),n=t(54721),l=t(91535),u=t(95986),p=t(47977),c=t(10532),y=t(59472),d=t(30590),f=t(58385),m=t(73032),h=t(61106),B=t(53817),_=t(93833),b=(t(36348),t(15988)),g=t(76194),C=t(69489),v=t(36405);function Z(e){return g.default.fromJSON(e).features.map((e=>e.geometry))}let k=class extends f.wq{constructor(e){super(e),this.directions=null,this.facilities=null,this.incidents=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routes=null}readFacilities(e){return Z(e)}readIncidents(e){return Z(e)}readPointBarriers(e,r){return Z(r.barriers)}readPolylineBarriers(e){return Z(e)}readPolygonBarriers(e){return Z(e)}readRoutes(e){return function(e){return e.features.map((r=>{const t=m.Z.fromJSON(e.spatialReference),i=b.Z.fromJSON(r);return(0,y.pC)(i.geometry)&&(i.geometry.spatialReference=t),i}))}(e)}};(0,i._)([(0,s.Cb)({type:[C.Z]})],k.prototype,"directions",void 0),(0,i._)([(0,s.Cb)({type:[h.Z]})],k.prototype,"facilities",void 0),(0,i._)([(0,d.r)("facilities")],k.prototype,"readFacilities",null),(0,i._)([(0,s.Cb)({type:[h.Z]})],k.prototype,"incidents",void 0),(0,i._)([(0,d.r)("incidents")],k.prototype,"readIncidents",null),(0,i._)([(0,s.Cb)({type:[v.Z]})],k.prototype,"messages",void 0),(0,i._)([(0,s.Cb)({type:[h.Z]})],k.prototype,"pointBarriers",void 0),(0,i._)([(0,d.r)("pointBarriers",["barriers"])],k.prototype,"readPointBarriers",null),(0,i._)([(0,s.Cb)({type:[_.Z]})],k.prototype,"polylineBarriers",void 0),(0,i._)([(0,d.r)("polylineBarriers")],k.prototype,"readPolylineBarriers",null),(0,i._)([(0,s.Cb)({type:[B.Z]})],k.prototype,"polygonBarriers",void 0),(0,i._)([(0,d.r)("polygonBarriers")],k.prototype,"readPolygonBarriers",null),(0,i._)([(0,s.Cb)({type:[b.Z]})],k.prototype,"routes",void 0),(0,i._)([(0,d.r)("routes")],k.prototype,"readRoutes",null),k=(0,i._)([(0,o.j)("esri.tasks.support.ClosestFacilitySolveResult")],k);const R=k,A=(0,p.E)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0});let P=class extends((0,c.Y)(u.Z)){constructor(e){super(e),this.url=null}solve(e,r){const t=[],i=[],s={},o={};return e.incidents&&e.incidents.features&&this._collectGeometries(e.incidents.features,i,"incidents.features",s),e.facilities&&e.facilities.features&&this._collectGeometries(e.facilities.features,i,"facilities.features",s),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,i,"pointBarriers.features",s),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,i,"polylineBarriers.features",s),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,i,"polygonBarriers.features",s),(0,l.aX)(i).then((e=>{for(const r in s){const i=s[r];t.push(r),o[r]=e.slice(i[0],i[1])}return this._isInputGeometryZAware(o,t)?this.getServiceDescription():(0,a.resolve)({dontCheck:!0})})).then((i=>{("dontCheck"in i?i.dontCheck:i.hasZ)||this._dropZValuesOffInputGeometry(o,t);for(const r in o)o[r].forEach(((t,i)=>{e.get(r)[i].geometry=t}));let s={query:{...this.parsedUrl.query,f:"json",...A.toQueryParams(e)}};return(this.requestOptions||r)&&(s={...this.requestOptions,...r,...s}),(0,n.default)(`${this.parsedUrl.path}/solveClosestFacility`,s)})).then((e=>R.fromJSON(e.data)))}_collectGeometries(e,r,t,i){i[t]=[r.length,r.length+e.length],e.forEach((e=>{r.push(e.geometry)}))}};(0,i._)([(0,s.Cb)()],P.prototype,"url",void 0),P=(0,i._)([(0,o.j)("esri.tasks.ClosestFacilityTask")],P);const S=P}}]);
//# sourceMappingURL=1512.js.map