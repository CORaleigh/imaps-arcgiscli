{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/MapImageLayerView.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["t","e","xoffset","Math","max","abs","yoffset","stops","length","n","r","s","size","renderer","event","pointerType","o","filter","type","map","maxSize","minSize","f","floor","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","d","layer","this","u","get","async","minScale","maxScale","visible","sublayers","popupEnabled","defaultPopupTemplateEnabled","push","sublayer","popupTemplate","y","toArray","load","catch","a","createQuery","p","i","createFetchPopupFeaturesQueryGeometry","geometry","outFields","m","_loadArcadeModules","arcadeUtils","hasGeometryOperations","maxAllowableOffset","width","queryFeatures","features","reduce","value","super","canResume","imageParameters","timeExtent","isEmpty","prototype","dependsOn","c","l","arguments","_exportImageVersion","strategy","update","error","imageMaxWidth","imageMaxHeight","version","_bitmapContainer","container","addChild","fetchSource","fetchImage","bind","requestUpdate","imageRotationSupported","imageNormalizationSupported","hidpi","view","handles","add","destroy","remove","removeChild","removeAllChildren","updating","updateRequested","timestamp","refreshTimestamp","getRequiredFields","fields","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","indexOf","keyField","defaultPopupTemplate","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","x","xmin","min","ymin","xmax","ymax","toMap","intersects"],"mappings":"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","file":"chunks/4005.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t,e){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?function(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}(t.stops):e}function n(n){const r=n&&n.renderer,s=\"touch\"===(n&&n.event&&n.event.pointerType)?9:6;if(!r)return s;const o=\"visualVariables\"in r?function(t,n){if(!n)return t;const r=n.filter((t=>\"size\"===t.type)).map((n=>{const{maxSize:r,minSize:s}=n;return(e(r,t)+e(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let t=0;t<o;t++)s+=r[t];const f=Math.floor(s/o);return Math.max(f,t)}(s,r.visualVariables):s;if(\"simple\"===r.type)return t(o,r.symbol);if(\"unique-value\"===r.type){let e=o;return r.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===r.type){let e=o;return r.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return r.type,o}export{n as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{reject as a,all as p,eachAlways as i}from\"../../core/promiseUtils.js\";import{loadArcade as u}from\"../../support/arcadeOnDemand.js\";import{calculateTolerance as c}from\"../../renderers/support/clickToleranceUtils.js\";import{getRequiredFields as l,getFetchPopupTemplate as m}from\"./support/popupUtils.js\";const n=n=>{let d=class extends n{async fetchPopupFeatures(e,t){const{layer:s}=this;if(!e)return a(new o(\"mapimagelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s}));const u=this.get(\"view.scale\"),n=[],d=async e=>{const s=0===e.minScale||u<=e.minScale,o=0===e.maxScale||u>=e.maxScale;if(e.visible&&s&&o)if(e.sublayers)e.sublayers.forEach(d);else if(e.popupEnabled){const s=m(e,{...t,defaultPopupTemplateEnabled:!1});r(s)&&n.push({sublayer:e,popupTemplate:s})}},y=s.sublayers.toArray().map(d);await p(y);const f=n.map((async({sublayer:s,popupTemplate:o})=>{await s.load().catch((()=>{}));const a=s.createQuery(),p=r(t)?t.event:null,i=c({renderer:s.renderer,event:p}),u=this.createFetchPopupFeaturesQueryGeometry(e,i);a.geometry=u,a.outFields=await l(s,o);const m=await this._loadArcadeModules(o);m&&m.arcadeUtils.hasGeometryOperations(o)||(a.maxAllowableOffset=u.width/i);return(await s.queryFeatures(a)).features}));return(await i(f)).reduce(((e,r)=>r.value?[...e,...r.value]:e),[]).filter((e=>null!=e))}canResume(){var e,r;return!!super.canResume()&&(null==(e=this.imageParameters)||null==(r=e.timeExtent)||!r.isEmpty)}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return u()}};return e([t()],d.prototype,\"imageParameters\",void 0),e([t()],d.prototype,\"layer\",void 0),e([t({dependsOn:[\"imageParameters.timeExtent\"]})],d.prototype,\"suspended\",void 0),d=e([s(\"esri.views.layers.MapImageLayerView\")],d),d};export{n as MapImageLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import t from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{isAbortError as s}from\"../../../core/promiseUtils.js\";import{init as a}from\"../../../core/watchUtils.js\";import{RefreshableLayerView as o}from\"../../layers/RefreshableLayerView.js\";import{ExportImageParameters as p}from\"../../../layers/support/ExportImageParameters.js\";import m from\"../../layers/LayerView.js\";import{createQueryGeometry as h}from\"../../support/drapedUtils.js\";import{MapImageLayerView as n}from\"../../layers/MapImageLayerView.js\";import{BitmapContainer as d}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as g}from\"./LayerView2D.js\";import u from\"./support/ExportStrategy.js\";const c=t.getLogger(\"esri.views.2d.layers.MapImageLayerView2D\");let l=class extends(n(o(g(m)))){constructor(){super(...arguments),this._exportImageVersion=-1}hitTest(){return null}update(e){this.strategy.update(e).catch((e=>{s(e)||c.error(e)}))}attach(){const{imageMaxWidth:e,imageMaxHeight:t,version:r}=this.layer,i=r>=10.3,s=r>=10;this._bitmapContainer=new d,this.container.addChild(this._bitmapContainer),this.strategy=new u({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:e,imageMaxHeight:t,imageRotationSupported:i,imageNormalizationSupported:s,hidpi:!0}),this.imageParameters=new p({view:this.view,layer:this.layer}),this.handles.add(a(this.imageParameters,\"version\",(e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())})),\"mapimagelayerview-update\")}detach(){this.strategy.destroy(),this.handles.remove(\"mapimagelayerview-update\"),this.imageParameters.destroy(),this.imageParameters=null,this._exportImageVersion=-1,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return h(e,t,this.view)}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this.imageParameters.timeExtent,timestamp:this.refreshTimestamp,...i})}};e([r()],l.prototype,\"strategy\",void 0),e([r({dependsOn:[\"strategy.updating\"]})],l.prototype,\"updating\",void 0),l=e([i(\"esri.views.2d.layers.MapImageLayerView2D\")],l);var y=l;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}