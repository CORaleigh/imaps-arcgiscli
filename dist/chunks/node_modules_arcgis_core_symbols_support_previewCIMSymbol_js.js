/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkimaps"] = self["webpackChunkimaps"] || []).push([["node_modules_arcgis_core_symbols_support_previewCIMSymbol_js"],{

/***/ "./node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CIMSymbolRasterizer\": () => (/* binding */ I),\n/* harmony export */   \"GeometryStyle\": () => (/* binding */ d)\n/* harmony export */ });\n/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/string.js */ \"./node_modules/@arcgis/core/core/string.js\");\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry/support/jsonUtils.js */ \"./node_modules/@arcgis/core/geometry/support/jsonUtils.js\");\n/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/screenUtils.js */ \"./node_modules/@arcgis/core/core/screenUtils.js\");\n/* harmony import */ var _support_Symbol3DAnchorPosition2D_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/Symbol3DAnchorPosition2D.js */ \"./node_modules/@arcgis/core/symbols/support/Symbol3DAnchorPosition2D.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils.js */ \"./node_modules/@arcgis/core/symbols/cim/utils.js\");\n/* harmony import */ var _support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/cimSymbolUtils.js */ \"./node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js\");\n/* harmony import */ var _cimAnalyzer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./cimAnalyzer.js */ \"./node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js\");\n/* harmony import */ var _Rasterizer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Rasterizer.js */ \"./node_modules/@arcgis/core/symbols/cim/Rasterizer.js\");\n/* harmony import */ var _TextRasterizer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./TextRasterizer.js */ \"./node_modules/@arcgis/core/symbols/cim/TextRasterizer.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar d;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(d||(d={}));const M=(e,t,r)=>{if(e&&e.targetSize){let a;if(r){const t=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);a=e.targetSize/(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(t)}else a=e.targetSize/t.referenceSize;return a}return e&&e.scaleFactor?e.scaleFactor:1},C={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class I{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new _Rasterizer_js__WEBPACK_IMPORTED_MODULE_9__.default,this._textRasterizer=new _TextRasterizer_js__WEBPACK_IMPORTED_MODULE_10__.TextRasterizer,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,r,i,s,o,n,c){i=i||(t?null!=t.centroid?\"esriGeometryPolygon\":(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__.getJsonType)(t.geometry):null)||function(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}(e);const l=await this.analyzeCIMSymbol(e,t?function(e){const t=e?Object.keys(e):[];return t.map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}(t.attributes):null,r,i,c);return this.rasterizeCIMSymbol(l,t,i,s,o,n)}async analyzeCIMSymbol(e,a,i,s,o){const n=[],c=a?{geometryType:s,spatialReference:this._spatialReference,fields:a}:null;let m;await (0,_cimAnalyzer_js__WEBPACK_IMPORTED_MODULE_8__.analyzeCIMSymbol)(e.data,c,n,this._avoidSDF),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfAborted)(o);for(const e of n)\"CIMPictureMarker\"!==e.cim.type&&\"CIMPictureFill\"!==e.cim.type&&\"CIMPictureStroke\"!==e.cim.type||(m||(m=[]),m.push(this.fetchPictureMarkerResource(e,o))),i&&\"text\"===e.type&&\"string\"==typeof e.text&&e.text.indexOf(\"[\")>-1&&(e.text=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.createLabelOverrideFunction)(i,e.text,e.cim.textCase));return m&&await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.all)(m),n}async fetchPictureMarkerResource(e,t){const r=e.materialHash;if(!this._pictureMarkerCache.get(r)){const a=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_5__.default)(e.cim.url,{responseType:\"image\",signal:t&&t.signal})).data;this._pictureMarkerCache.set(r,a)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,h=e.anchorY||0,f=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=M(a,n,null);if(g=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(n.offsetX,t,i,s)*e||0,y=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(n.rotation,t,i,s)||0,f=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":h=.5;break;case\"bottom\":h=-.5;break;case\"baseline\":h=-.25;break;default:h=0}}}null!=e&&o.push({angle:c,rotateClockWise:f,anchorX:l,anchorY:h,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),r=t.getContext(\"2d\");let a=0,i=0,s=0,c=0;const l=[];for(let t=0;t<e.length;t++){const n=e[t],m=n.rasterizedResource;if(!m)continue;const h=m.size,f=n.offsetX,g=n.offsetY,y=n.anchorX,u=n.anchorY,p=n.rotateClockWise||!1;let d=n.angle,M=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(f)-h[0]*(.5+y),C=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(g)-h[1]*(.5+u),I=M+h[0],z=C+h[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}a=M<a?M:a,i=C<i?C:i,s=I>s?I:s,c=z>c?z:c;const x=r.createImageData(m.size[0],m.size[1]);x.data.set(new Uint8ClampedArray(m.image.buffer));const P={offsetX:f,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:x,anchorX:y,anchorY:u};l.push(P)}t.width=s-a,t.height=c-i;const m=-a,h=c;for(let e=0;e<l.length;e++){const t=l[e],a=this._imageDataToCanvas(t.rasterizedImage),i=t.rasterizedImage.width,s=t.rasterizedImage.height,n=m-i*(.5+t.anchorX),c=h-s*(.5-t.anchorY);if(t.angle){const e=(360-t.angle)*Math.PI/180;r.save(),r.translate((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(t.offsetX),-(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(t.offsetY)),r.translate(m,h),r.rotate(e),r.translate(-m,-h),r.drawImage(a,n,c),r.restore()}else r.drawImage(a,n+(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(t.offsetX),c-(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(t.offsetY))}const f=new _support_Symbol3DAnchorPosition2D_js__WEBPACK_IMPORTED_MODULE_4__.default({x:m/t.width-.5,y:h/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:f}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(t,r,a,i,s,o){let n,c,l,h;if(\"esriGeometryPolyline\"===a||\"esriGeometryPolygon\"===a){const h=i&&i.style?i.style:d.Legend,f=\"esriGeometryPolyline\"===a?C.stroke[h]:C.fill[h];if(\"line\"===t.type){if(\"CIMSolidStroke\"!==t.cim.type){if(\"CIMPictureStroke\"===t.cim.type){const e=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(t.width,r,s,o);let a,i,n;return({image:a,width:i,height:n}=this._getPictureResource(t,e)),this._rasterizePictureResource(t,a,i,n,f,e)}return null}({analyzedCIM:n,hash:l}=z(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}else if(\"marker\"===t.type){if(\"CIMPictureMarker\"===t.cim.type)return null;if(\"CIMVectorMarker\"!==t.cim.type)return null;t.cim.offsetX=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(t.offsetX,r,s,o),t.cim.offsetY=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(t.offsetY,r,s,o),t.cim.rotation=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(t.rotation,r,s,o),t.cim.markerPlacement=t.markerPlacement,({analyzedCIM:n}=z(t,r,s,o)),l=(0,_core_string_js__WEBPACK_IMPORTED_MODULE_0__.numericHash)(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,f)}else{if(\"text\"===t.type)return null;if(\"fill\"===t.type){if(\"CIMHatchFill\"===t.cim.type||\"CIMVectorMarker\"===t.cim.type||\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type){const e=t.cim.size||t.cim.height;let a,i,c;if(\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type)({image:a,width:i,height:c}=this._getPictureResource(t,e));else{({analyzedCIM:n,hash:l}=z(t,r,s,o));const e=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=e.image,i=e.size[0],c=e.size[1]}return this._rasterizePictureResource(t,a,i,c,f,null)}if(\"CIMSolidFill\"!==t.cim.type)return null;({analyzedCIM:n,hash:l}=z(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}}}else{if(\"text\"===t.type)return h=this._rasterizeTextResource(t,r,i,s,o),h;({analyzedCIM:n,hash:l}=z(t,r,s,o));const e=M(i,t,null);if(\"CIMPictureMarker\"===t.cim.type){const a=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(t.size,r,s,o)*e,{image:i,width:n,height:c}=this._getPictureResource(t,a);return h={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:t.anchorPoint?t.anchorPoint.x:0,anchorY:t.anchorPoint?t.anchorPoint.y:0},h}(0,_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_7__.scaleCIMMarker)(n,e,{preserveOutlineWidth:!1}),c=n}l+=a,i&&(l+=JSON.stringify(i));const g=this._resourceCache;return g.has(l)?g.get(l):(h=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),g.set(l,h),h)}_rasterizeTextResource(e,t,r,a,i){const s=M(r,e,null),o=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.text,t,a,i);if(!o||0===o.length)return null;const n=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.fontName,t,a,i),c=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.style,t,a,i),l=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.weight,t,a,i),f=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.decoration,t,a,i),g=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.size,t,a,i)*s,y=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.horizontalAlignment,t,a,i),u=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.verticalAlignment,t,a,i),p=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.colorToArray)((0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.color,t,a,i)),d=(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.colorToArray)((0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.outlineColor,t,a,i)),C={color:p,size:g,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:l,decoration:f},halo:{size:(0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateValueOrFunction)(e.outlineSize,t,a,i)||0,color:d,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,r,a,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(r,a);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(e.cim.offsetX)||0,m42:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__.isPolygon)(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__.isPolyline)(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const e of d){const t=e?e.length:0;if(t>1){let r=e[0];m.moveTo((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(r[0]),(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(r[1]));for(let a=1;a<t;++a)r=e[a],m.lineTo((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(r[0]),(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(r[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const a=r.height/r.width,i=t?a>1?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(t):(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(t)/a:r.width,s=t?a>1?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(t)*a:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.pt2px)(t):r.height;return{image:this._imageTo32Array(r,i,s),width:i,height:s}}_embedCIMLayerInVectorMarker(e,t){const r=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__.isPolygon)(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function z(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=(0,_cimAnalyzer_js__WEBPACK_IMPORTED_MODULE_8__.analyzeCIMResource)(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/cim/Rasterizer.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/cim/Rasterizer.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./node_modules/@arcgis/core/symbols/cim/utils.js\");\n/* harmony import */ var _Rect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Rect.js */ \"./node_modules/@arcgis/core/symbols/cim/Rect.js\");\n/* harmony import */ var _CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CIMSymbolHelper.js */ \"./node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js\");\n/* harmony import */ var _SDFHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SDFHelper.js */ \"./node_modules/@arcgis/core/symbols/cim/SDFHelper.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===e.type||\"esriSFS\"===e.type){const[r,a,n]=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_2__.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,e.style,s);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===e.type||\"esriSLS\"===e.type){const[r,a,n]=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_2__.SymbolHelper.rasterizeSimpleLine(e.style,e.cap);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===e.type||\"esriSMS\"===e.type||\"line-marker\"===e.type?(m=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_2__.CIMSymbolHelper.fromSimpleMarker(e),f=(0,_SDFHelper_js__WEBPACK_IMPORTED_MODULE_3__.getSDFInfo)(m)):\"CIMHatchFill\"===e.type?(m=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_2__.CIMSymbolHelper.fromCIMHatchFill(e),l=new _Rect_js__WEBPACK_IMPORTED_MODULE_1__.default(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):e.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===e.markerPlacement.type?(m=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_2__.CIMSymbolHelper.fromCIMInsidePolygon(e),l=new _Rect_js__WEBPACK_IMPORTED_MODULE_1__.default(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=e,f=(0,_SDFHelper_js__WEBPACK_IMPORTED_MODULE_3__.getSDFInfo)(m)),f&&!o){const[e,r,t]=(0,_SDFHelper_js__WEBPACK_IMPORTED_MODULE_3__.buildSDF)(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_2__.CIMSymbolHelper.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(r,t,a,n){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=r,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext(\"2d\");a instanceof ImageData?i.putImageData(a,0,0):(a.setAttribute(\"width\",`${r}px`),a.setAttribute(\"height\",`${t}px`),i.drawImage(a,0,0,r,t));const s=i.getImageData(0,0,r,t),o=new Uint8Array(s.data);if(n)for(const e of n)if(e&&e.oldColor&&4===e.oldColor.length&&e.newColor&&4===e.newColor.length){const[r,t,a,n]=e.oldColor,[i,s,m,l]=e.newColor;if(r===i&&t===s&&a===m&&n===l)continue;for(let e=0;e<o.length;e+=4)r===o[e]&&t===o[e+1]&&a===o[e+2]&&n===o[e+3]&&(o[e]=i,o[e+1]=s,o[e+2]=m,o[e+3]=l)}let m;for(let e=0;e<o.length;e+=4)m=o[e+3]/255,o[e]=o[e]*m,o[e+1]=o[e+1]*m,o[e+2]=o[e+2]*m;let l=o,f=r,c=t;const h=512;if(f>=h||c>=h){const a=f/c;a>1?(f=h,c=Math.round(h/a)):(c=h,f=Math.round(h*a)),l=new Uint8Array(4*f*c);const n=new Uint8ClampedArray(l.buffer);(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.resampleHermite)(o,r,t,n,f,c,!1)}return{size:[r,t],image:new Uint32Array(l.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}});\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/symbols/cim/Rasterizer.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/cim/TextRasterizer.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/cim/TextRasterizer.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"TextRasterizer\": () => (/* binding */ e)\n/* harmony export */ });\n/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/screenUtils.js */ \"./node_modules/@arcgis/core/core/screenUtils.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass e{constructor(){}rasterizeText(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const i=this._textRasterizationCanvas,s=i.getContext(\"2d\");this.setFontProperties(s,e),this.parameters=e,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const r=this.computeTextWidth(s,e),o=this.lineHeight*this.textLines.length;var n;i.width=r,i.height=o,this.renderedLineHeight=Math.round(this.lineHeight*e.pixelRatio),this.renderedHaloSize=e.halo.size*e.pixelRatio,this.renderedWidth=r*e.pixelRatio,this.renderedHeight=o*e.pixelRatio,this.fillStyle=`rgba(${(n=e.color).slice(0,3).toString()},${n[3]})`,this.haloStyle=function(t){return`rgb(${t.slice(0,3).toString()})`}(e.halo.color);const a=this.renderedLineHeight,h=this.renderedHaloSize;this.setFontProperties(s,e);const l=function(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}(s.textAlign,this.renderedWidth)+h,d=h;let c=0,g=0;h>0&&this.renderHalo(s,l,d,c,g,e),g+=d,c+=l;for(const t of this.textLines)s.globalCompositeOperation=\"destination-out\",s.fillStyle=\"rgb(0, 0, 0)\",s.fillText(t,c,g),s.globalCompositeOperation=\"source-over\",s.fillStyle=this.fillStyle,s.fillText(t,c,g),g+=a;const f=s.getImageData(0,0,this.renderedWidth,this.renderedHeight),p=new Uint8Array(f.data);if(e.premultiplyColors){let t;for(let e=0;e<p.length;e+=4)t=p[e+3]/255,p[e]=p[e]*t,p[e+1]=p[e+1]*t,p[e+2]=p[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(p.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,s,r,o){const n=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=n,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,n,a),this.setFontProperties(l,o),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,n,a,s,r,n,a),t.globalAlpha=1}renderHaloEmulated(t,e,s){const r=this.renderedLineHeight,o=this.renderedHaloSize;for(const n of this.textLines){for(const[r,a]of i)t.fillText(n,e+o*r,s+o*a);s+=r}}renderHaloNative(t,e,i){const s=this.renderedLineHeight,r=this.renderedHaloSize;for(const o of this.textLines){const n=2*r,a=5,h=.1;for(let s=0;s<a;s++){const r=1-(a-1)*h+s*h;t.lineWidth=r*n,t.strokeText(o,e,i)}i+=s}}setFontProperties(e,i){const s=i.font,r=`${s.style} ${s.weight} ${(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(i.size*i.pixelRatio)}px ${s.family}, sans-serif`;let o;switch(e.font=r,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":o=\"left\";break;case\"right\":o=\"right\";break;case\"center\":o=\"center\";break;default:o=\"left\"}e.textAlign=o}computeTextWidth(t,e){let i=0;for(const e of this.textLines)i=Math.max(i,t.measureText(e).width);const s=e.font;return(\"italic\"===s.style||\"oblique\"===s.style||\"string\"==typeof s.weight&&(\"bold\"===s.weight||\"bolder\"===s.weight)||\"number\"==typeof s.weight&&s.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}const i=[];{const t=16;for(let e=0;e<360;e+=360/t)i.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (e);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/symbols/cim/TextRasterizer.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"previewCIMSymbol\": () => (/* binding */ o)\n/* harmony export */ });\n/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/screenUtils.js */ \"./node_modules/@arcgis/core/core/screenUtils.js\");\n/* harmony import */ var _cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cimSymbolUtils.js */ \"./node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js\");\n/* harmony import */ var _cim_CIMSymbolRasterizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../cim/CIMSymbolRasterizer.js */ \"./node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst i=new _cim_CIMSymbolRasterizer_js__WEBPACK_IMPORTED_MODULE_2__.CIMSymbolRasterizer(null,!0);async function o(l,o={}){const{size:n,maxSize:s,feature:c,fieldMap:m,geometryType:r,style:y,node:d,opacity:h}=o,u=(0,_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_1__.getCIMSymbolSize)(l),p=Math.min(null!=n?n:u,null!=s?s:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.px2pt)(120));p!==u&&(l=l.clone(),(0,_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_1__.scaleCIMSymbolTo)(l,p,{preserveOutlineWidth:!0}));let g=3;l&&l.data&&l.data.symbol&&\"CIMPointSymbol\"!==l.data.symbol.type&&(g=1);const f=await i.rasterizeCIMSymbolAsync(l,c,m,r,{scaleFactor:g,style:y}),M=document.createElement(\"canvas\");M.width=f.imageData.width,M.height=f.imageData.height;M.getContext(\"2d\").putImageData(f.imageData,0,0);let b=M.width/g,w=M.height/g;if(null!=n&&(null==(null==o?void 0:o.scale)||(null==o?void 0:o.scale))){const t=b/w;b=t<=1?Math.ceil(p*t):p,w=t<=1?p:Math.ceil(p/t)}const C=new Image(b,w);return C.src=M.toDataURL(),null!=h&&(C.style.opacity=`${h}`),d&&d.appendChild(C),C}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js?");

/***/ })

}]);