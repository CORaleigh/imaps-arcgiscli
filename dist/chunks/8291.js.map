{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/chunks/ShadedColorMaterial.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/Manipulator3D.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/editingTools/dragEventPipeline3D.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Camera.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/ShadedColorMaterial.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/lineStippleUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js"],"names":["n","s","include","linearDepth","fragment","vertex","uniforms","add","attributes","varyings","screenSizeEnabled","shadingEnabled","code","output","OITEnabled","Object","freeze","__proto__","build","Z","e","this","camera","_elevation","offset","override","collisionType","type","collisionPriority","_renderObjects","autoScaleRenderObjects","_available","_noDisplayCount","_radius","_worldSized","focusMultiplier","touchMultiplier","worldOriented","_modelTransform","_worldFrame","_renderLocation","_renderLocationDirty","_location","x","y","z","_elevationAlignedLocation","_elevationAlignedLocationDirty","interactive","selectable","grabbable","cursor","_grabbing","dragging","_hovering","_selected","_state","_focused","events","_screenLocation","screenPointArray","renderScreenPointArray","pixelSize","_screenLocationDirty","_applyObjectTransform","_engineResourcesAddedToStage","_engineResources","_attached","_engineLayerId","_materialIdReferences","spatialReference","view","t","state","copyFrom","_removeResourcesFromStage","_elevationInfo","_updateEngineObject","slice","remove","q","renderCoordsHelper","toRenderCoords","elevationAlignedLocation","i","viewingMode","te","radius","fromRenderCoords","emit","location","_evaluateElevationAlignment","_updateElevationAlignedLocation","_setFocused","action","ensureScreenLocation","computeScreenPixelSizeAt","renderLocation","_calculateModelTransformOffset","re","projectToRenderScreen","renderToScreen","available","o","J","_getCollisionRadius","r","screenLocation","paths","_getWorldToScreenObjectScale","_calculateObjectTransform","$","a","c","Q","length","ie","K","direction","l","h","d","X","_","oe","u","ne","ee","m","se","_calculateModelTransformPosition","g","manipulator3D","_stage","engineLayerId","isPickable","addToViewContent","id","engineLayerReferences","materialIdReferences","Map","ae","extent","elevationInfo","mode","elevationProvider","_getFocusedSize","focused","objectsByState","_ensureEngineResources","selected","stateMask","objects","setVisible","objectTransformation","getContent","Set","renderObjects","forEach","material","has","push","geometry","transform","Array","isArray","addGeometry","idHint","castShadow","get","set","layer","materials","_addResourcesToStage","addObject","removeObject","delete","Y","isVisible","areAnyResourcesVisible","R","screenStart","G","screenEnd","renderStart","renderEnd","plane","ray","H","sceneIntersectionHelper","intersectElevationFromScreen","mapStart","mapEnd","C","U","k","toMap","next","D","worldUpAtPosition","eye","T","A","execute","F","disableDisplay","M","options","selectionMode","store","requiresGroundFeedback","enableDraped","exclude","p","f","S","map","ground","opacity","intersectIntersectorScreen","results","min","getIntersectionPoint","intersector","surfaceType","color","transparent","writeDepth","cullFace","renderOccluded","w","b","O","Math","atan2","getViewForGraphic","computeAttachmentOrigin","v","builder","bindPassUniforms","setUniform1f","perScreenPixelRatio","screenSize","L","_viewUp","_viewForward","_viewRight","_ray","_viewport","_padding","_fov","PI","_nearFar","_viewDirty","_viewMatrix","_projectionDirty","_projectionMatrix","_viewProjectionDirty","_viewProjectionMatrix","_viewInverseTransposeMatrixDirty","_viewInverseTransposeMatrix","_frustumDirty","_frustum","_fullViewport","_contextNavigation","pixelRatio","relativeElevation","_eye","_center","_up","_compareAndSetView","origin","center","_ensureViewClean","width","height","fullWidth","fullHeight","projectionMatrix","viewMatrix","near","tan","fovY","aspect","far","_recomputeFrustum","fovX","perRenderPixelRatio","up","abs","B","max","computeRenderPixelSizeAtDist","viewDirectionDistance","computeScreenPixelSizeAtDist","viewForward","padding","viewport","setViewport","fullViewport","viewProjectionMatrix","unprojectFromRenderScreen","screenToRender","N","computeUpGlobal","computeUpLocal","markViewDirty","performanceInfo","queryDuration","numObjectsTested","tolerance","verticalOffset","_rayEndPoint","_rayStartPointTransformed","_rayEndPointTransformed","resetWithRay","_numObjectsTested","init","point","filterPredicate","intersectObject","getSpatialQueryAccelerator","forEachAlongRayWithVerticalOffset","forEachAlongRay","hud","forEachDegenerateObject","getObjects","sortResults","geometryRecords","instanceParameters","setAndInvalidateLazyTransforms","getShaderTransformation","inverse","objectTransform","intersect","dist","drapedLayerOrder","all","shaderTransformation","sort","Number","MAX_VALUE","drapedLayerGraphicOrder","MIN_VALUE","DEFAULT_TOLERANCE","V","selectOpaqueTerrainOnly","invisibleTerrain","backfacesTerrain","isFiltered","j","_transform","_transformInverse","value","_transformInverseTranspose","_transformTranspose","_transformInverseRotation","invalidate","invalidateLazyTransforms","setTransformMatrix","multiplyTransform","original","update","dirty","normal","transformation","hasIntersectionPoint","W","target","name","geometryId","triangleNr","obj","metadata","layerUid","findLayerByUid","createGraphic","graphicsView","mockLayerId","graphics","getGraphicFromGraphicUid","graphicUid","allLayerViews","find","suspended","getGraphicFromIntersectorMetadata","sphere","tmpVertex","sqrt","componentLocalOriginLength","mbs","obb","halfSize","quaternion","localOrigin","super","supportsEdges","techniqueConfig","_vertexAttributeLocations","params","slicePlaneEnabled","transparencyPassType","getAttribute","applyToVertex","data","computeRenderPixelSizeAt","applyToAabb","P","updateParameters","technique","techniqueRep","acquireAndReleaseExisting","getTechniqueConfig","configuration","bindProgram","program","bindPass","getPassParameters","shadingTint","shadingDirection","vec3f","vertexBufferLayout","createBuffer","indices","invTranspTransformation","vertexAttr","Error","size","getField","cache","texture","dispose","clear","patternId","refCount","bind","patternToTextureData","internalFormat","pixelFormat","dataType","wrapMode","bindTexture","acquire","release","join","reduce","Uint8Array","shader","sliceHighlightDisabled","sliceEnabledForVertexPrograms","rctx","generateSource","setUniform4fv","blendColor","E","setUniform3fv","setUniformMatrix4fv","viewInverseTransposeMatrix","blending","culling","face","depthTest","func","depthWrite","colorWrite","polygonOffset","setPipelineState","arguments","count","prototype","POSITION","NORMAL","OFFSET","position"],"mappings":"yMAIypB,SAASA,EAAEA,GAAG,MAAMC,EAAE,IAAI,KAAE,OAAOA,EAAEC,QAAQ,IAAE,CAACC,aAAY,IAAKF,EAAEC,QAAQ,YAAU,IAAID,EAAEC,QAAQ,IAAEF,GAAGC,EAAEG,SAASF,QAAQ,KAAGD,EAAEI,OAAOC,SAASC,IAAI,OAAO,QAAQA,IAAI,OAAO,QAAQN,EAAEG,SAASE,SAASC,IAAI,QAAQ,QAAQN,EAAEO,WAAWD,IAAI,WAAW,QAAQN,EAAEQ,SAASF,IAAI,iBAAiB,QAAQP,EAAEU,mBAAmBT,EAAEO,WAAWD,IAAI,SAAS,QAAQP,EAAEW,iBAAiBV,EAAEI,OAAOC,SAASC,IAAI,aAAa,QAAQN,EAAEG,SAASE,SAASC,IAAI,cAAc,QAAQA,IAAI,mBAAmB,QAAQN,EAAEO,WAAWD,IAAI,SAAS,QAAQN,EAAEQ,SAASF,IAAI,cAAc,SAASN,EAAEI,OAAOO,KAAKL,IAAI,GAAC;;yBAEvsCP,EAAEU,kBAAkB,sCAAsC;KAC9EV,EAAEW,gBAAgBV,EAAEI,OAAOO,KAAKL,IAAI,GAAC;;;OAGnCN,EAAEI,OAAOO,KAAKL,IAAI,GAAC;;;KAGrBN,EAAEG,SAASQ,KAAKL,IAAI,GAAC;;;OAGnBP,EAAEW,eAAeV,EAAEG,SAASQ,KAAKL,IAAI,GAAC;;;;OAItCN,EAAEG,SAASQ,KAAKL,IAAI,GAAC;;OAErBN,EAAEG,SAASQ,KAAKL,IAAI,GAAC;2BACD,UAAQ;;;QAG3B,IAAIP,EAAEa,OAAO,GAAC,qCAAqC;;QAEnD,IAAIb,EAAEa,OAAO,GAAC,8DAA8Db,EAAEc,WAAW,iDAAiD,KAAK;;OAEhJb,EAAE,IAAIA,EAAEc,OAAOC,OAAO,CAACC,UAAU,KAAKC,MAAMlB,K,iUC1BskD,MAAMmB,EAAE,YAAYC,GAAGC,KAAKC,OAAO,IAAI,IAAED,KAAKE,WAAW,CAACC,OAAO,EAAEC,SAAS,MAAMJ,KAAKK,cAAc,CAACC,KAAK,SAASN,KAAKO,kBAAkB,EAAEP,KAAKQ,eAAe,GAAGR,KAAKS,wBAAuB,EAAGT,KAAKU,YAAW,EAAGV,KAAKW,gBAAgB,EAAEX,KAAKY,QAAQ,GAAGZ,KAAKa,aAAY,EAAGb,KAAKc,gBAAgB,EAAEd,KAAKe,gBAAgB,IAAIf,KAAKgB,eAAc,EAAGhB,KAAKiB,iBAAgB,SAAIjB,KAAKkB,YAAY,KAAKlB,KAAKmB,iBAAgB,SAAInB,KAAKoB,sBAAqB,EAAGpB,KAAKqB,UAAU,IAAI,IAAE,CAACC,EAAE,EAAEC,EAAE,EAAEC,EAAE,IAAIxB,KAAKyB,0BAA0B,IAAI,IAAEzB,KAAK0B,gCAA+B,EAAG1B,KAAK2B,aAAY,EAAG3B,KAAK4B,YAAW,EAAG5B,KAAK6B,WAAU,EAAG7B,KAAK8B,OAAO,KAAK9B,KAAK+B,WAAU,EAAG/B,KAAKgC,UAAS,EAAGhC,KAAKiC,WAAU,EAAGjC,KAAKkC,WAAU,EAAGlC,KAAKmC,OAAO,EAAEnC,KAAKoC,UAAS,EAAGpC,KAAKqC,OAAO,IAAI,iBAAerC,KAAKsC,gBAAgB,CAACC,kBAAiB,UAAIC,wBAAuB,UAAIC,UAAU,GAAGzC,KAAK0C,sBAAqB,EAAG1C,KAAK2C,sBAAsB,KAAK3C,KAAK4C,8BAA6B,EAAG5C,KAAK6C,iBAAiB,KAAK7C,KAAK8C,WAAU,EAAG9C,KAAK+C,eAAe,KAAK/C,KAAKgD,sBAAsB,KAAKhD,KAAKqB,UAAU4B,iBAAiBlD,EAAEmD,KAAKD,iBAAiB,IAAI,MAAME,KAAKpD,EAAEC,KAAKmD,GAAGpD,EAAEoD,GAAGnD,KAAKkD,KAAKE,OAAOpD,KAAKkD,KAAKE,MAAMnD,QAAQD,KAAKC,OAAOoD,SAASrD,KAAKkD,KAAKE,MAAMnD,QAAQ,UAAUD,KAAKsD,4BAA4BtD,KAAK6C,iBAAiB,KAAK7C,KAAKkD,KAAK,KAAKlD,KAAKC,OAAO,KAAK,oBAAoB,OAAOD,KAAKuD,eAAe,kBAAkBxD,GAAGC,KAAKuD,eAAexD,EAAEC,KAAK0B,gCAA+B,EAAG1B,KAAKoB,sBAAqB,EAAGpB,KAAKwD,sBAAsB,oBAAoB,OAAOxD,KAAKQ,eAAe,kBAAkBT,GAAGC,KAAKsD,4BAA4BtD,KAAK6C,iBAAiB,KAAK7C,KAAKQ,eAAeT,EAAE0D,QAAQzD,KAAKwD,sBAAsB,cAAczD,GAAGA,IAAIC,KAAKU,aAAaV,KAAKU,WAAWX,EAAEC,KAAKwD,uBAAuB,gBAAgB,OAAOxD,KAAKU,WAAW,iBAAiB,OAAOV,KAAKW,kBAAkB,IAAIX,KAAKW,iBAAiBX,KAAKwD,sBAAsB,CAACE,QAAO,SAAE,KAAM1D,KAAKW,kBAAkB,IAAIX,KAAKW,iBAAiBX,KAAKwD,0BAA0B,WAAWzD,GAAGA,IAAIC,KAAKY,UAAUZ,KAAKY,QAAQb,EAAEC,KAAKwD,uBAAuB,aAAa,OAAOxD,KAAKY,QAAQ,eAAeb,GAAGA,IAAIC,KAAKa,cAAcb,KAAKa,YAAYd,EAAEC,KAAKwD,uBAAuB,iBAAiB,OAAOxD,KAAKa,YAAY,qBAAqB,OAAOb,KAAKiB,gBAAgB,mBAAmBlB,GAAG4D,EAAE5D,KAAKC,KAAK0C,sBAAqB,IAAI,OAAE1C,KAAKiB,gBAAgBlB,GAAGC,KAAKwD,sBAAsB,qBAAqB,OAAOxD,KAAKoB,uBAAuBpB,KAAKoB,sBAAqB,EAAGpB,KAAKkD,KAAKU,mBAAmBC,eAAe7D,KAAK8D,yBAAyB9D,KAAKmB,iBAAiBnB,KAAKgB,eAAehB,KAAKkB,cAAclB,KAAKkB,aAAY,UAAK,SAASnB,EAAEoD,EAAEY,GAAG,OAAOhE,EAAEiE,aAAa,IAAI,QAAQ,OAAO,OAAED,IAAG,EAAG,IAAI,SAAS,CAAC,MAAMnF,GAAE,QAAEmB,EAAE6D,mBAAmBX,mBAAkB,QAAEE,EAAE,EAAEc,EAAG,EAAErF,EAAEsF,SAAQ,SAAE,QAAED,EAAG,KAAI,QAAEA,EAAG,IAAIF,KAAzK,CAA+K/D,KAAKkD,KAAKlD,KAAKmB,gBAAgBnB,KAAKkB,cAAclB,KAAKkB,cAAclB,KAAKkB,YAAY,OAAOlB,KAAKmB,gBAAgB,mBAAmBpB,GAAGC,KAAKkD,KAAKU,mBAAmBO,iBAAiBpE,EAAEC,KAAKqB,WAAWrB,KAAK8D,yBAAyB9D,KAAKqB,UAAU,eAAe,OAAOrB,KAAKqB,UAAU,aAAatB,IAAG,QAAEA,EAAEC,KAAKqB,WAAWrB,KAAKoB,sBAAqB,EAAGpB,KAAK0C,sBAAqB,EAAG1C,KAAK0B,gCAA+B,EAAG1B,KAAKwD,sBAAsBxD,KAAKqC,OAAO+B,KAAK,kBAAkB,CAACC,SAASrE,KAAKqB,YAAY,+BAA+B,OAAOrB,KAAK0B,gCAAgC1B,KAAKsE,8BAA8BtE,KAAKuE,kCAAkCvE,KAAKyB,2BAA2BzB,KAAKyB,0BAA0B,6BAA6B1B,IAAG,QAAEA,EAAEC,KAAKqB,WAAWrB,KAAKsE,8BAA8BtE,KAAKqB,UAAUG,GAAGxB,KAAKE,WAAWC,OAAOH,KAAKuE,kCAAkCvE,KAAKwD,sBAAsBxD,KAAKqC,OAAO+B,KAAK,kBAAkB,CAACC,SAASrE,KAAKqB,YAAY,kCAAkCrB,KAAKyB,0BAA0BH,EAAEtB,KAAKqE,SAAS/C,EAAEtB,KAAKyB,0BAA0BF,EAAEvB,KAAKqE,SAAS9C,EAAE,MAAMxB,GAAE,QAAEC,KAAKE,WAAWE,UAAUJ,KAAKE,WAAWE,SAASJ,KAAKqE,SAAS7C,GAAG,EAAExB,KAAKyB,0BAA0BD,EAAEzB,EAAEC,KAAKE,WAAWC,OAAOH,KAAKyB,0BAA0BwB,iBAAiBjD,KAAKqE,SAASpB,iBAAiBjD,KAAKoB,sBAAqB,EAAGpB,KAAK0C,sBAAqB,EAAG1C,KAAK0B,gCAA+B,EAAG,oBAAoB,OAAM,EAAG,eAAe,OAAO1B,KAAK+B,UAAU,aAAahC,GAAGA,IAAIC,KAAK+B,YAAY/B,KAAK+B,UAAUhC,EAAEC,KAAKwE,YAAYxE,KAAKiC,WAAWjC,KAAK+B,WAAW/B,KAAKwD,uBAAuB,eAAe,OAAOxD,KAAKiC,UAAU,aAAalC,GAAGA,IAAIC,KAAKiC,YAAYjC,KAAKiC,UAAUlC,EAAEC,KAAKwE,YAAYxE,KAAKiC,WAAWjC,KAAK+B,WAAW/B,KAAKwD,uBAAuB,eAAe,OAAOxD,KAAKkC,UAAU,aAAanC,GAAGA,IAAIC,KAAKkC,YAAYlC,KAAKkC,UAAUnC,EAAEC,KAAKwD,sBAAsBxD,KAAKqC,OAAO+B,KAAK,iBAAiB,CAACK,OAAO1E,EAAE,SAAS,cAAc,YAAY,OAAOC,KAAKmC,OAAO,UAAUpC,GAAGA,IAAIC,KAAKmC,SAASnC,KAAKmC,OAAOpC,EAAEC,KAAKwD,uBAAuB,mBAAmBzD,EAAEoD,GAAGA,EAAEnD,KAAKoD,OAAOrD,EAAEC,KAAKoD,QAAQrD,EAAE,YAAYA,GAAGA,IAAIC,KAAKoC,WAAWpC,KAAKoC,SAASrC,EAAEC,KAAKqC,OAAO+B,KAAK,gBAAgB,CAACK,QAAO,IAAK1E,EAAE,QAAQ,aAAa,cAAc,OAAOC,KAAKoC,SAAS,qBAAqB,OAAOpC,KAAK0E,uBAAuB1E,KAAKsC,gBAAgB,uBAAuB,IAAItC,KAAK0C,qBAAqB,OAA6H,IAAI3C,EAAE,GAA5HC,KAAKsC,gBAAgBG,UAAUzC,KAAKC,OAAO0E,yBAAyB3E,KAAK4E,gBAAgB5E,KAAK0C,sBAAqB,EAAYiB,EAAE3D,KAAKiB,iBAAiB,CAAC,MAAMkC,EAAEnD,KAAK6E,+BAA+BC,GAAI/E,GAAE,OAAEoD,EAAEA,EAAEnD,KAAK4E,qBAAqB7E,EAAEC,KAAK4E,eAAe5E,KAAKC,OAAO8E,sBAAsBhF,EAAEC,KAAKsC,gBAAgBE,wBAAwBxC,KAAKC,OAAO+E,eAAehF,KAAKsC,gBAAgBE,uBAAuBxC,KAAKsC,gBAAgBC,kBAAkB,2BAA2B,OAAOvC,KAAK2C,sBAAsB,yBAAyB5C,GAAGC,KAAK2C,sBAAsB5C,EAAEC,KAAK0C,sBAAqB,EAAG1C,KAAKwD,sBAAsB,qBAAqBL,EAAEvE,GAAG,IAAIoB,KAAKiF,UAAU,OAAO,KAAK,MAAMC,GAAE,QAAE/B,EAAEgC,GAAGxG,EAAEqB,KAAKoF,oBAAoBxG,GAAGyG,GAAG,EAAErF,KAAKO,kBAAkB,OAAOP,KAAKK,cAAcC,MAAM,IAAI,QAAQ,IAAG,OAAEN,KAAKsF,eAAe/C,iBAAiB2C,GAAGvG,EAAEA,EAAE,OAAOqB,KAAKsF,eAAe9C,uBAAuB,GAAG6C,EAAE,MAAM,IAAI,OAAO,CAAC,MAAMtF,EAAEC,KAAKK,cAAckF,MAAMpC,EAAEnD,KAAKwF,+BAA+B5G,EAAEoB,KAAKyF,0BAA0BtC,EAAEuC,GAAGC,EAAEhH,EAAEqB,KAAKsF,eAAe7C,UAAUmD,EAAE,gBAAa5F,KAAKC,OAAOiF,EAAEW,GAAG,IAAG,QAAED,GAAG,OAAO,KAAK,IAAI,MAAMzC,KAAKpD,EAAE,CAAC,GAAG,IAAIoD,EAAE2C,OAAO,SAAS,MAAM/F,GAAE,OAAEkE,EAAGd,EAAE,GAAGvE,GAAG,IAAI,IAAImF,EAAE,EAAEA,EAAEZ,EAAE2C,OAAO/B,IAAI,CAAC,MAAMmB,GAAE,OAAEa,EAAG5C,EAAEY,GAAGnF,GAAGD,EAAE,yBAAsB,gBAAaoB,EAAEmF,EAAEc,GAAGJ,GAAG,GAAG,MAAMjH,GAAGA,EAAEgH,EAAEA,EAAE,CAAC,MAAMxC,GAAE,OAAE,WAAQpD,EAAEmF,IAAG,OAAE/B,EAAEA,EAAE,IAAI,MAAMY,GAAE,QAAE,YAAS,OAAO/D,KAAKC,OAAO8E,sBAAsB5B,EAAEY,GAAGA,EAAE,GAAGsB,GAAE,OAAEtF,EAAEmF,IAAI,MAAM,IAAI,OAAO,CAAC,IAAIS,EAAE,MAAM5F,EAAEC,KAAKK,cAAc4F,UAAU9C,EAAE,OAAOwC,EAAE3F,KAAKK,cAAcF,QAAQwF,EAAE,IAAE/G,EAAEoB,KAAKwF,+BAA+BI,EAAE5F,KAAKyF,0BAA0B7G,EAAE8G,GAAGQ,EAAEvH,EAAEqB,KAAKsF,eAAe7C,UAAU0D,EAAE,gBAAanG,KAAKC,OAAOiF,EAAEW,GAAG,IAAG,QAAEM,GAAG,OAAO,KAAK,MAAMC,GAAE,OAAEC,EAAET,GAAGU,GAAE,OAAEC,EAAGxG,EAAEqG,GAAGI,GAAE,OAAEC,EAAGtD,EAAEyC,GAAG,2BAAwBY,EAAEF,EAAEI,GAAI,MAAMC,EAAEC,EAAG,GAAG,kBAAeF,EAAGP,EAAEQ,KAAI,OAAEA,EAAEH,GAAGN,EAAEA,EAAE,OAAOlG,KAAKsF,eAAe9C,uBAAuB,GAAG6C,EAAE,MAAM,IAAI,SAAS,CAAC,MAAME,MAAMxF,EAAEkG,UAAU9C,GAAGnD,KAAKK,cAAczB,EAAEoB,KAAKwF,+BAA+BG,EAAE3F,KAAKyF,0BAA0B7G,EAAE8G,GAAGE,EAAEjH,EAAEqB,KAAKC,OAAO0E,yBAAyB3E,KAAK4E,gBAAgBsB,EAAE,gBAAalG,KAAKC,OAAOiF,EAAEW,GAAG,IAAG,QAAEK,GAAG,OAAO,KAAK,MAAMC,GAAE,OAAEE,EAAEV,GAAGS,GAAE,OAAEG,EAAGpD,EAAEgD,GAAGK,EAAExG,KAAK6G,iCAAiCJ,GAAI,2BAAwBD,EAAEJ,EAAEM,GAAI,MAAMI,EAAEF,EAAG,IAAI,kBAAeF,EAAGR,EAAEY,GAAG,MAAM,IAAI,MAAM3D,KAAKpD,EAAE,CAAC,GAAG,IAAIoD,EAAE2C,OAAO,SAAS,MAAM/F,GAAE,OAAEkE,EAAGd,EAAE,GAAGwC,GAAG,IAAI,IAAI5B,EAAE,EAAEA,EAAEZ,EAAE2C,OAAO/B,IAAI,CAAC,MAAMnF,GAAE,OAAEmH,EAAG5C,EAAEY,GAAG4B,GAAGT,EAAE,eAAY,gBAAanF,EAAEnB,EAAEoH,GAAGc,GAAG,GAAG,MAAM5B,GAAGA,EAAEU,EAAEA,EAAE,CAAC,MAAMzC,GAAE,OAAE,WAAQpD,EAAEnB,IAAG,OAAEuE,EAAEA,EAAE,IAAI,MAAMY,GAAE,QAAE,YAAS,OAAO/D,KAAKC,OAAO8E,sBAAsB5B,EAAEY,GAAGA,EAAE,GAAGsB,GAAE,OAAEtF,EAAEnB,IAAI,MAAM,SAAQ,QAAEoB,KAAKK,eAAe,OAAO,KAAK,OAAON,EAAE,CAACgH,cAAc,KAAK,IAAI/G,KAAKkD,KAAK8D,OAAO,OAAO,MAAM7D,EAAEpD,EAAEgH,cAAc,GAAG/G,KAAK+C,eAAeI,EAAE8D,eAAc,QAAEjH,KAAK+C,gBAAgB,CAAC,MAAMhD,EAAE,IAAI,IAAE,iBAAiB,CAACmH,YAAW,IAAKlH,KAAKkD,KAAK8D,OAAO9H,IAAI,EAAEa,GAAGC,KAAKkD,KAAK8D,OAAOG,iBAAiB,CAACpH,EAAEqH,KAAKpH,KAAK+C,eAAehD,EAAEqH,GAAGjE,EAAE8D,cAAclH,EAAEqH,GAAGjE,EAAEkE,uBAAuBlE,EAAEkE,uBAAuB,GAAG,EAAErH,KAAKgD,sBAAsBG,EAAEmE,sBAAqB,QAAEtH,KAAKgD,yBAAyBhD,KAAKgD,sBAAsB,IAAIuE,IAAIpE,EAAEmE,qBAAqBtH,KAAKgD,uBAAuBhD,KAAKC,OAAOoD,SAASrD,KAAKkD,KAAKE,MAAMnD,QAAQD,KAAK8C,WAAU,EAAG9C,KAAKwD,uBAAsB,QAAExD,KAAKqB,UAAU4B,iBAAiBjD,KAAKkD,KAAKD,oBAAoBjD,KAAKqE,SAAS,IAAI,IAAE,CAAC/C,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEyB,iBAAiBjD,KAAKkD,KAAKD,oBAAoB,OAAOlD,EAAE,CAACgH,cAAc,KAAK,MAAM5D,EAAEpD,EAAEgH,cAAc5D,EAAEkE,wBAAwB,MAAMtD,EAAE,IAAIZ,EAAEkE,sBAAsBtD,IAAIZ,EAAE8D,cAAc,MAAMjH,KAAKsD,0BAA0BS,GAAG/D,KAAK6C,iBAAiB,KAAK7C,KAAK+C,eAAe,KAAK/C,KAAKgD,sBAAsB,KAAKhD,KAAK8C,WAAU,EAAG,eAAe9C,KAAKC,OAAOoD,SAASrD,KAAKkD,KAAKE,MAAMnD,QAAQD,KAAK0C,sBAAqB,EAAG1C,KAAKwD,sBAAsB,kBAAkBzD,IAAG,QAAEC,KAAKqE,SAASmD,EAAGzH,EAAEkD,mBAAkB,QAAElD,EAAE0H,OAAOD,KAAMxH,KAAKqE,SAASrE,KAAKqB,WAAW,4BAA4BtB,EAAEC,KAAKqE,UAAU,IAAG,QAAErE,KAAK0H,eAAe,OAAM,EAAG,IAAIvE,EAAE,KAAK+B,EAAE,EAAE,MAAMvG,GAAE,QAAEqB,KAAK0H,cAAcvH,OAAO,GAAG,OAAOH,KAAK0H,cAAcC,MAAM,IAAI,gBAAgBxE,GAAE,QAAEnD,KAAKkD,KAAK0E,kBAAkB7H,EAAE,WAAW,EAAE,MAAM,IAAI,qBAAqBmF,IAAG,QAAElF,KAAKkD,KAAK0E,kBAAkB7H,EAAE,WAAW,GAAGpB,EAAE,MAAM,IAAI,oBAAoBuG,IAAG,QAAElF,KAAKkD,KAAK0E,kBAAkB7H,EAAE,UAAU,GAAGpB,EAAE,MAAM,IAAI,kBAAkBuG,EAAEvG,EAAE,OAAOuG,IAAIlF,KAAKE,WAAWC,QAAQgD,IAAInD,KAAKE,WAAWE,YAAYJ,KAAKE,WAAWC,OAAO+E,EAAElF,KAAKE,WAAWE,SAAS+C,GAAE,GAAI,sBAAsB,IAAInD,KAAK8C,UAAU,OAAO,IAAI9C,KAAKiF,UAAU,YAAYjF,KAAKsD,4BAA4B,MAAMvD,EAAEC,KAAKwF,+BAA+BrC,EAAEuC,EAAE,IAAG,IAAK1F,KAAKS,uBAAuB,CAAC,MAAMsD,EAAE/D,KAAK6H,gBAAgB7H,KAAKY,QAAQZ,KAAK8H,SAAS/H,EAAEC,KAAKyF,0BAA0B1B,EAAEZ,QAAQnD,KAAKyF,0BAA0B1F,EAAEoD,GAAG,MAAM4E,eAAehE,GAAG/D,KAAKgI,yBAAyBpJ,GAAGoB,KAAK8H,QAAQ,EAAE,IAAI9H,KAAKiI,SAAS,EAAE,GAAG/C,EAAElF,KAAKW,gBAAgB,EAAE,IAAI,MAAMuH,UAAUnI,EAAEoI,QAAQxJ,KAAKoF,EAAE,CAAC,GAAGmB,EAAE,CAAC,IAAI,MAAMnF,KAAKpB,EAAEoB,EAAEqI,YAAW,GAAI,SAAS,MAAMrE,IAAI,IAAI,GAAGhE,MAAMnB,EAAEmB,KAAK,GAAGA,GAAGsF,IAAI,IAAI,MAAMtF,MAAMC,KAAKoD,MAAMrD,KAAK,MAAMA,GAAG,GAAGgE,GAAGsB,EAAE,IAAI,MAAMtF,KAAKpB,EAAEoB,EAAEqI,YAAW,GAAIrI,EAAEsI,qBAAqBlF,OAAO,IAAI,MAAMpD,KAAKpB,EAAEoB,EAAEqI,YAAW,IAAK,yBAAyB,IAAG,QAAEpI,KAAK6C,kBAAkB,CAAC,MAAM9C,EAAEC,KAAKkD,KAAK8D,OAAOsB,WAAW,GAAE,QAAEtI,KAAK+C,iBAAiBI,EAAE,GAAGY,EAAE,IAAIwE,IAAIvI,KAAKwI,cAAcC,SAAQ,EAAGC,SAAS3I,MAAMgE,EAAE4E,IAAI5I,KAAKoD,EAAEyF,KAAK7I,GAAGgE,EAAE7E,IAAIa,OAAO,MAAMnB,EAAE,CAACmB,EAAEoD,KAAK,MAAM0F,SAAS9E,EAAE2E,SAAS9J,EAAEkK,UAAU5D,GAAG/B,EAAE4F,MAAMC,QAAQjF,GAAGA,EAAE0E,SAAStF,GAAGpD,EAAEkJ,YAAY9F,EAAEvE,EAAEsG,KAAKnF,EAAEkJ,YAAYlF,EAAEnF,EAAEsG,IAAIvG,EAAE,IAAI4I,IAAIvH,KAAKwI,cAAcC,SAAS1I,IAAI,MAAMoD,EAAE,IAAI,IAAE,CAAC+F,OAAO,cAAcC,YAAW,IAAKvK,EAAEuE,EAAEpD,GAAG,MAAMgE,EAAEhE,EAAEmI,WAAW,EAAEhD,EAAEvG,EAAEyK,IAAIrF,IAAI,GAAGmB,EAAE0D,KAAKzF,GAAGxE,EAAE0K,IAAItF,EAAEmB,MAAM,MAAMG,EAAE,GAAG1G,EAAE8J,SAAQ,CAAE1I,EAAEoD,KAAKkC,EAAEuD,KAAK,CAACV,UAAU/E,EAAEgF,QAAQpI,OAAOC,KAAK6C,iBAAiB,CAACkF,eAAe1C,EAAEiE,MAAMvJ,EAAEwJ,UAAUpG,GAAG,OAAOnD,KAAKwJ,uBAAuBxJ,KAAK6C,iBAAiB,uBAAuB,GAAG7C,KAAK4C,+BAA8B,QAAE5C,KAAK6C,kBAAkB,OAAO,MAAMkF,eAAehI,EAAEuJ,MAAMnG,EAAEoG,UAAU3K,GAAGoB,KAAK6C,iBAAiBjE,EAAE6J,SAAS1I,IAAI,MAAMoD,GAAE,QAAEnD,KAAKgD,uBAAuBe,EAAEZ,EAAEiG,IAAIrJ,EAAEqH,KAAK,EAAE,IAAIrD,GAAG/D,KAAKkD,KAAK8D,OAAO9H,IAAI,EAAEa,GAAGoD,EAAEkG,IAAItJ,EAAEqH,GAAGrD,EAAE,MAAMhE,EAAE0I,SAAQ,EAAGN,QAAQpI,MAAMA,EAAE0I,SAAS1I,IAAIoD,EAAEsG,UAAU1J,GAAGC,KAAKkD,KAAK8D,OAAO9H,IAAI,EAAEa,SAASC,KAAK4C,8BAA6B,EAAG,0BAA0B7C,GAAE,GAAI,IAAIC,KAAK4C,+BAA8B,QAAE5C,KAAK6C,kBAAkB,OAAO,MAAMkF,eAAe5E,EAAEmG,MAAM1K,EAAE2K,UAAU5K,GAAGqB,KAAK6C,iBAAiBM,EAAEsF,SAAQ,EAAGN,QAAQpI,MAAMA,EAAE0I,SAAS1I,IAAInB,EAAE8K,aAAa3J,GAAGC,KAAKkD,KAAK8D,OAAOtD,OAAO,EAAE3D,EAAEqH,UAAUzI,EAAE8J,SAAS1I,IAAI,MAAMoD,GAAE,QAAEnD,KAAKgD,uBAAuBe,EAAEZ,EAAEiG,IAAIrJ,EAAEqH,IAAI,IAAIrD,GAAG/D,KAAKkD,KAAK8D,OAAOtD,OAAO,EAAE3D,EAAEqH,IAAIjE,EAAEwG,OAAO5J,EAAEqH,KAAKjE,EAAEkG,IAAItJ,EAAEqH,GAAGrD,EAAE,MAAMhE,GAAGC,KAAKkD,KAAK8D,OAAOtD,OAAO,EAAE9E,EAAEwI,IAAIpH,KAAK4C,8BAA6B,EAAG,oBAAoB7C,GAAG,OAAOC,KAAK6H,gBAAgB7H,KAAKkE,QAAO,IAAK,UAAUnE,EAAEC,KAAKe,gBAAgB,GAAG,gBAAgBhB,EAAEoD,GAAG,OAAOpD,GAAGoD,EAAEnD,KAAKc,gBAAgB,GAAG,+BAA+B,OAAOd,KAAKa,YAAY,EAAEb,KAAKsF,eAAe7C,UAAU,iCAAiC1C,GAAG,MAAMoD,EAAEnD,KAAKwF,+BAA+BzB,EAAE/D,KAAKyF,0BAA0BtC,EAAEyG,GAAG,OAAO,OAAE7J,EAAEgE,EAAE,IAAIA,EAAE,IAAIA,EAAE,KAAK,+BAA+BhE,GAAG,MAAMoD,EAAEnD,KAAK6G,iCAAiC9G,GAAG,OAAO,OAAEA,EAAEoD,EAAEnD,KAAK4E,gBAAgB,0BAA0B7E,EAAEgE,GAAG,OAAO,OAAEA,EAAEhE,EAAE,EAAE,EAAE,EAAE,EAAEA,EAAE,EAAE,EAAE,EAAE,EAAEA,EAAE,EAAE,EAAE,EAAE,EAAE,GAAGC,KAAKkB,cAAa,OAAE6C,EAAEA,EAAE/D,KAAKkB,cAAa,OAAE6C,EAAEA,EAAE/D,KAAKiB,iBAAiB8C,EAAE,KAAK/D,KAAK4E,eAAe,GAAGb,EAAE,KAAK/D,KAAK4E,eAAe,GAAGb,EAAE,KAAK/D,KAAK4E,eAAe,GAAGb,EAAE,IAAI,GAAE,QAAE/D,KAAK2C,wBAAwB3C,KAAK2C,sBAAsBoB,GAAGA,EAAE,WAAW,IAAIhE,GAAE,EAAG,IAAG,QAAEC,KAAK6C,kBAAkB,IAAI,MAAMM,KAAKnD,KAAK6C,iBAAiBkF,eAAe,CAAC,MAAMhE,EAAE/D,KAAK6C,iBAAiBkF,eAAe5E,GAAG,IAAI,MAAMA,KAAKY,EAAEoE,QAAQ,GAAGhF,EAAE0G,UAAU,CAAC9J,GAAE,EAAG,MAAM,GAAGA,EAAE,MAAM,MAAM,CAAC+J,uBAAuB/J,IAAI,SAAS4D,EAAE5D,GAAG,OAAO,IAAIA,EAAE,KAAK,IAAIA,EAAE,KAAK,IAAIA,EAAE,IAAI,MAAMoF,GAAE,UAAIa,EAAE,cAAWH,EAAE,cAAWQ,GAAE,SAAIuD,GAAE,SAAIlE,GAAE,SAAIgB,EAAG,cAAWzC,GAAG,SAAI8B,GAAG,SAAIa,GAAG,SAAIL,GAAG,SAAIE,GAAG,SAAI3B,GAAG,SAAI0C,EAAG,IAAI,IAAE,CAAClG,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEyB,iBAAiB,Q,8PCAljb,SAAS8G,EAAEpL,EAAEwE,GAAG,MAAM+B,GAAE,SAAIgB,GAAE,SAAI,IAAIP,GAAE,EAAG,OAAO5B,IAAI,GAAG,UAAUA,EAAEU,OAAO,CAAC,MAAMY,GAAE,QAAEtB,EAAEiG,aAAY,QAAE,aAAU9D,EAAE,gBAAavH,EAAEyE,MAAMnD,OAAOoF,EAAE4E,IAAG,QAAE/D,KAAKP,EAAE,kBAAexC,EAAE+C,EAAEhB,IAAI,IAAIS,EAAE,OAAO,KAAK,MAAMa,GAAE,QAAEzC,EAAEmG,WAAU,QAAE,aAAUvD,EAAE,gBAAahI,EAAEyE,MAAMnD,OAAOuG,EAAEyD,GAAG,OAAO,QAAEtD,GAAG,KAAK,kBAAexD,EAAEwD,EAAET,GAAG,IAAInC,EAAEoG,YAAYjF,EAAEkF,UAAUlE,EAAEmE,MAAMlH,EAAEmH,IAAI3D,GAAG,MAA0Y,SAAS4D,EAAExK,EAAEsF,EAAE1G,EAAEwE,EAAE,MAAM,OAA7Z,SAAWxE,EAAEwE,EAAE+B,EAAEtG,EAAE,MAAM,IAAIgH,EAAE,KAAK,OAAO7B,IAAI,GAAG,UAAUA,EAAEU,SAASmB,EAAEjH,EAAE6L,wBAAwBC,8BAA6B,QAAE1G,EAAEiG,YAAY1I,EAAEyC,EAAEiG,YAAYzI,GAAG4B,EAAE+B,IAAG,QAAEU,KAAI,QAAEhH,MAAK,QAAEgH,EAAEA,EAAEhH,IAAI,OAAO,KAAK,IAAG,QAAEgH,GAAG,OAAO,KAAK,MAAMD,EAAEhH,EAAE6L,wBAAwBC,8BAA6B,QAAE1G,EAAEmG,UAAU5I,EAAEyC,EAAEmG,UAAU3I,GAAG4B,EAAE+B,GAAG,OAAO,QAAES,IAAG,QAAE/G,MAAK,QAAE+G,EAAEA,EAAE/G,GAAG,KAAK,IAAImF,EAAE2G,SAAS9E,EAAE+E,OAAOhF,GAAG,MAAsCiF,CAAE7K,EAAEpB,GAAE,QAAE0G,EAAEtF,EAAEpB,GAAGwE,GAAG,SAAS0H,EAAE9K,EAAEsF,EAAE1G,EAAEwE,EAAE,MAAM,OAAOoH,EAAExK,EAAEpB,GAAE,QAAE0G,GAAGlC,GAAG,SAAS2H,EAAEzF,EAAE1G,EAAEwE,EAAE+B,GAAG,MAAMtG,EAAED,EAAEoM,MAAM1F,EAAE2E,YAAY,CAACnL,QAAQ,CAACsE,KAAK,OAAO,QAAEvE,GAAGiM,EAAElM,EAAEwE,EAAEvE,EAAEsG,GAAG,KAAK,SAASiB,EAAEpG,EAAEsF,EAAE1G,GAAG,IAAIwE,EAAE,KAAK,MAAM+B,EAAE,IAAI,KAAE,OAAOA,EAAE8F,KAAKjB,EAAEhK,EAAE,SAASA,EAAEsF,GAAG,MAAM1G,EAAEsM,EAAE9H,EAAEQ,EAAEuB,EAAE,cAAWnF,EAAE6D,mBAAmBsH,kBAAkB7F,EAAE1G,GAAG,MAAMC,GAAE,OAAEsG,EAAEvG,GAAE,OAAEwE,EAAEkC,EAAEtF,EAAEqD,MAAMnD,OAAOkL,MAAM,OAAO,OAAEvM,EAAEA,EAAED,GAAG,2BAAwB0G,EAAEzG,EAAEsG,GAA1K,CAA8KnF,EAAEsF,KAAK2F,KAAsH,SAAWjL,EAAEsF,GAAG,MAAM1G,GAAE,SAAIwE,GAAE,OAAEkC,GAAGtF,EAAE6D,mBAAmBsH,kBAAkB7F,EAAE1G,GAAG,MAAMC,GAAE,SAAIgH,GAAE,SAAIM,EAAEtH,KAAO,OAAEA,EAAEA,EAAEyG,GAAG,kBAAe1G,EAAEC,EAAEA,GAAG,WAAWmB,EAAEiE,cAAa,OAAEpF,IAAG,SAAE,IAAAwH,GAAEzH,EAAEC,IAAI,KAAKuE,IAAG,OAAEvE,GAAE,OAAEA,EAAED,EAAE,MAAM0G,IAAU,OAAEzG,EAAEA,EAAEyG,GAAGzG,GAAG,OAAOmB,IAAIA,EAAEoK,YAAYjE,GAAE,OAAEtH,EAAEmB,EAAEoK,cAAcpK,EAAEqK,UAAUlE,GAAE,OAAEN,EAAE7F,EAAEqK,YAAYrK,GAAhaqL,CAAErL,EAAEsF,IAAI2F,KAA2Z,SAAW3F,EAAE1G,GAAG,MAAMuG,EAAEG,EAAEzB,mBAAmB,OAAOyB,IAAI,MAAMzG,EAAEsG,EAAEf,iBAAiBkB,EAAE8E,YAAY,IAAI,IAAExL,GAAGiH,EAAEV,EAAEf,iBAAiBkB,EAAE+E,UAAU,IAAI,IAAEzL,GAAG,OAAO,QAAEC,KAAI,QAAEgH,GAAG,IAAIP,EAAEqF,SAAS9L,EAAE+L,OAAO/E,GAAG,MAAvlByF,CAAEtL,EAAEpB,IAAIqM,MAAMjL,IAAIA,EAAE4K,OAAOrJ,EAAEvB,EAAE2K,SAASpJ,EAAEvB,EAAE4K,OAAOpJ,EAAExB,EAAE2K,SAASnJ,EAAE4B,EAAEpD,KAAKA,IAAIoD,EAAE,KAAK+B,EAAEoG,QAAQvL,GAAGoD,GAA4f,SAASoI,EAAElG,GAAG,IAAI1G,EAAE,KAAK,OAAOwE,IAAI,OAAOA,EAAEsB,QAAQ,IAAI,QAAQ9F,EAAE0G,EAAEmG,iBAAiB,MAAM,IAAI,MAAM,IAAI,UAAS,QAAE7M,KAAKA,EAAE+E,SAAS/E,EAAE,MAAM,OAAOwE,GAAG,SAASsI,EAAEvG,EAAEU,EAAE,MAAM,IAAID,EAAE,KAAK,MAAMa,EAAE,IAAI,IAAEtB,EAAE9B,MAAMuE,MAAMnB,EAAEkF,QAAQC,eAAc,EAAGnF,EAAEkF,QAAQE,MAAM,EAAE,MAAMjF,GAAE,UAAIP,EAAE,CAACyF,wBAAuB,EAAGC,cAAa,EAAGC,QAAQ,IAAIxD,KAAKyD,GAAE,SAAIC,GAAE,QAAErG,EAAEV,EAAEjC,kBAAkBiJ,EAAEnM,IAAImF,EAAEiH,IAAIC,QAAQlH,EAAEiH,IAAIC,OAAOC,QAAQ,EAAEjG,EAAE2F,QAAQ7M,IAAI,MAAGkH,EAAE2F,QAAQpC,OAAO,MAAGzE,EAAEsF,wBAAwB8B,4BAA2B,QAAEvM,EAAE4G,GAAGH,EAAEJ,GAAG,MAAMf,EAAEmB,EAAE+F,QAAQC,IAAI,IAAI7N,EAAE,GAAG0G,EAAEoH,qBAAqBT,GAAGrN,EAAE,oBAAoB0G,EAAEqH,YAAY,EAAE,MAAM,CAAC,IAAIlG,EAAE+F,QAAQH,OAAOK,qBAAqBT,GAAG,OAAO,KAAKrN,EAAE,EAAE,MAAMiH,EAAE,IAAI,IAAE,CAAC3C,iBAAiBgJ,IAAI,OAAO/G,EAAEtB,mBAAmBO,iBAAiB6H,EAAEpG,GAAG,CAACvB,SAASuB,EAAE+G,YAAYhO,IAAI,OAAOA,IAAI,GAAG,UAAUA,EAAE8F,OAAO,CAAC,MAAMY,EAAE6G,EAAEvN,EAAEqL,aAAarE,GAAE,QAAEN,GAAGA,EAAEhB,SAAS,KAAK,IAAG,QAAEsB,GAAG,OAAO,KAAK,MAAMxC,EAAE+I,EAAEvN,EAAEuL,WAAW,OAAO,QAAE/G,GAAG,IAAIxE,EAAE+L,SAAS/E,EAAEgF,OAAOxH,EAAEkB,SAASsI,YAAYxJ,EAAEwJ,aAAa,MAAM,MAAM1B,GAAE,SAAItH,GAAE,SAAIsG,EAAE,e,mOCAtgG,SAAS7D,EAAErG,EAAEoD,EAAE,GAAG,MAAMkC,GAAE,OAAEtF,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE+F,OAAO,EAAE/F,EAAE,GAAG,GAAGpB,EAAEoB,EAAE,GAAG,EAAE,OAAO,IAAI,IAAE,CAAC6M,MAAMvH,EAAEwH,YAAYlO,EAAEmO,YAAW,EAAGC,SAAS,EAAEC,eAAe7J,GAAG,eAAe,SAAS8J,EAAElN,EAAEoD,EAAE,GAAG,MAAMkC,GAAE,OAAEtF,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG,IAAIA,EAAE+F,OAAO/F,EAAE,GAAG,GAAG,OAAO,IAAI,IAAE,CAAC6M,MAAMvH,EAAEwH,aAAY,EAAGC,YAAW,EAAGC,SAAS,EAAEC,eAAe7J,GAAG,uBAAuB,SAAS+J,EAAEnN,EAAEoD,EAAEkC,GAAG,OAAO,IAAI,IAAE,CAACnC,KAAKnD,EAAEyI,cAAc,CAAC,CAACK,SAAS,IAAI,IAAE,yBAAuB,EAAE,GAAG,IAAI,eAAeH,SAAStC,GAAE,OAAEjD,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG,MAAMkC,EAAEA,EAAE,QAAQ,SAAS9D,EAAExB,EAAEoD,EAAEY,EAAE6B,GAAG,MAAMM,GAAE,OAAE,WAAQnG,EAAEgE,GAAGyC,EAA2F,SAAWzG,EAAEoD,EAAEkC,EAAEH,GAAG,MAAMS,GAAE,OAAE,WAAQ5F,GAAG6F,GAAE,OAAE,WAAQzC,GAAGwD,GAAE,OAAE,WAAQhB,EAAEC,GAAG,OAAOV,EAAE,GAAGS,EAAE,GAAGT,EAAE,GAAGS,EAAE,GAAGT,EAAE,GAAGS,EAAE,GAAGT,EAAE,GAAG,EAAEA,EAAE,GAAGU,EAAE,GAAGV,EAAE,GAAGU,EAAE,GAAGV,EAAE,GAAGU,EAAE,GAAGV,EAAE,GAAG,EAAEA,EAAE,GAAGyB,EAAE,GAAGzB,EAAE,GAAGyB,EAAE,GAAGzB,EAAE,IAAIyB,EAAE,GAAGzB,EAAE,IAAI,EAAEA,EAAE,IAAIG,EAAE,GAAGH,EAAE,IAAIG,EAAE,GAAGH,EAAE,IAAIG,EAAE,GAAGH,EAAE,IAAI,EAAEA,EAAnUiI,CAAEjH,GAAE,OAAE,WAAQN,EAAEM,GAAGnC,EAAE,aAAS,IAAA4B,GAAEa,EAAEA,GAAG,MAAMwF,GAAE,OAAE,WAAQ7I,EAAEqD,GAAG,OAAO4G,KAAKC,MAAMrB,EAAE,GAAGA,EAAE,IAAgP,SAASlB,EAAE3H,EAAEkC,GAAG,MAAM1G,EAAEwE,EAAEmK,kBAAkBjI,GAAG,OAAO,QAAE1G,IAAI,4BAA4BA,EAAEA,EAAE4O,wBAAwBlI,EAAElC,EAAEF,kBAAkB,KAAK,SAASuK,EAAEnI,EAAE1G,EAAEuG,GAAG,MAAMnB,EAAE+G,EAAEzF,EAAEH,IAAG,QAAEnB,GAAGpF,EAAEmF,yBAAyBC,EAAE,SAAShE,EAAEsF,GAAG,IAAG,QAAEA,GAAG,OAAO,MAAM1G,GAAE,QAAE0G,IAAM,QAAE1G,KAAUoB,EAAEsE,UAAS,QAAE1F,IAAtE,CAA0EA,EAAEuG,EAAE2D,Y,kDCA1xD9E,E,YAAG,SAASA,GAAGA,EAAE0J,QAAQ,SAAS1J,EAAEsB,GAAGtB,EAAE/E,OAAOC,SAASC,IAAI,SAAS,QAAQA,IAAI,sBAAsB,SAASA,IAAI,aAAa,SAAS6E,EAAE/E,OAAOO,KAAKL,IAAI,GAAC;;;;;;;;;;MAUlN6E,EAAE2J,iBAAiB,SAAS3N,EAAEgE,EAAEsB,GAAGtF,EAAE4N,aAAa,sBAAsBtI,EAAEpF,OAAO2N,qBAAqB7N,EAAE4N,aAAa,aAAa5J,EAAE8J,aAV7E,CAU2F9J,IAAIA,EAAE,M,oNCVg2B,MAAM+J,EAAE,YAAY/J,EAAE,KAAKhE,EAAE,KAAKsF,EAAE,MAAMrF,KAAK+N,SAAQ,SAAI/N,KAAKgO,cAAa,SAAIhO,KAAKiO,YAAW,SAAIjO,KAAKkO,KAAK,qBAAkBlO,KAAKmO,WAAU,OAAE,EAAE,EAAE,EAAE,GAAGnO,KAAKoO,UAAS,OAAE,EAAE,EAAE,EAAE,GAAGpO,KAAKqO,KAAK,GAAG,IAAIjB,KAAKkB,GAAGtO,KAAKuO,UAAS,OAAE,EAAE,KAAKvO,KAAKwO,YAAW,EAAGxO,KAAKyO,aAAY,SAAIzO,KAAK0O,kBAAiB,EAAG1O,KAAK2O,mBAAkB,SAAI3O,KAAK4O,sBAAqB,EAAG5O,KAAK6O,uBAAsB,SAAI7O,KAAK8O,kCAAiC,EAAG9O,KAAK+O,6BAA4B,SAAI/O,KAAKgP,eAAc,EAAGhP,KAAKiP,SAAS,cAAWjP,KAAKkP,eAAc,SAAIlP,KAAKmP,oBAAmB,EAAGnP,KAAKoP,WAAW,EAAEpP,KAAKqP,kBAAkB,EAAErP,KAAKsP,MAAK,QAAEvL,IAAG,OAAEA,IAAG,SAAI/D,KAAKuP,SAAQ,QAAExP,IAAG,OAAEA,IAAG,SAAIC,KAAKwP,KAAI,QAAEnK,IAAG,OAAEA,IAAG,OAAE,EAAE,EAAE,GAAG,UAAU,OAAOrF,KAAKsP,KAAK,QAAQnM,GAAGnD,KAAKyP,mBAAmBtM,EAAEnD,KAAKsP,MAAM,aAAa,OAAOtP,KAAKuP,QAAQ,WAAWpM,GAAGnD,KAAKyP,mBAAmBtM,EAAEnD,KAAKuP,SAAS,UAAU,OAAOvP,KAAKkO,KAAKwB,OAAO1P,KAAKmL,IAAInL,KAAKkO,KAAKjI,YAAYjG,KAAKkO,KAAKjI,WAAU,WAAK,OAAEjG,KAAKkO,KAAKjI,UAAUjG,KAAK2P,OAAO3P,KAAKmL,KAAKnL,KAAKkO,KAAK,SAAS,OAAOlO,KAAKwP,IAAI,OAAOrM,GAAGnD,KAAKyP,mBAAmBtM,EAAEnD,KAAKwP,KAAK,iBAAiB,OAAOxP,KAAK4P,mBAAmB5P,KAAKyO,YAAY,eAAetL,IAAG,OAAEnD,KAAKyO,YAAYtL,GAAGnD,KAAKwO,YAAW,EAAGxO,KAAK8O,kCAAiC,EAAG9O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,EAAG,kBAAkB,OAAOhP,KAAK4P,mBAAmB5P,KAAKgO,aAAa,aAAa,OAAOhO,KAAK4P,mBAAmB5P,KAAK+N,QAAQ,gBAAgB,OAAO/N,KAAK4P,mBAAmB5P,KAAKiO,WAAW,cAAc,OAAOjO,KAAKuO,SAAS,WAAW,OAAOvO,KAAKuO,SAAS,GAAG,SAASpL,GAAGnD,KAAKuO,SAAS,KAAKpL,IAAInD,KAAKuO,SAAS,GAAGpL,EAAEnD,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,GAAI,UAAU,OAAOhP,KAAKuO,SAAS,GAAG,QAAQpL,GAAGnD,KAAKuO,SAAS,KAAKpL,IAAInD,KAAKuO,SAAS,GAAGpL,EAAEnD,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,GAAI,eAAe,OAAOhP,KAAKmO,UAAU,aAAahL,GAAGnD,KAAKsB,EAAE6B,EAAE,GAAGnD,KAAKuB,EAAE4B,EAAE,GAAGnD,KAAK6P,MAAM1M,EAAE,GAAGnD,KAAK8P,OAAO3M,EAAE,GAAG,QAAQ,OAAOnD,KAAKmO,UAAU,GAAG,MAAMhL,GAAGA,GAAGnD,KAAKoO,SAAS,GAAGpO,KAAKmO,UAAU,KAAKhL,IAAInD,KAAKmO,UAAU,GAAGhL,EAAEnD,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,GAAI,QAAQ,OAAOhP,KAAKmO,UAAU,GAAG,MAAMhL,GAAGA,GAAGnD,KAAKoO,SAAS,GAAGpO,KAAKmO,UAAU,KAAKhL,IAAInD,KAAKmO,UAAU,GAAGhL,EAAEnD,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,GAAI,YAAY,OAAOhP,KAAKmO,UAAU,GAAG,UAAUhL,GAAGnD,KAAKmO,UAAU,KAAKhL,IAAInD,KAAKmO,UAAU,GAAGhL,EAAEnD,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,GAAI,aAAa,OAAOhP,KAAKmO,UAAU,GAAG,WAAWhL,GAAGnD,KAAKmO,UAAU,KAAKhL,IAAInD,KAAKmO,UAAU,GAAGhL,EAAEnD,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,GAAI,gBAAgB,OAAOhP,KAAKmO,UAAU,GAAGnO,KAAKoO,SAAS,GAAGpO,KAAKoO,SAAS,GAAG,cAAcjL,GAAGnD,KAAK6P,MAAM1M,GAAGnD,KAAKoO,SAAS,GAAGpO,KAAKoO,SAAS,IAAI,iBAAiB,OAAOpO,KAAKmO,UAAU,GAAGnO,KAAKoO,SAAS,GAAGpO,KAAKoO,SAAS,GAAG,eAAejL,GAAGnD,KAAK8P,OAAO3M,GAAGnD,KAAKoO,SAAS,GAAGpO,KAAKoO,SAAS,IAAI,mBAAmB,OAAOpO,KAAKkP,cAAc,GAAGlP,KAAKmO,UAAU,GAAGnO,KAAKoO,SAAS,GAAGpO,KAAKkP,cAAc,GAAGlP,KAAKmO,UAAU,GAAGnO,KAAKoO,SAAS,GAAGpO,KAAKkP,cAAc,GAAGlP,KAAK+P,UAAU/P,KAAKkP,cAAc,GAAGlP,KAAKgQ,WAAWhQ,KAAKkP,cAAc,aAAa,OAAOlP,KAAK6P,MAAM7P,KAAK8P,OAAO,cAAc,OAAO9P,KAAKoO,SAAS,YAAYjL,GAAGnD,KAAKoO,SAAS,KAAKjL,EAAE,IAAInD,KAAKoO,SAAS,KAAKjL,EAAE,IAAInD,KAAKoO,SAAS,KAAKjL,EAAE,IAAInD,KAAKoO,SAAS,KAAKjL,EAAE,KAAKnD,KAAKmO,UAAU,IAAIhL,EAAE,GAAGnD,KAAKoO,SAAS,GAAGpO,KAAKmO,UAAU,IAAIhL,EAAE,GAAGnD,KAAKoO,SAAS,GAAGpO,KAAKmO,UAAU,IAAIhL,EAAE,GAAGA,EAAE,IAAInD,KAAKoO,SAAS,GAAGpO,KAAKoO,SAAS,IAAIpO,KAAKmO,UAAU,IAAIhL,EAAE,GAAGA,EAAE,IAAInD,KAAKoO,SAAS,GAAGpO,KAAKoO,SAAS,KAAI,OAAEpO,KAAKoO,SAASjL,GAAGnD,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,GAAI,2BAA2B,OAAOhP,KAAK4O,wBAAuB,OAAE5O,KAAK6O,sBAAsB7O,KAAKiQ,iBAAiBjQ,KAAKkQ,YAAYlQ,KAAK4O,sBAAqB,GAAI5O,KAAK6O,sBAAsB,uBAAuB,GAAG7O,KAAK0O,iBAAiB,CAAC,MAAMvL,EAAEnD,KAAK6P,MAAM9L,EAAE/D,KAAK8P,OAAO/P,EAAEC,KAAKmQ,KAAK/C,KAAKgD,IAAIpQ,KAAKqQ,KAAK,GAAGhL,EAAEtF,EAAEC,KAAKsQ,QAAO,OAAEtQ,KAAK2O,mBAAmBtJ,GAAG,EAAE,EAAErF,KAAKoO,SAAS,GAAGjL,GAAGkC,GAAG,EAAE,EAAErF,KAAKoO,SAAS,GAAGjL,IAAIpD,GAAG,EAAE,EAAEC,KAAKoO,SAAS,GAAGrK,GAAGhE,GAAG,EAAE,EAAEC,KAAKoO,SAAS,GAAGrK,GAAG/D,KAAKmQ,KAAKnQ,KAAKuQ,KAAKvQ,KAAK0O,kBAAiB,EAAG,OAAO1O,KAAK2O,kBAAkB,qBAAqBxL,IAAG,OAAEnD,KAAK2O,kBAAkBxL,GAAGnD,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,EAAG,UAAU,OAAOhP,KAAKqO,KAAK,QAAQlL,GAAGnD,KAAKqO,KAAKlL,EAAEnD,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,EAAG,WAAW,OAAO,QAAEhP,KAAKqO,KAAKrO,KAAK6P,MAAM7P,KAAK8P,QAAQ,SAAS3M,GAAGnD,KAAKqO,MAAK,QAAElL,EAAEnD,KAAK6P,MAAM7P,KAAK8P,QAAQ9P,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,EAAG,WAAW,OAAO,QAAEhP,KAAKqO,KAAKrO,KAAK6P,MAAM7P,KAAK8P,QAAQ,SAAS3M,GAAGnD,KAAKqO,MAAK,QAAElL,EAAEnD,KAAK6P,MAAM7P,KAAK8P,QAAQ9P,KAAK0O,kBAAiB,EAAG1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,eAAc,EAAG,eAAe,OAAO,OAAEhP,KAAKuP,QAAQvP,KAAKsP,MAAM,cAAc,OAAOtP,KAAKwQ,oBAAoBxQ,KAAKiP,SAAS,iCAAiC,OAAOjP,KAAK8O,kCAAkC9O,KAAKwO,eAAc,OAAExO,KAAK+O,4BAA4B/O,KAAKkQ,aAAY,OAAElQ,KAAK+O,4BAA4B/O,KAAK+O,6BAA6B/O,KAAK8O,kCAAiC,GAAI9O,KAAK+O,4BAA4B,gBAAgB5L,GAAG,MAAMY,EAAE,EAAEZ,EAAE,EAAE,OAAO,EAAEnD,KAAKmQ,KAAKnQ,KAAKuQ,KAAKvQ,KAAKuQ,IAAIvQ,KAAKmQ,KAAKpM,GAAG/D,KAAKuQ,IAAIvQ,KAAKmQ,OAAO,0BAA0B,OAAO/C,KAAKgD,IAAIpQ,KAAKyQ,KAAK,IAAIzQ,KAAK6P,MAAM,GAAG,0BAA0B,OAAO7P,KAAK0Q,oBAAoB1Q,KAAKoP,WAAW,kBAAkB,OAAOpP,KAAKqP,mBAAmBrP,KAAKqP,mBAAmB,EAAE,SAASlM,GAAG,MAAMY,EAAEZ,EAAE,OAAO,OAAEnD,KAAKsP,KAAKvL,EAAEuL,OAAM,OAAEtP,KAAKuP,QAAQxL,EAAEwL,UAAS,OAAEvP,KAAKwP,IAAIzL,EAAEyL,MAAK,OAAExP,KAAKmO,UAAUpK,EAAEoK,YAAW,OAAEnO,KAAKoO,SAASrK,EAAEqK,WAAU,OAAEpO,KAAKuO,SAASxK,EAAEwK,UAAUvO,KAAKqO,KAAKtK,EAAEsK,KAAKrO,KAAKqP,kBAAkBlM,EAAEkM,kBAAkBrP,KAAKwO,WAAWzK,EAAEyK,WAAWxO,KAAKwO,cAAa,OAAExO,KAAKyO,YAAY1K,EAAE0K,cAAa,OAAEzO,KAAKiO,WAAWlK,EAAEkK,aAAY,OAAEjO,KAAK+N,QAAQhK,EAAEgK,UAAS,OAAE/N,KAAKgO,aAAajK,EAAEiK,eAAejK,EAAE2K,iBAAiB1O,KAAK0O,kBAAiB,IAAI,OAAE1O,KAAK2O,kBAAkB5K,EAAE4K,mBAAmB3O,KAAK0O,kBAAiB,GAAI1O,KAAK4O,sBAAqB,EAAG5O,KAAKgP,cAAcjL,EAAEiL,cAAchP,KAAKgP,gBAAgB,UAAOjL,EAAEkL,SAASjP,KAAKiP,UAAUjP,KAAKgP,eAAc,GAAIjL,EAAE+K,iCAAiC9O,KAAK8O,kCAAiC,IAAI,OAAE9O,KAAK+O,4BAA4BhL,EAAEgL,6BAA6B/O,KAAK8O,kCAAiC,IAAI,OAAE9O,KAAKkP,cAAcnL,EAAEmL,eAAelP,KAAKoP,WAAWjM,EAAEiM,WAAWpP,KAAK,aAAamD,GAAGnD,KAAKmL,IAAIhI,EAAEgI,IAAInL,KAAK2P,OAAOxM,EAAEwM,OAAO3P,KAAK2Q,GAAGxN,EAAEwN,GAAG,QAAQ,OAAM,IAAK7C,GAAGzK,SAASrD,MAAM,OAAOmD,GAAG,OAAO,OAAEnD,KAAKsP,KAAKnM,EAAEmM,QAAO,OAAEtP,KAAKuP,QAAQpM,EAAEoM,WAAU,OAAEvP,KAAKwP,IAAIrM,EAAEqM,OAAM,OAAExP,KAAKmO,UAAUhL,EAAEgL,aAAY,OAAEnO,KAAKoO,SAASjL,EAAEiL,YAAW,OAAEpO,KAAKuO,SAASpL,EAAEoL,WAAWvO,KAAKqO,OAAOlL,EAAEkL,MAAMrO,KAAKoP,aAAajM,EAAEiM,YAAYpP,KAAKqP,oBAAoBlM,EAAEkM,kBAAkB,aAAalM,GAAG,GAAGnD,KAAKoP,aAAajM,EAAEiM,YAAYhC,KAAKwD,IAAIzN,EAAEkL,KAAKrO,KAAKqO,OAAO,KAAK,OAAM,EAAG,MAAMtK,EAAE,MAAK,OAAE8M,EAAE1N,EAAEmM,KAAKnM,EAAEoM,UAAS,OAAEpK,EAAEnF,KAAKsP,KAAKtP,KAAKuP,SAAS,MAAMxP,GAAE,OAAE8Q,EAAE1L,GAAGE,GAAE,OAAEwL,GAAGjS,GAAE,OAAEuG,GAAG,OAAOpF,EAAEA,IAAI,EAAE,OAAOsF,EAAEzG,IAAG,OAAEuE,EAAEmM,KAAKtP,KAAKsP,MAAMlC,KAAK0D,IAAIzL,EAAEzG,GAAGmF,EAAEA,IAAG,OAAEZ,EAAEiL,SAASpO,KAAKoO,UAAU,KAAI,OAAEjL,EAAEgL,UAAUnO,KAAKmO,WAAW,GAAG,gBAAgBnO,KAAKwO,YAAW,EAAGxO,KAAKgP,eAAc,EAAGhP,KAAK4O,sBAAqB,EAAG,yBAAyBzL,GAAG,OAAOnD,KAAK+Q,6BAA6B/Q,KAAKgR,sBAAsB7N,IAAI,6BAA6BA,GAAG,OAAOA,EAAEnD,KAAK0Q,oBAAoB,yBAAyBvN,GAAG,OAAOnD,KAAKiR,6BAA6BjR,KAAKgR,sBAAsB7N,IAAI,sBAAsBA,GAAG,OAAOiK,KAAKwD,KAAI,OAAE5Q,KAAKkR,aAAY,OAAEL,EAAE1N,EAAEnD,KAAKsP,QAAQ,6BAA6BnM,GAAG,OAAOA,EAAEnD,KAAK4N,oBAAoB,0BAA0BzK,EAAEY,GAAG,OAAOZ,EAAEiK,KAAKgD,IAAIhD,KAAKZ,IAAIxM,KAAKyQ,KAAKzQ,KAAKqQ,OAAO,GAAGtM,GAAG,KAAK,gBAAgBZ,GAAE,WAAK,OAAOA,EAAE,IAAInD,KAAKmR,QAAQ,GAAGnR,KAAK6P,MAAM,GAAG7P,KAAKoP,WAAWjM,EAAE,IAAInD,KAAKmR,QAAQ,GAAGnR,KAAK8P,OAAO,GAAG9P,KAAKoP,WAAWjM,EAAE,gBAAgBA,EAAEY,EAAE,GAAGhE,EAAE,IAAI,OAAOoD,IAAIA,GAAE,WAAKA,EAAE,GAAGnD,KAAKmR,QAAQ,GAAGnR,KAAK6P,MAAM9L,EAAEZ,EAAE,GAAGnD,KAAKmR,QAAQ,GAAGnR,KAAK8P,OAAO/P,EAAEoD,EAAE2C,OAAO,IAAI3C,EAAE,GAAG,IAAIA,EAAE,cAAcA,GAAG,MAAMY,EAAE/D,KAAKoR,SAASrR,EAAEC,KAAKmR,QAAQhO,EAAEkO,YAAYtN,EAAE,GAAGhE,EAAE,GAAGgE,EAAE,GAAGhE,EAAE,GAAGgE,EAAE,GAAGhE,EAAE,GAAGA,EAAE,GAAGgE,EAAE,GAAGhE,EAAE,GAAGA,EAAE,IAAI,gBAAgBoD,EAAEpD,EAAEsF,GAAE,GAAIlC,IAAIQ,IAAG,OAAEA,EAAER,GAAGQ,EAAE,GAAG,EAAE0B,IAAItF,EAAE,IAAI4D,EAAE,KAAI,OAAEA,EAAEA,EAAE3D,KAAKiQ,mBAAkB,OAAEtM,EAAEA,EAAE,EAAEyJ,KAAKwD,IAAIjN,EAAE,KAAK,MAAM/E,EAAEoB,KAAKsR,aAAa,OAAOvR,EAAE,IAAG,QAAE,EAAEnB,EAAE,GAAGA,EAAE,GAAG,GAAG,GAAG+E,EAAE,IAAI5D,EAAE,IAAG,QAAE,EAAEnB,EAAE,GAAGA,EAAE,GAAG,GAAG,GAAG+E,EAAE,IAAI0B,IAAItF,EAAE,GAAG,IAAI4D,EAAE,GAAG,IAAI5D,EAAE,gBAAgBoD,EAAEY,GAAG,OAAO/D,KAAK+E,sBAAsB5B,EAAE6C,GAAGhG,KAAKgF,eAAegB,EAAEjC,GAAG,sBAAsBZ,EAAEpD,GAAG,GAAG4D,EAAE,GAAGR,EAAE,GAAGQ,EAAE,GAAGR,EAAE,GAAGQ,EAAE,GAAGR,EAAE,GAAGQ,EAAE,GAAG,GAAE,OAAEA,EAAEA,EAAE3D,KAAKuR,sBAAsB,IAAI5N,EAAE,GAAG,OAAO,MAAK,OAAEA,EAAEA,EAAE,EAAEyJ,KAAKwD,IAAIjN,EAAE,KAAK,MAAM0B,EAAErF,KAAKsR,aAAa,MAAM,MAAMvR,GAAGA,EAAEuB,GAAE,QAAE,EAAE+D,EAAE,GAAGA,EAAE,GAAG,GAAG,GAAG1B,EAAE,IAAI5D,EAAEwB,GAAE,QAAE,EAAE8D,EAAE,GAAGA,EAAE,GAAG,GAAG,GAAG1B,EAAE,MAAM5D,EAAE,IAAG,QAAE,EAAEsF,EAAE,GAAGA,EAAE,GAAG,GAAG,GAAG1B,EAAE,IAAI5D,EAAE,IAAG,QAAE,EAAEsF,EAAE,GAAGA,EAAE,GAAG,GAAG,GAAG1B,EAAE,IAAI5D,EAAE+F,OAAO,IAAI/F,EAAE,GAAG,IAAI4D,EAAE,GAAG,KAAK5D,EAAE,oBAAoBoD,EAAEY,GAAG,OAAO/D,KAAKwR,0BAA0BxR,KAAKyR,eAAetO,EAAE6C,GAAGjC,GAAG,0BAA0BZ,EAAEY,GAAG,IAAG,OAAE2N,EAAE1R,KAAKiQ,iBAAiBjQ,KAAKkQ,cAAa,OAAEwB,EAAEA,GAAG,OAAO,KAAK,MAAM3R,EAAEC,KAAKsR,aAAa,OAAO3N,EAAE,GAAG,GAAGR,EAAE,GAAGpD,EAAE,IAAIA,EAAE,GAAG,EAAE4D,EAAE,GAAG,GAAGR,EAAE,GAAGpD,EAAE,IAAIA,EAAE,GAAG,EAAE4D,EAAE,GAAG,EAAER,EAAE,GAAG,EAAEQ,EAAE,GAAG,GAAE,OAAEA,EAAEA,EAAE+N,GAAG,IAAI/N,EAAE,GAAG,MAAMI,EAAE,GAAGJ,EAAE,GAAGA,EAAE,GAAGI,EAAE,GAAGJ,EAAE,GAAGA,EAAE,GAAGI,EAAE,GAAGJ,EAAE,GAAGA,EAAE,GAAGI,GAAG,oBAAoBZ,EAAEY,EAAEhE,EAAEsF,EAAE,GAAG,MAAMzG,EAAEuE,EAAEnD,KAAKoP,WAAWjJ,EAAEpC,EAAE/D,KAAKoP,WAAWzQ,EAAEyO,KAAK0D,IAAIlS,EAAEmB,EAAEsF,EAAE,EAAE,GAAGH,EAAEkI,KAAK0D,IAAI9Q,KAAKgQ,WAAW7J,EAAEpG,EAAE,EAAE,GAAG4F,GAAGyH,KAAKZ,IAAI5N,EAAEmB,EAAEsF,EAAE,EAAE,GAAGiB,GAAG8G,KAAKZ,IAAIxM,KAAKgQ,WAAW7J,EAAEpG,EAAE,EAAE,GAAG,MAAM,CAACpB,EAAEuG,EAAEnF,EAAEsF,EAAEM,IAAIyH,KAAKZ,IAAIxM,KAAK+P,UAAUnR,EAAEmB,EAAEsF,EAAE,EAAE,GAAGtF,EAAEuG,IAAI8G,KAAKZ,IAAIrG,EAAEpG,EAAE,EAAE,IAAI,UAAUoD,GAAG,IAAIA,EAAEnD,KAAK2R,kBAAkB3R,KAAK4R,iBAAiB,eAAezO,EAAEY,GAAG,MAAMhE,EAAEoD,EAAE,GAAGnD,KAAKoP,WAAW/J,EAAErF,KAAKgQ,WAAW7M,EAAE,GAAGnD,KAAKoP,WAAW,OAAOrL,EAAE,GAAGhE,EAAEgE,EAAE,GAAGsB,EAAEtB,EAAE,eAAeZ,EAAEY,GAAG,MAAMhE,EAAEoD,EAAE,GAAGnD,KAAKoP,WAAW/J,GAAGrF,KAAKgQ,WAAW7M,EAAE,IAAInD,KAAKoP,WAAW,OAAOrL,EAAE,GAAGhE,EAAEgE,EAAE,GAAGsB,EAAEtB,EAAE,mBAAkB,OAAE8M,EAAE7Q,KAAK2P,OAAO3P,KAAKmL,KAAK,MAAMhI,GAAE,IAAA+C,GAAElG,KAAK2P,QAAQxM,EAAE,IAAG,OAAEnD,KAAK2Q,GAAG,EAAE,EAAE,GAAG3Q,KAAK6R,iBAAiBzE,KAAKwD,KAAI,OAAEC,EAAE7Q,KAAK2P,SAAS,OAAM,IAAAzJ,GAAE2K,GAAG1N,KAAI,OAAEnD,KAAK2Q,GAAGE,EAAE7Q,KAAK2P,SAAQ,OAAE3P,KAAK2Q,GAAG3Q,KAAK2Q,GAAGE,IAAG,OAAE7Q,KAAK2Q,GAAG3Q,KAAK2Q,IAAI3Q,KAAK6R,iBAAiB,kBAAiB,QAAEhB,EAAE7Q,KAAKmL,IAAInL,KAAK2P,QAAQvC,KAAKwD,IAAIC,EAAE,KAAK,SAAQ,OAAEA,EAAEA,EAAEA,EAAE,KAAI,OAAE7Q,KAAK2Q,IAAIE,EAAE,IAAIA,EAAE,GAAG,EAAEA,EAAE,KAAI,OAAE7Q,KAAK2Q,GAAG3Q,KAAK2Q,IAAI3Q,KAAK6R,iBAAiB,mBAAmB1O,EAAEY,IAAG,OAAEZ,EAAEY,MAAK,OAAEA,EAAEZ,GAAGnD,KAAKwO,YAAW,EAAGxO,KAAKgP,eAAc,EAAGhP,KAAK4O,sBAAqB,GAAI,oBAAoB5O,KAAKgP,gBAAgB,gBAAahP,KAAKkQ,WAAWlQ,KAAKiQ,iBAAiBjQ,KAAKiP,UAAUjP,KAAKgP,eAAc,GAAI,mBAAmBhP,KAAKwO,cAAa,OAAExO,KAAKyO,YAAYzO,KAAKsP,KAAKtP,KAAKuP,QAAQvP,KAAKwP,MAAK,OAAExP,KAAKgO,cAAchO,KAAKyO,YAAY,IAAIzO,KAAKyO,YAAY,IAAIzO,KAAKyO,YAAY,MAAK,OAAEzO,KAAK+N,QAAQ/N,KAAKyO,YAAY,GAAGzO,KAAKyO,YAAY,GAAGzO,KAAKyO,YAAY,KAAI,OAAEzO,KAAKiO,WAAWjO,KAAKyO,YAAY,GAAGzO,KAAKyO,YAAY,GAAGzO,KAAKyO,YAAY,IAAIzO,KAAKwO,YAAW,EAAGxO,KAAK8O,kCAAiC,IAAK,MAAMnL,GAAE,SAAI+N,GAAE,SAAIb,GAAE,SAAI1L,GAAE,SAAIa,GAAE,UAAI,K,qICAthW,MAAMiG,EAAE,YAAY9I,GAAGnD,KAAK0L,QAAQ,IAAI,KAAE1L,KAAKuM,QAAQ,IAAI,KAAEvM,KAAK8I,UAAU,IAAI,KAAE9I,KAAK8R,gBAAgB,CAACC,cAAc,EAAEC,iBAAiB,GAAGhS,KAAKiS,UAAU,KAAKjS,KAAKkS,eAAe,KAAKlS,KAAKkO,KAAK,CAACwB,QAAO,SAAIzJ,WAAU,UAAKjG,KAAKmS,cAAa,SAAInS,KAAKoS,2BAA0B,SAAIpS,KAAKqS,yBAAwB,SAAIrS,KAAKgE,YAAY,MAAMb,EAAE,EAAEA,EAAE,UAAU,OAAOnD,KAAKkO,KAAK,oBAAoB,OAAOlO,KAAKkO,KAAKwB,OAAO,kBAAkB,OAAO1P,KAAKmS,aAAa,MAAMhP,EAAEkC,GAAGrF,KAAKsS,aAAa,gBAAanP,EAAEkC,EAAErF,KAAKkO,OAAO,aAAa/K,GAAGA,IAAInD,KAAKkO,MAAM,UAAO/K,EAAEnD,KAAKkO,MAAM,IAAIlO,KAAK0L,QAAQwG,eAAe,IAAIlS,KAAKgE,YAAYhE,KAAKkO,KAAKwB,OAAO,IAAI1P,KAAK0L,QAAQwG,eAAelS,KAAKkS,eAAelS,KAAK0L,QAAQwG,eAAelS,KAAKkS,eAAe,MAAK,OAAElS,KAAKmS,aAAanS,KAAKkO,KAAKwB,OAAO1P,KAAKkO,KAAKjI,WAAWjG,KAAKuS,kBAAkB,EAAEvS,KAAKuM,QAAQiG,KAAKxS,KAAKkO,MAAM,UAAU7I,EAAEzG,EAAEmB,EAAEgE,EAAE4B,EAAET,GAAGlF,KAAKyS,MAAM7T,EAAEoB,KAAKC,OAAOF,EAAEC,KAAK0S,gBAAgB/M,EAAE3F,KAAKiS,UAAU,MAAMlO,EAAE,KAAKA,EAAE,MAAMpF,GAAE,QAAEqB,KAAKkS,gBAAgB/L,EAAEjB,EAAE/B,IAAI+B,EAAE/B,IAAInD,KAAK2S,gBAAgBxP,IAAIA,IAAInD,KAAK2S,gBAAgBxP,IAAI,GAAGkC,GAAGA,EAAES,OAAO,EAAE,IAAI,MAAMlH,KAAKyG,EAAE,CAAC,MAAMA,EAAEzG,EAAEgU,4BAA4BhU,EAAEgU,6BAA6B,GAAGvN,GAAE,QAAE1G,GAAG0G,EAAEwN,kCAAkC7S,KAAKkO,KAAKwB,OAAO1P,KAAKkO,KAAKjI,UAAUE,EAAExH,GAAG0G,EAAEyN,gBAAgB9S,KAAKkO,KAAKwB,OAAO1P,KAAKkO,KAAKjI,UAAUE,GAAGnG,KAAK0L,QAAQC,eAAe3L,KAAK0L,QAAQqH,KAAK1N,EAAE2N,wBAAwB7M,OAAO,CAAC,MAAMhD,EAAEvE,EAAEqU,aAAa,IAAI,MAAM5N,KAAKlC,EAAEgD,EAAEd,IAAIrF,KAAKkT,cAAc,gBAAgB7N,GAAGrF,KAAKuS,oBAAoB,MAAM3T,EAAEyG,EAAE8N,gBAAgB,IAAIvU,EAAE,OAAO,MAAM+G,EAAEN,EAAE+B,GAAGzI,EAAE0G,EAAEgD,qBAAqB,IAAIlC,EAAE,MAAMC,GAAE,QAAEpG,KAAKkS,gBAAgB,IAAI,MAAMtM,KAAKhH,EAAE,CAAC,MAAMiK,SAASjK,EAAE8J,SAASuD,EAAEmH,mBAAmBzM,GAAGf,EAAE,IAAG,QAAEe,GAAG,SAASR,EAAEvH,EAAEwI,GAAGpH,KAAK8I,UAAUuK,+BAA+B1U,EAAEiH,EAAE0N,4BAA2B,OAAEtT,KAAKoS,0BAA0BpS,KAAKkO,KAAKwB,OAAO1P,KAAK8I,UAAUyK,UAAS,OAAEvT,KAAKqS,wBAAwBrS,KAAKmS,aAAanS,KAAK8I,UAAUyK,SAAS,MAAM/M,EAAExG,KAAK8I,UAAUA,WAAU,QAAE1C,KAAKA,EAAEoN,gBAAgBxT,KAAK8I,WAAWmD,EAAEwH,UAAU7U,EAAE+H,EAAE3G,KAAK8I,UAAUA,UAAU9I,KAAKA,KAAKoS,0BAA0BpS,KAAKqS,yBAAwB,CAAEzT,EAAEmB,EAAEmF,EAAEvG,EAAEyH,EAAER,KAAK,GAAGhH,GAAG,EAAE,CAAC,IAAG,QAAEoB,KAAK0S,mBAAmB1S,KAAK0S,gBAAgB1S,KAAKkO,KAAKwB,OAAO1P,KAAKmS,aAAavT,GAAG,OAAO,GAAGwH,EAAE,aAAa,MAAMpG,KAAKuM,QAAQwG,IAAIW,MAAM9U,EAAEoB,KAAKuM,QAAQwG,IAAIW,OAAO1T,KAAKuM,QAAQwG,IAAI1J,IAAIhE,EAAEM,EAAE/G,EAAEmB,EAAE,IAAEpB,EAAEiH,EAAEO,EAAEjB,IAAI,MAAM+G,EAAE9I,GAAGA,EAAEkG,IAAIhE,EAAEM,EAAE/G,EAAEmB,EAAEyG,EAAE7H,EAAE,KAAKwH,EAAEjB,GAAG,IAAI,MAAMlF,KAAKuM,QAAQC,IAAImH,kBAAkBhV,GAAGqB,KAAKuM,QAAQC,IAAImH,oBAAoB,MAAM3T,KAAKuM,QAAQC,IAAIkH,MAAM9U,EAAEoB,KAAKuM,QAAQC,IAAIkH,OAAOzH,EAAEjM,KAAKuM,QAAQC,KAAK,IAAIxM,KAAK0L,QAAQE,QAAQ,MAAM5L,KAAKuM,QAAQuE,IAAI6C,kBAAkBhV,EAAEqB,KAAKuM,QAAQuE,IAAI6C,oBAAoB,MAAM3T,KAAKuM,QAAQuE,IAAI4C,MAAM9U,EAAEoB,KAAKuM,QAAQuE,IAAI4C,OAAOzH,EAAEjM,KAAKuM,QAAQuE,KAAK,IAAI9Q,KAAK0L,QAAQE,MAAM,CAAC,MAAMzI,EAAE,IAAI,KAAEnD,KAAKkO,MAAMjC,EAAE9I,GAAGnD,KAAKuM,QAAQqH,IAAIhL,KAAKzF,OAAOyC,EAAEiO,uBAAuB,cAAc7T,KAAKuM,QAAQqH,IAAIE,MAAK,CAAE3Q,EAAEkC,IAAIlC,EAAEuQ,OAAOrO,EAAEqO,KAAKvQ,EAAEuQ,KAAKrO,EAAEqO,KAAKvQ,EAAEwQ,mBAAmBtO,EAAEsO,uBAAkB,IAASxQ,EAAEwQ,iBAAiBxQ,EAAEwQ,iBAAiBI,OAAOC,iBAAY,IAAS3O,EAAEsO,iBAAiBtO,EAAEsO,iBAAiBI,OAAOC,iBAAY,IAAS3O,EAAE4O,wBAAwB5O,EAAE4O,wBAAwBF,OAAOG,iBAAY,IAAS/Q,EAAE8Q,wBAAwB9Q,EAAE8Q,wBAAwBF,OAAOG,cAAcjI,EAAEkI,kBAAkB,M,4QCApyF,MAAMC,EAAE,cAAcpU,KAAKkS,eAAe,EAAElS,KAAK2L,eAAc,EAAG3L,KAAK+S,KAAI,EAAG/S,KAAKqU,yBAAwB,EAAGrU,KAAKsU,kBAAiB,EAAGtU,KAAKuU,kBAAiB,EAAGvU,KAAKwU,YAAW,EAAGxU,KAAK4L,MAAM,GAAG,MAAM6I,EAAE,cAAczU,KAAK0U,YAAW,SAAI1U,KAAK2U,kBAAkB,IAAI1H,EAAE,CAAC2H,MAAM5U,KAAK0U,YAAY,IAAE,KAAG1U,KAAK6U,2BAA2B,IAAI5H,EAAEjN,KAAK2U,kBAAkB,IAAE,KAAG3U,KAAK8U,oBAAoB,IAAI7H,EAAE,CAAC2H,MAAM5U,KAAK0U,YAAY,IAAE,KAAG1U,KAAK+U,0BAA0B,IAAI9H,EAAE,CAAC2H,MAAM5U,KAAK0U,YAAY,IAAE,KAAG,2BAA2B1U,KAAK2U,kBAAkBK,aAAahV,KAAK6U,2BAA2BG,aAAahV,KAAK8U,oBAAoBE,aAAahV,KAAK+U,0BAA0BC,aAAa,gBAAgB,OAAOhV,KAAK0U,WAAW,cAAc,OAAO1U,KAAK2U,kBAAkBC,MAAM,uBAAuB,OAAO5U,KAAK6U,2BAA2BD,MAAM,sBAAsB,OAAO5U,KAAK+U,0BAA0BH,MAAM,gBAAgB,OAAO5U,KAAK8U,oBAAoBF,MAAM,mBAAmBzR,IAAG,OAAEnD,KAAK0U,WAAWvR,GAAG,kBAAkBA,IAAG,OAAEnD,KAAK0U,WAAW1U,KAAK0U,WAAWvR,GAAG,IAAIA,IAAG,OAAEnD,KAAK0U,WAAWvR,GAAGnD,KAAKiV,2BAA2B,+BAA+B9R,EAAEvE,GAAGoB,KAAKkV,mBAAmB/R,GAAGnD,KAAKmV,kBAAkBvW,GAAGoB,KAAKiV,4BAA4B,MAAMhI,EAAE,YAAY9J,EAAEvE,EAAEyG,GAAGrF,KAAKoV,SAASjS,EAAEnD,KAAKqV,OAAOzW,EAAEoB,KAAKsV,OAAM,EAAGtV,KAAK8I,UAAUzD,IAAI,aAAarF,KAAKsV,OAAM,EAAG,YAAY,OAAOtV,KAAKsV,QAAQtV,KAAKqV,OAAOrV,KAAK8I,UAAU9I,KAAKoV,SAASR,OAAO5U,KAAKsV,OAAM,GAAItV,KAAK8I,WAAW,MAAMgC,EAAE,cAAc9K,KAAKwM,IAAI,IAAIvC,EAAEjK,KAAK8Q,IAAI,IAAI7G,EAAEjK,KAAK+S,IAAI,IAAI9I,EAAEjK,KAAKoM,OAAO,IAAInC,EAAE,KAAK9G,GAAGnD,KAAKwM,IAAIgG,KAAKrP,GAAGnD,KAAK8Q,IAAI0B,KAAKrP,GAAGnD,KAAK+S,IAAIP,KAAKrP,GAAGnD,KAAKoM,OAAOoG,KAAKrP,GAAGnD,KAAK4T,IAAI,IAAI,MAAM3J,EAAE,YAAY9G,GAAGnD,KAAKuV,QAAO,SAAIvV,KAAKwV,gBAAe,SAAIxV,KAAKkO,KAAK,cAAWlO,KAAKwS,KAAKrP,GAAG,UAAU,OAAOnD,KAAKkO,KAAK,2BAA2B,OAAO,MAAMlO,KAAK0T,KAAK,4BAA4B,GAAG,MAAM1T,KAAK0T,KAAK,OAAO,OAAE7N,EAAE7F,KAAKsK,IAAIrE,UAAUjG,KAAK0T,OAAM,OAAE7N,GAAG,qBAAqB1C,GAAG,QAAQnD,KAAKyV,wBAAuB,OAAE5P,EAAE7F,KAAKsK,IAAIrE,UAAUjG,KAAK0T,OAAM,OAAEvQ,EAAEnD,KAAKsK,IAAIoF,OAAO7J,IAAG,GAAI,qBAAqB1C,GAAG,OAAO,OAAEuS,EAAE1V,KAAKuV,QAAQG,EAAE,GAAG,GAAE,OAAEA,EAAEA,EAAE1V,KAAKwV,iBAAgB,OAAErS,EAAEuS,IAAG,OAAEvS,EAAEA,GAAGA,EAAE,KAAKA,GAAGnD,KAAK0T,UAAK,EAAO1T,KAAK2V,YAAO,EAAO3V,KAAK4V,UAAK,EAAO5V,KAAK2T,sBAAiB,EAAO3T,KAAKiU,6BAAwB,EAAOjU,KAAK2P,OAAO,KAAK3P,KAAK6V,WAAW,KAAK7V,KAAK8V,WAAW,KAAK9V,KAAK0M,YAAY,QAAQvJ,EAAE,UAAOA,EAAEnD,KAAKkO,MAAMlO,KAAKkO,KAAK,cAAW,IAAI/K,EAAEvE,EAAEyG,EAAEtF,EAAE4F,EAAEhH,EAAEwH,EAAEjB,EAAEgB,EAAE+F,GAAG9I,aAAa,MAAIA,EAAE,CAAC7C,KAAK,QAAQyV,IAAI5S,IAAInD,KAAK0T,KAAKrO,GAAE,OAAErF,KAAKuV,OAAOxV,IAAG,OAAEC,KAAKwV,eAAe7P,GAAG3F,KAAK2V,OAAOxS,EAAEnD,KAAK4V,KAAKhX,EAAEoB,KAAK2T,iBAAiBhV,EAAEqB,KAAK2P,OAAOxJ,GAAE,OAAEA,GAAG,KAAKnG,KAAK6V,WAAW3Q,EAAElF,KAAK8V,WAAW5P,EAAElG,KAAKiU,wBAAwBhI,EAAE,SAAS9I,GAAG,UAAOA,EAAE+K,KAAKlO,KAAKkO,MAAMlO,KAAK0T,KAAKvQ,EAAEuQ,KAAK1T,KAAK2V,OAAOxS,EAAEwS,OAAO3V,KAAK4V,KAAKzS,EAAEyS,KAAK5V,KAAK2T,iBAAiBxQ,EAAEwQ,iBAAiB3T,KAAK2P,OAAOxM,EAAEwM,QAAO,OAAExM,EAAEwM,QAAQ,KAAK3P,KAAK6V,WAAW1S,EAAE0S,WAAW7V,KAAK8V,WAAW3S,EAAE2S,WAAW9V,KAAK0M,YAAYvJ,EAAEuJ,YAAY1M,KAAKiU,wBAAwB9Q,EAAE8Q,yBAAwB,OAAEjU,KAAKuV,OAAOpS,EAAEoS,SAAQ,OAAEvV,KAAKwV,eAAerS,EAAEqS,gBAAgB,QAAQrS,GAAG,IAAInD,KAAK2V,OAAO,OAAO,KAAK,OAAO3V,KAAK2V,OAAOrV,MAAM,IAAI,QAAQ,OAAOuK,EAAE7K,KAAK2V,OAAOI,IAAIC,SAAS7S,GAAG,IAAI,WAAW,OAAOnD,KAAK0M,aAAa,IAAI,gBAAgB,OAAO,SAASvJ,EAAEvE,GAAG,MAAMyG,EAAElC,EAAE6S,SAASC,SAAS,OAAO,MAAM5Q,EAAEzG,EAAEuN,IAAI+J,eAAe7Q,GAAG,KAAjF,CAAuFrF,KAAK2V,OAAOxS,GAAG,IAAI,MAAM,IAAI,KAAK,IAAI,cAAc,IAAI,kBAAkB,OAAO0H,EAAE7K,KAAK2V,OAAOK,SAAS7S,GAAG,IAAI,kBAAkB,OAAOA,EAAEgJ,KAAKhJ,EAAEgJ,IAAIC,QAAQ,OAAO,KAAK,UAAUjJ,GAAG,IAAInD,KAAK2V,OAAO,OAAO,KAAK,OAAO3V,KAAK2V,OAAOrV,MAAM,IAAI,QAAQ,OAAOyJ,EAAE/J,KAAK2V,OAAOI,IAAIC,SAAS7S,GAAG,IAAI,WAAW,OAAOnD,KAAK0M,aAAa,IAAI,gBAAgB,OAAO1M,KAAK2V,OAAOK,SAASG,gBAAgB,IAAI,MAAM,IAAI,KAAK,IAAI,cAAc,IAAI,kBAAkB,OAAOpM,EAAE/J,KAAK2V,OAAOK,SAAS7S,IAAI,OAAO,MAAM,SAAS0H,EAAExF,EAAEtF,GAAG,OAAO,QAAEsF,IAAI,MAAMA,EAAE4Q,SAAS,MAAK,QAAElW,EAAEqW,eAAe/Q,EAAE4Q,WAAWlW,EAAEqW,aAAaC,YAAYtW,EAAEuW,SAASvW,EAAEoM,IAAI+J,eAAe7Q,EAAE4Q,UAAU,SAASlM,EAAEhK,EAAEgE,GAAG,IAAG,QAAEhE,GAAG,OAAO,KAAK,MAAM4F,EAAEkF,EAAE9K,EAAEgE,GAAG,IAAG,QAAE4B,GAAG,OAAO,KAAK,GAAGA,IAAI5B,EAAEuS,SAAS,OAAO,QAAEvS,EAAEqS,eAAc,QAAErS,EAAEqS,aAAaG,yBAAyBxW,EAAEyW,aAAa,KAAK,MAAM7X,EAAEoF,EAAE0S,cAAcC,MAAMvT,GAAGA,EAAEmG,QAAQ3D,IAAI,OAAOhH,EAAE,SAASwE,EAAEvE,GAAG,OAAIuE,GAAGA,EAAEwT,UAAiB,KAAQ,sCAAsCxT,GAAGvE,EAASuE,EAAEyT,kCAAkChY,GAAM,6BAA6BuE,GAAG,MAAMvE,EAAE4X,WAAkBrT,EAAEoT,yBAAyB3X,EAAE4X,YAAmB,KAAtP,CAA4P7X,EAAEoB,GAAG,KAAqhH,MAAMsL,EAAE,IAAnqC,MAAQ,YAAYlI,EAAE,GAAGnD,KAAKG,OAAOgD,EAAEnD,KAAK6W,QAAO,SAAI7W,KAAK8W,WAAU,SAAI,cAAc3T,EAAEvE,EAAEyG,GAAG,MAAMtF,EAAEC,KAAKwT,gBAAgB1K,UAAU,IAAI/E,EAAEhE,EAAE,GAAGoD,EAAEpD,EAAE,GAAGnB,EAAEmB,EAAE,GAAGsF,EAAEtF,EAAE,IAAI4F,EAAE5F,EAAE,GAAGoD,EAAEpD,EAAE,GAAGnB,EAAEmB,EAAE,GAAGsF,EAAEtF,EAAE,IAAIpB,EAAEoB,EAAE,GAAGoD,EAAEpD,EAAE,GAAGnB,EAAEmB,EAAE,IAAIsF,EAAEtF,EAAE,IAAI,MAAMoG,EAAEnG,KAAKG,OAAOiN,KAAK2J,KAAKhT,EAAEA,EAAE4B,EAAEA,EAAEhH,EAAEA,GAAGoF,GAAGA,EAAEoC,EAAER,GAAGA,EAAEQ,EAAExH,GAAGA,EAAEwH,EAAE,MAAMjB,EAAElF,KAAKwT,gBAAgBD,QAAQ,OAAOvT,KAAK8W,UAAU,GAAG5R,EAAE,GAAGnB,EAAEmB,EAAE,GAAGS,EAAET,EAAE,GAAGvG,EAAEuG,EAAE,IAAIlF,KAAK8W,UAAU,GAAG5R,EAAE,GAAGnB,EAAEmB,EAAE,GAAGS,EAAET,EAAE,GAAGvG,EAAEuG,EAAE,IAAIlF,KAAK8W,UAAU,GAAG5R,EAAE,GAAGnB,EAAEmB,EAAE,GAAGS,EAAET,EAAE,IAAIvG,EAAEuG,EAAE,IAAIlF,KAAK8W,UAAU,cAAc3T,EAAEvE,GAAG,MAAMyG,EAAErF,KAAKG,OAAOiN,KAAK2J,KAAK5T,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAIA,EAAE,IAAIA,EAAE,GAAGkC,EAAElC,EAAE,IAAIA,EAAE,GAAGkC,EAAElC,EAAE,IAAIA,EAAE,GAAGkC,EAAE,MAAMtF,EAAEC,KAAKG,OAAOiN,KAAK2J,KAAKnY,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAIA,EAAE,IAAIA,EAAE,GAAGmB,EAAEnB,EAAE,IAAIA,EAAE,GAAGmB,EAAEnB,EAAE,IAAIA,EAAE,GAAGmB,EAAE,YAAYoD,GAAG,MAAMvE,EAAEoB,KAAKG,OAAOiN,KAAK2J,KAAK5T,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAIA,EAAE,IAAIA,EAAE,GAAGvE,EAAEuE,EAAE,IAAIA,EAAE,GAAGvE,EAAEuE,EAAE,IAAIA,EAAE,GAAGvE,EAAE,MAAMyG,EAAErF,KAAKG,OAAOiN,KAAK2J,KAAK5T,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI,OAAOA,EAAE,IAAIA,EAAE,GAAGkC,EAAElC,EAAE,IAAIA,EAAE,GAAGkC,EAAElC,EAAE,IAAIA,EAAE,GAAGkC,EAAElC,EAAE,sBAAsBA,EAAEvE,GAAG,MAAMyG,EAAE+H,KAAK2J,KAAKnY,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAImB,EAAEC,KAAKG,OAAOkF,EAAE,OAAOrF,KAAK6W,OAAOlH,OAAO,GAAG/Q,EAAE,GAAGA,EAAE,GAAGmB,EAAEC,KAAK6W,OAAOlH,OAAO,GAAG/Q,EAAE,GAAGA,EAAE,GAAGmB,EAAEC,KAAK6W,OAAOlH,OAAO,GAAG/Q,EAAE,GAAGA,EAAE,GAAGmB,EAAEC,KAAK6W,OAAO3S,OAAOf,EAAEA,EAAEnD,KAAKG,OAAOkF,EAAErF,KAAK6W,SAAsB,SAAShG,EAAE1N,GAAG,OAAO,QAAEA,IAAIkI,EAAElL,OAAOgD,EAAEkI,GAAG,KAAa,IAAv+F,MAAQ,YAAYlI,EAAE,GAAGnD,KAAKG,OAAOgD,EAAEnD,KAAKgX,2BAA2B,EAAEhX,KAAK8W,WAAU,SAAI9W,KAAKiX,KAAI,SAAIjX,KAAKkX,IAAI,CAACvH,QAAO,SAAIwH,UAAS,SAAIC,WAAW,MAAM,gBAAgBjU,GAAGnD,KAAKgX,2BAA2B5J,KAAK2J,KAAK5T,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI,cAAcA,EAAEvE,EAAEyG,GAAG,MAAMtF,EAAEoD,EAAEY,EAAEnF,EAAE+G,EAAEN,EAAErF,KAAKgX,2BAA2BrY,EAAEqB,KAAKG,OAAOiN,KAAK2J,KAAKhX,EAAEA,EAAEgE,EAAEA,EAAE4B,EAAEA,GAAG,OAAO3F,KAAK8W,UAAU,GAAG3T,EAAEpD,EAAEpB,EAAEqB,KAAK8W,UAAU,GAAGlY,EAAEmF,EAAEpF,EAAEqB,KAAK8W,UAAU,GAAGzR,EAAEM,EAAEhH,EAAEqB,KAAK8W,UAAU,YAAY3T,GAAG,MAAMvE,EAAEuE,EAAE,GAAGkC,EAAElC,EAAE,GAAGpD,EAAEoD,EAAE,GAAGnD,KAAKgX,2BAA2BjT,EAAEZ,EAAE,GAAGwC,EAAExC,EAAE,GAAGxE,EAAEwE,EAAE,GAAGnD,KAAKgX,2BAA2B7Q,EAAEnG,KAAKG,OAAOiN,KAAK2J,KAAKnY,EAAEA,EAAEyG,EAAEA,EAAEtF,EAAEA,GAAGoD,EAAE,IAAIvE,EAAEuH,EAAEhD,EAAE,IAAIkC,EAAEc,EAAEhD,EAAE,IAAIpD,EAAEoG,EAAE,MAAMjB,EAAElF,KAAKG,OAAOiN,KAAK2J,KAAKhT,EAAEA,EAAE4B,EAAEA,EAAEhH,EAAEA,GAAG,OAAOwE,EAAE,IAAIY,EAAEmB,EAAE/B,EAAE,IAAIwC,EAAET,EAAE/B,EAAE,IAAIxE,EAAEuG,EAAE/B,EAAE,WAAWA,GAAG,MAAMvE,EAAEwO,KAAK2J,KAAK5T,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAIkC,EAAErF,KAAKG,OAAOvB,EAAE,OAAOoB,KAAKiX,IAAI,GAAG9T,EAAE,GAAGA,EAAE,GAAGkC,EAAErF,KAAKiX,IAAI,GAAG9T,EAAE,GAAGA,EAAE,GAAGkC,EAAErF,KAAKiX,IAAI,GAAG9T,EAAE,GAAGA,EAAE,GAAGkC,EAAErF,KAAKiX,IAAI,GAAG9T,EAAE,GAAGA,EAAE,GAAGnD,KAAKG,OAAOvB,EAAEoB,KAAKiX,IAAI,WAAW9T,GAAG,MAAMvE,EAAEuE,EAAEwM,OAAOtK,EAAErF,KAAKG,OAAOiN,KAAK2J,KAAKnY,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAIoB,KAAKkX,IAAIvH,OAAO,GAAG/Q,EAAE,GAAGA,EAAE,GAAGyG,EAAErF,KAAKkX,IAAIvH,OAAO,GAAG/Q,EAAE,GAAGA,EAAE,GAAGyG,EAAErF,KAAKkX,IAAIvH,OAAO,GAAG/Q,EAAE,GAAGA,EAAE,GAAGyG,GAAE,OAAErF,KAAKkX,IAAIC,SAAShU,EAAEgU,SAAShU,EAAEiU,aAAY,OAAEpX,KAAKkX,IAAIC,SAASnX,KAAKkX,IAAIC,SAAShU,EAAEwM,QAAQ,MAAM5P,EAAEC,KAAKG,OAAOiN,KAAK2J,KAAK/W,KAAKkX,IAAIC,SAAS,GAAGnX,KAAKkX,IAAIC,SAAS,GAAGnX,KAAKkX,IAAIC,SAAS,GAAGnX,KAAKkX,IAAIC,SAAS,GAAGnX,KAAKkX,IAAIC,SAAS,GAAGnX,KAAKkX,IAAIC,SAAS,IAAI,OAAOnX,KAAKkX,IAAIC,SAAS,IAAInX,KAAKkX,IAAIC,SAAS,GAAGpX,EAAEC,KAAKkX,IAAIC,SAAS,IAAInX,KAAKkX,IAAIC,SAAS,GAAGpX,EAAEC,KAAKkX,IAAIC,SAAS,IAAInX,KAAKkX,IAAIC,SAAS,GAAGpX,GAAE,OAAEC,KAAKkX,IAAIC,SAASnX,KAAKkX,IAAIC,SAAShU,EAAEwM,SAAQ,OAAEtJ,EAAElD,EAAEiU,aAAY,OAAEpX,KAAKkX,IAAIC,SAASnX,KAAKkX,IAAIC,SAAS9Q,GAAGrG,KAAKkX,IAAIC,SAAS,IAAInX,KAAKkX,IAAIC,SAAS,GAAG,GAAG,EAAE,EAAEnX,KAAKkX,IAAIC,SAAS,IAAInX,KAAKkX,IAAIC,SAAS,GAAG,GAAG,EAAE,EAAEnX,KAAKkX,IAAIC,SAAS,IAAInX,KAAKkX,IAAIC,SAAS,GAAG,GAAG,EAAE,EAAEnX,KAAKkX,IAAIE,WAAWjU,EAAEiU,WAAWpX,KAAKkX,MAAgyC,IAAhpH,MAAQ,YAAY/T,EAAE,GAAGnD,KAAKG,OAAOgD,EAAEnD,KAAK8W,WAAU,SAAI,cAAc3T,EAAEvE,EAAEyG,GAAG,MAAMtF,EAAEoD,EAAEnD,KAAKqX,YAAY,GAAGtT,EAAEnF,EAAEoB,KAAKqX,YAAY,GAAG1R,EAAEN,EAAErF,KAAKqX,YAAY,GAAG1Y,EAAEqB,KAAKG,OAAOiN,KAAK2J,KAAKhX,EAAEA,EAAEgE,EAAEA,EAAE4B,EAAEA,GAAG,OAAO3F,KAAK8W,UAAU,GAAG3T,EAAEpD,EAAEpB,EAAEqB,KAAK8W,UAAU,GAAGlY,EAAEmF,EAAEpF,EAAEqB,KAAK8W,UAAU,GAAGzR,EAAEM,EAAEhH,EAAEqB,KAAK8W,UAAU,YAAY3T,GAAG,MAAMvE,EAAEuE,EAAE,GAAGnD,KAAKqX,YAAY,GAAGhS,EAAElC,EAAE,GAAGnD,KAAKqX,YAAY,GAAGtX,EAAEoD,EAAE,GAAGnD,KAAKqX,YAAY,GAAGtT,EAAEZ,EAAE,GAAGnD,KAAKqX,YAAY,GAAG1R,EAAExC,EAAE,GAAGnD,KAAKqX,YAAY,GAAG1Y,EAAEwE,EAAE,GAAGnD,KAAKqX,YAAY,GAAGlR,EAAEnG,KAAKG,OAAOiN,KAAK2J,KAAKnY,EAAEA,EAAEyG,EAAEA,EAAEtF,EAAEA,GAAGoD,EAAE,IAAIvE,EAAEuH,EAAEhD,EAAE,IAAIkC,EAAEc,EAAEhD,EAAE,IAAIpD,EAAEoG,EAAE,MAAMjB,EAAElF,KAAKG,OAAOiN,KAAK2J,KAAKhT,EAAEA,EAAE4B,EAAEA,EAAEhH,EAAEA,GAAG,OAAOwE,EAAE,IAAIY,EAAEmB,EAAE/B,EAAE,IAAIwC,EAAET,EAAE/B,EAAE,IAAIxE,EAAEuG,EAAE/B,IAA0lG,MAAMgC,EAAE,UAAgBU,IAAJ,UAAM,UAAI6P,GAAE,SAAIrP,GAAE,U,2KCAjgQ,MAAM1C,UAAU,KAAE,YAAY5D,EAAEoD,GAAGmU,MAAMnU,EAAEpD,EAAEwL,GAAGvL,KAAKuX,eAAc,EAAGvX,KAAKwX,gBAAgB,IAAI,KAAExX,KAAKyX,0BAA0B,KAAE,mBAAmB1X,EAAEoD,GAAG,OAAOnD,KAAKwX,gBAAgBhY,OAAOO,EAAEC,KAAKwX,gBAAgBzK,SAAS/M,KAAK0X,OAAO3K,SAAS/M,KAAKwX,gBAAgBG,kBAAkB3X,KAAK0X,OAAOC,kBAAkB3X,KAAKwX,gBAAgB3K,YAAY7M,KAAK0X,OAAO7K,YAAY7M,KAAKwX,gBAAgB1K,WAAW9M,KAAK0X,OAAO5K,WAAW9M,KAAKwX,gBAAgBnY,kBAAkBW,KAAK0X,OAAOrY,kBAAkBW,KAAKwX,gBAAgBlY,eAAeU,KAAK0X,OAAOpY,eAAeU,KAAKwX,gBAAgBI,qBAAqBzU,EAAEA,EAAEyU,qBAAqB,EAAE5X,KAAKwX,gBAAgB,oBAAoB,OAAOxX,KAAK0X,OAAO,UAAU3X,EAAEoD,EAAEwC,EAAEC,EAAEY,EAAEL,EAAE6F,GAAG,GAAGhM,KAAK0X,OAAOrY,kBAAkB,CAAC,MAAMsG,EAAE5F,EAAE8X,aAAa,aAAU5L,EAAE,CAAC6L,cAAc,CAAC/X,EAAEoD,EAAExE,EAAEuG,KAAK,MAAMsB,GAAE,OAAEgH,EAAE7H,EAAEoS,KAAK,EAAE7S,EAAE,GAAGS,EAAEoS,KAAK,EAAE7S,EAAE,GAAGS,EAAEoS,KAAK,EAAE7S,EAAE,IAAIiB,GAAE,OAAEyE,EAAE7K,EAAEoD,EAAExE,GAAG,OAAO,OAAE6H,EAAEA,EAAExG,KAAK0X,OAAO7J,WAAWjI,EAAE3F,OAAO+X,yBAAyBxR,KAAI,OAAEL,EAAEA,EAAEK,GAAG,CAACL,EAAE,GAAGA,EAAE,GAAGA,EAAE,KAAK8R,YAAYlY,IAAI,MAAMoD,GAAE,QAAEpD,EAAEyN,GAAG,OAAO,QAAEzN,EAAEC,KAAK0X,OAAO7J,WAAWjI,EAAE3F,OAAO+X,yBAAyB7U,OAAM,QAAEpD,EAAEoD,EAAEyC,EAAEY,EAAEL,EAAE8F,EAAED,QAAQ,QAAEjM,EAAEoD,EAAEyC,EAAEY,EAAEL,OAAE,EAAO6F,GAAG,cAAcjM,GAAG,OAAO,IAAIA,EAAEP,QAAQ,IAAIO,EAAEP,QAAQ,IAAIO,EAAEP,OAAO,IAAI4L,EAAErL,QAAG,EAAO,qBAAqB,OAAO,IAAImY,EAAElY,KAAK0X,OAAOrY,oBAAoB,MAAM+L,UAAU,IAAE,YAAYrL,GAAGuX,MAAMvX,GAAGC,KAAKmY,mBAAmB,iBAAiBpY,GAAGC,KAAKoY,UAAUpY,KAAKqY,aAAaC,0BAA0B,KAAEtY,KAAK0I,SAAS6P,mBAAmBvY,KAAKR,OAAOO,GAAGC,KAAKoY,WAAW,UAAUrY,GAAG,GAAG,IAAIC,KAAKR,OAAO,OAAO,IAAIO,EAAE,IAAIoD,EAAE,EAAE,OAAOnD,KAAKoY,UAAUI,cAAc3L,cAAc1J,EAAEnD,KAAKoY,UAAUI,cAAc1L,WAAW,EAAE,GAAG/M,IAAIoD,EAAE,iBAAiBpD,GAAGC,KAAKmY,iBAAiBpY,GAAG,KAAKA,EAAEoD,GAAGpD,EAAE0Y,YAAYzY,KAAKoY,UAAUM,SAAS1Y,KAAKoY,UAAUO,SAAS5Y,EAAEC,KAAK0I,SAASkQ,oBAAoBzV,IAAI,MAAMoI,EAAE,CAACqB,MAAM,CAAC,EAAE,EAAE,EAAE,GAAGiM,YAAY,CAAC,EAAE,EAAE,EAAE,KAAKC,kBAAiB,QAAE,SAAI,CAAC,IAAI,IAAI,KAAKjM,aAAY,EAAGC,YAAW,EAAG6K,mBAAkB,EAAG5K,SAAS,EAAE1N,mBAAkB,EAAGwO,WAAW,GAAGvO,gBAAe,KAAM,MAAG,MAAM4Y,EAAE,YAAYnY,GAAGC,KAAKX,kBAAkBU,EAAE,MAAMoD,GAAE,UAAI4V,MAAM,eAAYA,MAAM,aAAU/Y,KAAKX,mBAAmB8D,EAAE4V,MAAM,aAAU/Y,KAAKgZ,mBAAmB7V,EAAE,SAASpD,GAAG,OAAOC,KAAKgZ,mBAAmBC,aAAalZ,GAAG,aAAaA,GAAG,OAAOA,EAAEmZ,QAAQ,eAAYpT,OAAO,MAAM/F,EAAEoD,EAAEkC,EAAEtB,GAAG,IAAG,QAAEZ,EAAEnD,KAAKgZ,mBAAmBjZ,EAAEyV,eAAezV,EAAEoZ,wBAAwB9T,EAAEtB,GAAG/D,KAAKX,kBAAkB,CAAC,KAAK,eAAY8D,EAAEiW,YAAY,MAAM,IAAIC,MAAM,GAAG,mFAAgF,CAAC,MAAMza,EAAEuE,EAAEiW,WAAW,aAAUza,EAAEwE,EAAE+V,QAAQ,cAAU,QAAE,IAAIta,EAAE0a,MAAM,MAAMpU,EAAEG,EAAEkU,SAAS,YAAS,MAAG,IAAIrU,EAAE,MAAM,IAAImU,MAAM,8BAA8B,cAAU,QAAE1a,EAAEC,EAAEmZ,KAAKhY,EAAEoZ,wBAAwBjU,EAAEnB,MAAM,MAAMyJ,GAAE,SAAI5C,GAAE,U,+HCA/3G,MAAMjM,EAAE,cAAcqB,KAAKwZ,MAAM,IAAIjS,IAAI,UAAUvH,KAAKwZ,MAAM/Q,SAAStF,KAAI,QAAEA,EAAEsW,WAAWtW,EAAEsW,QAAQC,UAAUvW,EAAEsW,QAAQ,SAASzZ,KAAKwZ,MAAMG,QAAQ,QAAQ5Z,GAAG,IAAG,QAAEA,GAAG,OAAO,KAAK,MAAMpB,EAAEqB,KAAK4Z,UAAU7Z,GAAGgE,EAAE/D,KAAKwZ,MAAMpQ,IAAIzK,GAAG,GAAGoF,EAAE,OAAOA,EAAE8V,WAAW9V,EAAE+V,KAAK,MAAMlb,EAAEoB,KAAK+Z,qBAAqBha,EAAE,GAAGmF,EAAEtG,EAAEkH,OAAO,EAAEU,EAAE,CAACqT,SAAS,EAAEJ,QAAQ,KAAKK,KAAK,CAAC/Z,EAAEpB,MAAK,QAAE6H,EAAEiT,WAAWjT,EAAEiT,QAAQ,IAAI,IAAE1Z,EAAE,CAAC8P,MAAMjR,EAAEkH,OAAOgK,OAAO,EAAEkK,eAAe,KAAKC,YAAY,KAAKC,SAAS,KAAKC,SAAS,OAAOvb,IAAImB,EAAEqa,YAAY5T,EAAEiT,QAAQ9a,GAAGuG,IAAI,OAAOlF,KAAKwZ,MAAMnQ,IAAI1K,EAAE6H,GAAGA,EAAEsT,KAAK,QAAQzU,GAAG,IAAG,QAAEA,GAAG,OAAO,MAAM1G,EAAEqB,KAAK4Z,UAAUvU,GAAGtB,EAAE/D,KAAKwZ,MAAMpQ,IAAIzK,GAAGoF,IAAIA,EAAE8V,WAAW,IAAI9V,EAAE8V,YAAW,QAAE9V,EAAE0V,UAAU1V,EAAE0V,QAAQC,UAAU1Z,KAAKwZ,MAAM7P,OAAOhL,KAAK,KAAKoB,EAAEoD,GAAG,MAAMkC,EAAErF,KAAKqa,QAAQlX,GAAG,OAAOnD,KAAKsa,QAAQva,GAAGsF,EAAE,UAAUtF,GAAG,OAAOA,EAAEwa,KAAK,KAAK,qBAAqBxa,EAAEoD,GAAG,MAAMkC,EAAEtF,EAAEya,QAAO,CAAEza,EAAEoD,IAAIpD,EAAEoD,IAAIA,EAAExE,EAAE,IAAI8b,WAAWpV,GAAG,IAAItB,GAAE,EAAGnF,EAAE,EAAE,IAAI,MAAMyG,KAAKtF,EAAE,CAAC,IAAI,IAAIA,EAAE,EAAEA,EAAEsF,EAAElC,EAAEpD,IAAIpB,EAAEC,KAAKmF,EAAE,IAAI,EAAEA,GAAGA,EAAE,OAAOpF,GAAG,SAASoF,EAAEhE,GAAG,OAAO,QAAEA,GAAGA,EAAEA,EAAE0D,QAAQ,SAAS7E,EAAEmB,GAAG,MAAM,CAACA,EAAEA,K,kNCApU,MAAMwB,UAAU,IAAE,kBAAkBxB,GAAG,MAAMsF,EAAE9D,EAAEmZ,OAAOtR,MAAMrF,EAAE/D,KAAKwY,cAAcrV,EAAEkC,EAAExF,MAAM,CAACL,OAAOuE,EAAEvE,OAAOmY,kBAAkB5T,EAAE4T,kBAAkBgD,uBAAuB5W,EAAE4W,uBAAuBC,+BAA8B,EAAGvb,kBAAkB0E,EAAE1E,kBAAkBC,eAAeyE,EAAEzE,eAAeG,WAAW,IAAIsE,EAAE6T,uBAAuB,OAAO,IAAI,IAAE7X,EAAE8a,KAAK1X,EAAE2X,eAAe,UAAU3X,EAAE2X,eAAe,YAAY5C,GAAG,SAASnY,EAAEsF,EAAEtB,GAAG,MAAM1E,kBAAkB8D,EAAE7D,eAAe4F,GAAGlF,KAAKwY,eAAe5L,MAAMhO,EAAEia,YAAYla,EAAEma,iBAAiBnT,GAAGN,EAAE,yBAAuBrF,KAAK0Y,QAAQ3U,EAAE9D,OAAOgQ,kBAAkBjQ,KAAK0Y,QAAQqC,cAAc,QAAQnc,GAAGsG,IAAIlF,KAAK0Y,QAAQqC,cAAc,cAAc/a,KAAKgb,WAAWC,EAAEtc,EAAEC,IAAIoB,KAAK0Y,QAAQwC,cAAc,mBAAmBvV,GAAG3F,KAAK0Y,QAAQyC,oBAAoB,aAAapX,EAAE9D,OAAOmb,6BAA6BjY,GAAG,qBAAmBnD,KAAK0Y,QAAQrT,EAAEtB,GAAG,WAAWhE,EAAEsF,EAAEtB,GAAG,MAAMZ,EAAE,EAAEkC,EAAE,GAAGH,EAAEG,EAAE,GAAGtB,EAAE,GAAGZ,EAAE,OAAO,IAAI+B,GAAGnF,EAAE,GAAGmF,EAAEnF,IAAIA,EAAE,IAAIsF,EAAE,GAAGA,EAAE,GAAGtB,EAAE,GAAGA,EAAE,GAAGZ,GAAG+B,EAAEnF,EAAE,IAAIsF,EAAE,GAAGA,EAAE,GAAGtB,EAAE,GAAGA,EAAE,GAAGZ,GAAG+B,EAAEnF,EAAE,IAAIsF,EAAE,GAAGA,EAAE,GAAGtB,EAAE,GAAGA,EAAE,GAAGZ,GAAG+B,EAAEnF,EAAE,GAAGgE,EAAE,GAAGhE,GAAG,SAASA,GAAG,aAAWC,KAAK0Y,QAAQ3Y,GAAG,oBAAkBC,KAAK0Y,QAAQ3Y,EAAE2P,OAAO3P,EAAEE,OAAOmb,4BAA4B,EAAApP,EAAA,uBAAyBhM,KAAK0Y,QAAQ1Y,KAAKwY,cAAczY,GAAG,iBAAiBA,GAAG,MAAMsF,EAAErF,KAAKwY,cAAczU,EAAE,IAAIhE,EAAEoD,EAAE,IAAIpD,EAAE,OAAO,QAAE,CAACsb,SAAS,IAAIhW,EAAE7F,QAAQ,IAAI6F,EAAE7F,SAAS6F,EAAEwH,YAAY,KAAK9I,EAAE,MAAE,QAAEhE,GAAGub,SAASpW,EAAEG,EAAE0H,SAAS,IAAI7H,GAAG,CAACqW,KAAK,IAAIrW,EAAE,KAAK,KAAKyC,KAAK,OAAO6T,UAAU,CAACC,KAAKtY,EAAE,IAAIkC,EAAE/F,eAAe,IAAI,KAAKoc,WAAW3X,EAAEsB,EAAEyH,YAAY,MAAE,QAAE/M,GAAG4b,WAAW,KAAEC,cAAc7X,GAAGZ,EAAE,KAAK,OAAI,IAAI+B,EAAE,qBAAqB,OAAOlF,KAAK6b,iBAAiB7b,KAAKwY,cAAcZ,uBAAuBrW,EAAEmZ,OAAO,IAAI,IAAE,KAAE,IAAK,kCAA0C,MAAMxO,UAAU,IAAE,cAAcoL,SAASwE,WAAW9b,KAAKR,OAAO,EAAEQ,KAAK+M,SAAS,EAAE/M,KAAK2X,mBAAkB,EAAG3X,KAAK2a,wBAAuB,EAAG3a,KAAK6M,aAAY,EAAG7M,KAAK8M,YAAW,EAAG9M,KAAKX,mBAAkB,EAAGW,KAAKV,gBAAe,EAAGU,KAAK4X,qBAAqB,IAAG,OAAE,EAAC,OAAE,CAACmE,MAAM,KAAK7P,EAAE8P,UAAU,cAAS,IAAQ,OAAE,EAAC,OAAE,CAACD,MAAM,KAAK7P,EAAE8P,UAAU,gBAAW,IAAQ,OAAE,EAAC,UAAK9P,EAAE8P,UAAU,yBAAoB,IAAQ,OAAE,EAAC,UAAK9P,EAAE8P,UAAU,8BAAyB,IAAQ,OAAE,EAAC,UAAK9P,EAAE8P,UAAU,mBAAc,IAAQ,OAAE,EAAC,UAAK9P,EAAE8P,UAAU,kBAAa,IAAQ,OAAE,EAAC,UAAK9P,EAAE8P,UAAU,yBAAoB,IAAQ,OAAE,EAAC,UAAK9P,EAAE8P,UAAU,sBAAiB,IAAQ,OAAE,EAAC,OAAE,CAACD,MAAM,KAAK7P,EAAE8P,UAAU,4BAAuB,GAAQ,MAAMxO,EAAE,CAACyO,SAAS,WAAWC,OAAO,SAASC,OAAO,UAAUjE,EAAE,CAACkE,SAAS,EAAE7G,OAAO,EAAEpV,OAAO,GAAG8a,GAAE","file":"chunks/8291.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Transform as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ShaderBuilder as r}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ColorConversion as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{Slice as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{symbolAlphaCutoff as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ScreenSizeScaling as l}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";function n(n){const s=new r;return s.include(o,{linearDepth:!1}),s.include(l.builder,{}),s.include(a,n),s.fragment.include(i),s.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),s.fragment.uniforms.add(\"color\",\"vec4\"),s.attributes.add(\"position\",\"vec3\"),s.varyings.add(\"vWorldPosition\",\"vec3\"),n.screenSizeEnabled&&s.attributes.add(\"offset\",\"vec3\"),n.shadingEnabled&&(s.vertex.uniforms.add(\"viewNormal\",\"mat4\"),s.fragment.uniforms.add(\"shadedColor\",\"vec4\").add(\"shadingDirection\",\"vec3\"),s.attributes.add(\"normal\",\"vec3\"),s.varyings.add(\"vViewNormal\",\"vec3\")),s.vertex.code.add(e`\n    void main(void) {\n      vWorldPosition = ${n.screenSizeEnabled?\"screenSizeScaling(offset, position)\":\"position\"};\n  `),n.shadingEnabled&&s.vertex.code.add(e`\n      vec3 worldNormal = normal;\n      vViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;\n    `),s.vertex.code.add(e`\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  }\n  `),s.fragment.code.add(e`\n    void main() {\n      discardBySlice(vWorldPosition);\n    `),n.shadingEnabled?s.fragment.code.add(e`\n      vec3 viewNormalNorm = normalize(vViewNormal);\n      float shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\n      vec4 finalColor = mix(color, shadedColor, shadingFactor);\n    `):s.fragment.code.add(e`\n      vec4 finalColor = color;\n    `),s.fragment.code.add(e`\n      if (finalColor.a < ${e.float(d)}) {\n        discard;\n      }\n      ${7===n.output?e`gl_FragColor = vec4(finalColor.a);`:\"\"}\n\n      ${0===n.output?e`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${n.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}`:\"\"}\n    }\n    `),s}var s=Object.freeze({__proto__:null,build:n});export{s as S,n as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../core/compilerUtils.js\";import{isSome as t,isNone as i,unwrapOr as s,unwrap as o}from\"../../../core/maybe.js\";import{once as n}from\"../../../core/accessorSupport/utils.js\";import r from\"../../../geometry/Point.js\";import\"../../../geometry.js\";import a from\"../../../core/Evented.js\";import{deg2rad as c}from\"../../../core/mathUtils.js\";import{createScreenPointArray as l,createRenderScreenPointArray3 as h,screenPointObjectToArray as d,castRenderScreenPointArray as _}from\"../../../core/screenUtils.js\";import{c as u,Z as g}from\"../../../chunks/vec3f64.js\";import{b as m,t as f,i as p,a as b,g as v,h as y,s as j,f as L}from\"../../../chunks/vec3.js\";import{getReferenceEllipsoid as S}from\"../../../geometry/projectionEllipsoid.js\";import{c as R,d as w,m as O,i as T}from\"../../../chunks/mat4.js\";import{containsPointObject as E}from\"../../../geometry/support/aaBoundingRect.js\";import{canProjectWithoutEngine as A,projectPoint as D,sphericalECEFToSphericalPCPF as I,computeLatLonToENURotation as P}from\"../../../geometry/projection.js\";import{a as F}from\"../../../chunks/mat3f64.js\";import{a as z}from\"../../../chunks/mat4f64.js\";import{f as k}from\"../../../chunks/mat3.js\";import{j as C}from\"../../../chunks/vec2.js\";import{getElevationAtPoint as M}from\"../support/ElevationProvider.js\";import{sv3d as x}from\"../support/stack.js\";import{ray as B,plane as V,lineSegment as W}from\"../support/geometryUtils.js\";import H from\"../webgl-engine/lib/Object3D.js\";import U from\"../webgl-engine/lib/Camera.js\";import{clonePoint as G}from\"../../../layers/graphics/hydratedFeatures.js\";import N from\"../webgl-engine/lib/Layer.js\";class Z{constructor(e){this.camera=new U,this._elevation={offset:0,override:null},this.collisionType={type:\"point\"},this.collisionPriority=0,this._renderObjects=[],this.autoScaleRenderObjects=!0,this._available=!0,this._noDisplayCount=0,this._radius=10,this._worldSized=!1,this.focusMultiplier=2,this.touchMultiplier=2.5,this.worldOriented=!1,this._modelTransform=z(),this._worldFrame=null,this._renderLocation=u(),this._renderLocationDirty=!0,this._location=new r({x:0,y:0,z:0}),this._elevationAlignedLocation=new r,this._elevationAlignedLocationDirty=!0,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.cursor=null,this._grabbing=!1,this.dragging=!1,this._hovering=!1,this._selected=!1,this._state=0,this._focused=!1,this.events=new a.EventEmitter,this._screenLocation={screenPointArray:l(),renderScreenPointArray:h(),pixelSize:0},this._screenLocationDirty=!0,this._applyObjectTransform=null,this._engineResourcesAddedToStage=!1,this._engineResources=null,this._attached=!1,this._engineLayerId=null,this._materialIdReferences=null,this._location.spatialReference=e.view.spatialReference;for(const t in e)this[t]=e[t];this.view.state&&this.view.state.camera&&this.camera.copyFrom(this.view.state.camera)}destroy(){this._removeResourcesFromStage(),this._engineResources=null,this.view=null,this.camera=null}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this._elevationAlignedLocationDirty=!0,this._renderLocationDirty=!0,this._updateEngineObject()}get renderObjects(){return this._renderObjects}set renderObjects(e){this._removeResourcesFromStage(),this._engineResources=null,this._renderObjects=e.slice(),this._updateEngineObject()}set available(e){e!==this._available&&(this._available=e,this._updateEngineObject())}get available(){return this._available}disableDisplay(){return this._noDisplayCount++,1===this._noDisplayCount&&this._updateEngineObject(),{remove:n((()=>{this._noDisplayCount--,0===this._noDisplayCount&&this._updateEngineObject()}))}}set radius(e){e!==this._radius&&(this._radius=e,this._updateEngineObject())}get radius(){return this._radius}set worldSized(e){e!==this._worldSized&&(this._worldSized=e,this._updateEngineObject())}get worldSized(){return this._worldSized}get modelTransform(){return this._modelTransform}set modelTransform(e){q(e)&&(this._screenLocationDirty=!0),R(this._modelTransform,e),this._updateEngineObject()}get renderLocation(){return this._renderLocationDirty&&(this._renderLocationDirty=!1,this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented?(this._worldFrame||(this._worldFrame=z()),function(e,t,i){switch(e.viewingMode){case\"local\":return T(i),!0;case\"global\":{const s=S(e.renderCoordsHelper.spatialReference);I(t,0,te,0,s.radius),P(c(te[1]),c(te[0]),i)}}}(this.view,this._renderLocation,this._worldFrame)):this._worldFrame&&(this._worldFrame=null)),this._renderLocation}set renderLocation(e){this.view.renderCoordsHelper.fromRenderCoords(e,this._location),this.elevationAlignedLocation=this._location}get location(){return this._location}set location(e){G(e,this._location),this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!0,this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}get elevationAlignedLocation(){return this._elevationAlignedLocationDirty?(this._evaluateElevationAlignment(),this._updateElevationAlignedLocation(),this._elevationAlignedLocation):this._elevationAlignedLocation}set elevationAlignedLocation(e){G(e,this._location),this._evaluateElevationAlignment(),this._location.z-=this._elevation.offset,this._updateElevationAlignedLocation(),this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}_updateElevationAlignedLocation(){this._elevationAlignedLocation.x=this.location.x,this._elevationAlignedLocation.y=this.location.y;const e=t(this._elevation.override)?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.z=e+this._elevation.offset,this._elevationAlignedLocation.spatialReference=this.location.spatialReference,this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!1}grabbableForEvent(){return!0}get grabbing(){return this._grabbing}set grabbing(e){e!==this._grabbing&&(this._grabbing=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get hovering(){return this._hovering}set hovering(e){e!==this._hovering&&(this._hovering=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get selected(){return this._selected}set selected(e){e!==this._selected&&(this._selected=e,this._updateEngineObject(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._updateEngineObject())}updateStateEnabled(e,t){t?this.state|=e:this.state&=~e}_setFocused(e){e!==this._focused&&(this._focused=e,this.events.emit(\"focus-changed\",{action:!0===e?\"focus\":\"unfocus\"}))}get focused(){return this._focused}get screenLocation(){return this.ensureScreenLocation(),this._screenLocation}ensureScreenLocation(){if(!this._screenLocationDirty)return;this._screenLocation.pixelSize=this.camera.computeScreenPixelSizeAt(this.renderLocation),this._screenLocationDirty=!1;let e;if(q(this._modelTransform)){const t=this._calculateModelTransformOffset(re);e=m(t,t,this.renderLocation)}else e=this.renderLocation;this.camera.projectToRenderScreen(e,this._screenLocation.renderScreenPointArray),this.camera.renderToScreen(this._screenLocation.renderScreenPointArray,this._screenLocation.screenPointArray)}get applyObjectTransform(){return this._applyObjectTransform}set applyObjectTransform(e){this._applyObjectTransform=e,this._screenLocationDirty=!0,this._updateEngineObject()}intersectionDistance(t,s){if(!this.available)return null;const o=d(t,J),n=this._getCollisionRadius(s),r=-1*this.collisionPriority;switch(this.collisionType.type){case\"point\":if(C(this.screenLocation.screenPointArray,o)<n*n)return this.screenLocation.renderScreenPointArray[2]+r;break;case\"line\":{const e=this.collisionType.paths,t=this._getWorldToScreenObjectScale(),s=this._calculateObjectTransform(t,$),a=n*this.screenLocation.pixelSize,c=B.fromScreen(this.camera,o,Q);if(i(c))return null;for(const t of e){if(0===t.length)continue;const e=p(te,t[0],s);for(let i=1;i<t.length;i++){const o=p(ie,t[i],s),n=W.closestRayDistance2(W.fromPoints(e,o,K),c);if(null!=n&&n<a*a){const t=m(x.get(),e,o);b(t,t,.5);const i=_(x.get());return this.camera.projectToRenderScreen(t,i),i[2]+r}v(e,o)}}break}case\"disc\":{var a;const e=this.collisionType.direction,t=null!=(a=this.collisionType.offset)?a:g,s=this._getWorldToScreenObjectScale(),c=this._calculateObjectTransform(s,$),l=n*this.screenLocation.pixelSize,h=B.fromScreen(this.camera,o,Q);if(i(h))return null;const d=k(X,c),_=f(oe,e,d),u=p(ne,t,c);V.fromPositionAndNormal(u,_,ee);const m=se;if(V.intersectRay(ee,h,m)&&y(m,u)<l*l)return this.screenLocation.renderScreenPointArray[2]+r;break}case\"ribbon\":{const{paths:e,direction:t}=this.collisionType,s=this._getWorldToScreenObjectScale(),a=this._calculateObjectTransform(s,$),c=n*this.camera.computeScreenPixelSizeAt(this.renderLocation),l=B.fromScreen(this.camera,o,Q);if(i(l))return null;const h=k(X,a),d=f(oe,t,h),u=this._calculateModelTransformPosition(ne);V.fromPositionAndNormal(u,d,ee);const g=se;if(!V.intersectRay(ee,l,g))break;for(const t of e){if(0===t.length)continue;const e=p(te,t[0],a);for(let i=1;i<t.length;i++){const s=p(ie,t[i],a),o=W.distance2(W.fromPoints(e,s,K),g);if(null!=o&&o<c*c){const t=m(x.get(),e,s);b(t,t,.5);const i=_(x.get());return this.camera.projectToRenderScreen(t,i),i[2]+r}v(e,s)}}break}default:e(this.collisionType)}return null}attach(e={manipulator3D:{}}){if(!this.view._stage)return;const t=e.manipulator3D;if(this._engineLayerId=t.engineLayerId,i(this._engineLayerId)){const e=new N(\"manipulator-3d\",{isPickable:!1});this.view._stage.add(0,e),this.view._stage.addToViewContent([e.id]),this._engineLayerId=e.id,t.engineLayerId=e.id}t.engineLayerReferences=(t.engineLayerReferences||0)+1,this._materialIdReferences=t.materialIdReferences,i(this._materialIdReferences)&&(this._materialIdReferences=new Map,t.materialIdReferences=this._materialIdReferences),this.camera.copyFrom(this.view.state.camera),this._attached=!0,this._updateEngineObject(),A(this._location.spatialReference,this.view.spatialReference)||(this.location=new r({x:0,y:0,z:0,spatialReference:this.view.spatialReference}))}detach(e={manipulator3D:{}}){const t=e.manipulator3D;t.engineLayerReferences--;const i=0===t.engineLayerReferences;i&&(t.engineLayerId=null),this._removeResourcesFromStage(i),this._engineResources=null,this._engineLayerId=null,this._materialIdReferences=null,this._attached=!1}onViewChange(){this.camera.copyFrom(this.view.state.camera),this._screenLocationDirty=!0,this._updateEngineObject()}onElevationChange(e){D(this.location,ae,e.spatialReference),E(e.extent,ae)&&(this.location=this._location)}_evaluateElevationAlignment(e=this.location){if(i(this.elevationInfo))return!1;let t=null,o=0;const n=s(this.elevationInfo.offset,0);switch(this.elevationInfo.mode){case\"on-the-ground\":t=M(this.view.elevationProvider,e,\"ground\")||0;break;case\"relative-to-ground\":o=(M(this.view.elevationProvider,e,\"ground\")||0)+n;break;case\"relative-to-scene\":o=(M(this.view.elevationProvider,e,\"scene\")||0)+n;break;case\"absolute-height\":o=n}return(o!==this._elevation.offset||t!==this._elevation.override)&&(this._elevation.offset=o,this._elevation.override=t,!0)}_updateEngineObject(){if(!this._attached)return;if(!this.available)return void this._removeResourcesFromStage();const e=this._getWorldToScreenObjectScale(),t=$;if(!0===this.autoScaleRenderObjects){const i=this._getFocusedSize(this._radius,this.focused)*e;this._calculateObjectTransform(i,t)}else this._calculateObjectTransform(e,t);const{objectsByState:i}=this._ensureEngineResources(),s=(this.focused?2:1)|(this.selected?8:4),o=this._noDisplayCount>0;for(const{stateMask:e,objects:n}of i){if(o){for(const e of n)e.setVisible(!1);continue}const i=!(0!=(15&e))||(s&e)==(15&e),r=!(0!=(65520&e))||(this.state&e)==(65520&e);if(i&&r)for(const e of n)e.setVisible(!0),e.objectTransformation=t;else for(const e of n)e.setVisible(!1)}}_ensureEngineResources(){if(i(this._engineResources)){const e=this.view._stage.getContent(0,o(this._engineLayerId)),t=[],i=new Set;this.renderObjects.forEach((({material:e})=>{i.has(e)||(t.push(e),i.add(e))}));const s=(e,t)=>{const{geometry:i,material:s,transform:o}=t;Array.isArray(i)?i.forEach((t=>e.addGeometry(t,s,o))):e.addGeometry(i,s,o)},n=new Map;this.renderObjects.forEach((e=>{const t=new H({idHint:\"manipulator\",castShadow:!1});s(t,e);const i=e.stateMask||0,o=n.get(i)||[];o.push(t),n.set(i,o)}));const r=[];n.forEach(((e,t)=>{r.push({stateMask:t,objects:e})})),this._engineResources={objectsByState:r,layer:e,materials:t}}return this._addResourcesToStage(),this._engineResources}_addResourcesToStage(){if(this._engineResourcesAddedToStage||i(this._engineResources))return;const{objectsByState:e,layer:t,materials:s}=this._engineResources;s.forEach((e=>{const t=o(this._materialIdReferences),i=t.get(e.id)||0;0===i&&this.view._stage.add(3,e),t.set(e.id,i+1)})),e.forEach((({objects:e})=>{e.forEach((e=>{t.addObject(e),this.view._stage.add(1,e)}))})),this._engineResourcesAddedToStage=!0}_removeResourcesFromStage(e=!1){if(!this._engineResourcesAddedToStage||i(this._engineResources))return;const{objectsByState:t,layer:s,materials:n}=this._engineResources;t.forEach((({objects:e})=>{e.forEach((e=>{s.removeObject(e),this.view._stage.remove(1,e.id)}))})),n.forEach((e=>{const t=o(this._materialIdReferences),i=t.get(e.id);1===i?(this.view._stage.remove(3,e.id),t.delete(e.id)):t.set(e.id,i-1)})),e&&this.view._stage.remove(0,s.id),this._engineResourcesAddedToStage=!1}_getCollisionRadius(e){return this._getFocusedSize(this.radius,!0)*(\"touch\"===e?this.touchMultiplier:1)}_getFocusedSize(e,t){return e*(t?this.focusMultiplier:1)}_getWorldToScreenObjectScale(){return this._worldSized?1:this.screenLocation.pixelSize}_calculateModelTransformPosition(e){const t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,Y);return j(e,i[12],i[13],i[14])}_calculateModelTransformOffset(e){const t=this._calculateModelTransformPosition(e);return L(e,t,this.renderLocation)}_calculateObjectTransform(e,i){return w(i,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1),this._worldFrame&&O(i,i,this._worldFrame),O(i,i,this._modelTransform),i[12]+=this.renderLocation[0],i[13]+=this.renderLocation[1],i[14]+=this.renderLocation[2],i[15]=1,t(this._applyObjectTransform)&&this._applyObjectTransform(i),i}get test(){let e=!1;if(t(this._engineResources))for(const t in this._engineResources.objectsByState){const i=this._engineResources.objectsByState[t];for(const t of i.objects)if(t.isVisible){e=!0;break}if(e)break}return{areAnyResourcesVisible:e}}}function q(e){return 0!==e[12]||0!==e[13]||0!==e[14]}const J=l(),K=W.create(),Q=B.create(),X=F(),Y=z(),$=z(),ee=V.create(),te=u(),ie=u(),se=u(),oe=u(),ne=u(),re=u(),ae=new r({x:0,y:0,z:0,spatialReference:null});export{Z as Manipulator3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as r,unwrapOr as n}from\"../../../../core/maybe.js\";import t from\"../../../../geometry/Point.js\";import\"../../../../geometry.js\";import{sign as o}from\"../../../../core/mathUtils.js\";import{screenPointObjectToArray as s,castScreenPointArray as c,createScreenPointArray as l}from\"../../../../core/screenUtils.js\";import{c as i}from\"../../../../chunks/vec3f64.js\";import{g as a,l as u,f as m,d,a as p,b as f,c as S}from\"../../../../chunks/vec3.js\";import{projectPoint as g}from\"../../../../geometry/projection.js\";import{getZForElevationMode as y,getGraphicEffectiveElevationInfo as j}from\"../../../../support/elevationInfoUtils.js\";import{sv2d as E}from\"../../support/stack.js\";import{ray as x,plane as w,vector as b}from\"../../support/geometryUtils.js\";import{TERRAIN_ID as v}from\"../../webgl-engine/lib/intersectorUtils.js\";import{Intersector as I}from\"../../webgl-engine/lib/Intersector.js\";import{EventPipeline as P}from\"../../../interactive/dragEventPipeline.js\";function R(n,t){const o=i(),l=i();let a=!1;return i=>{if(\"start\"===i.action){const r=s(i.screenStart,c(E.get())),l=x.fromScreen(n.state.camera,r,G);e(l)&&(a=w.intersectRay(t,l,o))}if(!a)return null;const u=s(i.screenEnd,c(E.get())),m=x.fromScreen(n.state.camera,u,G);return r(m)?null:w.intersectRay(t,m,l)?{...i,renderStart:o,renderEnd:l,plane:t,ray:m}:null}}function C(n,t,o,s=null){let c=null;return i=>{if(\"start\"===i.action&&(c=n.sceneIntersectionHelper.intersectElevationFromScreen(l(i.screenStart.x,i.screenStart.y),t,o),e(c)&&e(s)&&!g(c,c,s)))return null;if(r(c))return null;const a=n.sceneIntersectionHelper.intersectElevationFromScreen(l(i.screenEnd.x,i.screenEnd.y),t,o);return e(a)?e(s)&&!g(a,a,s)?null:{...i,mapStart:c,mapEnd:a}:null}}function H(e,r,n,t=null){return C(e,n,y(r,e,n),t)}function U(e,r,n,t=null){return H(e,n,j(r),t)}function k(r,n,t,o){const s=n.toMap(r.screenStart,{include:[t]});return e(s)?U(n,t,s,o):null}function h(e,r,n){let t=null;const o=new P;return o.next(R(e,function(e,r){const n=D,t=q,o=w.create();e.renderCoordsHelper.worldUpAtPosition(r,n);const s=S(o,n,m(t,r,e.state.camera.eye));return S(s,s,n),w.fromPositionAndNormal(r,s,o)}(e,r))).next(T(e,r)).next(A(e,n)).next((e=>{e.mapEnd.x=e.mapStart.x,e.mapEnd.y=e.mapStart.y,t=e})),e=>(t=null,o.execute(e),t)}function T(e,r){const n=i(),t=u(r);e.renderCoordsHelper.worldUpAtPosition(r,n);const s=i(),c=i(),l=s=>{if(m(s,s,r),b.projectPoint(n,s,s),\"global\"===e.viewingMode){u(s)*o(d(n,s))<.001-t&&m(s,p(s,n,.001),r)}return f(s,s,r),s};return e=>(e.renderStart=l(a(s,e.renderStart)),e.renderEnd=l(a(c,e.renderEnd)),e)}function A(r,n){const o=r.renderCoordsHelper;return r=>{const s=o.fromRenderCoords(r.renderStart,new t,n),c=o.fromRenderCoords(r.renderEnd,new t,n);return e(s)&&e(c)?{...r,mapStart:s,mapEnd:c}:null}}function F(r){let n=null;return t=>{switch(t.action){case\"start\":n=r.disableDisplay();break;case\"end\":case\"cancel\":e(n)&&(n.remove(),n=null)}return t}}function M(o,c=null){let a=null;const u=new I(o.state.mode);u.options.selectionMode=!0,u.options.store=0;const m=l(),d={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},p=i(),f=n(c,o.spatialReference),S=e=>{o.map.ground&&o.map.ground.opacity<1?d.exclude.add(v):d.exclude.delete(v),o.sceneIntersectionHelper.intersectIntersectorScreen(s(e,m),u,d);const r=u.results.min;let n;if(r.getIntersectionPoint(p))n=\"TerrainRenderer\"===r.intersector?0:1;else{if(!u.results.ground.getIntersectionPoint(p))return null;n=0}const c=new t({spatialReference:f});return o.renderCoordsHelper.fromRenderCoords(p,c),{location:c,surfaceType:n}};return n=>{if(\"start\"===n.action){const r=S(n.screenStart);a=e(r)?r.location:null}if(r(a))return null;const t=S(n.screenEnd);return e(t)?{...n,mapStart:a,mapEnd:t.location,surfaceType:t.surfaceType}:null}}const D=i(),q=i(),G=x.create();export{A as convertToMapCoordinates,F as hideManipulatorWhileDragging,T as projectToWorldUp,M as screenToMap3D,C as screenToMapXY,H as screenToMapXYAtLocation,k as screenToMapXYForGraphic,U as screenToMapXYForGraphicAtLocation,R as screenToRenderPlane,h as screenToZConstrained};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";import{f as r,c as n,i as o,n as i}from\"../../../chunks/vec3.js\";import{a}from\"../../../chunks/mat4.js\";import{b as c}from\"../../../chunks/vec4f64.js\";import{sv3d as s,sm4d as m}from\"../support/stack.js\";import l from\"../webgl-engine/lib/GeometryUtil.js\";import{hydrateGeometry as u}from\"../../../layers/graphics/hydratedFeatures.js\";import{computeCentroid as p}from\"../layers/graphics/graphicUtils.js\";import g from\"../webgl-engine/lib/Geometry.js\";import{ColorMaterial as f}from\"../webgl-engine/materials/ColorMaterial.js\";import{Manipulator3D as h}from\"./Manipulator3D.js\";import{ShadedColorMaterial as j}from\"../webgl-engine/materials/ShadedColorMaterial.js\";function d(e,t=4){const r=c(e[0],e[1],e[2],e.length>3?e[3]:1),n=e[3]<1;return new j({color:r,transparent:n,writeDepth:!0,cullFace:2,renderOccluded:t},\"manipulator\")}function w(e,t=4){const r=c(e[0],e[1],e[2],4===e.length?e[3]:1);return new f({color:r,transparent:!0,writeDepth:!0,cullFace:1,renderOccluded:t},\"manipulator-outline\")}function b(e,t,r){return new h({view:e,renderObjects:[{geometry:new g(l.createSphereGeometry(1,32,32),\"manipulator\"),material:d(c(t[0],t[1],t[2],null!=r?r:1))}]})}function y(e,t,i,c){const l=r(s.get(),e,i),u=O(l,n(s.get(),c,l),i,m.get());a(u,u);const p=o(s.get(),t,u);return Math.atan2(p[1],p[0])}function O(e,t,r,o){const a=i(s.get(),e),c=i(s.get(),t),m=n(s.get(),a,c);return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=0,o[4]=c[0],o[5]=c[1],o[6]=c[2],o[7]=0,o[8]=m[0],o[9]=m[1],o[10]=m[2],o[11]=0,o[12]=r[0],o[13]=r[1],o[14]=r[2],o[15]=1,o}function k(t,r){const n=t.getViewForGraphic(r);return e(n)&&\"computeAttachmentOrigin\"in n?n.computeAttachmentOrigin(r,t.spatialReference):null}function v(r,n,o){const i=k(r,o);e(i)?n.elevationAlignedLocation=i:function(e,r){if(t(r))return;const n=p(r);if(t(n))return;e.location=u(n)}(n,o.geometry)}export{y as calculateInputRotationTransform,O as calculateTranslateRotateFromBases,d as createManipulatorMaterial,w as createManipulatorOutlineMaterial,b as createSphereManipulator,k as getGraphicAttachmentOrigin,v as placeAtGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";var i;!function(i){i.builder=function(i,r){i.vertex.uniforms.add(\"camPos\",\"vec3\").add(\"perScreenPixelRatio\",\"float\").add(\"screenSize\",\"float\"),i.vertex.code.add(e`\n    float computeRenderPixelSizeAt( vec3 pWorld ){\n      vec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);\n      float viewDirectionDistance = abs(dot(viewForward, pWorld - camPos));\n      return viewDirectionDistance*perScreenPixelRatio;\n    }\n\n    vec3 screenSizeScaling(vec3 position, vec3 anchor){\n      return position * screenSize * computeRenderPixelSizeAt(anchor) + anchor;\n    }\n  `)},i.bindPassUniforms=function(e,i,r){e.setUniform1f(\"perScreenPixelRatio\",r.camera.perScreenPixelRatio),e.setUniform1f(\"screenSize\",i.screenSize)}}(i||(i={}));export{i as ScreenSizeScaling};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{lerp as i}from\"../../../../core/mathUtils.js\";import{createScreenPointArray as e,createRenderScreenPointArray3 as r}from\"../../../../core/screenUtils.js\";import{c as s,b as h,f as n}from\"../../../../chunks/vec3f64.js\";import{f as o,k as a,g as _,m as p,r as u,d as v,u as c,v as w,a as d,l,s as y,c as g,n as f}from\"../../../../chunks/vec3.js\";import{directionFromTo as m}from\"../../support/mathUtils.js\";import{c as x,m as D,h as j,a as M,b as R,l as P}from\"../../../../chunks/mat4.js\";import{a as F}from\"../../../../chunks/mat4f64.js\";import{f as V}from\"../../../../chunks/vec2f64.js\";import{b as S,a as T}from\"../../../../chunks/vec4f64.js\";import{c as I,k as U}from\"../../../../chunks/vec2.js\";import{c as k,g as b,i as A,t as C}from\"../../../../chunks/vec4.js\";import{p as E}from\"../../../../chunks/vector.js\";import{ray as z,frustum as H}from\"../../support/geometryUtils.js\";import{fovd2fovx as W,fovx2fovd as G,fovd2fovy as X,fovy2fovd as Y}from\"./Util.js\";class L{constructor(i=null,e=null,r=null){this._viewUp=s(),this._viewForward=s(),this._viewRight=s(),this._ray=z.createWrapper(),this._viewport=S(0,0,1,1),this._padding=S(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=V(1,1e3),this._viewDirty=!0,this._viewMatrix=F(),this._projectionDirty=!0,this._projectionMatrix=F(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=F(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=F(),this._frustumDirty=!0,this._frustum=H.create(),this._fullViewport=T(),this._contextNavigation=!0,this.pixelRatio=1,this.relativeElevation=0,this._eye=t(i)?h(i):s(),this._center=t(e)?h(e):s(),this._up=t(r)?h(r):n(0,0,1)}get eye(){return this._eye}set eye(t){this._compareAndSetView(t,this._eye)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center)}get ray(){return this._ray.origin=this.eye,this._ray.direction||(this._ray.direction=s()),o(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up)}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){x(this._viewMatrix,t),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),this._viewForward}get viewUp(){return this._ensureViewClean(),this._viewUp}get viewRight(){return this._ensureViewClean(),this._viewRight}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get x(){return this._viewport[0]}set x(t){t+=this._padding[3],this._viewport[0]!==t&&(this._viewport[0]=t,this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get y(){return this._viewport[1]}set y(t){t+=this._padding[2],this._viewport[1]!==t&&(this._viewport[1]=t,this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get fullWidth(){return this._viewport[2]+this._padding[1]+this._padding[3]}set fullWidth(t){this.width=t-(this._padding[1]+this._padding[3])}get fullHeight(){return this._viewport[3]+this._padding[0]+this._padding[2]}set fullHeight(t){this.height=t-(this._padding[0]+this._padding[2])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[3],this._fullViewport[1]=this._viewport[1]-this._padding[2],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){this._padding[0]===t[0]&&this._padding[1]===t[1]&&this._padding[2]===t[2]&&this._padding[3]===t[3]||(this._viewport[0]+=t[3]-this._padding[3],this._viewport[1]+=t[2]-this._padding[2],this._viewport[2]-=t[1]+t[3]-(this._padding[1]+this._padding[3]),this._viewport[3]-=t[0]+t[2]-(this._padding[0]+this._padding[2]),k(this._padding,t),this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get viewProjectionMatrix(){return this._viewProjectionDirty&&(D(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){if(this._projectionDirty){const t=this.width,i=this.height,e=this.near*Math.tan(this.fovY/2),r=e*this.aspect;j(this._projectionMatrix,-r*(1+2*this._padding[3]/t),r*(1+2*this._padding[1]/t),-e*(1+2*this._padding[2]/i),e*(1+2*this._padding[0]/i),this.near,this.far),this._projectionDirty=!1}return this._projectionMatrix}set projectionMatrix(t){x(this._projectionMatrix,t),this._projectionDirty=!1,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fov(){return this._fov}set fov(t){this._fov=t,this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return W(this._fov,this.width,this.height)}set fovX(t){this._fov=G(t,this.width,this.height),this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return X(this._fov,this.width,this.height)}set fovY(t){this._fov=Y(t,this.width,this.height),this._projectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return a(this._center,this._eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&(M(this._viewInverseTransposeMatrix,this.viewMatrix),R(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const i=2*t-1;return 2*this.near*this.far/(this.far+this.near-i*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return this.relativeElevation&&this.relativeElevation>=0}copyFrom(t){const i=t;return _(this._eye,i._eye),_(this._center,i._center),_(this._up,i._up),k(this._viewport,i._viewport),k(this._padding,i._padding),I(this._nearFar,i._nearFar),this._fov=i._fov,this.relativeElevation=t.relativeElevation,this._viewDirty=i._viewDirty,this._viewDirty||(x(this._viewMatrix,i._viewMatrix),_(this._viewRight,i._viewRight),_(this._viewUp,i._viewUp),_(this._viewForward,i._viewForward)),i._projectionDirty?this._projectionDirty=!0:(x(this._projectionMatrix,i._projectionMatrix),this._projectionDirty=!1),this._viewProjectionDirty=!0,this._frustumDirty=i._frustumDirty,this._frustumDirty||(H.copy(i._frustum,this._frustum),this._frustumDirty=!1),i._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(x(this._viewInverseTransposeMatrix,i._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),k(this._fullViewport,i._fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up}clone(){return(new L).copyFrom(this)}equals(t){return p(this._eye,t._eye)&&p(this._center,t._center)&&p(this._up,t._up)&&b(this._viewport,t._viewport)&&b(this._padding,t._padding)&&U(this._nearFar,t._nearFar)&&this._fov===t._fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation}almostEquals(t){if(this.pixelRatio!==t.pixelRatio||Math.abs(t._fov-this._fov)>=.001)return!1;const i=5e-4;u(B,t._eye,t._center),u(J,this._eye,this._center);const e=v(B,J),r=c(B),s=c(J);return e*e>=(1-1e-10)*r*s&&w(t._eye,this._eye)<Math.max(r,s)*i*i&&A(t._padding,this._padding)<.5&&A(t._viewport,this._viewport)<.5}markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this.viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this.viewDirectionDistance(t))}viewDirectionDistance(t){return Math.abs(E(this.viewForward,o(B,t,this._eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,i){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(i||1)))}getScreenCenter(t=e()){return t[0]=(this.padding[3]+this.width/2)/this.pixelRatio,t[1]=(this.padding[0]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,i=.5,e=.5){return t||(t=r()),t[0]=this.padding[3]+this.width*i,t[1]=this.padding[2]+this.height*e,t.length>2&&(t[2]=.5),t}setGLViewport(t){const i=this.viewport,e=this.padding;t.setViewport(i[0]-e[3],i[1]-e[2],i[2]+e[1]+e[3],i[3]+e[0]+e[2])}applyProjection(t,e,r=!1){t!==q&&_(q,t),q[3]=1,r&&(e[2]=-q[2]),C(q,q,this.projectionMatrix),d(q,q,1/Math.abs(q[3]));const s=this.fullViewport;return e[0]=i(0,s[0]+s[2],.5+.5*q[0]),e[1]=i(0,s[1]+s[3],.5+.5*q[1]),r||(e[2]=.5*(q[2]+1)),e}projectToScreen(t,i){return this.projectToRenderScreen(t,K),this.renderToScreen(K,i)}projectToRenderScreen(t,e){if(q[0]=t[0],q[1]=t[1],q[2]=t[2],q[3]=1,C(q,q,this.viewProjectionMatrix),0===q[3])return null;d(q,q,1/Math.abs(q[3]));const r=this.fullViewport;return\"x\"in e?(e.x=i(0,r[0]+r[2],.5+.5*q[0]),e.y=i(0,r[1]+r[3],.5+.5*q[1])):(e[0]=i(0,r[0]+r[2],.5+.5*q[0]),e[1]=i(0,r[1]+r[3],.5+.5*q[1]),e.length>2&&(e[2]=.5*(q[2]+1))),e}unprojectFromScreen(t,i){return this.unprojectFromRenderScreen(this.screenToRender(t,K),i)}unprojectFromRenderScreen(t,i){if(D(N,this.projectionMatrix,this.viewMatrix),!M(N,N))return null;const e=this.fullViewport;return q[0]=2*(t[0]-e[0])/e[2]-1,q[1]=2*(t[1]-e[1])/e[3]-1,q[2]=2*t[2]-1,q[3]=1,C(q,q,N),0===q[3]?null:(i[0]=q[0]/q[3],i[1]=q[1]/q[3],i[2]=q[2]/q[3],i)}constrainWindowSize(t,i,e,r=1){const s=t*this.pixelRatio,h=i*this.pixelRatio,n=Math.max(s-e*r/2,0),o=Math.max(this.fullHeight-h-e/2,0),a=-Math.min(s-e*r/2,0),_=-Math.min(this.fullHeight-h-e/2,0);return[n,o,e*r-a- -Math.min(this.fullWidth-s-e*r/2,0),e-_- -Math.min(h-e/2,0)]}computeUp(t){1===t?this.computeUpGlobal():this.computeUpLocal()}screenToRender(t,i){const e=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return i[0]=e,i[1]=r,i}renderToScreen(t,i){const e=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;return i[0]=e,i[1]=r,i}computeUpGlobal(){o(B,this.center,this.eye);const t=l(this.center);t<1?(y(this.up,0,0,1),this.markViewDirty()):Math.abs(v(B,this.center))>.9999*l(B)*t||(g(this.up,B,this.center),g(this.up,this.up,B),f(this.up,this.up),this.markViewDirty())}computeUpLocal(){m(B,this.eye,this.center),Math.abs(B[2])<=.9999&&(d(B,B,B[2]),y(this.up,-B[0],-B[1],1-B[2]),f(this.up,this.up),this.markViewDirty())}_compareAndSetView(t,i){p(t,i)||(_(i,t),this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0)}_recomputeFrustum(){this._frustumDirty&&(H.fromMatrix(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&(P(this._viewMatrix,this._eye,this._center,this._up),y(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),y(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),y(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}}const q=T(),N=F(),B=s(),J=s(),K=r();export default L;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{b as s,i as e}from\"../../../../chunks/vec3.js\";import{I as i}from\"../../../../chunks/mat4f64.js\";import{ray as a}from\"../../support/geometryUtils.js\";import{isInstanceHidden as o}from\"../materials/renderers/utils.js\";import{IntersectorOptions as n,IntersectorResults as h,IntersectorTransform as d,getVerticalOffsetObject3D as c,IntersectorResult as l}from\"./intersectorUtils.js\";class f{constructor(t){this.options=new n,this.results=new h,this.transform=new d,this.performanceInfo={queryDuration:0,numObjectsTested:0},this.tolerance=1e-5,this.verticalOffset=null,this._ray={origin:r(),direction:r()},this._rayEndPoint=r(),this._rayStartPointTransformed=r(),this._rayEndPointTransformed=r(),this.viewingMode=null==t?1:t}get ray(){return this._ray}get rayBeginPoint(){return this._ray.origin}get rayEndPoint(){return this._rayEndPoint}reset(t,r){this.resetWithRay(a.fromPoints(t,r,this._ray))}resetWithRay(t){t!==this._ray&&a.copy(t,this._ray),0!==this.options.verticalOffset?2===this.viewingMode?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,s(this._rayEndPoint,this._ray.origin,this._ray.direction),this._numObjectsTested=0,this.results.init(this._ray)}intersect(r,s,e,i,a,o){this.point=s,this.camera=e,this.filterPredicate=a,this.tolerance=null==i?1e-5:i;const n=c(this.verticalOffset),h=o?t=>{o(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};if(r&&r.length>0)for(const s of r){const r=s.getSpatialQueryAccelerator&&s.getSpatialQueryAccelerator();if(r)t(n)?r.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,h,n):r.forEachAlongRay(this._ray.origin,this._ray.direction,h),this.options.selectionMode&&this.options.hud&&r.forEachDegenerateObject(h);else{const t=s.getObjects();for(const r of t)h(r)}}this.sortResults()}intersectObject(r){this._numObjectsTested++;const s=r.geometryRecords;if(!s)return;const a=r.id,n=r.objectTransformation;let h;const d=c(this.verticalOffset);for(const c of s){const{geometry:s,material:f,instanceParameters:m}=c;if(o(m))continue;h=s.id,this.transform.setAndInvalidateLazyTransforms(n,c.getShaderTransformation()),e(this._rayStartPointTransformed,this._ray.origin,this.transform.inverse),e(this._rayEndPointTransformed,this._rayEndPoint,this.transform.inverse);const u=this.transform.transform;t(d)&&(d.objectTransform=this.transform),f.intersect(s,m,this.transform.transform,this,this._rayStartPointTransformed,this._rayEndPointTransformed,((s,e,o,n,d,c)=>{if(s>=0){if(t(this.filterPredicate)&&!this.filterPredicate(this._ray.origin,this._rayEndPoint,s))return;if(d)return void((null==this.results.hud.dist||s<this.results.hud.dist)&&this.results.hud.set(r,a,s,e,i,n,c,h,o));const f=t=>t.set(r,a,s,e,u,n,null,h,o);if((null==this.results.min.drapedLayerOrder||n>=this.results.min.drapedLayerOrder)&&(null==this.results.min.dist||s<this.results.min.dist)&&f(this.results.min),0!==this.options.store&&(null==this.results.max.drapedLayerOrder||n<this.results.max.drapedLayerOrder)&&(null==this.results.max.dist||s>this.results.max.dist)&&f(this.results.max),2===this.options.store){const t=new l(this._ray);f(t),this.results.all.push(t)}}}),c.shaderTransformation)}}sortResults(){this.results.all.sort(((t,r)=>t.dist!==r.dist?t.dist-r.dist:t.drapedLayerOrder!==r.drapedLayerOrder?(void 0!==t.drapedLayerOrder?t.drapedLayerOrder:Number.MAX_VALUE)-(void 0!==r.drapedLayerOrder?r.drapedLayerOrder:Number.MAX_VALUE):(void 0!==r.drapedLayerGraphicOrder?r.drapedLayerGraphicOrder:Number.MIN_VALUE)-(void 0!==t.drapedLayerGraphicOrder?t.drapedLayerGraphicOrder:Number.MIN_VALUE)))}}f.DEFAULT_TOLERANCE=1e-5;export{f as Intersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as s,unwrap as r}from\"../../../../core/maybe.js\";import{c as e,b as i}from\"../../../../chunks/vec3f64.js\";import{e as a,a as n,l as h,b as o,g as c,n as l,q as f,f as m}from\"../../../../chunks/vec3.js\";import{a as u,b as p,c as d,m as b}from\"../../../../chunks/mat4.js\";import{a as g}from\"../../../../chunks/mat3f64.js\";import{a as y}from\"../../../../chunks/mat4f64.js\";import{a as v}from\"../../../../chunks/quatf64.js\";import{a as S}from\"../../../../chunks/vec4f64.js\";import{b as T}from\"../../../../chunks/mat3.js\";import{t as z}from\"../../../../chunks/vec4.js\";import{c as O}from\"../../../../chunks/quat.js\";import{c as L}from\"../../../../chunks/vec3f32.js\";import{e as _}from\"../../../../chunks/boundedPlane.js\";import{c as x}from\"../../../../chunks/sphere.js\";import{ray as I}from\"../../support/geometryUtils.js\";import M from\"./Object3D.js\";function q(t){return(s,r,e)=>(a(K,s,r,e),!_(t,K))}class V{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.store=2}}class j{constructor(){this._transform=y(),this._transformInverse=new w({value:this._transform},u,y),this._transformInverseTranspose=new w(this._transformInverse,p,y),this._transformTranspose=new w({value:this._transform},p,y),this._transformInverseRotation=new w({value:this._transform},T,g)}invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){d(this._transform,t)}multiplyTransform(t){b(this._transform,this._transform,t)}set(t){d(this._transform,t),this.invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,s){this.setTransformMatrix(t),this.multiplyTransform(s),this.invalidateLazyTransforms()}}class w{constructor(t,s,r){this.original=t,this.update=s,this.dirty=!0,this.transform=r()}invalidate(){this.dirty=!0}get value(){return this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1),this.transform}}class k{constructor(){this.min=new G,this.max=new G,this.hud=new G,this.ground=new G}init(t){this.min.init(t),this.max.init(t),this.hud.init(t),this.ground.init(t),this.all=[]}}class G{constructor(t){this.normal=e(),this.transformation=y(),this._ray=I.create(),this.init(t)}get ray(){return this._ray}get hasIntersectionPoint(){return null!=this.dist}get distanceInRenderSpace(){if(null!=this.dist)return n(Q,this.ray.direction,this.dist),h(Q)}getIntersectionPoint(t){return!!this.hasIntersectionPoint&&(n(Q,this.ray.direction,this.dist),o(t,this.ray.origin,Q),!0)}getTransformedNormal(t){return c(W,this.normal),W[3]=0,z(W,W,this.transformation),c(t,W),l(t,t),t}init(t){this.dist=void 0,this.target=void 0,this.name=void 0,this.drapedLayerOrder=void 0,this.drapedLayerGraphicOrder=void 0,this.center=null,this.geometryId=null,this.triangleNr=null,this.intersector=\"Stage\",t?I.copy(t,this._ray):this._ray=I.create()}set(t,s,r,e,a,n,h,o,l,f){t instanceof M&&(t={type:\"stage\",obj:t}),this.dist=r,c(this.normal,e),d(this.transformation,a),this.target=t,this.name=s,this.drapedLayerOrder=n,this.center=h?i(h):null,this.geometryId=o,this.triangleNr=l,this.drapedLayerGraphicOrder=f}copyFrom(t){I.copy(t._ray,this._ray),this.dist=t.dist,this.target=t.target,this.name=t.name,this.drapedLayerOrder=t.drapedLayerOrder,this.center=t.center?i(t.center):null,this.geometryId=t.geometryId,this.triangleNr=t.triangleNr,this.intersector=t.intersector,this.drapedLayerGraphicOrder=t.drapedLayerGraphicOrder,c(this.normal,t.normal),d(this.transformation,t.transformation)}toOwner(t){if(!this.target)return null;switch(this.target.type){case\"stage\":return U(this.target.obj.metadata,t);case\"external\":switch(this.intersector){case\"PointRenderer\":return function(t,s){const r=t.metadata.layerUid;return null!=r?s.map.findLayerByUid(r):null}(this.target,t);case\"I3S\":case\"IM\":case\"LodRenderer\":case\"OverlayRenderer\":return U(this.target.metadata,t);case\"TerrainRenderer\":return t.map&&t.map.ground}}return null}toGraphic(t){if(!this.target)return null;switch(this.target.type){case\"stage\":return R(this.target.obj.metadata,t);case\"external\":switch(this.intersector){case\"PointRenderer\":return this.target.metadata.createGraphic();case\"I3S\":case\"IM\":case\"LodRenderer\":case\"OverlayRenderer\":return R(this.target.metadata,t)}}return null}}function U(r,e){return t(r)||null==r.layerUid?null:s(e.graphicsView)&&r.layerUid===e.graphicsView.mockLayerId?e.graphics:e.map.findLayerByUid(r.layerUid)}function R(e,i){if(t(e))return null;const a=U(e,i);if(t(a))return null;if(a===i.graphics)return s(i.graphicsView)?r(i.graphicsView.getGraphicFromGraphicUid(e.graphicUid)):null;const n=i.allLayerViews.find((t=>t.layer===a));return n?function(t,s){if(!t||t.suspended)return null;if(\"getGraphicFromIntersectorMetadata\"in t&&s)return t.getGraphicFromIntersectorMetadata(s);if(\"getGraphicFromGraphicUid\"in t&&null!=s.graphicUid)return t.getGraphicFromGraphicUid(s.graphicUid);return null}(n,e):null}class F{constructor(t=0){this.offset=t,this.tmpVertex=e()}applyToVertex(t,s,r){const e=t+this.localOrigin[0],i=s+this.localOrigin[1],a=r+this.localOrigin[2],n=this.offset/Math.sqrt(e*e+i*i+a*a);return this.tmpVertex[0]=t+e*n,this.tmpVertex[1]=s+i*n,this.tmpVertex[2]=r+a*n,this.tmpVertex}applyToAabb(t){const s=t[0]+this.localOrigin[0],r=t[1]+this.localOrigin[1],e=t[2]+this.localOrigin[2],i=t[3]+this.localOrigin[0],a=t[4]+this.localOrigin[1],n=t[5]+this.localOrigin[2],h=this.offset/Math.sqrt(s*s+r*r+e*e);t[0]+=s*h,t[1]+=r*h,t[2]+=e*h;const o=this.offset/Math.sqrt(i*i+a*a+n*n);return t[3]+=i*o,t[4]+=a*o,t[5]+=n*o,t}}class P{constructor(t=0){this.offset=t,this.componentLocalOriginLength=0,this.tmpVertex=e(),this.mbs=S(),this.obb={center:e(),halfSize:L(),quaternion:null}}set localOrigin(t){this.componentLocalOriginLength=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}applyToVertex(t,s,r){const e=t,i=s,a=r+this.componentLocalOriginLength,n=this.offset/Math.sqrt(e*e+i*i+a*a);return this.tmpVertex[0]=t+e*n,this.tmpVertex[1]=s+i*n,this.tmpVertex[2]=r+a*n,this.tmpVertex}applyToAabb(t){const s=t[0],r=t[1],e=t[2]+this.componentLocalOriginLength,i=t[3],a=t[4],n=t[5]+this.componentLocalOriginLength,h=this.offset/Math.sqrt(s*s+r*r+e*e);t[0]+=s*h,t[1]+=r*h,t[2]+=e*h;const o=this.offset/Math.sqrt(i*i+a*a+n*n);return t[3]+=i*o,t[4]+=a*o,t[5]+=n*o,t}applyToMbs(t){const s=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),r=this.offset/s;return this.mbs[0]=t[0]+t[0]*r,this.mbs[1]=t[1]+t[1]*r,this.mbs[2]=t[2]+t[2]*r,this.mbs[3]=t[3]+t[3]*this.offset/s,this.mbs}applyToObb(t){const s=t.center,r=this.offset/Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);this.obb.center[0]=s[0]+s[0]*r,this.obb.center[1]=s[1]+s[1]*r,this.obb.center[2]=s[2]+s[2]*r,f(this.obb.halfSize,t.halfSize,t.quaternion),o(this.obb.halfSize,this.obb.halfSize,t.center);const e=this.offset/Math.sqrt(this.obb.halfSize[0]*this.obb.halfSize[0]+this.obb.halfSize[1]*this.obb.halfSize[1]+this.obb.halfSize[2]*this.obb.halfSize[2]);return this.obb.halfSize[0]+=this.obb.halfSize[0]*e,this.obb.halfSize[1]+=this.obb.halfSize[1]*e,this.obb.halfSize[2]+=this.obb.halfSize[2]*e,m(this.obb.halfSize,this.obb.halfSize,t.center),O(X,t.quaternion),f(this.obb.halfSize,this.obb.halfSize,X),this.obb.halfSize[0]*=this.obb.halfSize[0]<0?-1:1,this.obb.halfSize[1]*=this.obb.halfSize[1]<0?-1:1,this.obb.halfSize[2]*=this.obb.halfSize[2]<0?-1:1,this.obb.quaternion=t.quaternion,this.obb}}class N{constructor(t=0){this.offset=t,this.sphere=x(),this.tmpVertex=e()}applyToVertex(t,s,r){const e=this.objectTransform.transform;let i=e[0]*t+e[4]*s+e[8]*r+e[12],a=e[1]*t+e[5]*s+e[9]*r+e[13],n=e[2]*t+e[6]*s+e[10]*r+e[14];const h=this.offset/Math.sqrt(i*i+a*a+n*n);i+=i*h,a+=a*h,n+=n*h;const o=this.objectTransform.inverse;return this.tmpVertex[0]=o[0]*i+o[4]*a+o[8]*n+o[12],this.tmpVertex[1]=o[1]*i+o[5]*a+o[9]*n+o[13],this.tmpVertex[2]=o[2]*i+o[6]*a+o[10]*n+o[14],this.tmpVertex}applyToMinMax(t,s){const r=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*r,t[1]+=t[1]*r,t[2]+=t[2]*r;const e=this.offset/Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);s[0]+=s[0]*e,s[1]+=s[1]*e,s[2]+=s[2]*e}applyToAabb(t){const s=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*s,t[1]+=t[1]*s,t[2]+=t[2]*s;const r=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*r,t[4]+=t[4]*r,t[5]+=t[5]*r,t}applyToBoundingSphere(t,s){const r=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]),e=this.offset/r;return this.sphere.center[0]=s[0]+s[0]*e,this.sphere.center[1]=s[1]+s[1]*e,this.sphere.center[2]=s[2]+s[2]*e,this.sphere.radius=t+t*this.offset/r,this.sphere}}const A=new N;function B(t){return s(t)?(A.offset=t,A):null}const D=new P;function C(t){return s(t)?(D.offset=t,D):null}const E=new F;function H(t){return s(t)?(E.offset=t,E):null}const J=\"terrain\",K=e(),Q=e(),W=S(),X=v();export{P as I3SVerticalOffsetGlobalViewingMode,V as IntersectorOptions,G as IntersectorResult,k as IntersectorResults,j as IntersectorTransform,N as Object3DVerticalOffsetGlobalViewingMode,J as TERRAIN_ID,F as TerrainVerticalOffsetGlobalViewingMode,C as getVerticalOffsetI3S,B as getVerticalOffsetObject3D,H as getVerticalOffsetTerrain,q as sliceFilterPredicate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../chunks/vec3f64.js\";import{n as t,s as r,a as i,b as s}from\"../../../../chunks/vec3.js\";import{BufferViewVec3f as a}from\"../../support/buffer/BufferView.js\";import{center as n,scale as o}from\"../../../../geometry/support/aaBoundingBox.js\";import{newLayout as c}from\"../../support/buffer/InterleavedLayout.js\";import{assert as u}from\"../lib/Util.js\";import h from\"../lib/GLMaterial.js\";import{intersectTriangleGeometry as l}from\"./internal/MaterialUtil.js\";import{Material as p,materialParametersDefaults as f}from\"../lib/Material.js\";import{writeDefaultAttributes as d,writePosition as m}from\"./internal/bufferWriterUtils.js\";import{ShadedColorMaterialTechniqueConfiguration as g,ShadedColorMaterialVertexAttrLocations as b,ShadedColorMaterialVertexAttrConstants as S,ShadedColorMaterialTechnique as E}from\"../shaders/ShadedColorMaterialTechnique.js\";export{ShadedColorMaterialVertexAttrConstants}from\"../shaders/ShadedColorMaterialTechnique.js\";class q extends p{constructor(e,t){super(t,e,F),this.supportsEdges=!0,this.techniqueConfig=new g,this._vertexAttributeLocations=b}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.screenSizeEnabled=this.params.screenSizeEnabled,this.techniqueConfig.shadingEnabled=this.params.shadingEnabled,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig}getPassParameters(){return this.params}intersect(e,t,a,c,u,h,p){if(this.params.screenSizeEnabled){const a=e.getAttribute(S.OFFSET),f={applyToVertex:(e,t,n,o)=>{const u=r(v,a.data[3*o+0],a.data[3*o+1],a.data[3*o+2]),h=r(C,e,t,n);return i(u,u,this.params.screenSize*c.camera.computeRenderPixelSizeAt(u)),s(h,h,u),[h[0],h[1],h[2]]},applyToAabb:e=>{const t=n(e,v);return o(e,this.params.screenSize*c.camera.computeRenderPixelSizeAt(t))}};l(e,t,c,u,h,f,p)}else l(e,t,c,u,h,void 0,p)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output?new T(e):void 0}createBufferWriter(){return new P(this.params.screenSizeEnabled)}}class T extends h{constructor(e){super(e),this.updateParameters()}updateParameters(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(E,this.material.getTechniqueConfig(this.output,e),this.technique)}beginSlot(e){if(4===this.output)return 3===e;let t=3;return this.technique.configuration.transparent&&(t=this.technique.configuration.writeDepth?5:8),e===t}ensureParameters(e){this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}}const F={color:[1,1,1,1],shadingTint:[0,0,0,.25],shadingDirection:t(e(),[.5,-.5,-.5]),transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:0,screenSizeEnabled:!1,screenSize:14,shadingEnabled:!0,...f};class P{constructor(e){this.screenSizeEnabled=e;const t=c().vec3f(S.POSITION).vec3f(S.NORMAL);this.screenSizeEnabled&&t.vec3f(S.OFFSET),this.vertexBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices[S.POSITION].length}write(e,t,r,i){if(d(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,r,i),this.screenSizeEnabled){if(!(S.OFFSET in t.vertexAttr))throw new Error(`${S.OFFSET} vertex attribute required for screenSizeEnabled ShadedColorMaterial`);{const s=t.vertexAttr[S.OFFSET],n=t.indices[S.OFFSET];u(3===s.size);const o=r.getField(S.OFFSET,a);if(!o)throw new Error(\"unable to acquire view for \"+S.OFFSET);m(n,s.data,e.invTranspTransformation,o,i)}}}}const v=e(),C=e();export{q as ShadedColorMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import\"../../../../chunks/builtins.js\";import r from\"../../../webgl/Texture.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../webgl/RenderingContext.js\";class n{constructor(){this.cache=new Map}dispose(){this.cache.forEach((t=>{e(t.texture)&&(t.texture.dispose(),t.texture=null)})),this.cache.clear()}acquire(e){if(t(e))return null;const n=this.patternId(e),i=this.cache.get(n);if(i)return i.refCount++,i.bind;const s=this.patternToTextureData(e,2),o=s.length/2,u={refCount:1,texture:null,bind:(e,n)=>(t(u.texture)&&(u.texture=new r(e,{width:s.length,height:1,internalFormat:6406,pixelFormat:6406,dataType:5121,wrapMode:33071},s)),e.bindTexture(u.texture,n),o)};return this.cache.set(n,u),u.bind}release(r){if(t(r))return;const n=this.patternId(r),i=this.cache.get(n);i&&(i.refCount--,0===i.refCount&&(e(i.texture)&&i.texture.dispose(),this.cache.delete(n)))}swap(e,t){const r=this.acquire(t);return this.release(e),r}patternId(e){return e.join(\",\")}patternToTextureData(e,t){const r=e.reduce(((e,t)=>e+t))*t,n=new Uint8Array(r);let i=!0,s=0;for(const r of e){for(let e=0;e<r*t;e++)n[s++]=i?255:0;i=!i}return n}}function i(e){return t(e)?e:e.slice()}function s(e){return[e,e]}export{n as StippleTextureRepository,i as createStipplePattern,s as createStipplePatternSimple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{a as r}from\"../../../../chunks/vec4f64.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as o,parameter as s}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import n from\"../../../webgl/Program.js\";import{makePipelineState as a,defaultDepthWriteParams as l,defaultColorWriteParams as d}from\"../../../webgl/renderState.js\";import{View as c}from\"../core/shaderLibrary/util/View.glsl.js\";import{Slice as p}from\"../core/shaderLibrary/Slice.glsl.js\";import{blendingDefault as h,OITBlending as g,OITDepthWrite as m,OITPolygonOffset as u}from\"../lib/OrderIndependentTransparency.js\";import{ScreenSizeScaling as b}from\"../core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{S as f}from\"../../../../chunks/ShadedColorMaterial.glsl.js\";class y extends t{initializeProgram(e){const r=y.shader.get(),i=this.configuration,t=r.build({output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:i.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,screenSizeEnabled:i.screenSizeEnabled,shadingEnabled:i.shadingEnabled,OITEnabled:0===i.transparencyPassType});return new n(e.rctx,t.generateSource(\"vertex\"),t.generateSource(\"fragment\"),P)}bindPass(e,r,i){const{screenSizeEnabled:t,shadingEnabled:o}=this.configuration,{color:s,shadingTint:n,shadingDirection:a}=r;c.bindProjectionMatrix(this.program,i.camera.projectionMatrix),this.program.setUniform4fv(\"color\",s),o&&(this.program.setUniform4fv(\"shadedColor\",this.blendColor(E,n,s)),this.program.setUniform3fv(\"shadingDirection\",a),this.program.setUniformMatrix4fv(\"viewNormal\",i.camera.viewInverseTransposeMatrix)),t&&b.bindPassUniforms(this.program,r,i)}blendColor(e,r,i){const t=1-r[3],o=r[3]+i[3]*t;return 0===o?(e[3]=o,e):(e[0]=(r[0]*r[3]+i[0]*i[3]*t)/o,e[1]=(r[1]*r[3]+i[1]*i[3]*t)/o,e[2]=(r[2]*r[3]+i[2]*i[3]*t)/o,e[3]=i[3],e)}bindDraw(e){c.bindView(this.program,e),c.bindCamPosition(this.program,e.origin,e.camera.viewInverseTransposeMatrix),p.bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e){const r=this.configuration,i=3===e,t=2===e;return a({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?h:g(e),culling:(o=r.cullFace,0!==o&&{face:1===o?1028:1029,mode:2305}),depthTest:{func:t?513:r.shadingEnabled?515:513},depthWrite:i?r.writeDepth&&l:m(e),colorWrite:d,polygonOffset:i||t?null:u});var o}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}y.shader=new i(f,(()=>import(\"./ShadedColorMaterial.glsl.js\")));class S extends o{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.sliceHighlightDisabled=!1,this.transparent=!1,this.writeDepth=!0,this.screenSizeEnabled=!0,this.shadingEnabled=!0,this.transparencyPassType=3}}e([s({count:8})],S.prototype,\"output\",void 0),e([s({count:3})],S.prototype,\"cullFace\",void 0),e([s()],S.prototype,\"slicePlaneEnabled\",void 0),e([s()],S.prototype,\"sliceHighlightDisabled\",void 0),e([s()],S.prototype,\"transparent\",void 0),e([s()],S.prototype,\"writeDepth\",void 0),e([s()],S.prototype,\"screenSizeEnabled\",void 0),e([s()],S.prototype,\"shadingEnabled\",void 0),e([s({count:4})],S.prototype,\"transparencyPassType\",void 0);const v={POSITION:\"position\",NORMAL:\"normal\",OFFSET:\"offset\"},P={position:0,normal:1,offset:2},E=r();export{y as ShadedColorMaterialTechnique,S as ShadedColorMaterialTechniqueConfiguration,v as ShadedColorMaterialVertexAttrConstants,P as ShadedColorMaterialVertexAttrLocations};\n"],"sourceRoot":""}