(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[7521,6194],{15988:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i,n=r(56140),s=(r(95830),r(82550)),o=r(59472),a=(r(36544),r(68055),r(79881)),l=r(87566),u=(r(10923),r(57002),r(86035),r(58385)),c=r(56885),p=r(36348),f=r(58484),y=r(54734),d=r(32366);let h=i=class extends u.wq{constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,d.D)(),configurable:!0})}normalizeCtorArgs(e,t,r,i){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:i}}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:e&&"defaultPopupTemplate"in this.sourceLayer&&(0,o.pC)(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:(0,o.pC)(this.geometry)?this.geometry.toJSON():null,symbol:(0,o.pC)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new i(this.cloneProperties())}cloneProperties(){return{attributes:(0,s.d9)(this.attributes),geometry:(0,s.d9)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:(0,s.d9)(this.symbol),visible:this.visible}}_notifyLayer(e,t,r,i){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};"attributes"===e&&(n.attributeName=i),this.layer.graphicChanged(n)}};(0,n._)([(0,a.Cb)({value:null})],h.prototype,"attributes",null),(0,n._)([(0,a.Cb)({value:null,types:p.qM,json:{read:c.im}})],h.prototype,"geometry",null),(0,n._)([(0,a.Cb)({type:Boolean})],h.prototype,"isAggregate",void 0),(0,n._)([(0,a.Cb)()],h.prototype,"layer",void 0),(0,n._)([(0,a.Cb)({type:f.default})],h.prototype,"popupTemplate",void 0),(0,n._)([(0,a.Cb)()],h.prototype,"sourceLayer",void 0),(0,n._)([(0,a.Cb)({value:null,types:y.s})],h.prototype,"symbol",null),(0,n._)([(0,a.Cb)({type:Boolean,value:!0})],h.prototype,"visible",null),h=i=(0,n._)([(0,l.j)("esri.Graphic")],h),(h||(h={})).generateUID=d.D;const m=h},94588:(e,t,r)=>{"use strict";r.d(t,{Bg:()=>i,sM:()=>n});r(95830);function i(e){}function n(e){return()=>e}},32366:(e,t,r)=>{"use strict";r.d(t,{D:()=>n});let i=0;function n(){return i++}},91535:(e,t,r)=>{"use strict";r.d(t,{aX:()=>F,or:()=>N,hR:()=>C});var i=r(34926),n=r(59472),s=r(36544),o=r(32656),a=r(39105),l=r(27780),u=r(73032),c=r(41241),p=r(53817),f=r(93833),y=r(10923),d=r(56885),h=(r(36348),r(54721));async function m(e,t,r){const i="string"==typeof e?(0,y.mN)(e):e,n=t[0].spatialReference,s=(0,d.Ji)(t[0]),o={...r,query:{...i.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify((a=t,{geometryType:(0,d.Ji)(a[0]),geometries:a.map((e=>e.toJSON()))}))}};var a;return function(e,t,r){const i=(0,d.q9)(t);return e.map((e=>{const t=i.fromJSON(e);return t.spatialReference=r,t}))}((await(0,h.default)(i.path+"/simplify",o)).data,s,n)}const g=s.Z.getLogger("esri.geometry.support.normalizeUtils"),b={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new f.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:u.Z.WebMercator}),minus180Line:new f.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:u.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f.Z({paths:[[[180,-180],[180,180]]],spatialReference:u.Z.WGS84}),minus180Line:new f.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:u.Z.WGS84})}};function v(e){return"polygon"===e.type}function x(e){return"polyline"===e[0].type}function w(e){return v(e)?e.rings:e.paths}function S(e,t){return Math.ceil((e-t)/(2*t))}function V(e,t){const r=w(e);for(const e of r)for(const r of e)r[0]+=t;return e}function C(e,t){if(!(e instanceof f.Z||e instanceof p.Z)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(e),new o.Z(e)}const r=w(e),i=[];for(const e of r){const r=[];i.push(r),r.push([e[0][0],e[0][1]]);for(let i=0;i<e.length-1;i++){const n=e[i][0],s=e[i][1],o=e[i+1][0],a=e[i+1][1],l=Math.sqrt((o-n)*(o-n)+(a-s)*(a-s)),u=(a-s)/l,c=(o-n)/l,p=l/t;if(p>1){for(let e=1;e<=p-1;e++){const i=e*t,o=c*i+n,a=u*i+s;r.push([o,a])}const e=(l+Math.floor(p-1)*t)/2,i=c*e+n,o=u*e+s;r.push([i,o])}r.push([o,a])}}return v(e)?new p.Z({rings:i,spatialReference:e.spatialReference}):new f.Z({paths:i,spatialReference:e.spatialReference})}function _(e,t,r){if(t){const t=C(e,1e6);e=(0,c.Sx)(t,!0)}return r&&(e=V(e,r)),e}function T(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const r=S(i,t);e[0]=i+r*(-2*t)}else if(i<r){const t=S(i,r);e[0]=i+t*(-2*r)}}else{const i=e.x;if(i>t){const r=S(i,t);e=e.clone().offset(r*(-2*t),0)}else if(i<r){const t=S(i,r);e=e.clone().offset(t*(-2*r),0)}}return e}async function F(e,t,r){if(!Array.isArray(e))return F([e],t);const s=t?t.url:i.Z.geometryServiceUrl;let o,u,g,v,C,N,z,R,O=0;const q=[],L=[];for(const t of e)if((0,n.Wi)(t))L.push(t);else if(o||(o=t.spatialReference,u=(0,l.C5)(o),g=o.isWebMercator,N=g?102100:4326,v=b[N].maxX,C=b[N].minX,z=b[N].plus180Line,R=b[N].minus180Line),u)if("mesh"===t.type)L.push(t);else if("point"===t.type)L.push(T(t.clone(),v,C));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>T(e,v,C))),L.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,u);L.push(e.rings?new p.Z(e):e)}else if(t.extent){const e=t.extent,r=S(e.xmin,C)*(2*v);let i=0===r?t.clone():V(t.clone(),r);e.offset(r,0),e.intersects(z)&&e.xmax!==v?(O=e.xmax>O?e.xmax:O,i=_(i,g),q.push(i),L.push("cut")):e.intersects(R)&&e.xmin!==C?(O=e.xmax*(2*v)>O?e.xmax*(2*v):O,i=_(i,g,360),q.push(i),L.push("cut")):L.push(i)}else L.push(t.clone());else L.push(t);let M=S(O,v),D=-90;const J=M,j=new f.Z;for(;M>0;){const e=360*M-180;j.addPath([[e,D],[e,-1*D]]),D*=-1,M--}if(q.length>0&&J>0){const t=function(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],o=w(s);for(let e=0;e<o.length;e++){const t=o[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const i=t[e][0];r=i>r?i:r}r=Number(r.toFixed(9));const i=-360*S(r,180);for(let r=0;r<t.length;r++){const t=s.getPoint(e,r);s.setPoint(e,r,t.clone().offset(i,0))}return!0}}))}if(n===r){if("polygon"===e[0].type)for(const t of w(s))e[n]=e[n].addRing(t);else if(x(e))for(const t of w(s))e[n]=e[n].addPath(t)}else r=n,e[n]=s}return e}(q,await async function(e,t,r,i){const n="string"==typeof e?(0,y.mN)(e):e,s=t[0].spatialReference,o={...i,query:{...n.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:(0,d.Ji)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await(0,h.default)(n.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map((e=>{const t=(0,d.im)(e);return t.spatialReference=s,t}))}}(s,q,j,r)),i=[],o=[];for(let r=0;r<L.length;r++){const s=L[r];if("cut"!==s)o.push(s);else{const s=t.shift(),a=e[r];(0,n.pC)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&s.rings.length>=a.rings.length?(i.push(s),o.push("simplify")):o.push(g?(0,c.$)(s):s)}}if(!i.length)return o;const a=await m(s,i,r),l=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?l.push(t):l.push(g?(0,c.$)(a.shift()):a.shift())}return l}const E=[];for(let e=0;e<L.length;e++){const t=L[e];if("cut"!==t)E.push(t);else{const e=q.shift();E.push(!0===g?(0,c.$)(e):e)}}return(0,a.resolve)(E)}function N(e,t){const r=(0,l.C5)(t);if(r){const[t,i]=r.valid,n=i-t;if(e<t)for(;e<t;)e+=n;if(e>i)for(;e>i;)e-=n}return e}},70834:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i,n=r(56140),s=(r(95830),r(36544),r(68055)),o=r(79881),a=r(56274),l=r(9870),u=r(30590),c=r(87566),p=(r(10923),r(57002),r(86035),r(58385)),f=r(6585),y=r(88210);const d=new a.Xn({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let h=i=class extends p.wq{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch(e){}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch(e){}return r?d.fromJSON(r.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"alias",void 0),(0,n._)([(0,o.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],h.prototype,"defaultValue",void 0),(0,n._)([(0,o.Cb)()],h.prototype,"description",void 0),(0,n._)([(0,u.r)("description")],h.prototype,"readDescription",null),(0,n._)([(0,o.Cb)({types:f.V5,json:{read:{reader:f.im},write:!0}})],h.prototype,"domain",void 0),(0,n._)([(0,o.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"editable",void 0),(0,n._)([(0,o.Cb)({type:s.z8,json:{write:!0}})],h.prototype,"length",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,n._)([(0,o.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"nullable",void 0),(0,n._)([(0,l.J)(y.v)],h.prototype,"type",void 0),(0,n._)([(0,o.Cb)()],h.prototype,"valueType",void 0),(0,n._)([(0,u.r)("valueType",["description"])],h.prototype,"readValueType",null),h=i=(0,n._)([(0,c.j)("esri.layers.support.Field")],h);const m=h},88210:(e,t,r)=>{"use strict";r.d(t,{v:()=>i});const i=new(r(56274).Xn)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},2961:(e,t,r)=>{"use strict";r.d(t,{a:()=>s});var i=r(49840),n=r(93533);const s={inches:(0,n.En)(1,"meters","inches"),feet:(0,n.En)(1,"meters","feet"),"us-feet":(0,n.En)(1,"meters","us-feet"),yards:(0,n.En)(1,"meters","yards"),miles:(0,n.En)(1,"meters","miles"),"nautical-miles":(0,n.En)(1,"meters","nautical-miles"),millimeters:(0,n.En)(1,"meters","millimeters"),centimeters:(0,n.En)(1,"meters","centimeters"),decimeters:(0,n.En)(1,"meters","decimeters"),meters:(0,n.En)(1,"meters","meters"),kilometers:(0,n.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,n.ty)(1,"meters",i.sv.radius)}},95005:(e,t,r)=>{"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function s(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){const r=t||s(e),i=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,{PS:()=>s,QW:()=>o,iY:()=>i,qh:()=>n})},5328:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getAllSizes:()=>C,getColor:()=>d,getOpacity:()=>h,getRotationAngle:()=>m,getSize:()=>g,getSizeForValue:()=>x,getSizeFromNumberOrVariable:()=>b,getSizeRangeAtScale:()=>w,getVisualVariableValues:()=>S,viewScaleRE:()=>y});var i=r(94588),n=r(59472),s=r(36544),o=r(78745),a=r(15988),l=r(2961),u=r(95005);const c=s.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),p=new a.Z,f=Math.PI,y=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function d(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.ColorVariable"!==i.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s="number"==typeof t,a=s?null:t,l=a&&a.attributes;let u=s?t:null;const p=i.field,{ipData:f,hasExpression:y}=i.cache;let d=i.cache.compiledFunc;if(!p&&!y){const e=i.stops;return e&&e[0]&&e[0].color}if("number"!=typeof u)if(y){if(!(0,n.pC)(r)||!(0,n.pC)(r.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,s=t.getViewInfo(e),o=t.createExecContext(a,s);if(!d){const e=t.createSyntaxTree(i.valueExpression);d=t.createFunction(e),i.cache.compiledFunc=d}u=t.executeFunction(d,o)}else l&&(u=l[p]);const h=i.normalizationField,m=l?parseFloat(l[h]):void 0;if(null!=u&&(!h||s||!isNaN(m)&&0!==m)){isNaN(m)||s||(u/=m);const e=V(u,f);if(e){const t=e[0],s=e[1],a=t===s?i.stops[t].color:o.default.blendColors(i.stops[t].color,i.stops[s].color,e[2],(0,n.pC)(r)?r.color:void 0);return new o.default(a)}}}function h(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s="number"==typeof t,o=s?null:t,a=o&&o.attributes;let l=s?t:null;const u=i.field,{ipData:p,hasExpression:f}=i.cache;let y=i.cache.compiledFunc;if(!u&&!f){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(f){if((0,n.Wi)(r)||(0,n.Wi)(r.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,s=t.getViewInfo(e),a=t.createExecContext(o,s);if(!y){const e=t.createSyntaxTree(i.valueExpression);y=t.createFunction(e),i.cache.compiledFunc=y}l=t.executeFunction(y,a)}else a&&(l=a[u]);const d=i.normalizationField,h=a?parseFloat(a[d]):void 0;if(null!=l&&(!d||s||!isNaN(h)&&0!==h)){isNaN(h)||s||(l/=h);const e=V(l,p);if(e){const t=e[0],r=e[1];if(t===r)return i.stops[t].opacity;{const n=i.stops[t].opacity;return n+(i.stops[r].opacity-n)*e[2]}}}}function m(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=i.axis||"heading",o="heading"===s&&"arithmetic"===i.rotationType?90:0,a="heading"===s&&"arithmetic"===i.rotationType?-1:1,l="number"==typeof t?null:t,u=l&&l.attributes,p=i.field,{hasExpression:f}=i.cache;let y=i.cache.compiledFunc,d=0;if(!p&&!f)return d;if(f){if((0,n.Wi)(r)||(0,n.Wi)(r.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,s=t.getViewInfo(e),o=t.createExecContext(l,s);if(!y){const e=t.createSyntaxTree(i.valueExpression);y=t.createFunction(e),i.cache.compiledFunc=y}d=t.executeFunction(y,o)}else u&&(d=u[p]||0);return d="number"!=typeof d||isNaN(d)?null:o+a*d,d}function g(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=x(function(e,t,r){const i="number"==typeof t,s=i?null:t,o=s&&s.attributes;let a=i?t:null;const{isScaleDriven:l}=e.cache;let p=e.cache.compiledFunc;if(l){const t=(0,n.pC)(r)?r.scale:void 0,i=(0,n.pC)(r)?r.view:void 0;a=null==t||"3d"===i?function(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):t}else if(!i)switch(e.inputValueType){case"expression":{if((0,n.Wi)(r)||(0,n.Wi)(r.arcade))return void c.error("Use of arcade expressions requires an arcade context");const t={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},i=r.arcade.arcadeUtils,o=i.getViewInfo(t),l=i.createExecContext(s,o);if(!p){const t=i.createSyntaxTree(e.valueExpression);p=i.createFunction(t),e.cache.compiledFunc=p}a=i.executeFunction(p,l);break}case"field":o&&(a=o[e.field]);break;case"unknown":a=null}if(!(0,u.qh)(a))return null;if(i||!e.normalizationField)return a;const f=o?parseFloat(o[e.normalizationField]):null;return(0,u.qh)(f)&&0!==f?a/f:null}(i,t,r),i,t,r,i.cache.ipData);return null==s||isNaN(s)?0:s}function b(e,t,r){return null==e?null:(0,u.iY)(e)?g(e,t,r):(0,u.qh)(e)?e:null}function v(e,t,r){return(0,u.qh)(r)&&e>r?r:(0,u.qh)(t)&&e<t?t:e}function x(e,t,r,i,s){switch(t.transformationType){case"additive":return function(e,t,r,i){return e+(b(t.minSize,r,i)||t.minDataValue)}(e,t,r,i);case"constant":return function(e,t,r){const i=e.stops;let n=i&&i.length&&i[0].size;return null==n&&(n=e.minSize),b(n,t,r)}(t,r,i);case"clamped-linear":return function(e,t,r,i){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=b(t.minSize,r,i),a=b(t.maxSize,r,i),l=(0,n.pC)(i)?i.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return a;if("area"===t.scaleBy&&l){const e="circle"===l,t=e?f*Math.pow(o/2,2):o*o,r=t+s*((e?f*Math.pow(a/2,2):a*a)-t);return e?2*Math.sqrt(r/f):Math.sqrt(r)}return o+s*(a-o)}(e,t,r,i);case"proportional":return function(e,t,r,i){const s=(0,n.pC)(i)?i.shape:void 0,o=e/t.minDataValue,a=b(t.minSize,r,i),l=b(t.maxSize,r,i);let u=null;return u="circle"===s?2*Math.sqrt(o*Math.pow(a/2,2)):"square"===s||"diamond"===s||"image"===s?Math.sqrt(o*Math.pow(a,2)):o*a,v(u,a,l)}(e,t,r,i);case"stops":return function(e,t,r,i,n){const[s,o,a]=V(e,n);if(s===o)return b(t.stops[s].size,r,i);{const e=b(t.stops[s].size,r,i);return e+(b(t.stops[o].size,r,i)-e)*a}}(e,t,r,i,s);case"real-world-size":return function(e,t,r,i){const s=((0,n.pC)(i)&&i.resolution?i.resolution:1)*l.a[t.valueUnit],o=b(t.minSize,r,i),a=b(t.maxSize,r,i),{valueRepresentation:u}=t;let c=null;return c="area"===u?2*Math.sqrt(e/f)/s:"radius"===u||"distance"===u?2*e/s:e/s,v(c,o,a)}(e,t,r,i);case"identity":return e;case"unknown":return null}}function w(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===r||t))return null;const n={scale:t,view:r};let s=b(e.minSize,p,n),o=b(e.maxSize,p,n);if(null!=s||null!=o){if(s>o){const e=o;o=s,s=e}return{minSize:s,maxSize:o}}}function S(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],o=[],a=[];for(const t of e.visualVariables)switch(t.type){case"color":n.push(t);break;case"opacity":s.push(t);break;case"rotation":a.push(t);break;case"size":o.push(t)}return n.forEach((e=>{const n=d(e,t,r);i.push({variable:e,value:n})})),s.forEach((e=>{const n=h(e,t,r);i.push({variable:e,value:n})})),a.forEach((e=>{const n=m(e,t,r);i.push({variable:e,value:n})})),o.forEach((e=>{const n=g(e,t,r);i.push({variable:e,value:n})})),i.filter((e=>null!=e.value))}function V(e,t){if(!t)return;let r=0,i=t.length-1;return t.some(((t,n)=>e<t?(i=n,!0):(r=n,!1))),[r,i,(e-t[r])/(t[i]-t[r])]}function C(e,t,r){const n=["proportional","proportional","proportional"];for(const s of e){const e=s.useSymbolValue?"symbol-value":g(s,t,r);switch(s.axis){case"width":n[0]=e;break;case"depth":n[1]=e;break;case"height":n[2]=e;break;case"width-and-depth":n[0]=e,n[1]=e;break;case"all":case void 0:case null:n[0]=e,n[1]=e,n[2]=e;break;default:(0,i.Bg)(s.axis)}}return n}},95986:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(56140),n=(r(95830),r(36544),r(68055),r(79881)),s=r(87566),o=r(10923),a=(r(57002),r(86035),r(82677));let l=class extends a.default{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return"string"!=typeof e?e:{url:e,...t}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?(0,o.mN)(e):null}_encode(e,t,r){const i={};for(const n in e){if("declaredClass"===n)continue;const s=e[n];if(null!=s&&"function"!=typeof s)if(Array.isArray(s)){i[n]=[];for(let e=0;e<s.length;e++)i[n][e]=this._encode(s[e])}else if("object"==typeof s)if(s.toJSON){const e=s.toJSON(r&&r[n]);i[n]=t?e:JSON.stringify(e)}else i[n]=t?s:JSON.stringify(s);else i[n]=s}return i}};(0,i._)([(0,n.Cb)({readOnly:!0,dependsOn:["url"]})],l.prototype,"parsedUrl",null),(0,i._)([(0,n.Cb)()],l.prototype,"requestOptions",void 0),(0,i._)([(0,n.Cb)({type:String})],l.prototype,"url",void 0),l=(0,i._)([(0,s.j)("esri.tasks.Task")],l);const u=l},76194:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var i=r(56140),n=(r(95830),r(59472)),s=(r(36544),r(68055),r(79881)),o=r(56274),a=r(30590),l=r(87566),u=r(60538),c=(r(10923),r(57002),r(86035),r(58385)),p=r(73032),f=r(56885),y=r(36348),d=r(15988),h=r(70834);const m=new o.Xn({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let g=class extends c.wq{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=p.Z.fromJSON(t.spatialReference),i=[];for(let t=0;t<e.length;t++){const s=e[t],o=d.Z.fromJSON(s),a=s.geometry&&s.geometry.spatialReference;(0,n.pC)(o.geometry)&&!a&&(o.geometry.spatialReference=r),i.push(o)}return i}writeGeometryType(e,t,r,i){if(e)return void m.write(e,t,r,i);const{features:s}=this;if(s)for(const e of s)if(e&&(0,n.pC)(e.geometry))return void m.write(e.geometry.type,t,r,i)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=(0,f.im)(e);return!r&&t.spatialReference&&(i.spatialReference=p.Z.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)e&&(0,n.pC)(e.geometry)&&e.geometry.spatialReference&&(t.spatialReference=e.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const t=e&&e[r];i.geometry=t&&t.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,s]}=e,o=this.features,a=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-i)/t)),(e=>Math.round((s-e)/r)));for(let e=0,t=o.length;e<t;e++)a((0,n.Wg)(o[e].geometry))||(o.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,s],scale:[o,a]}=r,l=this._getHydrationFunction(e,(e=>e*o+i),(e=>s-e*a));for(const{geometry:e}of t)(0,n.pC)(e)&&l(e);return this.transform=null,this}_quantizePoints(e,t,r){let i,n;const s=[];for(let o=0,a=e.length;o<a;o++){const a=e[o];if(o>0){const e=t(a[0]),o=r(a[1]);e===i&&o===n||(s.push([e-i,o-n]),i=e,n=o)}else i=t(a[0]),n=r(a[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const i=(0,f.oU)(e)?e.rings:e.paths,n=[];for(let e=0,s=i.length;e<s;e++){const s=i[e],o=this._quantizePoints(s,t,r);o&&n.push(o)}return n.length>0?((0,f.oU)(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?e=>{let i;return i=this._quantizePoints(e.points,t,r),i.length>0?(e.points=i,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?e=>{const i=(0,f.oU)(e)?e.rings:e.paths;let n,s;for(let e=0,o=i.length;e<o;e++){const o=i[e];for(let e=0,i=o.length;e<i;e++){const i=o[e];e>0?(n+=i[0],s+=i[1]):(n=i[0],s=i[1]),i[0]=t(n),i[1]=r(s)}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?e=>{const i=e.points;let n,s;for(let e=0,o=i.length;e<o;e++){const o=i[e];e>0?(n+=o[0],s+=o[1]):(n=o[0],s=o[1]),o[0]=t(n),o[1]=r(s)}}:void 0}};(0,i._)([(0,s.Cb)({type:String,json:{write:!0}})],g.prototype,"displayFieldName",void 0),(0,i._)([(0,s.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"exceededTransferLimit",void 0),(0,i._)([(0,s.Cb)({type:[d.Z],json:{write:!0}})],g.prototype,"features",void 0),(0,i._)([(0,a.r)("features")],g.prototype,"readFeatures",null),(0,i._)([(0,s.Cb)({type:[h.Z],json:{write:!0}})],g.prototype,"fields",void 0),(0,i._)([(0,s.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:m.read}}})],g.prototype,"geometryType",void 0),(0,i._)([(0,u.c)("geometryType")],g.prototype,"writeGeometryType",null),(0,i._)([(0,s.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasM",void 0),(0,i._)([(0,s.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasZ",void 0),(0,i._)([(0,s.Cb)({types:y.qM,json:{write:!0}})],g.prototype,"queryGeometry",void 0),(0,i._)([(0,a.r)("queryGeometry")],g.prototype,"readQueryGeometry",null),(0,i._)([(0,s.Cb)({type:p.Z,json:{write:!0}})],g.prototype,"spatialReference",void 0),(0,i._)([(0,u.c)("spatialReference")],g.prototype,"writeSpatialReference",null),(0,i._)([(0,s.Cb)({json:{write:!0}})],g.prototype,"transform",void 0),g=(0,i._)([(0,l.j)("esri.tasks.support.FeatureSet")],g),g.prototype.toJSON.isDefaultToJSON=!0,g||(g={});const b=g}}]);
//# sourceMappingURL=7521.js.map