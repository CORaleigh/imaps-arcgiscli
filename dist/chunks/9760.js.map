{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/LOD.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/TileInfo.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/Tilemap.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/TilemapCache.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/serviceTileInfoProperty.js"],"names":["t","n","I","r","i","u","e","xmin","ymin","xmax","ymax","spatialReference","a","m","h","M","l","g","y","x","p","b","Math","max","min","F","E","z","v","H","super","this","level","levelValue","resolution","scale","type","json","write","prototype","String","Number","w","PNG","PNG8","PNG24","PNG32","JPEG","JPG","DIB","TIFF","EMF","PS","PDF","GIF","SVG","SVGZ","Mixed","MIXED","LERC","LERC2D","RAW","pbf","j","dpi","format","origin","minScale","maxScale","size","resolutionFactor","o","scales","s","length","push","unshift","lods","ceil","pow","isWrappable","abs","dx","_levelToLOD","forEach","_set","_initializeUpsampleLevels","cols","rows","round","scaleToZoom","floor","zoomToScale","lodAt","id","row","col","extent","updateTileInfo","_upsampleLevels","parentLevel","factor","fromJSON","read","origins","readOnly","dependsOn","value","cast","Array","isArray","location","left","top","width","height","_allAvailability","byteSize","_tileAvailabilityBitSet","Uint8Array","service","request","c","d","query","f","url","tileServers","then","data","catch","details","httpStatus","valid","response","definition","validateJSON","Object","freeze","_updateFromData","A","L","_handles","_pendingTilemapRequests","_availableLevels","levels","cacheByteSize","_prefetchingEnabled","_tilemapCache","add","watch","_initializeTilemapDefinition","_initializeAvailableLevels","destroy","error","_tmpTilemapDefinition","_tilemapFromCache","signal","put","getAvailability","layer","tileInfo","upsampleTile","fetchTilemap","fetchAvailability","fetchAvailabilityUpsample","_fetchAvailabilityUpsamplePrefetch","has","abort","remove","_prefetches","_maxPrefetch","removeUnordered","parsedUrl","clear","path","get","hasTilemap","initialSize","constructOnly","RegExp","join","test","match","indexOf","title","slice","serverType","sublayer","parseInt","replace","toUpperCase","toLowerCase","layerId","toString","O","S","authority","source","reader","minLOD","maxLOD","ignoreMinMaxLOD","filter"],"mappings":"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","file":"chunks/9760.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import n from\"../Extent.js\";function t(n=I){return[n[0],n[1],n[2],n[3]]}function r(n){return[n[0],n[1],n[2],n[3]]}function i(n,r,i,u,e=t()){return e[0]=n,e[1]=r,e[2]=i,e[3]=u,e}function u(n,r=t()){return r[0]=n.xmin,r[1]=n.ymin,r[2]=n.xmax,r[3]=n.ymax,r}function e(t,r){return new n({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:r})}function a(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function o(n,t,r=n){if(\"length\"in t)A(t)?(r[0]=Math.min(n[0],t[0]),r[1]=Math.min(n[1],t[1]),r[2]=Math.max(n[2],t[2]),r[3]=Math.max(n[3],t[3])):2!==t.length&&3!==t.length||(r[0]=Math.min(n[0],t[0]),r[1]=Math.min(n[1],t[1]),r[2]=Math.max(n[2],t[0]),r[3]=Math.max(n[3],t[1]));else switch(t.type){case\"extent\":r[0]=Math.min(n[0],t.xmin),r[1]=Math.min(n[1],t.ymin),r[2]=Math.max(n[2],t.xmax),r[3]=Math.max(n[3],t.ymax);break;case\"point\":r[0]=Math.min(n[0],t.x),r[1]=Math.min(n[1],t.y),r[2]=Math.max(n[2],t.x),r[3]=Math.max(n[3],t.y)}return r}function f(n,t,r=n){const i=t.length;let u=n[0],e=n[1],a=n[2],o=n[3];for(let n=0;n<i;n++){const r=t[n];u=Math.min(u,r[0]),e=Math.min(e,r[1]),a=Math.max(a,r[0]),o=Math.max(o,r[1])}return r[0]=u,r[1]=e,r[2]=a,r[3]=o,r}function c(n){for(let t=0;t<4;t++)if(!isFinite(n[t]))return!1;return!0}function m(n){return n[0]>=n[2]?0:n[2]-n[0]}function h(n){return n[1]>=n[3]?0:n[3]-n[1]}function x(n){const t=m(n),r=h(n);return Math.sqrt(t*t+r*r)}function M(n){return m(n)*h(n)}function s(n,t=[0,0]){return t[0]=(n[0]+n[2])/2,t[1]=(n[1]+n[3])/2,t}function l(n,t){return g(n,t[0],t[1])}function y(n,t){return g(n,t.x,t.y)}function g(n,t,r){return t>=n[0]&&r>=n[1]&&t<=n[2]&&r<=n[3]}function p(n,t,r){return t[0]>=n[0]-r&&t[1]>=n[1]-r&&t[0]<=n[2]+r&&t[1]<=n[3]+r}function b(n,t){return Math.max(t[0],n[0])<=Math.min(t[2],n[2])&&Math.max(t[1],n[1])<=Math.min(t[3],n[3])}function F(n,t){return t[0]>=n[0]&&t[2]<=n[2]&&t[1]>=n[1]&&t[3]<=n[3]}function j(n,t,r=n){const i=t[0],u=t[1],e=t[2],a=t[3];return r[0]=D(n[0],i,e),r[1]=D(n[1],u,a),r[2]=D(n[2],i,e),r[3]=D(n[3],u,a),r}function q(n,t){const r=(n[0]+n[2])/2,i=(n[1]+n[3])/2,u=Math.max(Math.abs(t[0]-r)-m(n)/2,0),e=Math.max(Math.abs(t[1]-i)-h(n)/2,0);return Math.sqrt(u*u+e*e)}function w(n,t){t[0]=n[2]-n[0],t[1]=n[3]-n[1]}function k(n,t,r,i=n){return i[0]=n[0]+t,i[1]=n[1]+r,i[2]=n[2]+t,i[3]=n[3]+r,i}function E(n,t,r=n){return r[0]=n[0]-t,r[1]=n[1]-t,r[2]=n[2]+t,r[3]=n[3]+t,r}function R(n,t,r=n){return r[0]=t[0],r[1]=t[1],r!==n&&(r[2]=n[2],r[3]=n[3]),r}function d(n,t,r=n){return r[2]=t[0],r[3]=t[1],r!==n&&(r[0]=n[0],r[1]=n[1]),n}function v(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function z(n){return n?v(n,H):t(H)}function A(n){return 4===n.length}function B(n){return!(0!==m(n)&&isFinite(n[0])||0!==h(n)&&isFinite(n[1]))}function C(n,t,r){if(null==n||null==t)return n===t;if(!A(n)||!A(t))return!1;if(r){for(let i=0;i<n.length;i++)if(!r(n[i],t[i]))return!1}else for(let r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0}function D(n,t,r){return n<t?t:n>r?r:n}const G=[-1/0,-1/0,1/0,1/0],H=[1/0,1/0,-1/0,-1/0],I=[0,0,0,0],J=[0,0,1,1];export{H as NEGATIVE_INFINITY,G as POSITIVE_INFINITY,J as UNIT,I as ZERO,c as allFinite,M as area,s as center,r as clone,F as contains,l as containsPoint,y as containsPointObject,p as containsPointWithMargin,g as containsXY,t as create,x as diameter,q as distance,z as empty,C as equals,o as expand,a as expandPointInPlace,f as expandWithNestedArray,u as fromExtent,i as fromValues,h as height,j as intersection,b as intersects,A as is,B as isPoint,k as offset,E as pad,v as set,d as setMax,R as setMin,w as size,e as toExtent,m as width};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{Integer as o}from\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";var l;let p=l=class extends t{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new l({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};e([r({type:o,json:{write:!0}})],p.prototype,\"level\",void 0),e([r({type:String,json:{write:!0}})],p.prototype,\"levelValue\",void 0),e([r({type:Number,json:{write:!0}})],p.prototype,\"resolution\",void 0),e([r({type:Number,json:{write:!0}})],p.prototype,\"scale\",void 0),p=l=e([s(\"esri.layers.support.LOD\")],p);var i=p;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{Integer as t}from\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as r}from\"../../core/jsonMap.js\";import{reader as s}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as l}from\"../../core/accessorSupport/decorators/writer.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as n}from\"../../core/JSONSupport.js\";import{isValid as p,getInfo as a,isGeographic as c,equals as u}from\"../../geometry/support/spatialReferenceUtils.js\";import f from\"../../geometry/SpatialReference.js\";import{project as h}from\"../../geometry/support/webMercatorUtils.js\";import m from\"../../geometry/Point.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as d}from\"../../core/unitUtils.js\";import{create as g}from\"../../geometry/support/aaBoundingRect.js\";import y from\"./LOD.js\";var v;const w=new r({PNG:\"png\",PNG8:\"png8\",PNG24:\"png24\",PNG32:\"png32\",JPEG:\"jpg\",JPG:\"jpg\",DIB:\"dib\",TIFF:\"tiff\",EMF:\"emf\",PS:\"ps\",PDF:\"pdf\",GIF:\"gif\",SVG:\"svg\",SVGZ:\"svgz\",Mixed:\"mixed\",MIXED:\"mixed\",LERC:\"lerc\",LERC2D:\"lerc2d\",RAW:\"raw\",pbf:\"pbf\"});let j=v=class extends n{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={size:256,spatialReference:f.WebMercator}){const t=e.resolutionFactor||1,o=e.scales,r=e.size||256,s=e.spatialReference||f.WebMercator;if(!p(s)){const e=[];if(o)for(let t=0;t<o.length;t++){const r=o[t];e.push({level:t,scale:r,resolution:r})}else{let t=5e-4;for(let o=23;o>=0;o--)e.unshift({level:o,scale:t,resolution:t}),t*=2}return new v({dpi:96,lods:e,origin:new m(0,0,s),size:[r,r],spatialReference:s})}const i=a(s),l=e.origin?new m({x:e.origin.x,y:e.origin.y,spatialReference:s}):new m(i?{x:i.origin[0],y:i.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),n=1/(39.37*d(s)*96),u=[];if(o)for(let e=0;e<o.length;e++){const t=o[e],r=t*n;u.push({level:e,scale:t,resolution:r})}else{let e=c(s)?512/r*591657527.5917094:256/r*591657527.591555;const o=Math.ceil(24/t);u.push({level:0,scale:e,resolution:e*n});for(let r=1;r<o;r++){const o=e/Math.pow(2,t),s=o*n;u.push({level:r,scale:o,resolution:s}),e=o}}return new v({dpi:96,lods:u,origin:l,size:[r,r],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const o=a(e);return e.isWrappable&&Math.abs(o.origin[0]-t.x)<=o.dx}return!1}readOrigin(e,t){return m.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,o=0;const r=[];this._levelToLOD={},e&&(t=-1/0,o=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,o=e.scale<o?e.scale:o,this._levelToLOD[e.level]=e}))),this._set(\"scales\",r),this._set(\"minScale\",t),this._set(\"maxScale\",o),this._set(\"lods\",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];{const o=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[o]-t[r])}}scaleToZoom(e){const t=this.scales,o=t.length-1;let r=0;for(;r<o;r++){const o=t[r],s=t[r+1];if(o<=e)return r;if(s===e)return r+1;if(o>e&&s<e)return r+1-(e-s)/(o-s)}return r}snapScale(e,t=.95){const o=this.scaleToZoom(e);return o%Math.floor(o)>=t?this.zoomToScale(Math.ceil(o)):this.zoomToScale(Math.floor(o))}tileAt(e,t,o,r){const s=this.lodAt(e);if(!s)return null;let i,l;if(\"number\"==typeof t)i=t,l=o;else if(u(t.spatialReference,this.spatialReference))i=t.x,l=t.y,r=o;else{const e=h(t,this.spatialReference);if(!e)return null;i=e.x,l=e.y,r=o}const n=s.resolution*this.size[0],p=s.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:g()}),r.level=e,r.row=Math.floor((this.origin.y-l)/p+.001),r.col=Math.floor((i-this.origin.x)/n+.001),this.updateTileInfo(r),r}updateTileInfo(e){const t=this.lodAt(e.level);if(!t)return;const o=t.resolution*this.size[0],r=t.resolution*this.size[1];e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=g()),e.extent[0]=this.origin.x+e.col*o,e.extent[1]=this.origin.y-(e.row+1)*r,e.extent[2]=e.extent[0]+o,e.extent[3]=e.extent[1]+r}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:o}=this.lodAt(t.level),r=o*this.size[0],s=o*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+r,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return v.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let o=0;o<e.length;o++){const r=e[o];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};e([o({type:Number,json:{write:!0}})],j.prototype,\"compressionQuality\",void 0),e([o({type:Number,json:{write:!0}})],j.prototype,\"dpi\",void 0),e([o({type:String,json:{read:w.read,write:w.write,origins:{\"web-scene\":{read:!1,write:!1}}}})],j.prototype,\"format\",void 0),e([o({readOnly:!0,dependsOn:[\"spatialReference\",\"origin\"]})],j.prototype,\"isWrappable\",null),e([o({type:m,json:{write:!0}})],j.prototype,\"origin\",void 0),e([s(\"origin\")],j.prototype,\"readOrigin\",null),e([o({type:[y],value:null,json:{write:!0}})],j.prototype,\"lods\",null),e([o({readOnly:!0})],j.prototype,\"minScale\",void 0),e([o({readOnly:!0})],j.prototype,\"maxScale\",void 0),e([o({readOnly:!0})],j.prototype,\"scales\",void 0),e([o({cast:e=>Array.isArray(e)?e:\"number\"==typeof e?[e,e]:[256,256]})],j.prototype,\"size\",void 0),e([s(\"size\",[\"rows\",\"cols\"])],j.prototype,\"readSize\",null),e([l(\"size\",{cols:{type:t},rows:{type:t}})],j.prototype,\"writeSize\",null),e([o({type:f,json:{write:!0}})],j.prototype,\"spatialReference\",void 0),j=v=e([i(\"esri.layers.support.TileInfo\")],j);var x=j;export default x;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../core/lang.js\";import i from\"../../core/Error.js\";import{constant as e}from\"../../core/arrayUtils.js\";import a from\"../../request.js\";class l{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability=\"unknown\",this.byteSize=40}getAvailability(t,i){if(\"unknown\"!==this._allAvailability)return this._allAvailability;const e=(t-this.location.top)*this.location.width+(i-this.location.left),a=e%8,l=e>>3,o=this._tileAvailabilityBitSet;return l<0||l>o.length?\"unknown\":o[l]&1<<a?\"available\":\"unavailable\"}_updateFromData(t){const i=this.location.width,e=this.location.height;let a=!0,l=!0;const o=Math.ceil(i*e/8),n=new Uint8Array(o);let r=0;for(let i=0;i<t.length;i++){const e=i%8;t[i]?(l=!1,n[r]|=1<<e):a=!1,7===e&&++r}l?this._allAvailability=\"unavailable\":a?this._allAvailability=\"available\":(this._allAvailability=\"unknown\",this._tileAvailabilityBitSet=n,this.byteSize+=n.length)}static fromDefinition(t,o){const r=t.service.request||a,{row:s,col:h,width:c,height:m}=t,d={query:{f:\"json\"}};return o=o?{...d,...o}:d,r(n(t),o).then((t=>t.data)).catch((t=>{if(t&&t.details&&422===t.details.httpStatus)return{location:{top:s,left:h,width:c,height:m},valid:!0,data:e(c*m,0)};throw t})).then((t=>{if(t.location&&(t.location.top!==s||t.location.left!==h||t.location.width!==c||t.location.height!==m))throw new i(\"tilemap:location-mismatch\",\"Tilemap response for different location than requested\",{response:t,definition:{top:s,left:h,width:c,height:m}});return l.fromJSON(t)}))}static fromJSON(i){l.validateJSON(i);const e=new l;return e.location=Object.freeze(t(i.location)),e._updateFromData(i.data),Object.freeze(e)}static validateJSON(t){if(!t||!t.location)throw new i(\"tilemap:missing-location\",\"Location missing from tilemap response\");if(!1===t.valid)throw new i(\"tilemap:invalid\",\"Tilemap response was marked as invalid\");if(!t.data)throw new i(\"tilemap:missing-data\",\"Data missing from tilemap response\");if(!Array.isArray(t.data))throw new i(\"tilemap:data-mismatch\",\"Data must be an array of numbers\");if(t.data.length!==t.location.width*t.location.height)throw new i(\"tilemap:data-mismatch\",\"Number of data items does not match width/height of tilemap\")}}function o(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function n(t){let i;if(\"vector-tile\"===t.service.type)i=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;else{const e=t.service.tileServers;i=`${e&&e.length?e[t.row%e.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}const e=t.service.query;return e&&(i=`${i}?${e}`),i}export default l;export{l as Tilemap,o as tilemapDefinitionId,n as tilemapDefinitionUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{cast as l}from\"../../core/accessorSupport/decorators/cast.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../core/Error.js\";import{objectToQuery as a}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import o from\"../../core/PooledArray.js\";import{reject as n,resolve as h,create as c,onAbort as p,createAbortError as m,isAbortError as u,createAbortController as f,isAborted as v}from\"../../core/promiseUtils.js\";import{waitTicks as y}from\"../../core/scheduling.js\";import d from\"../../core/Accessor.js\";import _ from\"../../request.js\";import b from\"../../core/Handles.js\";import{init as g}from\"../../core/watchUtils.js\";import w from\"../../core/LRUCache.js\";import{tilemapDefinitionId as T,Tilemap as j}from\"./Tilemap.js\";var z;const A=t.getLogger(\"esri.layers.support.TilemapCache\");let L=z=class extends d{constructor(e){super(e),this._handles=new b,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=_,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new w(this.cacheByteSize),this._handles.add([this.watch([\"layer.parsedUrl\",\"layer.tileServers?\"],(()=>this._initializeTilemapDefinition())),g(this,\"layer.tileInfo.lods\",(e=>this._initializeAvailableLevels(e)),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(A.error(\"Minimum levels for Tilemap is 3, but got \",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,l){if(!this._availableLevels[e])return n(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`));const r=this._tmpTilemapDefinition,a=this._tilemapFromCache(e,t,i,r);if(a)return h(a);const o=l&&l.signal;return l={...l,signal:null},c(((e,t)=>{p(o,(()=>t(m())));const i=T(r);let s=this._pendingTilemapRequests[i];if(!s){s=j.fromDefinition(r,l).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[i];this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)}))}getAvailability(e,t,i){if(!this._availableLevels[e])return\"unavailable\";const l=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return l?l.getAvailability(t,i):\"unknown\"}getAvailabilityUpsample(e,t,i,l){l.level=e,l.row=t,l.col=i;const r=this.layer.tileInfo;for(r.updateTileInfo(l);;){const e=this.getAvailability(l.level,l.row,l.col);if(\"unavailable\"!==e)return e;if(!r.upsampleTile(l))return\"unavailable\"}}fetchAvailability(e,t,i,l){return this._availableLevels[e]?this.fetchTilemap(e,t,i,l).catch((e=>e)).then((l=>{if(l instanceof j){const r=l.getAvailability(t,i);return\"unavailable\"===r?n(new s(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i})):r}if(u(l))throw l;return\"unknown\"})):n(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,l,r){l.level=e,l.row=t,l.col=i;const s=this.layer.tileInfo;s.updateTileInfo(l);const a=this.fetchAvailability(e,t,i,r).catch((e=>{if(u(e))throw e;if(s.upsampleTile(l))return this.fetchAvailabilityUpsample(l.level,l.row,l.col,l);throw e}));return this._fetchAvailabilityUpsamplePrefetch(l.id,e,t,i,r,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,i,l,r,s){if(!this._prefetchingEnabled)return;const a=`prefetch-${e}`;if(this._handles.has(a))return;const o=f();s.then((()=>o.abort()),(()=>o.abort()));let n=!1;const h={remove(){n||(n=!0,o.abort())}};if(this._handles.add(h,a),await y(10,o.signal).catch((()=>{})),n||(n=!0,this._handles.remove(a)),v(o))return;const c={id:e,level:t,row:i,col:l},p={...r,signal:o.signal},m=this.layer.tileInfo;for(let e=0;z._prefetches.length<z._maxPrefetch&&m.upsampleTile(c);++e){const e=this.fetchAvailability(c.level,c.row,c.col,p);z._prefetches.push(e);const t=()=>{z._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?a(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,l){l.level=e,l.row=t-t%this.size,l.col=i-i%this.size;const r=T(l);return this._tilemapCache.get(r)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,l)=>!!e._tilemapFromCache(t,i,l,e._tmpTilemapDefinition)}}};L._maxPrefetch=4,L._prefetches=new o({initialSize:z._maxPrefetch}),e([i({constructOnly:!0,type:Number})],L.prototype,\"levels\",void 0),e([l(\"levels\")],L.prototype,\"castLevels\",null),e([i({readOnly:!0,dependsOn:[\"levels\"],type:Number})],L.prototype,\"size\",null),e([i({constructOnly:!0,type:Number})],L.prototype,\"cacheByteSize\",void 0),e([i({constructOnly:!0})],L.prototype,\"layer\",void 0),e([i({constructOnly:!0})],L.prototype,\"request\",void 0),L=z=e([r(\"esri.layers.support.TilemapCache\")],L);export{L as TilemapCache};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import{urlToObject as r,removeTrailingSlash as t,removeQueryParameters as n,join as s,Url as i,makeAbsolute as o}from\"../../core/urlUtils.js\";import{w as u}from\"../../chunks/persistableUrlUtils.js\";const l=[\"MapServer\",\"ImageServer\",\"FeatureServer\",\"SceneServer\",\"StreamServer\",\"VectorTileServer\"],a=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${l.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),c=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^\\\\/\\\\n]+)\\\\/(${l.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\");function f(e){return!!a.test(e)}function p(e){const t=r(e),n=t.path.match(a)||t.path.match(c);if(!n)return null;const[,s,i,o,u]=n,l=i.indexOf(\"/\");return{title:m(-1!==l?i.slice(l+1):i),serverType:o,sublayer:null!=u&&\"\"!==u?parseInt(u,10):null,url:{path:s}}}function m(e){return(e=e.replace(/\\s*[/_]+\\s*/g,\" \"))[0].toUpperCase()+e.slice(1)}function d(r,t){const n=[];if(r){const t=p(r);e(t)&&t.title&&n.push(t.title)}if(t){const e=m(t);n.push(e)}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(\" - \")}function v(e){if(!e)return!1;const r=-1!==(e=e.toLowerCase()).indexOf(\".arcgis.com/\"),t=-1!==e.indexOf(\"//services\")||-1!==e.indexOf(\"//tiles\")||-1!==e.indexOf(\"//features\");return r&&t}function w(e,r){return r&&e&&-1!==e.toLowerCase().indexOf(r.toLowerCase())}function x(e,r){return e?t(n(e,r)):e}function h(s,i,o){if(!i)return{url:i};i=n(i,o);const u=p(r(i).path);let l;return e(u)&&(null!=u.sublayer&&null==s.layerId&&(l=u.sublayer),i=u.url.path),{url:t(i),layerId:l}}function y(e,r,t,n,i){u(r,n,\"url\",i),n.url&&null!=e.layerId&&(n.url=s(n.url,t,e.layerId.toString()))}function O(e){if(!e)return!1;const r=e.toLowerCase(),t=-1!==r.indexOf(\"/services/\"),n=-1!==r.indexOf(\"/mapserver/wmsserver\"),s=-1!==r.indexOf(\"/imageserver/wmsserver\"),i=-1!==r.indexOf(\"/wmsserver\");return t&&(n||s||i)}function S(e){if(!e)return!1;const r=new i(o(e)).authority.toLowerCase();return\"server.arcgisonline.com\"===r||\"services.arcgisonline.com\"===r}export{m as cleanTitle,f as isArcGISUrl,v as isHostedAgolService,w as isHostedSecuredProxyService,S as isServerOrServicesAGOLUrl,O as isWmsServer,p as parse,x as sanitizeUrl,h as sanitizeUrlWithLayerId,l as serverTypes,d as titleFromUrlAndName,y as writeUrlWithLayerId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"./TileInfo.js\";const r={type:e,json:{origins:{service:{read:{source:[\"tileInfo\",\"minScale\",\"maxScale\",\"minLOD\",\"maxLOD\"],reader:n}}}}};function n(r,n,l,o){if(!r)return null;const{minScale:i,maxScale:t,minLOD:m,maxLOD:s}=n;if(null!=m&&null!=s)return o&&o.ignoreMinMaxLOD?e.fromJSON(r):e.fromJSON({...r,lods:r.lods.filter((({level:e})=>null!=e&&e>=m&&e<=s))});if(0!==i&&0!==t){const n=e=>Math.round(1e4*e)/1e4,l=i?n(i):1/0,o=t?n(t):-1/0;return e.fromJSON({...r,lods:r.lods.filter((e=>{const r=n(e.scale);return r<=l&&r>=o}))})}return e.fromJSON(r)}export{n as readServiceTileInfo,r as serviceTileInfoProperty};\n"],"sourceRoot":""}