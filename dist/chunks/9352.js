(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[9352],{60418:(t,n,e)=>{"use strict";e.d(n,{E:()=>r,R:()=>o,a:()=>a,t:()=>c});const r=1e-6,o=Math.random,i=Math.PI/180,s=180/Math.PI;function c(t){return t*i}function a(t){return t*s}Object.freeze({__proto__:null,EPSILON:1e-6,RANDOM:o,toRadian:c,toDegree:a,equals:function(t,n){return Math.abs(t-n)<=1e-6*Math.max(1,Math.abs(t),Math.abs(n))}})},14286:(t,n,e)=>{"use strict";e.d(n,{a:()=>f,b:()=>q,c:()=>o,d:()=>c,e:()=>p,f:()=>w,g:()=>b,h:()=>s,i:()=>h,j:()=>d,k:()=>I,l:()=>m,m:()=>v,n:()=>M,o:()=>y,p:()=>l,q:()=>g,s:()=>i,t:()=>A});var r=e(60418);function o(t,n){return t[0]=n[0],t[1]=n[1],t}function i(t,n,e){return t[0]=n,t[1]=e,t}function s(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t}function c(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function a(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function u(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function f(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t}function l(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t}function h(t,n){const e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function d(t,n){const e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function m(t){const n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function g(t){const n=t[0],e=t[1];return n*n+e*e}function M(t,n){return t[0]=-n[0],t[1]=-n[1],t}function p(t,n){const e=n[0],r=n[1];let o=e*e+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o),t}function b(t,n){return t[0]*n[0]+t[1]*n[1]}function w(t,n,e){const r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t}function v(t,n,e,r){const o=n[0],i=n[1];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t}function y(t,n,e){const r=n[0],o=n[1];return t[0]=e[0]*r+e[2]*o,t[1]=e[1]*r+e[3]*o,t}function A(t,n,e){const r=n[0],o=n[1];return t[0]=e[0]*r+e[2]*o+e[4],t[1]=e[1]*r+e[3]*o+e[5],t}function I(t,n){return t[0]===n[0]&&t[1]===n[1]}const x=m,q=c,_=a,E=u,N=h,S=d,U=g;Object.freeze({__proto__:null,copy:o,set:i,add:s,subtract:c,multiply:a,divide:u,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},min:function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},max:function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},scale:f,scaleAndAdd:l,distance:h,squaredDistance:d,length:m,squaredLength:g,negate:M,inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},normalize:p,dot:b,cross:w,lerp:v,random:function(t,n){n=n||1;const e=2*(0,r.R)()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},transformMat2:y,transformMat2d:A,transformMat3:function(t,n,e){const r=n[0],o=n[1];return t[0]=e[0]*r+e[3]*o+e[6],t[1]=e[1]*r+e[4]*o+e[7],t},transformMat4:function(t,n,e){const r=n[0],o=n[1];return t[0]=e[0]*r+e[4]*o+e[12],t[1]=e[1]*r+e[5]*o+e[13],t},rotate:function(t,n,e,r){const o=n[0]-e[0],i=n[1]-e[1],s=Math.sin(r),c=Math.cos(r);return t[0]=o*c-i*s+e[0],t[1]=o*s+i*c+e[1],t},angle:function(t,n){const e=t[0],r=t[1],o=n[0],i=n[1];let s=e*e+r*r;s>0&&(s=1/Math.sqrt(s));let c=o*o+i*i;c>0&&(c=1/Math.sqrt(c));const a=(e*o+r*i)*s*c;return a>1?0:a<-1?Math.PI:Math.acos(a)},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:I,equals:function(t,n){const e=t[0],o=t[1],i=n[0],s=n[1];return Math.abs(e-i)<=r.E*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(o-s)<=r.E*Math.max(1,Math.abs(o),Math.abs(s))},len:x,sub:q,mul:_,div:E,dist:N,sqrDist:S,sqrLen:U})},17387:(t,n,e)=>{"use strict";e.d(n,{C:()=>l,a:()=>h,b:()=>a,c:()=>w,d:()=>b,e:()=>v,f:()=>u,g:()=>s,h:()=>m,i:()=>y,j:()=>P,k:()=>d,l:()=>i,m:()=>_,n:()=>p,o:()=>g,p:()=>M,q:()=>I,r:()=>E,s:()=>c,t:()=>A,u:()=>V,v:()=>z,w:()=>U});var r=e(77625),o=e(60418);function i(t){const n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function s(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function c(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}function a(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function u(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function f(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function l(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function h(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function d(t,n){const e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return Math.sqrt(e*e+r*r+o*o)}function m(t,n){const e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return e*e+r*r+o*o}function g(t){const n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function M(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function p(t,n){const e=n[0],r=n[1],o=n[2];let i=e*e+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i),t}function b(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function w(t,n,e){const r=n[0],o=n[1],i=n[2],s=e[0],c=e[1],a=e[2];return t[0]=o*a-i*c,t[1]=i*s-r*a,t[2]=r*c-o*s,t}function v(t,n,e,r){const o=n[0],i=n[1],s=n[2];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t[2]=s+r*(e[2]-s),t}function y(t,n,e){const r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r+e[4]*o+e[8]*i+e[12],t[1]=e[1]*r+e[5]*o+e[9]*i+e[13],t[2]=e[2]*r+e[6]*o+e[10]*i+e[14],t}function A(t,n,e){const r=n[0],o=n[1],i=n[2];return t[0]=r*e[0]+o*e[3]+i*e[6],t[1]=r*e[1]+o*e[4]+i*e[7],t[2]=r*e[2]+o*e[5]+i*e[8],t}function I(t,n,e){const r=e[0],o=e[1],i=e[2],s=e[3],c=n[0],a=n[1],u=n[2];let f=o*u-i*a,l=i*c-r*u,h=r*a-o*c,d=o*h-i*l,m=i*f-r*h,g=r*l-o*f;const M=2*s;return f*=M,l*=M,h*=M,d*=2,m*=2,g*=2,t[0]=c+f+d,t[1]=a+l+m,t[2]=u+h+g,t}const x=(0,r.c)(),q=(0,r.c)();function _(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}let E=u,N=f,S=l,U=d,z=m,P=i,V=g;Object.freeze({__proto__:null,length:i,copy:s,set:c,add:a,subtract:u,multiply:f,divide:l,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},min:function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},max:function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},scale:h,scaleAndAdd:function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t},distance:d,squaredDistance:m,squaredLength:g,negate:M,inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},normalize:p,dot:b,cross:w,lerp:v,hermite:function(t,n,e,r,o,i){const s=i*i,c=s*(2*i-3)+1,a=s*(i-2)+i,u=s*(i-1),f=s*(3-2*i);return t[0]=n[0]*c+e[0]*a+r[0]*u+o[0]*f,t[1]=n[1]*c+e[1]*a+r[1]*u+o[1]*f,t[2]=n[2]*c+e[2]*a+r[2]*u+o[2]*f,t},bezier:function(t,n,e,r,o,i){const s=1-i,c=s*s,a=i*i,u=c*s,f=3*i*c,l=3*a*s,h=a*i;return t[0]=n[0]*u+e[0]*f+r[0]*l+o[0]*h,t[1]=n[1]*u+e[1]*f+r[1]*l+o[1]*h,t[2]=n[2]*u+e[2]*f+r[2]*l+o[2]*h,t},random:function(t,n){n=n||1;const e=2*(0,o.R)()*Math.PI,r=2*(0,o.R)()-1,i=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*i,t[1]=Math.sin(e)*i,t[2]=r*n,t},transformMat4:y,transformMat3:A,transformQuat:I,rotateX:function(t,n,e,r){const o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t},rotateY:function(t,n,e,r){const o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t},rotateZ:function(t,n,e,r){const o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t},angle:function(t,n){s(x,t),s(q,n),p(x,x),p(q,q);const e=b(x,q);return e>1?0:e<-1?Math.PI:Math.acos(e)},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:_,equals:function(t,n){const e=t[0],r=t[1],i=t[2],s=n[0],c=n[1],a=n[2];return Math.abs(e-s)<=o.E*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(r-c)<=o.E*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-a)<=o.E*Math.max(1,Math.abs(i),Math.abs(a))},sub:E,mul:N,div:S,dist:U,sqrDist:z,len:P,sqrLen:V})},77625:(t,n,e)=>{"use strict";function r(){return[0,0,0]}function o(t){return[t[0],t[1],t[2]]}function i(t,n,e){return[t,n,e]}function s(t){const n=[0,0,0],e=Math.min(3,t.length);for(let r=0;r<e;++r)n[r]=t[r];return n}function c(t,n){return new Float64Array(t,n,3)}function a(){return i(1,1,1)}function u(){return i(1,0,0)}function f(){return i(0,1,0)}function l(){return i(0,0,1)}e.d(n,{O:()=>d,Z:()=>h,a:()=>c,b:()=>o,c:()=>r,d:()=>s,f:()=>i});const h=[0,0,0],d=a(),m=u(),g=f(),M=l();Object.freeze({__proto__:null,create:r,clone:o,fromValues:i,fromArray:s,createView:c,zeros:function(){return[0,0,0]},ones:a,unitX:u,unitY:f,unitZ:l,ZEROS:h,ONES:d,UNIT_X:m,UNIT_Y:g,UNIT_Z:M})},82204:(t,n,e)=>{"use strict";e.d(n,{d:()=>o});var r=e(33655);function o(t,n,e){const o=t.byteLength/(4*n),u=new Uint32Array(t,0,o*n);let f=new Uint32Array(o);const l=e&&e.minReduction||0,h=e&&e.originalIndices||null,d=e&&e.componentOffsets||null;let m=0;if(d)for(let t=0;t<d.length-1;t++){const n=d[t+1]-d[t];n>m&&(m=n)}else m=o;const g=Math.floor(1.1*m)+1;(null==a||a.length<2*g)&&(a=new Uint32Array((0,r.Sf)(2*g)));for(let t=0;t<2*g;t++)a[t]=0;let M=0;const p=!!d&&!!h,b=p?h.length:o,w=p?new Uint32Array(h.length):null,v=1.96;let y=0!==l?Math.ceil(4*v*v/(l*l)*l*(1-l)):b,A=1,I=d?d[1]:b;for(let t=0;t<b;t++){if(t===y){const n=1-M/t;if(n+v*Math.sqrt(n*(1-n)/t)<l)return null;y*=2}if(t===I){for(let t=0;t<2*g;t++)a[t]=0;if(h)for(let t=d[A-1];t<d[A];t++)w[t]=f[h[t]];I=d[++A]}const e=p?h[t]:t,r=e*n,o=c(u,r,n);let s=o%g,m=M;for(;0!==a[2*s+1];){if(a[2*s]===o){const t=a[2*s+1]-1;if(i(u,r,t*n,n)){m=f[t];break}}s++,s>=g&&(s-=g)}m===M&&(a[2*s]=o,a[2*s+1]=e+1,M++),f[e]=m}if(0!==l&&1-M/o<l)return null;if(p){for(let t=d[A-1];t<w.length;t++)w[t]=f[h[t]];f=w}const x=new Uint32Array(n*M);M=0;for(let t=0;t<b;t++)f[t]===M&&(s(u,(p?h[t]:t)*n,x,M*n,n),M++);if(h&&!p){const t=new Uint32Array(h.length);for(let n=0;n<t.length;n++)t[n]=f[h[n]];f=t}return{buffer:x.buffer,indices:f,uniqueCount:M}}function i(t,n,e,r){for(let o=0;o<r;o++)if(t[n+o]!==t[e+o])return!1;return!0}function s(t,n,e,r,o){for(let i=0;i<o;i++)e[r+i]=t[n+i]}function c(t,n,e){let r=0;for(let o=0;o<e;o++)r=t[n+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let a=null},1227:(t,n,e)=>{"use strict";e.d(n,{K:()=>o});const r={divisor:0};function o(t,n={}){n={...r,...n};const e=t.stride;return t.fieldNames.filter((n=>{const e=t.fields.get(n).optional;return!(e&&e.glPadding)})).map((r=>{const o=t.fields.get(r),s=o.constructor.ElementCount,c=function(t){const n=i[t];if(n)return n;throw new Error("BufferType not supported in WebGL")}(o.constructor.ElementType),a=o.offset,u=!(!o.optional||!o.optional.glNormalized);return{name:r,stride:e,count:s,type:c,offset:a,normalized:u,divisor:n.divisor}}))}const i={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}},17154:(t,n,e)=>{"use strict";e.d(n,{jE:()=>u,c5:()=>p,LU:()=>w,Q4:()=>b,tB:()=>f,T:()=>c,u1:()=>s,pG:()=>d,ZA:()=>l,_F:()=>a});var r=e(33655),o=e(77625),i=e(17387);function s(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(Math.max(n,e),r))}function c(t,n,e){e=e||t;const r=(0,i.d)(t,n);(0,i.s)(e,t[0]-r*n[0],t[1]-r*n[1],t[2]-r*n[2]),(0,i.n)(e,e)}function a(t,n,e){Math.abs(t[0])>Math.abs(t[1])?(0,i.s)(n,0,1,0):(0,i.s)(n,1,0,0),(0,i.c)(e,t,n),(0,i.n)(n,n),(0,i.c)(n,e,t),(0,i.n)(e,e)}function u(t,n){const e=(0,i.l)(t),o=(0,r.Kt)(t[2]/e),s=Math.atan2(t[1]/e,t[0]/e);return(0,i.s)(n,e,o,s),n}function f(t,n,e){const r=e[0]-n[0],o=e[1]-n[1],i=e[2]-n[2];let s=r*r+o*o+i*i;return s?(s=1/Math.sqrt(s),t[0]=r*s,t[1]=o*s,t[2]=i*s,t):(t[0]=0,t[1]=0,t[2]=0,t)}function l(t,n,e,r=(0,o.c)()){const s=(0,i.l)(t),c=(0,i.l)(n),a=(0,i.d)(t,n)/(s*c);if(a<.9999999999999999){const o=Math.acos(a),u=((1-e)*s+e*c)/Math.sin(o),f=u/s*Math.sin((1-e)*o),l=u/c*Math.sin(e*o);return(0,i.a)(v,t,f),(0,i.a)(y,n,l),(0,i.b)(r,v,y)}return(0,i.e)(r,t,n,e)}class h{constructor(t,n){this.min=t,this.max=n,this.range=n-t}ndiff(t,n=0){return Math.ceil((t-n)/this.range)*this.range+n}_normalize(t,n,e,r=0,o=!1){return(e-=r)<t?e+=this.ndiff(t-e):e>n&&(e-=this.ndiff(e-n)),o&&e===n&&(e=t),e+r}normalize(t,n=0,e=!1){return this._normalize(this.min,this.max,t,n,e)}clamp(t,n=0){return(0,r.uZ)(t-n,this.min,this.max)+n}monotonic(t,n,e){return t<n?n:n+this.ndiff(t-n,e)}minimalMonotonic(t,n,e){return this._normalize(t,t+this.range,n,e)}center(t,n,e){return n=this.monotonic(t,n,e),this.normalize((t+n)/2,e)}diff(t,n,e){return this.monotonic(t,n,e)-t}shortestSignedDiff(t,n){t=this.normalize(t);const e=(n=this.normalize(n))-t,r=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(e)<Math.abs(r)?e:r}contains(t,n,e){return n=this.minimalMonotonic(t,n),(e=this.minimalMonotonic(t,e))>t&&e<n}}function d(t,n,e,r){(0,i.f)(m,n,t),(0,i.f)(g,e,t),(0,i.c)(r,m,g),(0,i.n)(r,r),r[3]=-(0,i.d)(t,r)}const m=(0,o.c)(),g=(0,o.c)();function M(t){for(const n in t){const e=t[n];e instanceof Function&&(t[n]=e.bind(t))}return t}const p=M(new h(0,2*Math.PI)),b=M(new h(-Math.PI,Math.PI)),w=M(new h(0,360)),v=((0,o.c)(),(0,o.c)()),y=(0,o.c)()},64164:(t,n,e)=>{"use strict";e.r(n),e.d(n,{work:()=>F,wrappedWork:()=>B});var r=e(82204),o=e(1227),i=e(80905);const s=(0,i.U$)().vec3f("position").u16("componentIndex").u16("_padding"),c=(0,i.U$)().vec2u8("sideness"),a=((0,o.K)(c),(0,i.U$)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",{glPadding:!0}).u16("_padding2",{glPadding:!0})),u=a.clone().vec3f("normal"),f=a.clone().vec3f("normalA").vec3f("normalB");var l=e(91946),h=e(77625),d=e(17387);class m{updateSettings(t){this.settings=t}write(t,n,e){const r=function(t){const n=g;n[0]=t.position0[0],n[1]=t.position0[1],n[2]=t.position0[2],n[3]=t.position1[0],n[4]=t.position1[1],n[5]=t.position1[2],p[0]=5381;for(let t=0;t<M.length;t++)p[0]=31*p[0]+M[t];return p[0]}(e);b.seed=r;const o=b.getIntRange(0,255),i=b.getIntRange(0,this.settings.variants-1),s=b.getFloat(),c=255*(.5*function(t,n){const e=t<0?-1:1;return Math.pow(Math.abs(t),1.2)*e}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7))+.5);t.position0.setVec(n,e.position0),t.position1.setVec(n,e.position1),t.componentIndex.set(n,e.componentIndex),t.variantOffset.set(n,o),t.variantStroke.set(n,i),t.variantExtension.set(n,c)}trim(t,n){return t.slice(0,n)}}const g=new Float32Array(6),M=new Uint32Array(g.buffer),p=new Uint32Array(1),b=new l.Z;class w{constructor(){this.commonWriter=new m}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return u.createBuffer(t)}write(t,n,e){this.commonWriter.write(t,n,e),(0,d.b)(y,e.faceNormal0,e.faceNormal1),(0,d.n)(y,y),t.normal.setVec(n,y)}trim(t,n){return this.commonWriter.trim(t,n)}}w.Layout=u,w.glLayout=(0,o.K)(u,{divisor:1});class v{constructor(){this.commonWriter=new m}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return f.createBuffer(t)}write(t,n,e){this.commonWriter.write(t,n,e),t.normalA.setVec(n,e.faceNormal0),t.normalB.setVec(n,e.faceNormal1)}trim(t,n){return this.commonWriter.trim(t,n)}}v.Layout=f,v.glLayout=(0,o.K)(f,{divisor:1});const y=(0,h.c)();var A=e(12608);function I(t,n){return n.push(t.buffer),{buffer:t.buffer,layout:x(t.layout)}}function x(t){const n=new Array;return t.fields.forEach(((t,e)=>{const r={...t,constructor:_(t.constructor)};n.push([e,r])})),{stride:t.stride,fields:n,fieldNames:t.fieldNames}}const q=[A.ly,A.Eu,A.ct,A.ek,A.gK,A.bj,A.oS,A.q6,A.fP,A.Cd,A.ey,A.O1,A.D_,A.xA,A.ne,A.mc,A.av,A.TS,A.mw,A.v6,A.Nu,A.qt,A.G5,A.hu,A.Hz,A.Vs,A.P_,A.ir,A.o7,A.or,A.n1,A.zO,A.Jj,A.wA,A.PP,A.TN];function _(t){return`${t.ElementType}_${t.ElementCount}`}const E=new Map;function N(t,n){const e=t.length/3,r=new Uint32Array(n+1),o=new Uint32Array(n+1),i=(t,n)=>{t<n?r[t+1]++:o[n+1]++};for(let n=0;n<e;n++){const e=t[3*n],r=t[3*n+1],o=t[3*n+2];i(e,r),i(r,o),i(o,e)}let s=0,c=0;for(let t=0;t<n;t++){const n=r[t+1],e=o[t+1];r[t+1]=s,o[t+1]=c,s+=n,c+=e}const a=new Uint32Array(6*e),u=r[n],f=(t,n,e)=>{if(t<n){const o=r[t+1]++;a[2*o]=n,a[2*o+1]=e}else{const r=o[n+1]++;a[2*u+2*r]=t,a[2*u+2*r+1]=e}};for(let n=0;n<e;n++){const e=t[3*n],r=t[3*n+1],o=t[3*n+2];f(e,r,n),f(r,o,n),f(o,e,n)}const l=(t,n)=>{const e=2*t,r=n-t;for(let t=1;t<r;t++){const n=a[e+2*t],r=a[e+2*t+1];let o=t-1;for(;o>=0&&a[e+2*o]>n;o--)a[e+2*o+2]=a[e+2*o],a[e+2*o+3]=a[e+2*o+1];a[e+2*o+2]=n,a[e+2*o+3]=r}};for(let t=0;t<n;t++)l(r[t],r[t+1]),l(u+o[t],u+o[t+1]);const h=new Int32Array(3*e),d=(n,e)=>n===t[3*e]?0:n===t[3*e+1]?1:n===t[3*e+2]?2:-1,m=(t,n)=>{const e=d(t,n);h[3*n+e]=-1},g=(t,n,e,r)=>{const o=d(t,n);h[3*n+o]=r;const i=d(e,r);h[3*r+i]=n};for(let t=0;t<n;t++){let n=r[t];const e=r[t+1];let i=o[t];const s=o[t+1];for(;n<e&&i<s;){const e=a[2*n],r=a[2*u+2*i];e===r?(g(t,a[2*n+1],r,a[2*u+2*i+1]),n++,i++):e<r?(m(t,a[2*n+1]),n++):(m(r,a[2*u+2*i+1]),i++)}for(;n<e;)m(t,a[2*n+1]),n++;for(;i<s;)m(a[2*u+2*i],a[2*u+2*i+1]),i++}return h}q.forEach((t=>E.set(_(t),t)));var S=e(6962),U=e(19677),z=e(33655),P=e(17154);function V(t,n){return t.cosAngle<n}function D(t,n){return t.cosAngle>n}function k(t,n){const e=(0,z.ZF)(t.cosAngle),r=L.fwd,o=L.ortho;return(0,P.tB)(r,t.position1,t.position0),e*((0,d.d)((0,d.c)(o,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>n}const L={edge:{position0:(0,h.c)(),position1:(0,h.c)(),faceNormal0:(0,h.c)(),faceNormal1:(0,h.c)(),componentIndex:0,cosAngle:0},ortho:(0,h.c)(),fwd:(0,h.c)()},O={v0:(0,h.c)(),v1:(0,h.c)(),v2:(0,h.c)()},T={anglePlanar:4,angleSignificantEdge:35};async function B(t){const n=function(t){return{data:s.createView(t.dataBuffer),originalIndices:"Uint32Array"===t.originalIndicesType?new Uint32Array(t.originalIndicesBuffer):"Uint16Array"===t.originalIndicesType?new Uint16Array(t.originalIndicesBuffer):void 0,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}(t),e=F(n),r=[n.data.buffer];return{result:function(t,n){return n.push(t.regular.lodInfo.lengths.buffer),n.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:I(t.regular.instancesData,n),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:I(t.silhouette.instancesData,n),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}(e,r),transferList:r}}function F(t){const n=function(t,n,e){if(n&&e)return{faces:e,neighbors:N(e,t.count),vertices:t};{const n=(0,r.d)(t.buffer,t.stride/4,{originalIndices:e}),o=N(n.indices,n.uniqueCount);return{faces:n.indices,neighbors:o,vertices:s.createView(n.buffer)}}}(t.data,t.skipDeduplicate,t.originalIndices);return R.updateSettings(t.writerSettings),W.updateSettings(t.writerSettings),function(t,n,e,r=T){const o=t.vertices.position,i=t.vertices.componentIndex,s=(0,z.Vl)(r.anglePlanar),c=(0,z.Vl)(r.angleSignificantEdge),a=Math.cos(c),u=Math.cos(s),f=L.edge,l=f.position0,h=f.position1,m=f.faceNormal0,g=f.faceNormal1,M=function(t){const n=t.faces.length/3,e=t.vertices.position,r=t.faces,o=O.v0,i=O.v1,s=O.v2,c=new Float32Array(3*n);for(let t=0;t<n;t++){const n=r[3*t+0],a=r[3*t+1],u=r[3*t+2];e.getVec(n,o),e.getVec(a,i),e.getVec(u,s),(0,d.f)(i,i,o),(0,d.f)(s,s,o),(0,d.c)(o,i,s),(0,d.n)(o,o),c[3*t+0]=o[0],c[3*t+1]=o[1],c[3*t+2]=o[2]}return c}(t),p=function(t){const n=t.faces.length/3,e=t.faces,r=t.neighbors;let o=0;for(let t=0;t<n;t++){const n=r[3*t+0],i=r[3*t+1],s=r[3*t+2],c=e[3*t+0],a=e[3*t+1],u=e[3*t+2];o+=-1===n||c<a?1:0,o+=-1===i||a<u?1:0,o+=-1===s||u<c?1:0}const i=new Int32Array(4*o);let s=0;for(let t=0;t<n;t++){const n=r[3*t+0],o=r[3*t+1],c=r[3*t+2],a=e[3*t+0],u=e[3*t+1],f=e[3*t+2];(-1===n||a<u)&&(i[s++]=a,i[s++]=u,i[s++]=t,i[s++]=n),(-1===o||u<f)&&(i[s++]=u,i[s++]=f,i[s++]=t,i[s++]=o),(-1===c||f<a)&&(i[s++]=f,i[s++]=a,i[s++]=t,i[s++]=c)}return i}(t),b=p.length/4,w=n.allocate(b);let v=0;const y=b,A=e.allocate(y);let I=0,x=0,q=0;const _=(0,U.w6)(0,b),E=new Float32Array(b);(0,S.Ed)(E,((t,n,e)=>{o.getVec(p[4*n+0],l),o.getVec(p[4*n+1],h),e[n]=(0,d.k)(l,h)})),_.sort(((t,n)=>E[n]-E[t]));const N=new Array,P=new Array;for(let t=0;t<b;t++){const r=_[t],c=E[r],b=p[4*r+0],y=p[4*r+1],S=p[4*r+2],U=p[4*r+3],z=-1===U;if(o.getVec(b,l),o.getVec(y,h),z)(0,d.s)(m,M[3*S+0],M[3*S+1],M[3*S+2]),(0,d.g)(g,m),f.componentIndex=i.get(b),f.cosAngle=(0,d.d)(m,g);else{if((0,d.s)(m,M[3*S+0],M[3*S+1],M[3*S+2]),(0,d.s)(g,M[3*U+0],M[3*U+1],M[3*U+2]),f.componentIndex=i.get(b),f.cosAngle=(0,d.d)(m,g),D(f,u))continue;f.cosAngle<-.9999&&(0,d.g)(g,m)}x+=c,q++,z||V(f,a)?(n.write(w,v++,f),N.push(c)):k(f,s)&&(e.write(A,I++,f),P.push(c))}const B=new Float32Array(N.reverse()),F=new Float32Array(P.reverse());return{regular:{instancesData:n.trim(w,v),lodInfo:{lengths:B}},silhouette:{instancesData:e.trim(A,I),lodInfo:{lengths:F}},averageEdgeLength:x/q}}(n,R,W)}const R=new w,W=new v}}]);
//# sourceMappingURL=9352.js.map