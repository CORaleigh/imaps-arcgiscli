{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/tasks/support/RouteResult.js","webpack://imaps/./node_modules/@arcgis/core/tasks/support/RouteResultsContainer.js","webpack://imaps/./node_modules/@arcgis/core/tasks/RouteTask.js"],"names":["i","o","super","this","directions","route","routeName","stops","type","json","write","prototype","String","n","r","features","map","barriers","messages","pointBarriers","polylineBarriers","polygonBarriers","routeResults","aliasOf","l","accumulateAttributes","name","attributeParameterValues","directionsTimeAttribute","impedanceAttribute","outSpatialReference","getter","e","wkid","restrictionAttributes","travelMode","a","p","_collectGeometries","then","t","push","slice","_isInputGeometryZAware","getServiceDescription","dontCheck","hasZ","_dropZValuesOffInputGeometry","forEach","s","get","geometry","query","parsedUrl","f","toQueryParams","requestOptions","path","u","endsWith","_handleSolveResponse","length","routes","spatialReference","c","m","data","h","y","d","g","indexOf","attributes","Name","RouteName","splice","B"],"mappings":"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","file":"chunks/3972.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import e from\"../../Graphic.js\";import p from\"./DirectionsFeatureSet.js\";let i=class extends s{constructor(o){super(o),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};o([r({type:p,json:{write:!0}})],i.prototype,\"directions\",void 0),o([r({type:e,json:{write:!0}})],i.prototype,\"route\",void 0),o([r({type:String,json:{write:!0}})],i.prototype,\"routeName\",void 0),o([r({type:[e],json:{write:!0}})],i.prototype,\"stops\",void 0),i=o([t(\"esri.tasks.support.RouteResult\")],i);var u=i;export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as e}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import p from\"../../Graphic.js\";import i from\"./FeatureSet.js\";import a from\"./NAMessage.js\";import l from\"./RouteResult.js\";function n(r){return r&&i.fromJSON(r).features.map((r=>r))}let u=class extends t{constructor(r){super(r),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(r,o){return n(o.barriers||o.pointBarriers)}readPolylineBarriers(r){return n(r)}readPolygonBarriers(r){return n(r)}};r([o({aliasOf:\"pointBarriers\"})],u.prototype,\"barriers\",void 0),r([o({type:[a]})],u.prototype,\"messages\",void 0),r([o({type:[p]})],u.prototype,\"pointBarriers\",void 0),r([e(\"pointBarriers\",[\"barriers\",\"pointBarriers\"])],u.prototype,\"readPointBarriers\",null),r([o({type:[p]})],u.prototype,\"polylineBarriers\",void 0),r([e(\"polylineBarriers\")],u.prototype,\"readPolylineBarriers\",null),r([o({type:[p]})],u.prototype,\"polygonBarriers\",void 0),r([e(\"polygonBarriers\")],u.prototype,\"readPolygonBarriers\",null),r([o({type:[l]})],u.prototype,\"routeResults\",void 0),u=r([s(\"esri.tasks.support.RouteResultsContainer\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{resolve as t}from\"../core/promiseUtils.js\";import s from\"../request.js\";import{normalizeCentralMeridian as o}from\"../geometry/support/normalizeUtils.js\";import i from\"./Task.js\";import{createQueryParamsHelper as a}from\"../core/queryUtils.js\";import{NAServiceDescriptionMixin as n}from\"./mixins/NAServiceDescription.js\";import p from\"./support/RouteResultsContainer.js\";const l=a({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,directionsTimeAttribute:{name:\"directionsTimeAttributeName\"},impedanceAttribute:{name:\"impedanceAttributeName\"},outSpatialReference:{name:\"outSR\",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},stops:!0,travelMode:!0});let u=class extends(n(i)){constructor(e){super(e)}solve(e,r){const i=[],a=[],n={},p={};return e.stops&&e.stops.features&&this._collectGeometries(e.stops.features,a,\"stops.features\",n),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,a,\"pointBarriers.features\",n),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,a,\"polylineBarriers.features\",n),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,a,\"polygonBarriers.features\",n),o(a).then((e=>{for(const r in n){const t=n[r];i.push(r),p[r]=e.slice(t[0],t[1])}return this._isInputGeometryZAware(p,i)?this.getServiceDescription():t({dontCheck:!0})})).then((t=>{(\"dontCheck\"in t?t.dontCheck:t.hasZ)||this._dropZValuesOffInputGeometry(p,i);for(const r in p)p[r].forEach(((t,s)=>{e.get(r)[s].geometry=t}));let o={query:{...this.parsedUrl.query,f:\"json\",...l.toQueryParams(e)}};(this.requestOptions||r)&&(o={...this.requestOptions,...r,...o});const{path:a}=this.parsedUrl,n=\"/solve\",u=a.endsWith(n)?a:a+n;return s(u,o)})).then((e=>this._handleSolveResponse(e)))}_collectGeometries(e,r,t,s){s[t]=[r.length,r.length+e.length],e.forEach((e=>{r.push(e.geometry)}))}_handleSolveResponse(e){const r=[],t=[],{directions:s=[],routes:{features:o=[],spatialReference:i=null}={},stops:{features:a=[],spatialReference:n=null}={},barriers:l,polygonBarriers:u,polylineBarriers:c,messages:m}=e.data,f=\"esri.tasks.RouteTask.NULL_ROUTE_NAME\";let h,y,d=!0;const g=o&&i||a&&n||l&&l.spatialReference||u&&u.spatialReference||c&&c.spatialReference;s.forEach((e=>{r.push(h=e.routeName),t[h]={directions:e}})),o.forEach((e=>{-1===r.indexOf(h=e.attributes.Name)&&(r.push(h),t[h]={}),e.geometry&&(e.geometry.spatialReference=g),t[h].route=e})),a.forEach((e=>{y=e.attributes,-1===r.indexOf(h=y.RouteName||f)&&(r.push(h),t[h]={}),h!==f&&(d=!1),e.geometry&&(e.geometry.spatialReference=g),null==t[h].stops&&(t[h].stops=[]),t[h].stops.push(e)})),a.length>0&&!0===d&&(t[r[0]].stops=t[f].stops,delete t[f],r.splice(r.indexOf(f),1));const B=r.map((e=>(t[e].routeName=e===f?null:e,t[e])));return p.fromJSON({routeResults:B,pointBarriers:l,polygonBarriers:u,polylineBarriers:c,messages:m})}};u=e([r(\"esri.tasks.RouteTask\")],u);var c=u;export default c;\n"],"sourceRoot":""}