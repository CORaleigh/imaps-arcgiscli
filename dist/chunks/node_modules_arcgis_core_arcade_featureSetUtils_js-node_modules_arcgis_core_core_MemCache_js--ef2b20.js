/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkimaps"] = self["webpackChunkimaps"] || []).push([["node_modules_arcgis_core_arcade_featureSetUtils_js-node_modules_arcgis_core_core_MemCache_js--ef2b20"],{

/***/ "./node_modules/@arcgis/core/arcade/featureSetCollection.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureSetCollection.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class{constructor(){this.declaredRootClass=\"esri.arcade.featureSetCollection\",this._layerById={},this._layerByName={}}add(e,r,t){this._layerById[r]=t,this._layerByName[e]=t}featureSetByName(e,r=!0,t=[\"*\"]){return void 0===this._layerByName[e]?this.resolvePromise(null):this.resolvePromise(this._layerByName[e])}featureSetById(e,r=!0,t=[\"*\"]){return void 0===this._layerById[e]?this.resolvePromise(null):this.resolvePromise(this._layerById[e])}castToText(){return\"object, FeatureSetCollection\"}resolvePromise(r){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(r)}});\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureSetCollection.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureSetUtils.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureSetUtils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"constructAssociationMetaDataFeatureSetFromUrl\": () => (/* binding */ F),\n/* harmony export */   \"constructFeatureSet\": () => (/* binding */ A),\n/* harmony export */   \"constructFeatureSetFromPortalItem\": () => (/* binding */ b),\n/* harmony export */   \"constructFeatureSetFromRelationship\": () => (/* binding */ g),\n/* harmony export */   \"constructFeatureSetFromUrl\": () => (/* binding */ T),\n/* harmony export */   \"createFeatureSetCollectionFromMap\": () => (/* binding */ O),\n/* harmony export */   \"createFeatureSetCollectionFromService\": () => (/* binding */ w),\n/* harmony export */   \"getPortal\": () => (/* binding */ v),\n/* harmony export */   \"initialiseMetaDataCache\": () => (/* binding */ S),\n/* harmony export */   \"lookupUser\": () => (/* binding */ E)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../kernel.js */ \"./node_modules/@arcgis/core/kernel.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../portal/Portal.js */ \"./node_modules/@arcgis/core/portal/Portal.js\");\n/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../portal/PortalItem.js */ \"./node_modules/@arcgis/core/portal/PortalItem.js\");\n/* harmony import */ var _featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./featureset/support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./featureSetCollection.js */ \"./node_modules/@arcgis/core/arcade/featureSetCollection.js\");\n/* harmony import */ var _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./featureset/support/cache.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/cache.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./featureset/actions/AttributeFilter.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js\");\n/* harmony import */ var _featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./featureset/actions/OrderBy.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js\");\n/* harmony import */ var _featureset_actions_GroupBy_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./featureset/actions/GroupBy.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/GroupBy.js\");\n/* harmony import */ var _featureset_actions_SpatialFilter_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./featureset/actions/SpatialFilter.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/SpatialFilter.js\");\n/* harmony import */ var _featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./featureset/actions/Top.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/Top.js\");\n/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../layers/FeatureLayer.js */ \"./node_modules/@arcgis/core/layers/FeatureLayer.js\");\n/* harmony import */ var _featureset_sources_FeatureLayerDynamic_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./featureset/sources/FeatureLayerDynamic.js */ \"./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js\");\n/* harmony import */ var _featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./featureset/sources/FeatureLayerMemory.js */ \"./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js\");\n/* harmony import */ var _featureset_sources_FeatureLayerRelated_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./featureset/sources/FeatureLayerRelated.js */ \"./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerRelated.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction S(){null===_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache&&(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache=new _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default)}function N(t,a){if(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache){const n=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.getLayerInfo(t);if(n)return n.then((r=>(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default({url:t,outFields:a,sourceJSON:r}))));const s=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default({url:t,outFields:a});let i=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.create)(((e,t)=>{s.load().then((()=>{e(s.sourceJSON)}),(e=>{t(e)}))}));return _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache&&(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.setLayerInfo(t,i),i=i.catch((e=>{throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.clearLayerInfo(t),e}))),i.then((()=>(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(s)))}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default({url:t,outFields:a}))}function T(t,r,a,n,s){return N(t,[\"*\"]).then((t=>(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(A(t,r,a,n,s))))}function A(e,t=null,r=null,a=!0,n=null){return!0===e._hasMemorySource()?new _featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_16__.default({layer:e,spatialReference:t,outFields:r,includeGeometry:a,lrucache:n}):new _featureset_sources_FeatureLayerDynamic_js__WEBPACK_IMPORTED_MODULE_15__.default({layer:e,spatialReference:t,outFields:r,includeGeometry:a,lrucache:n})}function C(t){if(null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache){const e=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.getLayerInfo(t);if(null!==e)return e}let r=(0,_request_js__WEBPACK_IMPORTED_MODULE_2__.default)(t,{responseType:\"json\",query:{f:\"json\"}}).then((t=>{if(t.data){const r=t.data;return r.layers||(r.layers=[]),r.tables||(r.tables=[]),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(r)}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)({layers:[],tables:[]})}));return null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache&&(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.setLayerInfo(t,r),r=r.catch((e=>{throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.clearLayerInfo(t),e}))),r}function F(t,r){const a={metadata:null,networkId:-1,unVersion:3,terminals:[],queryelem:null,layerNameLkp:{},lkp:null};return C(t).then((s=>{if(a.metadata=s,s.controllerDatasetLayers&&void 0!==s.controllerDatasetLayers.utilityNetworkLayerId&&null!==s.controllerDatasetLayers.utilityNetworkLayerId){if(s.layers)for(const e of s.layers)a.layerNameLkp[e.id]=e.name;if(s.tables)for(const e of s.tables)a.layerNameLkp[e.id]=e.name;const i=s.controllerDatasetLayers.utilityNetworkLayerId;return a.networkId=i,function(e,t){const r=\"QUERYDATAELEMTS:\"+t.toString()+\":\"+e;if(null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache){const e=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.getLayerInfo(r);if(null!==e)return e}let a=(0,_request_js__WEBPACK_IMPORTED_MODULE_2__.default)(e+\"/queryDataElements\",{method:\"post\",responseType:\"json\",query:{layers:JSON.stringify([t.toString()]),f:\"json\"}}).then((e=>{if(e.data){const t=e.data;if(t.layerDataElements&&t.layerDataElements[0])return t.layerDataElements[0]}throw new Error(\"Not Found\")}));return null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache&&(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.setLayerInfo(r,a),a=a.catch((e=>{throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.clearLayerInfo(r),e}))),a}(t,i).then((s=>{if(s){a.queryelem=s,a.queryelem&&a.queryelem.dataElement&&void 0!==a.queryelem.dataElement.schemaGeneration&&(a.unVersion=a.queryelem.dataElement.schemaGeneration),a.lkp={},a.queryelem.dataElement.domainNetworks||(a.queryelem.dataElement.domainNetworks=[]);for(const e of a.queryelem.dataElement.domainNetworks){for(const t of e.edgeSources?e.edgeSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:a.layerNameLkp[t.layerId]?a.layerNameLkp[t.layerId]:null};e.className&&(a.lkp[e.className]=e)}for(const t of e.junctionSources?e.junctionSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:a.layerNameLkp[t.layerId]?a.layerNameLkp[t.layerId]:null};e.className&&(a.lkp[e.className]=e)}}if(a.queryelem.dataElement.terminalConfigurations)for(const e of a.queryelem.dataElement.terminalConfigurations)for(const t of e.terminals)a.terminals.push({terminalId:t.terminalId,terminalName:t.terminalName});return function(t){if(null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache){const e=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.getLayerInfo(t);if(null!==e)return e}let r=(0,_request_js__WEBPACK_IMPORTED_MODULE_2__.default)(t,{responseType:\"json\",query:{f:\"json\"}}).then((t=>{if(t.data){const r=t.data;return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(r)}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(null)}));return null!==_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache&&(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.setLayerInfo(t,r),r=r.catch((e=>{throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.clearLayerInfo(t),e}))),r}(t+\"/\"+i).then((e=>{if(e.systemLayers&&void 0!==e.systemLayers.associationsTableId&&null!==e.systemLayers.associationsTableId){const n=[];return a.unVersion>=4&&(n.push(\"STATUS\"),n.push(\"PERCENTALONG\")),T(t+\"/\"+e.systemLayers.associationsTableId.toString(),r,[\"OBJECTID\",\"FROMNETWORKSOURCEID\",\"TONETWORKSOURCEID\",\"FROMGLOBALID\",\"TOGLOBALID\",\"TOTERMINALID\",\"FROMTERMINALID\",\"ASSOCIATIONTYPE\",\"ISCONTENTVISIBLE\",\"GLOBALID\",...n],!1,null).then((e=>e.load())).then((e=>a.unVersion>=4?(e=e.filter(_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_8__.WhereClause.create(\"STATUS NOT IN (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62,63)\",e.getFieldsIndex()))).load():e)).then((e=>({lkp:a.lkp,associations:e,unVersion:a.unVersion,terminals:a.terminals})))}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}))}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}))}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}))}function g(e,t,r,a=null,n=null,s=!0,i=null){let l=e.serviceUrl();return l?(l=\"/\"===l.charAt(l.length-1)?l+t.relatedTableId.toString():l+\"/\"+t.relatedTableId.toString(),T(l,a,n,s,i).then((l=>new _featureset_sources_FeatureLayerRelated_js__WEBPACK_IMPORTED_MODULE_17__.default({layer:e,relatedLayer:l,relationship:t,objectId:r,spatialReference:a,outFields:n,includeGeometry:s,lrucache:i})))):null}_featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_9__.default.registerAction(),_featureset_actions_GroupBy_js__WEBPACK_IMPORTED_MODULE_11__.default.registerAction(),_featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_10__.default.registerAction(),_featureset_actions_SpatialFilter_js__WEBPACK_IMPORTED_MODULE_12__.default.registerAction(),_featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_13__.default.registerAction();class k extends _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_6__.default{constructor(e,t=null,r=null){super(),this._map=e,this._overridespref=t,this.lrucache=r,this._instantLayers=[]}makeAndAddFeatureSet(e,t=!0,r=null){const a=A(e,this._overridespref,null===r?[\"*\"]:r,t,this.lrucache);return this._instantLayers.push({featureset:a,opitem:e,includeGeometry:t,outFields:JSON.stringify(r)}),a}featureSetByName(e,r=!0,a=null){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return this._map.load().then((()=>{try{return this.featureSetByName(e,r,a)}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}));null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const n=JSON.stringify(a);for(let t=0;t<this._instantLayers.length;t++){const a=this._instantLayers[t];if(a.opitem.title===e&&a.includeGeometry===r&&a.outFields===n)return this.resolvePromise(this._instantLayers[t].featureset)}const s=this._map.layers.find((t=>t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default&&t.title===e));if(s)return this.resolvePromise(this.makeAndAddFeatureSet(s,r,a));if(this._map.tables){const t=this._map.tables.find((t=>!!(t.title&&t.title===e||t.title&&t.title===e)));if(t){if(t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default)return this.resolvePromise(this.makeAndAddFeatureSet(t,r,a));if(t._materializedTable);else{const e=t.outFields?t:{...t,outFields:[\"*\"]};t._materializedTable=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default(e)}return t._materializedTable.load().then((()=>this.resolvePromise(this.makeAndAddFeatureSet(t._materializedTable,r,a))))}}return this.resolvePromise(null)}featureSetById(e,r=!0,a=[\"*\"]){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return this._map.load().then((()=>{try{return this.featureSetById(e,r,a)}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}));null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const n=JSON.stringify(a);for(let t=0;t<this._instantLayers.length;t++){const a=this._instantLayers[t];if(a.opitem.id===e&&a.includeGeometry===r&&a.outFields===n)return this.resolvePromise(this._instantLayers[t].featureset)}const s=this._map.layers.find((t=>t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default&&t.id===e));if(s)return this.resolvePromise(this.makeAndAddFeatureSet(s,r,a));if(this._map.tables){const t=this._map.tables.find((t=>t.id===e));if(t){if(t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default)return this.resolvePromise(this.makeAndAddFeatureSet(t,r,a));if(t._materializedTable);else{const e={...t,outFields:[\"*\"]};t._materializedTable=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default(e)}return t._materializedTable.load().then((()=>this.resolvePromise(this.makeAndAddFeatureSet(t._materializedTable,r,a))))}}return this.resolvePromise(null)}}class j extends _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_6__.default{constructor(e,t=null,r=null){super(),this._url=e,this._overridespref=t,this.lrucache=r,this.metadata=null,this._instantLayers=[]}get url(){return this._url}makeAndAddFeatureSet(e,t=!0,r=null){const a=A(e,this._overridespref,null===r?[\"*\"]:r,t,this.lrucache);return this._instantLayers.push({featureset:a,opitem:e,includeGeometry:t,outFields:JSON.stringify(r)}),a}_loadMetaData(){return C(this._url).then((e=>(this.metadata=e,e)))}load(){return this._loadMetaData()}clone(){return new j(this._url,this._overridespref,this.lrucache)}featureSetByName(e,t=!0,r=null){null===r&&(r=[\"*\"]),r=(r=r.slice(0)).sort();const a=JSON.stringify(r);for(let r=0;r<this._instantLayers.length;r++){const n=this._instantLayers[r];if(n.opitem.title===e&&n.includeGeometry===t&&n.outFields===a)return this.resolvePromise(this._instantLayers[r].featureset)}return this._loadMetaData().then((a=>{let n=null;for(const t of a.layers?a.layers:[])t.name===e&&(n=t);if(!n)for(const t of a.tables?a.tables:[])t.name===e&&(n=t);return n?N(this._url+\"/\"+n.id,[\"*\"]).then((e=>this.makeAndAddFeatureSet(e,t,r))):this.resolvePromise(null)}))}featureSetById(e,t=!0,r=[\"*\"]){null===r&&(r=[\"*\"]),r=(r=r.slice(0)).sort();const a=JSON.stringify(r);e=null!=e?e.toString():\"\";for(let r=0;r<this._instantLayers.length;r++){const n=this._instantLayers[r];if(n.opitem.id===e&&n.includeGeometry===t&&n.outFields===a)return this.resolvePromise(this._instantLayers[r].featureset)}return this._loadMetaData().then((a=>{let n=null;for(const t of a.layers?a.layers:[])null!==t.id&&void 0!==t.id&&t.id.toString()===e&&(n=t);if(!n)for(const t of a.tables?a.tables:[])null!==t.id&&void 0!==t.id&&t.id.toString()===e&&(n=t);return n?N(this._url+\"/\"+n.id,[\"*\"]).then((e=>this.makeAndAddFeatureSet(e,t,r))):this.resolvePromise(null)}))}}function O(e,t,r=null){return new k(e,t,r)}function w(e,t,r=null){return new j(e,t,r)}function v(e,t){if(null===e)return t;return new _portal_Portal_js__WEBPACK_IMPORTED_MODULE_3__.default({url:e.field(\"url\")})}function E(t,r,s){return _kernel_js__WEBPACK_IMPORTED_MODULE_1__.id.findCredential(t.restUrl)?\"loaded\"===t.loadStatus&&\"\"===r&&t.user&&t.user.sourceJSON&&!1===s?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(t.user.sourceJSON):\"\"===r?(0,_request_js__WEBPACK_IMPORTED_MODULE_2__.default)(t.restUrl+\"/community/self\",{responseType:\"json\",query:{f:\"json\",...!1===s?{}:{returnUserLicenseTypeExtensions:!0}}}).then((t=>{if(t.data){const r=t.data;if(r&&r.username)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(r)}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(null)})):(0,_request_js__WEBPACK_IMPORTED_MODULE_2__.default)(t.restUrl+\"/community/users/\"+r,{responseType:\"json\",query:{f:\"json\"}}).then((t=>{if(t.data){const r=t.data;return r.error?null:(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(r)}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(null)})):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(null)}function b(a,n,s,o,c,d,m){if(_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache){const r=_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.getLayerInfo(a+\":\"+d.url);if(r)return r.then((r=>{try{const t=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default({url:(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.extractServiceUrl)(r.url)+\"/\"+n,outFields:[\"*\"]});return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(A(t,s,o,c,m))}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}),(e=>(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)))}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.create)(((e,t)=>{const r=new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_4__.default({id:a,portal:d}).load();_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache&&_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.setLayerInfo(a+\":\"+d.url,r),r.then((r=>{try{const t=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_14__.default({url:(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.extractServiceUrl)(r.url)+\"/\"+n,outFields:[\"*\"]});e(A(t,s,o,c,m))}catch(e){t(e)}}),(e=>{_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache&&_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_7__.default.applicationCache.clearLayerInfo(a+\":\"+d.url),t(e)}))}))}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureSetUtils.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AdaptedFeatureSet\": () => (/* binding */ E),\n/* harmony export */   \"AdaptedField\": () => (/* binding */ m),\n/* harmony export */   \"FieldRename\": () => (/* binding */ v),\n/* harmony export */   \"OriginalField\": () => (/* binding */ w),\n/* harmony export */   \"SqlExpressionAdapted\": () => (/* binding */ T),\n/* harmony export */   \"StringToCodeAdapted\": () => (/* binding */ C)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../kernel.js */ \"./node_modules/@arcgis/core/arcade/kernel.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass m{constructor(){this.sqlRewritable=!1}postInitialization(e,t){}}class w extends m{constructor(e){super(),this.field=e,this.sqlRewritable=!0}extractValue(e){return e.attributes[this.field.name]}rewriteSql(e){return{rewritten:this.sqlRewritable,where:e}}}class v extends m{constructor(e,t,r){super(),this.originalField=e,this.sqlRewritable=!0,this.field=(0,_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.cloneField)(e),this.field.name=t,this.field.alias=r}rewriteSql(e,t){return{rewritten:this.sqlRewritable,where:(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.reformulateWithoutField)(e,this.field.name,this.originalField.name,t.getFieldsIndex())}}extractValue(e){return e.attributes[this.originalField.name]}}class C extends m{constructor(e,t,r){super(),this.field=e,this.codefield=t,this.lkp=r,this.reverseLkp={};for(const e in r)this.reverseLkp[r[e]]=e;this.sqlRewritable=!0}rewriteSql(e,t){const r=this.evaluateNodeToWhereClause(e.parseTree,_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.FeatureServiceDatabaseType.Standardised,this.field.name,this.codefield instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_6__.WhereClause?(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.toWhereClause)(this.codefield,_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.FeatureServiceDatabaseType.Standardised):this.codefield,e.parameters);return r.indexOf(C.BADNESS)>=0?{rewritten:!1,where:e}:{rewritten:this.sqlRewritable,where:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_6__.WhereClause.create(r,t._parent.getFieldsIndex())}}evaluateNodeToWhereClause(e,t,r=null,s=null,i){let a,l,n,o;switch(e.type){case\"interval\":return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.convertIntervalToSql)(this.evaluateNodeToWhereClause(e.value,t,r,s,i),e.qualifier,e.op);case\"case_expression\":{let s=\" CASE \";\"simple\"===e.format&&(s+=this.evaluateNodeToWhereClause(e.operand,t,r,C.BADNESS,i));for(let a=0;a<e.clauses.length;a++)s+=\" WHEN \"+this.evaluateNodeToWhereClause(e.clauses[a].operand,t,r,C.BADNESS,i)+\" THEN \"+this.evaluateNodeToWhereClause(e.clauses[a].value,t,r,C.BADNESS,i);return null!==e.else&&(s+=\" ELSE \"+this.evaluateNodeToWhereClause(e.else,t,r,C.BADNESS,i)),s+=\" END \",s}case\"param\":{const r=i[e.value.toLowerCase()];if(\"string\"==typeof r){return\"'\"+i[e.value.toLowerCase()].toString().replace(/'/g,\"''\")+\"'\"}if(r instanceof Date)return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeDateString)(r,t);if(r instanceof Array){const e=[];for(let s=0;s<r.length;s++)\"string\"==typeof r[s]?e.push(\"'\"+r[s].toString().replace(/'/g,\"''\")+\"'\"):r[s]instanceof Date?e.push((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeDateString)(r[s],t)):e.push(r[s].toString());return e}return r.toString()}case\"expr_list\":l=[];for(const a of e.value)l.push(this.evaluateNodeToWhereClause(a,t,r,s,i));return l;case\"unary_expr\":return\" ( NOT \"+this.evaluateNodeToWhereClause(e.expr,t,r,C.BADNESS,i)+\" ) \";case\"binary_expr\":switch(e.operator){case\"AND\":return\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" AND \"+this.evaluateNodeToWhereClause(e.right,t,r,s,i)+\") \";case\"OR\":return\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" OR \"+this.evaluateNodeToWhereClause(e.right,t,r,s,i)+\") \";case\"IS\":if(\"null\"!==e.right.type)throw new Error(\"Unsupported RHS for IS\");return\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" IS NULL )\";case\"ISNOT\":if(\"null\"!==e.right.type)throw new Error(\"Unsupported RHS for IS\");return\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" IS NOT NULL )\";case\"IN\":if(a=[],\"expr_list\"===e.right.type){if(\"column_ref\"===e.left.type&&e.left.column.toUpperCase()===this.field.name.toUpperCase()){const a=[];let l=!0;for(const t of e.right.value){if(\"string\"!==t.type){l=!1;break}if(void 0===this.lkp[t.value]){l=!1;break}a.push(this.lkp[t.value].toString())}if(l)return\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" IN (\"+a.join(\",\")+\")) \"}return a=this.evaluateNodeToWhereClause(e.right,t,r,s,i),\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" IN (\"+a.join(\",\")+\")) \"}return o=this.evaluateNodeToWhereClause(e.right,t,r,s,i),o instanceof Array?\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" IN (\"+o.join(\",\")+\")) \":\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" IN (\"+o+\")) \";case\"NOT IN\":if(a=[],\"expr_list\"===e.right.type){if(\"column_ref\"===e.left.type&&e.left.column.toUpperCase()===this.field.name.toUpperCase()){const a=[];let l=!0;for(const t of e.right.value){if(\"string\"!==t.type){l=!1;break}if(void 0===this.lkp[t.value]){l=!1;break}a.push(this.lkp[t.value].toString())}if(l)return\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" NOT IN (\"+a.join(\",\")+\")) \"}return a=this.evaluateNodeToWhereClause(e.right,t,r,s,i),\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" NOT IN (\"+a.join(\",\")+\")) \"}return o=this.evaluateNodeToWhereClause(e.right,t,r,s,i),o instanceof Array?\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" NOT IN (\"+o.join(\",\")+\")) \":\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,s,i)+\" NOT IN (\"+o+\")) \";case\"BETWEEN\":return n=this.evaluateNodeToWhereClause(e.right,t,r,C.BADNESS,i),\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,C.BADNESS,i)+\" BETWEEN \"+n[0]+\" AND \"+n[1]+\" ) \";case\"NOTBETWEEN\":return n=this.evaluateNodeToWhereClause(e.right,t,r,C.BADNESS,i),\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,C.BADNESS,i)+\" NOT BETWEEN \"+n[0]+\" AND \"+n[1]+\" ) \";case\"LIKE\":return\"\"!==e.escape?\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,C.BADNESS,i)+\" LIKE \"+this.evaluateNodeToWhereClause(e.right,t,r,C.BADNESS,i)+\" ESCAPE '\"+e.escape+\"') \":\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,C.BADNESS,i)+\" LIKE \"+this.evaluateNodeToWhereClause(e.right,t,r,C.BADNESS,i)+\") \";case\"NOT LIKE\":return\"\"!==e.escape?\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,C.BADNESS,i)+\" NOT LIKE \"+this.evaluateNodeToWhereClause(e.right,t,r,C.BADNESS,i)+\" ESCAPE '\"+e.escape+\"') \":\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,C.BADNESS,i)+\" NOT LIKE \"+this.evaluateNodeToWhereClause(e.right,t,r,C.BADNESS,i)+\") \";case\"<>\":case\"=\":if(\"column_ref\"===e.left.type&&\"string\"===e.right.type){if(e.left.column.toUpperCase()===this.field.name.toUpperCase()&&void 0!==this.lkp[e.right.value.toString()])return\" (\"+s+\" \"+e.operator+\" \"+this.lkp[e.right.value.toString()].toString()+\") \"}else if(\"column_ref\"===e.right.type&&\"string\"===e.left.type&&e.right.column.toUpperCase()===this.field.name.toUpperCase())return\" (\"+this.lkp[e.right.value.toString()].toString()+\" \"+e.operator+\" \"+s+\") \";return\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,C.BADNESS,i)+\" \"+e.operator+\" \"+this.evaluateNodeToWhereClause(e.right,t,r,C.BADNESS,i)+\") \";case\"<\":case\">\":case\">=\":case\"<=\":case\"*\":case\"-\":case\"+\":case\"/\":return\" (\"+this.evaluateNodeToWhereClause(e.left,t,r,C.BADNESS,i)+\" \"+e.operator+\" \"+this.evaluateNodeToWhereClause(e.right,t,r,C.BADNESS,i)+\") \"}throw new Error(\"Not Supported Operator \"+e.operator);case\"null\":return\"null\";case\"bool\":return!0===e.value?\"1\":\"0\";case\"string\":return\"'\"+e.value.toString().replace(/'/g,\"''\")+\"'\";case\"timestamp\":case\"date\":return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeDateString)(e.value,t);case\"number\":return e.value.toString();case\"current_time\":return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeToday)(\"date\"===e.mode,t);case\"column_ref\":return r&&r.toLowerCase()===e.column.toLowerCase()?\"(\"+s+\")\":e.column;case\"function\":{const s=this.evaluateNodeToWhereClause(e.args,t,r,C.BADNESS,i);return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.translateFunctionToDatabaseSpecific)(e.name,s,t)}}throw new Error(\"Unsupported sql syntax \"+e.type)}extractValue(e){return this.codefield instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_6__.WhereClause?this.reverseLkp[this.codefield.calculateValueCompiled(e)]:this.reverseLkp[e.attributes[this.codefield]]}}C.BADNESS=\"_!!!_BAD_LKP_!!!!\";class T extends m{constructor(e,t){super(),this.field=e,this.sql=t}rewriteSql(e,t){return{rewritten:!0,where:(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.reformulateWithoutField)(e,this.field.name,(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.toWhereClause)(this.sql,_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.FeatureServiceDatabaseType.Standardised),t.getFieldsIndex())}}extractValue(e){return this.sql.calculateValueCompiled(e)}}class E extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_8__.default{constructor(e){super(e),this._calcFunc=null,this.declaredClass=\"esri.arcade.featureset.actions.Adapted\",this.adaptedFields=null,this._extraFilter=null,this._extraFilter=e.extraFilter,this._parent=e.parentfeatureset,this._maxProcessing=30,this.adaptedFields=e.adaptedFields}static findField(e,t){for(const r of e)if(r.name.toLowerCase()===t.toString().toLowerCase())return r;return null}_initialiseFeatureSet(){null!==this._parent?(this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.spatialReference=new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.default({wkid:4326}),this.objectIdField=\"\",this.globalIdField=\"\",this.geometryType=_support_shared_js__WEBPACK_IMPORTED_MODULE_3__.layerGeometryEsriConstants.point,this.typeIdField=\"\",this.types=null),this.fields=[];for(const e of this.adaptedFields)e.postInitialization(this,this._parent),this.fields.push(e.field)}_getSet(t){return null===this._wset?this._ensureLoaded().then((()=>this._extraFilter?this._getFilteredSet(\"\",null,null,null,t):this._parent._getSet(t))).then((e=>(this._checkCancelled(t),this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__.default(e._candidates.slice(0),e._known.slice(0),e._ordered,this._clonePageDefinition(e.pagesDefinition)),this._wset))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this._wset)}_isInFeatureSet(e){return this._parent._isInFeatureSet(e)}_getFeatures(t,r,i,a){const l=[];-1!==r&&void 0===this._featureCache[r]&&l.push(r);const h=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(t,h))return this._expandPagedSet(t,h,0,0,a).then((()=>this._getFeatures(t,r,i,a)));let u=0;for(let e=t._lastFetchedIndex;e<t._known.length&&(u++,u<=i&&(t._lastFetchedIndex+=1),!(void 0===this._featureCache[t._known[e]]&&(t._known[e]!==r&&l.push(t._known[e]),l.length>=h-1)));e++);if(0===l.length)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"success\");t=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__.default([],l,t._ordered,null);const d=Math.min(l.length,i);return this._parent._getFeatures(t,-1,d,a).then((()=>{this._checkCancelled(a);const e=[];for(let t=0;t<d;t++){const r=this._parent._featureFromCache(l[t]);void 0!==r&&e.push({geometry:r.geometry,attributes:r.attributes,id:l[t]})}for(const t of e){const e=[];for(const r of this.adaptedFields)e[r.field.name]=r.extractValue(t);this._featureCache[t.id]=new _Graphic_js__WEBPACK_IMPORTED_MODULE_2__.default({attributes:e,geometry:(0,_kernel_js__WEBPACK_IMPORTED_MODULE_4__.cloneGeometry)(t.geometry)})}return\"success\"}))}_fetchAndRefineFeatures(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Fetch and Refine should not be called in this featureset\"))}_getFilteredSet(e,t,r,s,i){let a=!1;const l=this.reformulateWithoutAdaptions(r);a=l.cannot,r=l.where;let n=!1;if(null!==s){n=!0;const e=[];for(const t of this.adaptedFields)if(!(t instanceof w)&&!0===s.scanForField(t.field.name)){if(!(t instanceof v)){s=null,n=!1;break}e.push({field:t.field.name,newfield:t.originalField.name})}s&&e.length>0&&(s=s.replaceFields(e))}return null!==r?null!==this._extraFilter&&(r=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(this._extraFilter,r)):r=this._extraFilter,this._ensureLoaded().then((()=>this._parent._getFilteredSet(e,t,r,s,i))).then((e=>{let t;return this._checkCancelled(i),t=!0===a?new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__.default(e._candidates.slice(0).concat(e._known.slice(0)),[],!0===n&&e._ordered,this._clonePageDefinition(e.pagesDefinition)):new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__.default(e._candidates.slice(0),e._known.slice(0),!0===n&&e._ordered,this._clonePageDefinition(e.pagesDefinition)),t}))}reformulateWithoutAdaptions(e){const t={cannot:!1,where:e};if(null!==e)for(const r of this.adaptedFields)if(!0===(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.scanForField)(e,r.field.name)){const s=r.rewriteSql(e,this);if(!0!==s.rewritten){t.cannot=!0,t.where=null;break}t.where=s.where}return t}_stat(t,r,s,i,a,l,n){let o=!1,h=this.reformulateWithoutAdaptions(r);return o=h.cannot,r=h.where,h=this.reformulateWithoutAdaptions(a),o=o||h.cannot,null!==(a=h.where)?null!==this._extraFilter&&(a=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(this._extraFilter,a)):a=this._extraFilter,!0===o?null===a&&\"\"===s&&null===i?this._manualStat(t,r,l,n):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)({calculated:!1}):this._parent._stat(t,r,s,i,a,l,n).then((e=>!1===e.calculated?null===a&&\"\"===s&&null===i?this._manualStat(t,r,l,n):{calculated:!1}:e))}_canDoAggregates(t,r,s,i,a){if(null===this._parent)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1);for(let r=0;r<t.length;r++)for(const s of this.adaptedFields)if(t[r].toLowerCase()===s.field.name.toLowerCase()&&!(s instanceof w))return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1);const l=[];for(let t=0;t<r.length;t++){const s=r[t];if(null!==s.workingexpr){const t=this.reformulateWithoutAdaptions(s.workingexpr);if(t.cannot)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1);const r=s.clone();r.workingexpr=t.where,l.push(r)}else l.push(s)}const n=this.reformulateWithoutAdaptions(a);return n.cannot?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1):(null!==(a=n.where)?null!==this._extraFilter&&(a=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(this._extraFilter,a)):a=this._extraFilter,this._parent._canDoAggregates(t,l,s,i,a))}_getAggregatePagesDataSourceDefinition(e,r,s,i,a,l,n){if(null===this._parent)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Should never be called\"));const o=[];for(let e=0;e<r.length;e++){const s=r[e];if(null!==s.workingexpr){const e=this.reformulateWithoutAdaptions(s.workingexpr);if(e.cannot)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Should never be called\"));const r=s.clone();r.workingexpr=e.where,o.push(r)}else o.push(s)}const h=this.reformulateWithoutAdaptions(a);return h.cannot?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Should never be called\")):(null!==(a=h.where)?null!==this._extraFilter&&(a=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(this._extraFilter,a)):a=this._extraFilter,this._parent._getAggregatePagesDataSourceDefinition(e,o,s,i,a,l,n))}}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass _ extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_6__.default{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.actions.AttributeFilter\",this._maxProcessing=1e3,this._parent=e.parentfeatureset,e.whereclause instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_4__.WhereClause?(this._whereclause=e.whereclause,this._whereClauseFunction=null):(this._whereClauseFunction=e.whereclause,this._whereclause=null)}_initialiseFeatureSet(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.fields=[],this.typeIdField=\"\",this.objectIdField=\"\",this.globalIdField=\"\",this.spatialReference=new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.default({wkid:4326}),this.geometryType=_support_shared_js__WEBPACK_IMPORTED_MODULE_2__.layerGeometryEsriConstants.point)}_getSet(t){return null===this._wset?this._ensureLoaded().then((()=>this._parent._getFilteredSet(\"\",null,this._whereclause,null,t))).then((e=>(this._checkCancelled(t),null!==this._whereClauseFunction?this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__.default(e._candidates.slice(0).concat(e._known.slice(0)),[],e._ordered,this._clonePageDefinition(e.pagesDefinition)):this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__.default(e._candidates.slice(0),e._known.slice(0),e._ordered,this._clonePageDefinition(e.pagesDefinition)),this._wset))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this._wset)}_isInFeatureSet(e){let t=this._parent._isInFeatureSet(e);return t===_support_shared_js__WEBPACK_IMPORTED_MODULE_2__.IdState.NotInFeatureSet?t:(t=this._idstates[e],void 0===t?_support_shared_js__WEBPACK_IMPORTED_MODULE_2__.IdState.Unknown:t)}_getFeature(e,t,s){return this._parent._getFeature(e,t,s)}_getFeatures(e,t,s,i){return this._parent._getFeatures(e,t,s,i)}_featureFromCache(e){return this._parent._featureFromCache(e)}executeWhereClause(e){return this._whereclause.testFeature(e)}executeWhereClauseDeferred(i){if(null!==this._whereClauseFunction)try{const s=this._whereClauseFunction(i);return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.isPromiseLike)(s)?s:(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(s)}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this.executeWhereClause(i))}_fetchAndRefineFeatures(e,t,s){const r=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__.default([],e,!1,null),n=Math.min(t,e.length);return this._parent._getFeatures(r,-1,n,s).then((()=>{if(this._checkCancelled(s),null==this._whereClauseFunction){for(let t=0;t<n;t++){const s=this._parent._featureFromCache(e[t]);!0===this.executeWhereClause(s)?this._idstates[e[t]]=_support_shared_js__WEBPACK_IMPORTED_MODULE_2__.IdState.InFeatureSet:this._idstates[e[t]]=_support_shared_js__WEBPACK_IMPORTED_MODULE_2__.IdState.NotInFeatureSet}return\"success\"}const r=[];for(let t=0;t<n;t++){const s=this._parent._featureFromCache(e[t]);r.push(this.executeWhereClauseDeferred(s))}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.all)(r).then((s=>{for(let i=0;i<t;i++)!0===s[i]?this._idstates[e[i]]=_support_shared_js__WEBPACK_IMPORTED_MODULE_2__.IdState.InFeatureSet:this._idstates[e[i]]=_support_shared_js__WEBPACK_IMPORTED_MODULE_2__.IdState.NotInFeatureSet;return\"success\"}))}))}_getFilteredSet(e,t,s,i,r){return null!==this._whereClauseFunction||(null!==s?null!==this._whereclause&&(s=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__.combine)(this._whereclause,s)):s=this._whereclause),this._ensureLoaded().then((()=>this._parent._getFilteredSet(e,t,s,i,r))).then((e=>{let t;return this._checkCancelled(r),t=null!==this._whereClauseFunction?new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__.default(e._candidates.slice(0).concat(e._known.slice(0)),[],e._ordered,this._clonePageDefinition(e.pagesDefinition)):new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__.default(e._candidates.slice(0),e._known.slice(0),e._ordered,this._clonePageDefinition(e.pagesDefinition)),t}))}_stat(t,s,i,r,n,a,l){if(null!==this._whereClauseFunction)return null===n&&\"\"===i&&null===r?this._manualStat(t,s,a,l):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)({calculated:!1});let h=this._whereclause;return null!==n&&null!==this._whereclause&&(h=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__.combine)(this._whereclause,n)),this._parent._stat(t,s,i,r,h,a,l).then((e=>!1===e.calculated?null===n&&\"\"===i&&null===r?this._manualStat(t,s,a,l):{calculated:!1}:e))}_canDoAggregates(t,s,i,r,n){return null!==this._whereClauseFunction?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1):(null!==n?null!==this._whereclause&&(n=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__.combine)(this._whereclause,n)):n=this._whereclause,null===this._parent?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1):this._parent._canDoAggregates(t,s,i,r,n))}_getAggregatePagesDataSourceDefinition(e,t,i,r,n,a,l){return null===this._parent?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Should never be called\")):(null!==n?null!==this._whereclause&&(n=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__.combine)(this._whereclause,n)):n=this._whereclause,this._parent._getAggregatePagesDataSourceDefinition(e,t,i,r,n,a,l))}static registerAction(){_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_6__.default._featuresetFunctions.filter=function(e){if(\"function\"==typeof e)return new _({parentfeatureset:this,whereclause:e});let t=null;return e instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_4__.WhereClause&&(t=e),new _({parentfeatureset:this,whereclause:t})}}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/GroupBy.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/GroupBy.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../chunks/languageUtils.js */ \"./node_modules/@arcgis/core/chunks/languageUtils.js\");\n/* harmony import */ var _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../layers/support/Field.js */ \"./node_modules/@arcgis/core/layers/support/Field.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _support_stats_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../support/stats.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/stats.js\");\n/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../layers/support/FieldsIndex.js */ \"./node_modules/@arcgis/core/layers/support/FieldsIndex.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _AttributeFilter_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./AttributeFilter.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js\");\n/* harmony import */ var _Adapted_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./Adapted.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js\");\n/* harmony import */ var _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../support/OrderbyClause.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js\");\n/* harmony import */ var _OrderBy_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./OrderBy.js */ \"./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js\");\n/* harmony import */ var _support_StatsField_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../support/StatsField.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/StatsField.js\");\n/* harmony import */ var _core_MD5_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../core/MD5.js */ \"./node_modules/@arcgis/core/core/MD5.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction C(e){if(!e)return\"COUNT\";switch(e.toLowerCase()){case\"max\":return\"MAX\";case\"var\":case\"variance\":return\"VAR\";case\"avg\":case\"average\":case\"mean\":return\"AVG\";case\"min\":return\"MIN\";case\"sum\":return\"SUM\";case\"stdev\":case\"stddev\":return\"STDDEV\";case\"count\":return\"COUNT\"}return\"COUNT\"}class G extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_11__.default{constructor(e){super(e),this._decodedStatsfield=[],this._decodedGroupbyfield=[],this._candosimplegroupby=!0,this.phsyicalgroupbyfields=[],this.objectIdField=\"ROW__ID\",this._internalObjectIdField=\"ROW__ID\",this._adaptedFields=[],this.declaredClass=\"esri.arcade.featureset.actions.Aggregate\",this._uniqueIds=1,this._maxQuery=10,this._maxProcessing=10,this._parent=e.parentfeatureset,this._config=e}isTable(){return!0}_getSet(t){return null===this._wset?this._getFilteredSet(\"\",null,null,null,t).then((e=>(this._wset=e,this._wset))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this._wset)}_isInFeatureSet(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_5__.IdState.InFeatureSet}nextUniqueName(e){for(;1===e[\"T\"+this._uniqueIds.toString()];)this._uniqueIds++;const t=\"T\"+this._uniqueIds.toString();return e[t]=1,t}convertToEsriFieldType(e){return e}_initialiseFeatureSet(){const e={};let t=!1,i=1;const n=this._parent?this._parent.getFieldsIndex():new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_10__.default([]);for(this.objectIdField=\"ROW__ID\",this.globalIdField=\"\";!1===t;){let e=!1;for(let t=0;t<this._config.groupbyfields.length;t++)if(this._config.groupbyfields[t].name.toLowerCase()===this.objectIdField.toLowerCase()){e=!0;break}if(!1===e)for(let t=0;t<this._config.statsfields.length;t++)if(this._config.statsfields[t].name.toLowerCase()===this.objectIdField.toLowerCase()){e=!0;break}!1===e?t=!0:(this.objectIdField=\"ROW__ID\"+i.toString(),i++)}for(const e of this._config.statsfields){const t=new _support_StatsField_js__WEBPACK_IMPORTED_MODULE_16__.default;t.field=e.name,t.tofieldname=e.name,t.workingexpr=e.expression instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause?e.expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause.create(e.expression,n),t.typeofstat=C(e.statistic),this._decodedStatsfield.push(t)}this._decodedGroupbyfield=[];for(const e of this._config.groupbyfields){const t={name:e.name,singlefield:null,tofieldname:e.name,expression:e.expression instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause?e.expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause.create(e.expression,n)};this._decodedGroupbyfield.push(t)}if(null!==this._parent){this.geometryType=this._parent.geometryType,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=\"\";for(const t of this._parent.fields)e[t.name.toUpperCase()]=1;this.types=null}else this.geometryType=_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.layerGeometryEsriConstants.point,this.typeIdField=\"\",this.types=null,this.spatialReference=new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.default({wkid:4326});this.fields=[];const r=new _support_StatsField_js__WEBPACK_IMPORTED_MODULE_16__.default;r.field=this.nextUniqueName(e),r.tofieldname=this.objectIdField,r.workingexpr=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause.create(this._parent.objectIdField,this._parent.getFieldsIndex()),r.typeofstat=\"MIN\",this._decodedStatsfield.push(r);for(const t of this._decodedGroupbyfield){const i=new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_4__.default;if(t.name=this.nextUniqueName(e),i.name=t.tofieldname,i.alias=i.name,(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.isSingleField)(t.expression)){const e=this._parent.getField((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.toWhereClause)(t.expression,_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.Standardised));if(!e)throw new Error(\"Field is not present for Aggregation\");t.name=e.name,t.singlefield=e.name,this.phsyicalgroupbyfields.push(e.name),i.type=e.type}else{i.type=this.convertToEsriFieldType((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.predictType)(t.expression,this._parent.fields));const e=new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_4__.default;e.name=t.name,e.alias=e.name,this.phsyicalgroupbyfields.push(t.name),this._adaptedFields.push(new _Adapted_js__WEBPACK_IMPORTED_MODULE_13__.SqlExpressionAdapted(e,t.expression)),this._candosimplegroupby=!1}this.fields.push(i)}if(this._adaptedFields.length>0)for(const e of this._parent.fields)this._adaptedFields.push(new _Adapted_js__WEBPACK_IMPORTED_MODULE_13__.OriginalField(e));for(let t=0;t<this._decodedStatsfield.length;t++){const i=new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_4__.default;let s=null;const n=this._decodedStatsfield[t];n.field=this.nextUniqueName(e),n.tofieldname===this.objectIdField&&(this._internalObjectIdField=n.field),i.name=n.tofieldname,i.alias=i.name;const r=null!==n.workingexpr&&(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.isSingleField)(n.workingexpr)?(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.toWhereClause)(n.workingexpr,_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.Standardised):\"\";switch(this._decodedStatsfield[t].typeofstat){case\"SUM\":if(\"\"!==r){if(s=this._parent.getField(r),!s)throw new Error(\"Field is not present for Aggregation\");i.type=s.type}else i.type=\"double\";break;case\"MIN\":case\"MAX\":if(\"\"!==r){if(s=this._parent.getField(r),!s)throw new Error(\"Field is not present for Aggregation\");i.type=s.type}else i.type=\"double\";break;case\"COUNT\":i.type=\"integer\";break;case\"STDDEV\":case\"VAR\":case\"AVG\":if(\"\"!==r&&(s=this._parent.getField(r),!s))throw new Error(\"Field is not present for Aggregation\");i.type=\"double\"}this.fields.push(i)}}_canDoAggregates(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1)}_getFeatures(t,i,s,n){-1!==i&&this._featureCache[i];const r=this._maxQuery;return!0===this._checkIfNeedToExpandKnownPage(t,r)?this._expandPagedSet(t,r,0,0,n).then((()=>this._getFeatures(t,i,s,n))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"success\")}_getFilteredSet(t,i,s,n,r){if(\"\"!==t)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__.default([],[],!0,null));let a=null;const l={ordered:!1,nowhereclause:!1};return this._ensureLoaded().then((()=>{if(null!==s)for(let e=0;e<this._decodedStatsfield.length;e++)if(!0===(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.scanForField)(s,this._decodedStatsfield[e].tofieldname)){l.nowhereclause=!0,s=null;break}if(null!==n){l.ordered=!0;for(let e=0;e<this._decodedStatsfield.length;e++)if(!0===n.scanForField(this._decodedStatsfield[e].tofieldname)){n=null,l.ordered=!1;break}if(null!==n)for(const e of this._decodedGroupbyfield)if(null===e.singlefield&&!0===n.scanForField(e.tofieldname)){n=null,l.ordered=!1;break}}return!1===this._candosimplegroupby?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1):this._parent._canDoAggregates(this.phsyicalgroupbyfields,this._decodedStatsfield,\"\",null,null)})).then((e=>{if(e){let e=null;s&&(e=this._reformulateWhereClauseWithoutGroupByFields(s));let t=null;return n&&(t=this._reformulateOrderClauseWithoutGroupByFields(n)),this._parent._getAggregatePagesDataSourceDefinition(this.phsyicalgroupbyfields,this._decodedStatsfield,\"\",null,e,t,this._internalObjectIdField).then((e=>(this._checkCancelled(r),a=!0===l.nowhereclause?new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__.default(e._candidates.slice(0).concat(e._known.slice(0)),[],!0===l.ordered&&e._ordered,this._clonePageDefinition(e.pagesDefinition)):new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__.default(e._candidates.slice(0),e._known.slice(0),!0===l.ordered&&e._ordered,this._clonePageDefinition(e.pagesDefinition)),a)))}let t=this._parent;if(this._adaptedFields.length>0&&(t=new _Adapted_js__WEBPACK_IMPORTED_MODULE_13__.AdaptedFeatureSet({parentfeatureset:this._parent,adaptedFields:this._adaptedFields,extraFilter:null})),!0===l.nowhereclause)a=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__.default([\"GETPAGES\"],[],!1,{aggregatefeaturesetpagedefinition:!0,resultOffset:0,resultRecordCount:this._maxQuery,internal:{fullyResolved:!1,workingItem:null,type:\"manual\",iterator:null,set:[],subfeatureset:new _OrderBy_js__WEBPACK_IMPORTED_MODULE_15__.default({parentfeatureset:t,orderbyclause:new _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_14__.default(this.phsyicalgroupbyfields.join(\",\")+\",\"+this._parent.objectIdField+\" ASC\")})}});else{let e=t;if(null!==s){let t=null;s&&(t=this._reformulateWhereClauseWithoutGroupByFields(s)),e=new _AttributeFilter_js__WEBPACK_IMPORTED_MODULE_12__.default({parentfeatureset:e,whereclause:t})}a=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_6__.default([\"GETPAGES\"],[],!1,{aggregatefeaturesetpagedefinition:!0,resultOffset:0,resultRecordCount:this._maxQuery,internal:{fullyResolved:!1,workingItem:null,type:\"manual\",iterator:null,set:[],subfeatureset:new _OrderBy_js__WEBPACK_IMPORTED_MODULE_15__.default({parentfeatureset:e,orderbyclause:new _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_14__.default(this.phsyicalgroupbyfields.join(\",\")+\",\"+this._parent.objectIdField+\" ASC\")})}})}return a}))}_reformulateWhereClauseWithoutStatsFields(e){for(const t of this._decodedStatsfield)e=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.reformulateWithoutField)(e,t.tofieldname,(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.toWhereClause)(t.workingexpr,_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.Standardised),this._parent.getFieldsIndex());return e}_reformulateWhereClauseWithoutGroupByFields(e){for(const t of this._decodedGroupbyfield)t.tofieldname!==t.name&&(e=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.reformulateWithoutField)(e,t.tofieldname,(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_8__.toWhereClause)(t.expression,_support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.Standardised),this._parent.getFieldsIndex()));return e}_reformulateOrderClauseWithoutGroupByFields(e){const t=[];for(const e of this._decodedGroupbyfield)e.tofieldname!==e.name&&t.push({field:e.tofieldname,newfield:e.name});return t.length>0?e.replaceFields(t):e}_clonePageDefinition(e){return null===e?null:!0===e.aggregatefeaturesetpagedefinition?{aggregatefeaturesetpagedefinition:!0,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,internal:e.internal}:this._parent._clonePageDefinition(e)}_refineSetBlock(i,s,n){try{if(!0===this._checkIfNeedToExpandCandidatePage(i,this._maxQuery))return this._expandPagedSet(i,this._maxQuery,0,0,n).then((()=>this._refineSetBlock(i,s,n)));this._checkCancelled(n);const t=i._candidates.length;this._refineKnowns(i,s);i._candidates.length;return i._candidates.length,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(i)}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}_expandPagedSet(e,t,i,s,n){return this._expandPagedSetFeatureSet(e,t,i,s,n)}_getPhysicalPage(e,t,s){return!0===e.pagesDefinition.aggregatefeaturesetpagedefinition?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.create)(((t,i)=>{this._sequentialGetPhysicalItem(e,e.pagesDefinition.resultRecordCount,s,[]).then((e=>{t(e)}),i)})):this._getAgregagtePhysicalPage(e,t,s).then((e=>{for(const t of e){const e={geometry:t.geometry,attributes:{}};for(const i of this._decodedGroupbyfield)e.attributes[i.tofieldname]=t.attributes[i.name];for(const i of this._decodedStatsfield)e.attributes[i.tofieldname]=t.attributes[i.field];this._featureCache[e.attributes[this.objectIdField]]=new _Graphic_js__WEBPACK_IMPORTED_MODULE_2__.default(e)}return e.length}))}_sequentialGetPhysicalItem(e,t,s,n){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.create)(((i,r)=>{null===e.pagesDefinition.internal.iterator&&(e.pagesDefinition.internal.iterator=e.pagesDefinition.internal.subfeatureset.iterator(s)),!0===e.pagesDefinition.internal.fullyResolved||0===t?i(n.length):this._nextAggregateItem(e,t,s,n,(r=>{null===r?i(n.length):(t-=1,i(this._sequentialGetPhysicalItem(e,t,s,n)))}),r)}))}_nextAggregateItem(e,t,i,s,n,a){try{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_3__.Q)(e.pagesDefinition.internal.iterator.next()).then((r=>{if(null===r)if(null!==e.pagesDefinition.internal.workingItem){const t=this._calculateAndAppendAggregateItem(e.pagesDefinition.internal.workingItem);s.push(t),e.pagesDefinition.internal.workingItem=null,e.pagesDefinition.internal.set.push(t.attributes[this.objectIdField]),e.pagesDefinition.internal.fullyResolved=!0,n(null)}else e.pagesDefinition.internal.fullyResolved=!0,n(null);else{const l=this._generateAggregateHash(r);if(null===e.pagesDefinition.internal.workingItem)e.pagesDefinition.internal.workingItem={features:[r],id:l};else{if(l!==e.pagesDefinition.internal.workingItem.id){const i=this._calculateAndAppendAggregateItem(e.pagesDefinition.internal.workingItem);return s.push(i),e.pagesDefinition.internal.workingItem=null,e.pagesDefinition.internal.set.push(i.attributes[this.objectIdField]),t-=1,e.pagesDefinition.internal.workingItem={features:[r],id:l},void n(i)}e.pagesDefinition.internal.workingItem.features.push(r)}this._nextAggregateItem(e,t,i,s,n,a)}}),a)}catch(e){a(e)}}_calculateFieldStat(e,t,i){const s=[];for(let i=0;i<e.features.length;i++)if(null!==t.workingexpr){const n=t.workingexpr.calculateValue(e.features[i]);null!==n&&s.push(n)}else s.push(null);switch(t.typeofstat){case\"MIN\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_9__.calculateStat)(\"min\",s,-1);break;case\"MAX\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_9__.calculateStat)(\"max\",s,-1);break;case\"SUM\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_9__.calculateStat)(\"sum\",s,-1);break;case\"COUNT\":i.attributes[t.tofieldname]=s.length;break;case\"VAR\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_9__.calculateStat)(\"var\",s,-1);break;case\"STDDEV\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_9__.calculateStat)(\"stddev\",s,-1);break;case\"AVG\":i.attributes[t.tofieldname]=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_9__.calculateStat)(\"avg\",s,-1)}return!0}_calculateAndAppendAggregateItem(e){const t={attributes:{},geometry:null};for(const i of this._decodedGroupbyfield){const s=i.singlefield?e.features[0].attributes[i.singlefield]:i.expression.calculateValue(e.features[0]);t.attributes[i.tofieldname]=s}for(const i of this._decodedStatsfield)this._calculateFieldStat(e,i,t);const i=[];for(let s=0;s<this._decodedStatsfield.length;s++)i.push(this._calculateFieldStat(e,this._decodedStatsfield[s],t));return this._featureCache[t.attributes[this.objectIdField]]=new _Graphic_js__WEBPACK_IMPORTED_MODULE_2__.default({attributes:t.attributes,geometry:t.geometry}),t}_generateAggregateHash(e){let t=\"\";for(const i of this._decodedGroupbyfield){const s=i.singlefield?e.attributes[i.singlefield]:i.expression.calculateValue(e);t+=null==s?\":\":\":\"+s.toString()}return (0,_core_MD5_js__WEBPACK_IMPORTED_MODULE_17__.createMD5Hash)(t,_core_MD5_js__WEBPACK_IMPORTED_MODULE_17__.outputTypes.String)}_stat(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)({calculated:!1})}getFeatureByObjectId(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(null)}static registerAction(){_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_11__.default._featuresetFunctions.groupby=function(e,t){return new G({parentfeatureset:this,groupbyfields:e,statsfields:t})}}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (G);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/actions/GroupBy.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../chunks/languageUtils.js */ \"./node_modules/@arcgis/core/chunks/languageUtils.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/OrderbyClause.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass a extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__.default{constructor(e){super(e),this._orderbyclause=null,this.declaredClass=\"esri.arcade.featureset.actions.OrderBy\",this._maxProcessing=100,this._orderbyclause=e.orderbyclause,this._parent=e.parentfeatureset}_getSet(t){return null===this._wset?this._ensureLoaded().then((()=>this._getFilteredSet(\"\",null,null,this._orderbyclause,t))).then((e=>(this._checkCancelled(t),this._wset=e,this._wset))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this._wset)}manualOrderSet(e,t){return this.getIdColumnDictionary(e,[],-1,t).then((e=>{this._orderbyclause.order(e);const t=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__.default([],[],!0,null);for(let r=0;r<e.length;r++)t._known.push(e[r].id);return t}))}getIdColumnDictionary(t,n,s,i){if(s<t._known.length-1){const e=this._maxQueryRate();if(\"GETPAGES\"===t._known[s+1])return (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__.Q)(this._parent._expandPagedSet(t,e,0,0,i)).then((()=>this.getIdColumnDictionary(t,n,s,i)));let a=s+1;const o=[];for(;a<t._known.length&&\"GETPAGES\"!==t._known[a];)o.push(t._known[a]),a++;return s+=o.length,(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__.Q)(this._parent._getFeatureBatch(o,i)).then((e=>{this._checkCancelled(i);for(const t of e)n.push({id:t.attributes[this.objectIdField],feature:t});return this.getIdColumnDictionary(t,n,s,i)}))}return t._candidates.length>0?(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__.Q)(this._refineSetBlock(t,this._maxProcessingRate(),i)).then((()=>(this._checkCancelled(i),this.getIdColumnDictionary(t,n,s,i)))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(n)}_isInFeatureSet(e){return this._parent._isInFeatureSet(e)}_getFeatures(e,t,r,n){return this._parent._getFeatures(e,t,r,n)}_featureFromCache(e){if(void 0===this._featureCache[e]){const t=this._parent._featureFromCache(e);if(void 0===t)return;return null===t?null:(this._featureCache[e]=t,t)}return this._featureCache[e]}_fetchAndRefineFeatures(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Fetch and Refine should not be called in this featureset\"))}_getFilteredSet(e,t,r,s,i){return this._ensureLoaded().then((()=>this._parent._getFilteredSet(e,t,r,null===s?this._orderbyclause:s,i))).then((e=>{let s;this._checkCancelled(i),s=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__.default(e._candidates.slice(0),e._known.slice(0),e._ordered,this._clonePageDefinition(e.pagesDefinition));let a=!0;return e._candidates.length>0&&(a=!1),!1===s._ordered?this.manualOrderSet(s,i).then((e=>(!1===a&&(null===t&&null===r||(e=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__.default(e._candidates.slice(0).concat(e._known.slice(0)),[],e._ordered,this._clonePageDefinition(e.pagesDefinition)))),e))):s}))}static registerAction(){_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__.default._featuresetFunctions.orderBy=function(e){return\"\"===e?this:new a({parentfeatureset:this,orderbyclause:new _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_4__.default(e)})}}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (a);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/actions/Top.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/Top.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass a extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__.default{constructor(t){super(t),this._topnum=0,this.declaredClass=\"esri.arcade.featureset.actions.Top\",this._countedin=0,this._maxProcessing=100,this._topnum=t.topnum,this._parent=t.parentfeatureset}_getSet(e){return null===this._wset?this._ensureLoaded().then((()=>this._parent._getSet(e))).then((t=>(this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__.default(t._candidates.slice(0),t._known.slice(0),!1,this._clonePageDefinition(t.pagesDefinition)),this._setKnownLength(this._wset)>this._topnum&&(this._wset._known=this._wset._known.slice(0,this._topnum)),this._setKnownLength(this._wset)>=this._topnum&&(this._wset._candidates=[]),this._wset))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this._wset)}_setKnownLength(t){return t._known.length>0&&\"GETPAGES\"===t._known[t._known.length-1]?t._known.length-1:t._known.length}_isInFeatureSet(t){const e=this._parent._isInFeatureSet(t);if(e===_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.NotInFeatureSet)return e;const s=this._idstates[t];return s===_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.InFeatureSet||s===_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.NotInFeatureSet?s:e===_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.InFeatureSet&&void 0===s?this._countedin<this._topnum?(this._idstates[t]=_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.InFeatureSet,this._countedin++,_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.InFeatureSet):(this._idstates[t]=_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.NotInFeatureSet,_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.NotInFeatureSet):_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.Unknown}_expandPagedSet(n,s,i,a,r){if(null===this._parent)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Parent Paging not implemented\"));if(s>this._topnum&&(s=this._topnum),this._countedin>=this._topnum&&n.pagesDefinition.internal.set.length<=n.pagesDefinition.resultOffset){let e=n._known.length;return e>0&&\"GETPAGES\"===n._known[e-1]&&(n._known.length=e-1),e=n._candidates.length,e>0&&\"GETPAGES\"===n._candidates[e-1]&&(n._candidates.length=e-1),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"success\")}return this._parent._expandPagedSet(n,s,i,a,r).then((t=>(this._setKnownLength(n)>this._topnum&&(n._known.length=this._topnum),this._setKnownLength(n)>=this._topnum&&(n._candidates.length=0),t)))}_getFeatures(e,n,i,a){const r=[],o=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(e,o))return this._expandPagedSet(e,o,0,0,a).then((()=>this._getFeatures(e,n,i,a)));-1!==n&&void 0===this._featureCache[n]&&r.push(n);let _=0;for(let t=e._lastFetchedIndex;t<e._known.length&&(_++,_<=i&&(e._lastFetchedIndex+=1),!(void 0===this._featureCache[e._known[t]]&&(e._known[t]!==n&&r.push(e._known[t]),r.length>o-1)));t++);if(0===r.length)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"success\");const h=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__.default([],r,!1,null),u=Math.min(r.length,i);return this._parent._getFeatures(h,-1,u,a).then((()=>{for(let t=0;t<u;t++){const e=this._parent._featureFromCache(r[t]);void 0!==e&&(this._featureCache[r[t]]=e)}return\"success\"}))}_getFilteredSet(t,e,n,i,a){return this._ensureLoaded().then((()=>this._getSet(a))).then((t=>new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_2__.default(t._candidates.slice(0).concat(t._known.slice(0)),[],!1,this._clonePageDefinition(t.pagesDefinition))))}_refineKnowns(t,e){let s=0,i=null;const a=[];for(let r=0;r<t._candidates.length;r++){const o=this._isInFeatureSet(t._candidates[r]);if(o===_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.InFeatureSet){if(t._known.push(t._candidates[r]),s+=1,null===i?i={start:r,end:r}:i.end===r-1?i.end=r:(a.push(i),i={start:r,end:r}),t._known.length>=this._topnum)break}else if(o===_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.NotInFeatureSet)null===i?i={start:r,end:r}:i.end===r-1?i.end=r:(a.push(i),i={start:r,end:r}),s+=1;else if(o===_support_shared_js__WEBPACK_IMPORTED_MODULE_1__.IdState.Unknown)break;if(s>=e)break}null!==i&&a.push(i);for(let e=a.length-1;e>=0;e--)t._candidates.splice(a[e].start,a[e].end-a[e].start+1);this._setKnownLength(t)>this._topnum&&(t._known=t._known.slice(0,this._topnum)),this._setKnownLength(t)>=this._topnum&&(t._candidates=[])}_stat(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)({calculated:!1})}_canDoAggregates(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1)}static registerAction(){_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__.default._featuresetFunctions.top=function(t){return new a({parentfeatureset:this,topnum:t})}}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (a);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/actions/Top.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ \"./node_modules/@arcgis/core/geometry/support/jsonUtils.js\");\n/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../kernel.js */ \"./node_modules/@arcgis/core/kernel.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _Attachment_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../Attachment.js */ \"./node_modules/@arcgis/core/arcade/Attachment.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../layers/graphics/featureConversionUtils.js */ \"./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _support_stats_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../support/stats.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/stats.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _core_MD5_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/MD5.js */ \"./node_modules/@arcgis/core/core/MD5.js\");\n/* harmony import */ var _tasks_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../tasks/support/FeatureSet.js */ \"./node_modules/@arcgis/core/tasks/support/FeatureSet.js\");\n/* harmony import */ var _tasks_support_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../tasks/support/StatisticDefinition.js */ \"./node_modules/@arcgis/core/tasks/support/StatisticDefinition.js\");\n/* harmony import */ var _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../tasks/support/Query.js */ \"./node_modules/@arcgis/core/tasks/support/Query.js\");\n/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../layers/FeatureLayer.js */ \"./node_modules/@arcgis/core/layers/FeatureLayer.js\");\n/* harmony import */ var _tasks_operations_pbfOptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../tasks/operations/pbfOptimizedFeatureSet.js */ \"./node_modules/@arcgis/core/tasks/operations/pbfOptimizedFeatureSet.js\");\n/* harmony import */ var _tasks_operations_query_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../tasks/operations/query.js */ \"./node_modules/@arcgis/core/tasks/operations/query.js\");\n/* harmony import */ var _tasks_QueryTask_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../tasks/QueryTask.js */ \"./node_modules/@arcgis/core/tasks/QueryTask.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass q extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_11__.default{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.sources.FeatureLayerDynamic\",this._removeGeometry=!1,this._overrideFields=null,this.formulaCredential=null,this._pageJustIds=!1,this._requestStandardised=!1,e.spatialReference&&(this.spatialReference=e.spatialReference),this._transparent=!0,this._maxProcessing=1e3,this._layer=e.layer,this._wset=null,void 0!==e.outFields&&(this._overrideFields=e.outFields),void 0!==e.includeGeometry&&(this._removeGeometry=!1===e.includeGeometry)}_maxQueryRate(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_6__.defaultMaxRecords}end(){return this._layer}optimisePagingFeatureQueries(e){this._pageJustIds=e}convertQueryToLruCacheKey(e){const t=(0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.stableStringify)(e.toJSON());return (0,_core_MD5_js__WEBPACK_IMPORTED_MODULE_12__.createMD5Hash)(t,_core_MD5_js__WEBPACK_IMPORTED_MODULE_12__.outputTypes.String)}load(){return null===this._loadPromise&&(this._loadPromise=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.create)(((e,t)=>{try{if(!0===this._layer.loaded)return this._initialiseFeatureSet(),void e(this);this._layer.when().then((()=>{try{this._initialiseFeatureSet(),e(this)}catch(e){t(e)}}),t),this._layer.load()}catch(e){t(e)}}))),this._loadPromise}_initialiseFeatureSet(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._layer.geometryType,this.fields=this._layer.fields.slice(0),this._layer.outFields)if(1===this._layer.outFields.length&&\"*\"===this._layer.outFields[0]);else{const e=[];for(const t of this.fields)if(\"oid\"===t.type)e.push(t);else for(const i of this._layer.outFields)if(i.toLowerCase()===t.name.toLowerCase()){e.push(t);break}this.fields=e}else;if(null!==this._overrideFields)if(1===this._overrideFields.length&&\"*\"===this._overrideFields[0])this._overrideFields=null;else{const e=[],t=[];for(const i of this.fields)if(\"oid\"===i.type)e.push(i),t.push(i.name);else for(const r of this._overrideFields)if(r.toLowerCase()===i.name.toLowerCase()){e.push(i),t.push(i.name);break}this.fields=e,this._overrideFields=t}if(this._layer.source&&this._layer.source.sourceJSON){const e=this._layer.source.sourceJSON.currentVersion;!0===this._layer.source.sourceJSON.useStandardizedQueries?(this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.StandardisedNoInterval,null!=e&&e>=10.61&&(this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.Standardised)):null!=e&&(e>=10.5&&(this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.StandardisedNoInterval,this._requestStandardised=!0),e>=10.61&&(this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.Standardised))}this.objectIdField=this._layer.objectIdField;for(const e of this.fields)\"global-id\"===e.type&&(this.globalIdField=e.name);this.hasM=this._layer.supportsM,this.hasZ=this._layer.supportsZ,this.typeIdField=this._layer.typeIdField,this.types=this._layer.types}_isInFeatureSet(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_6__.IdState.InFeatureSet}_refineSetBlock(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(e)}_candidateIdTransform(e){return e}_getSet(e){return null===this._wset?this._ensureLoaded().then((()=>this._getFilteredSet(\"\",null,null,null,e))).then((e=>(this._wset=e,e))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this._wset)}_runDatabaseProbe(t){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.create)(((e,i)=>{try{this._ensureLoaded().then((()=>{try{const r=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__.default;r.where=t.replace(\"OBJECTID\",this._layer.objectIdField),this._layer.queryObjectIds(r).then((()=>{e(!0)}),(()=>{try{e(!1)}catch(e){i(e)}}))}catch(e){i(e)}}))}catch(e){i(e)}}))}_canUsePagination(){return!(!this._layer.capabilities||!this._layer.capabilities.query||!0!==this._layer.capabilities.query.supportsPagination)}_cacheableFeatureSetSourceKey(){return this._layer.url}pbfSupportedForQuery(e){return!e.outStatistics&&this._layer&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsFormatPBF&&!0===this._layer.capabilities.query.supportsQuantizationEditMode}queryPBF(e){return e.quantizationParameters={mode:\"edit\"},(0,_tasks_operations_query_js__WEBPACK_IMPORTED_MODULE_18__.executeQueryPBF)(this._layer.parsedUrl,e,new _tasks_operations_pbfOptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_17__.OptimizedFeatureSetParserContext({})).then((e=>_tasks_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_13__.default.fromJSON((0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_7__.convertToFeatureSet)(e.data)).unquantize()))}get gdbVersion(){return this._layer&&this._layer.capabilities&&this._layer.capabilities.data&&this._layer.capabilities.data.isVersioned?this._layer.gdbVersion?this._layer.gdbVersion:\"SDE.DEFAULT\":\"\"}nativeCapabilities(){return{title:this._layer.title,source:this,canQueryRelated:!0,capabilities:this._layer.capabilities,databaseType:this._databaseType,requestStandardised:this._requestStandardised}}executeQuery(e,t){const i=new _tasks_QueryTask_js__WEBPACK_IMPORTED_MODULE_19__.default({url:this._layer.parsedUrl.path}),r=\"execute\"===t&&this.pbfSupportedForQuery(e);let s=null;if(this.recentlyUsedQueries){const a=this.convertQueryToLruCacheKey(e);s=this.recentlyUsedQueries.getFromCache(a),null===s&&(s=!0!==r?i[t](e):this.queryPBF(e),this.recentlyUsedQueries.addToCache(a,s),s=s.catch((e=>{throw this.recentlyUsedQueries.removeFromCache(a),e})))}return null===s&&(s=!0!==r?i[t](e):this.queryPBF(e)),s}_getFilteredSet(e,t,i,r,s){return this.databaseType().then((a=>{if(this.isTable()&&t&&null!==e&&\"\"!==e){return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__.default([],[],!0,null)}if(this._canUsePagination())return this._getFilteredSetUsingPaging(e,t,i,r,s);let n=\"\",l=!1;null!==r&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(n=r.constructClause(),l=!0);const o=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__.default;return o.where=null===i?null===t?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(i,a),this._requestStandardised&&(o.sqlFormat=\"standard\"),o.spatialRelationship=this._makeRelationshipEnum(e),o.outSpatialReference=this.spatialReference,o.orderByFields=\"\"!==n?n.split(\",\"):null,o.geometry=null===t?null:t,o.relationParameter=this._makeRelationshipParam(e),this.executeQuery(o,\"executeForIds\").then((e=>{null===e&&(e=[]),this._checkCancelled(s);return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__.default([],e,l,null)}))}))}_expandPagedSet(e,t,i,r,s){return this._expandPagedSetFeatureSet(e,t,i,r,s)}_getFilteredSetUsingPaging(e,t,r,s,a){try{let i=\"\",n=!1;return null!==s&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(i=s.constructClause(),n=!0),this.databaseType().then((s=>{let l=null===r?null===t?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(r,s);this._layer.definitionExpression&&(l=\"\"!==l?\"((\"+this._layer.definitionExpression+\") AND (\"+l+\"))\":this._layer.definitionExpression);let o=this._maxQueryRate();const u=this._layer.capabilities.query.maxRecordCount;void 0!==u&&u<o&&(o=u);let d=null;if(!0===this._pageJustIds)d=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__.default([],[\"GETPAGES\"],n,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:this._layer.objectIdField,resultRecordCount:o,resultOffset:0,geometry:null===t?null:t,where:l,orderByFields:i,returnGeometry:!1,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}});else{let r=!0;!0===this._removeGeometry&&(r=!1);const s=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._layer.outFields?this._layer.outFields:[\"*\"]);d=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__.default([],[\"GETPAGES\"],n,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:s.join(\",\"),resultRecordCount:o,resultOffset:0,geometry:null===t?null:t,where:l,orderByFields:i,returnGeometry:r,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}return this._expandPagedSet(d,o,0,1,a).then((()=>d))}))}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}_clonePageDefinition(e){return null===e?null:!0!==e.groupbypage?{groupbypage:!1,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}:{groupbypage:!0,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,useOIDpagination:e.useOIDpagination,generatedOid:e.generatedOid,groupByFieldsForStatistics:e.groupByFieldsForStatistics,resultOffset:e.resultOffset,outStatistics:e.outStatistics,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}}_getPhysicalPage(e,t,r){try{const t=e.pagesDefinition.internal.lastRetrieved,i=t,s=e.pagesDefinition.internal.lastPage,a=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__.default;return this._requestStandardised&&(a.sqlFormat=\"standard\"),a.spatialRelationship=e.pagesDefinition.spatialRel,a.relationParameter=e.pagesDefinition.relationParam,a.outFields=e.pagesDefinition.outFields.split(\",\"),a.num=e.pagesDefinition.resultRecordCount,a.start=e.pagesDefinition.internal.lastPage,a.geometry=e.pagesDefinition.geometry,a.where=e.pagesDefinition.where,a.orderByFields=\"\"!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(\",\"):null,a.returnGeometry=e.pagesDefinition.returnGeometry,a.outSpatialReference=this.spatialReference,this.executeQuery(a,\"execute\").then((a=>{if(this._checkCancelled(r),e.pagesDefinition.internal.lastPage!==s)return\"done\";for(let t=0;t<a.features.length;t++)e.pagesDefinition.internal.set[i+t]=a.features[t].attributes[this._layer.objectIdField];if(!1===this._pageJustIds)for(let e=0;e<a.features.length;e++)this._featureCache[a.features[e].attributes[this._layer.objectIdField]]=a.features[e];return(void 0===a.exceededTransferLimit&&a.features.length!==e.pagesDefinition.resultRecordCount||!1===a.exceededTransferLimit)&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=t+a.features.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,\"done\"}))}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}_fieldsIncludingObjectId(e){if(null===e)return[this.objectIdField];const t=e.slice(0);if(t.indexOf(\"*\")>-1)return t;let i=!1;for(const e of t)if(e.toUpperCase()===this.objectIdField.toUpperCase()){i=!0;break}return!1===i&&t.push(this.objectIdField),t}_getFeatures(e,r,s,a){const n=[];try{if(-1!==r&&void 0===this._featureCache[r]&&n.push(r),!0===this._checkIfNeedToExpandKnownPage(e,this._maxProcessingRate()))return this._expandPagedSet(e,this._maxProcessingRate(),0,0,a).then((()=>this._getFeatures(e,r,s,a)));let l=0;for(let t=e._lastFetchedIndex;t<e._known.length;t++){if(e._lastFetchedIndex+=1,l++,void 0===this._featureCache[e._known[t]]){let i=!1;if(null!==this._layer._mode&&void 0!==this._layer._mode){const r=this._layer._mode;if(void 0!==r._featureMap[e._known[t]]){const s=r._featureMap[e._known[t]];null!==s&&(i=!0,this._featureCache[e._known[t]]=s)}}if(!1===i&&(e._known[t]!==r&&n.push(e._known[t]),n.length>=this._maxProcessingRate()-1))break}if(l>=s&&0===n.length)break}if(0===n.length)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"success\");try{const e=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__.default;return this._requestStandardised&&(e.sqlFormat=\"standard\"),e.objectIds=n,e.outFields=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._layer.outFields?this._layer.outFields:[\"*\"]),e.returnGeometry=!0,!0===this._removeGeometry&&(e.returnGeometry=!1),e.outSpatialReference=this.spatialReference,this.executeQuery(e,\"execute\").then((e=>{if(this._checkCancelled(a),void 0!==e.error)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(e.error));for(let t=0;t<e.features.length;t++)this._featureCache[e.features[t].attributes[this._layer.objectIdField]]=e.features[t];return\"success\"}))}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}_getDistinctPages(e,t,r,s,a,n,l,o,u){return this._ensureLoaded().then((()=>this.databaseType())).then((d=>{let h=r.parseTree.column;for(let e=0;e<this._layer.fields.length;e++)if(this._layer.fields[e].name.toLowerCase()===h.toLowerCase()){h=this._layer.fields[e].name;break}const c=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__.default;this._requestStandardised&&(c.sqlFormat=\"standard\");let p=null===n?null===a?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(n,d);return this._layer.definitionExpression&&(p=\"\"!==p?\"((\"+this._layer.definitionExpression+\") AND (\"+p+\"))\":this._layer.definitionExpression),c.where=p,c.spatialRelationship=this._makeRelationshipEnum(s),c.relationParameter=this._makeRelationshipParam(s),c.geometry=null===a?null:a,c.returnDistinctValues=!0,c.returnGeometry=!1,c.outFields=[h],this.executeQuery(c,\"execute\").then((d=>{if(this._checkCancelled(u),!d.hasOwnProperty(\"features\"))return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Unnexected Result querying statistics from layer\"));let c=!1;for(let e=0;e<this._layer.fields.length;e++)if(this._layer.fields[e].name===h){\"date\"===this._layer.fields[e].type&&(c=!0);break}for(let e=0;e<d.features.length;e++){if(c){const t=d.features[e].attributes[h];null!==t?o.push(new Date(t)):o.push(t)}else o.push(d.features[e].attributes[h]);if(o.length>=l)break}return 0===d.features.length?o:d.features.length===this._layer.capabilities.query.maxRecordCount&&o.length<l?this._getDistinctPages(e+d.features.length,t,r,s,a,n,l,o,u).then((e=>({calculated:!0,result:e}))):o}))}))}_distinctStat(e,t,i,r,s,a,n){return this._getDistinctPages(0,e,t,i,r,s,a,[],n).then((e=>({calculated:!0,result:e})))}isTable(){return this._layer.isTable||null===this._layer.geometryType||\"table\"===this._layer.type||\"\"===this._layer.geometryType}_countstat(e,t,i,r){return this.databaseType().then((e=>{const s=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__.default;if(this._requestStandardised&&(s.sqlFormat=\"standard\"),this.isTable()&&i&&null!==t&&\"\"!==t)return{calculated:!0,result:0};let a=null===r?null===i?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(r,e);return this._layer.definitionExpression&&(a=\"\"!==a?\"((\"+this._layer.definitionExpression+\") AND (\"+a+\"))\":this._layer.definitionExpression),s.where=a,s.where=a,s.spatialRelationship=this._makeRelationshipEnum(t),s.relationParameter=this._makeRelationshipParam(t),s.geometry=null===i?null:i,s.returnGeometry=!1,this.executeQuery(s,\"executeForCount\").then((e=>({calculated:!0,result:e})))}))}_stats(e,t,r,s,a,n,l){return this._ensureLoaded().then((()=>{const o=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsSqlExpression,u=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsStatistics,d=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsDistinct;return\"count\"===e?d?this._countstat(e,r,s,a):{calculated:!1}:!1===u||!1===(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.isSingleField)(t)&&!1===o||!1===t.isStandardized?\"\"!==r||null!==a?{calculated:!1}:this._manualStat(e,t,n,l):\"distinct\"===e?!1===d?\"\"!==r||null!==a?{calculated:!1}:this._manualStat(e,t,n,l):this._distinctStat(e,t,r,s,a,n,l):this.databaseType().then((n=>{if(this.isTable()&&s&&null!==r&&\"\"!==r)return{calculated:!0,result:null};const l=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__.default;this._requestStandardised&&(l.sqlFormat=\"standard\");let o=null===a?null===s?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(a,n);this._layer.definitionExpression&&(o=\"\"!==o?\"((\"+this._layer.definitionExpression+\") AND (\"+o+\"))\":this._layer.definitionExpression),l.where=o,l.spatialRelationship=this._makeRelationshipEnum(r),l.relationParameter=this._makeRelationshipParam(r),l.geometry=null===s?null:s;const u=new _tasks_support_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_14__.default;u.statisticType=(0,_support_stats_js__WEBPACK_IMPORTED_MODULE_10__.decodeStatType)(e),u.onStatisticField=(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(t,n),u.outStatisticFieldName=\"ARCADE_STAT_RESULT\",l.returnGeometry=!1;let d=\"ARCADE_STAT_RESULT\";return l.outStatistics=[u],this.executeQuery(l,\"execute\").then((e=>{if(!e.hasOwnProperty(\"features\")||0===e.features.length)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Unnexected Result querying statistics from layer\"));let t=!1;for(let i=0;i<e.fields.length;i++)if(\"ARCADE_STAT_RESULT\"===e.fields[i].name.toUpperCase()){d=e.fields[i].name,\"date\"===e.fields[i].type&&(t=!0);break}if(t){let t=e.features[0].attributes[d];return null!==t&&(t=new Date(e.features[0].attributes[d])),{calculated:!0,result:t}}return{calculated:!0,result:e.features[0].attributes[d]}}))}))}))}_stat(e,t,i,r,s,a,n){return this._stats(e,t,i,r,s,a,n)}_canDoAggregates(e,t){return this._ensureLoaded().then((()=>{let e=!1;const i=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsSqlExpression;if(void 0!==this._layer.capabilities&&null!==this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsStatistics&&!0===this._layer.capabilities.query.supportsOrderBy&&(e=!0),e)for(let r=0;r<t.length-1;r++)null!==t[r].workingexpr&&(!1===t[r].workingexpr.isStandardized||!1===(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.isSingleField)(t[r].workingexpr)&&!1===i)&&(e=!1);return!1!==e}))}_makeRelationshipEnum(e){if(e.indexOf(\"esriSpatialRelRelation\")>=0)return\"relation\";switch(e){case\"esriSpatialRelRelation\":return\"relation\";case\"esriSpatialRelIntersects\":return\"intersects\";case\"esriSpatialRelContains\":return\"contains\";case\"esriSpatialRelOverlaps\":return\"overlaps\";case\"esriSpatialRelWithin\":return\"within\";case\"esriSpatialRelTouches\":return\"touches\";case\"esriSpatialRelCrosses\":return\"crosses\";case\"esriSpatialRelEnvelopeIntersects\":return\"envelope-intersects\"}return e}_makeRelationshipParam(e){return e.indexOf(\"esriSpatialRelRelation\")>=0?e.split(\":\")[1]:\"\"}_getAggregatePagesDataSourceDefinition(e,t,i,r,s,a,n){return this._ensureLoaded().then((()=>this.databaseType())).then((l=>{let o=\"\",u=!1,d=!1;null!==a&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(o=a.constructClause(),d=!0),this._layer.capabilities&&this._layer.capabilities.query&&!1===this._layer.capabilities.query.supportsPagination&&(d=!1,u=!0,o=this._layer.objectIdField);const h=[];for(let e=0;e<t.length;e++){const i=new _tasks_support_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_14__.default;i.onStatisticField=null!==t[e].workingexpr?(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(t[e].workingexpr,l):\"\",i.outStatisticFieldName=t[e].field,i.statisticType=t[e].toStatisticsName(),h.push(i)}\"\"===o&&(o=e.join(\",\"));let c=this._maxQueryRate();const p=this._layer.capabilities.query.maxRecordCount;void 0!==p&&p<c&&(c=p);let _=null===s?null===r?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_9__.toWhereClause)(s,l);this._layer.definitionExpression&&(_=\"\"!==_?\"((\"+this._layer.definitionExpression+\") AND (\"+_+\"))\":this._layer.definitionExpression);return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__.default([],[\"GETPAGES\"],d,{groupbypage:!0,spatialRel:this._makeRelationshipEnum(i),relationParam:this._makeRelationshipParam(i),outFields:[\"*\"],useOIDpagination:u,generatedOid:n,resultRecordCount:c,resultOffset:0,groupByFieldsForStatistics:e,outStatistics:h,geometry:null===r?null:r,where:_,orderByFields:o,returnGeometry:!1,returnIdsOnly:!1,internal:{lastMaxId:-1,set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}))}_getAgregagtePhysicalPage(e,r,s){try{let r=e.pagesDefinition.where;!0===e.pagesDefinition.useOIDpagination&&(r=\"\"!==r?\"(\"+r+\") AND (\"+e.pagesDefinition.generatedOid+\">\"+e.pagesDefinition.internal.lastMaxId.toString()+\")\":e.pagesDefinition.generatedOid+\">\"+e.pagesDefinition.internal.lastMaxId.toString());const a=e.pagesDefinition.internal.lastRetrieved,l=a,o=e.pagesDefinition.internal.lastPage,u=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__.default;return this._requestStandardised&&(u.sqlFormat=\"standard\"),u.where=r,u.spatialRelationship=e.pagesDefinition.spatialRel,u.relationParameter=e.pagesDefinition.relationParam,u.outFields=e.pagesDefinition.outFields,u.outStatistics=e.pagesDefinition.outStatistics,u.geometry=e.pagesDefinition.geometry,u.groupByFieldsForStatistics=e.pagesDefinition.groupByFieldsForStatistics,u.num=e.pagesDefinition.resultRecordCount,u.start=e.pagesDefinition.internal.lastPage,u.returnGeometry=e.pagesDefinition.returnGeometry,u.orderByFields=\"\"!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(\",\"):null,this.isTable()&&u.geometry&&u.spatialRelationship?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)([]):this.executeQuery(u,\"execute\").then((t=>{if(this._checkCancelled(s),!t.hasOwnProperty(\"features\"))return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Unnexected Result querying aggregates from layer\"));const r=[];if(e.pagesDefinition.internal.lastPage!==o)return[];for(let i=0;i<t.features.length;i++)e.pagesDefinition.internal.set[l+i]=t.features[i].attributes[e.pagesDefinition.generatedOid];for(let e=0;e<t.features.length;e++)r.push(new _Graphic_js__WEBPACK_IMPORTED_MODULE_4__.default({attributes:t.features[e].attributes,geometry:null}));return!0===e.pagesDefinition.useOIDpagination?0===t.features.length?e.pagesDefinition.internal.fullyResolved=!0:e.pagesDefinition.internal.lastMaxId=t.features[t.features.length-1].attributes[e.pagesDefinition.generatedOid]:(void 0===t.exceededTransferLimit&&t.features.length!==e.pagesDefinition.resultRecordCount||!1===t.exceededTransferLimit)&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=a+t.features.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,r}))}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}static create(e,t,i,r){const s=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_16__.default({url:e,outFields:null===t?[\"*\"]:t});return new q({layer:s,spatialReference:i,lrucache:r})}relationshipMetaData(){return this._layer&&this._layer.source&&this._layer.source.sourceJSON&&this._layer.source.sourceJSON.relationships?this._layer.source.sourceJSON.relationships:[]}serviceUrl(){return (0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.extractServiceUrl)(this._layer.parsedUrl.path)}queryAttachments(e,i,r,s){if(this._layer.capabilities.data.supportsAttachment&&this._layer.capabilities.operations.supportsQueryAttachments){const t={objectIds:[e]};return(i&&i>0||r&&r>0)&&(t.size=[i&&i>0?i:0,r&&r>0?r:i+1]),s&&s.length>0&&(t.attachmentTypes=s),this._layer.queryAttachments(t).then((t=>{const i=[];return t&&t[e]&&t[e].forEach((t=>{const r=this._layer.parsedUrl.path+\"/\"+e.toString()+\"/attachments/\"+t.id.toString();i.push(new _Attachment_js__WEBPACK_IMPORTED_MODULE_5__.default(t.id,t.name,t.contentType,t.size,r))})),i}))}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)([])}queryRelatedFeatures(e){const t={f:\"json\",relationshipId:e.relationshipId.toString(),definitionExpression:e.where,outFields:e.outFields.join(\",\"),returnGeometry:e.returnGeometry.toString()};return void 0!==e.resultOffset&&null!==e.resultOffset&&(t.resultOffset=e.resultOffset.toString()),void 0!==e.resultRecordCount&&null!==e.resultRecordCount&&(t.resultRecordCount=e.resultRecordCount.toString()),e.orderByFields&&(t.orderByFields=e.orderByFields.join(\",\")),e.objectIds.length>0&&(t.objectIds=e.objectIds.join(\",\")),e.outSpatialReference&&(t.outSR=JSON.stringify(e.outSpatialReference.toJSON())),(0,_request_js__WEBPACK_IMPORTED_MODULE_3__.default)(this._layer.parsedUrl.path+\"/queryRelatedRecords\",{responseType:\"json\",query:t}).then((e=>{if(e.data){const t={},i=e.data;if(i&&i.relatedRecordGroups){const e=i.spatialReference;for(const s of i.relatedRecordGroups){const a=s.objectId,l=[];for(const t of s.relatedRecords){t.geometry&&(t.geometry.spatialReference=e);const i=new _Graphic_js__WEBPACK_IMPORTED_MODULE_4__.default({geometry:t.geometry?(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__.fromJSON)(t.geometry):null,attributes:t.attributes});l.push(i)}t[a]={features:l,exceededTransferLimit:!0===i.exceededTransferLimit}}}return t}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(\"Invalid Request\")}))}getFeatureByObjectId(e,t){const i=new _tasks_QueryTask_js__WEBPACK_IMPORTED_MODULE_19__.default({url:this._layer.parsedUrl.path}),r=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_15__.default;return r.outFields=t,r.returnGeometry=!1,r.outSpatialReference=this.spatialReference,r.where=this.objectIdField+\"=\"+e.toString(),i.execute(r).then((e=>1===e.features.length?e.features[0]:null))}getIdentityUser(){return this.load().then((()=>{var e;const t=null==(e=_kernel_js__WEBPACK_IMPORTED_MODULE_2__.id)?void 0:e.findCredential(this._layer.url);return t?t.userId:null}))}getOwningSystemUrl(){return this.load().then((()=>{var i;const r=null==(i=_kernel_js__WEBPACK_IMPORTED_MODULE_2__.id)?void 0:i.findServerInfo(this._layer.url);if(r)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(r.owningSystemUrl);let n=this._layer.url;const l=n.toLowerCase().indexOf(\"/rest/services\");return n=l>-1?n.substring(0,l):n,n?(n+=\"/rest/info\",(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.create)(((e,t)=>{(0,_request_js__WEBPACK_IMPORTED_MODULE_3__.default)(n,{query:{f:\"json\"}}).then((t=>{let i=\"\";t.data&&t.data.owningSystemUrl&&(i=t.data.owningSystemUrl),e(i)}),(t=>{e(\"\")}))}))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"\")}))}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (q);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/Geometry.js */ \"./node_modules/@arcgis/core/geometry/Geometry.js\");\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../layers/support/Field.js */ \"./node_modules/@arcgis/core/layers/support/Field.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _layers_support_FeatureType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../layers/support/FeatureType.js */ \"./node_modules/@arcgis/core/layers/support/FeatureType.js\");\n/* harmony import */ var _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../tasks/support/Query.js */ \"./node_modules/@arcgis/core/tasks/support/Query.js\");\n/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../layers/FeatureLayer.js */ \"./node_modules/@arcgis/core/layers/FeatureLayer.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass y extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_7__.default{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.sources.FeatureLayerMemory\",this._removeGeometry=!1,this._overrideFields=null,this._forceIsTable=!1,e.spatialReference&&(this.spatialReference=e.spatialReference),this._transparent=!0,this._maxProcessing=1e3,this._layer=e.layer,this._wset=null,!0===e.isTable&&(this._forceIsTable=!0),void 0!==e.outFields&&(this._overrideFields=e.outFields),void 0!==e.includeGeometry&&(this._removeGeometry=!1===e.includeGeometry)}_maxQueryRate(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.defaultMaxRecords}end(){return this._layer}optimisePagingFeatureQueries(){}load(){return null===this._loadPromise&&(this._loadPromise=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.create)(((e,t)=>{if(!0===this._layer.loaded)return this._initialiseFeatureSet(),void e(this);this._layer.when().then((()=>{try{this._initialiseFeatureSet(),e(this)}catch(e){t(e)}}),t),this._layer.load()}))),this._loadPromise}get gdbVersion(){return\"\"}_initialiseFeatureSet(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._layer.geometryType,this.fields=this._layer.fields.slice(0),this._layer.outFields)if(1===this._layer.outFields.length&&\"*\"===this._layer.outFields[0]);else{const e=[];for(const t of this.fields)if(\"oid\"===t.type)e.push(t);else for(const r of this._layer.outFields)if(r.toLowerCase()===t.name.toLowerCase()){e.push(t);break}this.fields=e}else;if(null!==this._overrideFields)if(1===this._overrideFields.length&&\"*\"===this._overrideFields[0])this._overrideFields=null;else{const e=[],t=[];for(const r of this.fields)if(\"oid\"===r.type)e.push(r),t.push(r.name);else for(const s of this._overrideFields)if(s.toLowerCase()===r.name.toLowerCase()){e.push(r),t.push(r.name);break}this.fields=e,this._overrideFields=t}this.objectIdField=this._layer.objectIdField;for(const e of this.fields)\"global-id\"===e.type&&(this.globalIdField=e.name);this.hasM=this._layer.supportsM,this.hasZ=this._layer.supportsZ,this._databaseType=_support_shared_js__WEBPACK_IMPORTED_MODULE_4__.FeatureServiceDatabaseType.Standardised,this.typeIdField=this._layer.typeIdField,this.types=this._layer.types}isTable(){return this._forceIsTable||this._layer.isTable||\"table\"===this._layer.type||!this._layer.geometryType}_isInFeatureSet(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet}_candidateIdTransform(e){return e}_getSet(e){return null===this._wset?this._ensureLoaded().then((()=>this._getFilteredSet(\"\",null,null,null,e))).then((e=>(this._wset=e,e))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this._wset)}_changeFeature(e){const t={};for(const r of this.fields)t[r.name]=e.attributes[r.name];return new _Graphic_js__WEBPACK_IMPORTED_MODULE_2__.default({geometry:!0===this._removeGeometry?null:e.geometry,attributes:t})}_getFilteredSet(e,r,s,i,a){let l=\"\",o=!1;if(null!==i&&(l=i.constructClause(),o=!0),this.isTable()&&r&&null!==e&&\"\"!==e){const e=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__.default([],[],!0,null);return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(e)}const c=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_9__.default;return c.where=null===s?null===r?\"1=1\":\"\":(0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(s,_support_shared_js__WEBPACK_IMPORTED_MODULE_4__.FeatureServiceDatabaseType.Standardised),c.spatialRelationship=this._makeRelationshipEnum(e),c.outSpatialReference=this.spatialReference,c.orderByFields=\"\"!==l?l.split(\",\"):null,c.geometry=null===r?null:r,c.returnGeometry=!0,c.relationParameter=this._makeRelationshipParam(e),this._layer.queryFeatures(c).then((e=>{if(null===e)return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__.default([],[],o,null);this._checkCancelled(a);const t=[];e.features.forEach((e=>{const r=e.attributes[this._layer.objectIdField];t.push(r),this._featureCache[r]=this._changeFeature(e)}));return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__.default([],t,o,null)}))}_makeRelationshipEnum(e){if(e.indexOf(\"esriSpatialRelRelation\")>=0)return\"relation\";switch(e){case\"esriSpatialRelRelation\":return\"relation\";case\"esriSpatialRelIntersects\":return\"intersects\";case\"esriSpatialRelContains\":return\"contains\";case\"esriSpatialRelOverlaps\":return\"overlaps\";case\"esriSpatialRelWithin\":return\"within\";case\"esriSpatialRelTouches\":return\"touches\";case\"esriSpatialRelCrosses\":return\"crosses\";case\"esriSpatialRelEnvelopeIntersects\":return\"envelope-intersects\"}return e}_makeRelationshipParam(e){return e.indexOf(\"esriSpatialRelRelation\")>=0?e.split(\":\")[1]:\"\"}_queryAllFeatures(){if(this._wset)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this._wset);const e=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_9__.default;return e.where=\"1=1\",this._ensureLoaded().then((()=>{if(this._layer.source&&this._layer.source.items){const e=[];return this._layer.source.items.forEach((t=>{const r=t.attributes[this._layer.objectIdField];e.push(r),this._featureCache[r]=this._changeFeature(t)})),this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__.default([],e,!1,null),this._wset}return this._layer.queryFeatures(e).then((e=>{const t=[];return e.features.forEach((e=>{const r=e.attributes[this._layer.objectIdField];t.push(r),this._featureCache[r]=this._changeFeature(e)})),this._wset=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__.default([],t,!1,null),this._wset}))}))}_getFeatures(e,s,i){const a=[];-1!==s&&void 0===this._featureCache[s]&&a.push(s);for(let t=e._lastFetchedIndex;t<e._known.length&&(e._lastFetchedIndex+=1,!(void 0===this._featureCache[e._known[t]]&&(e._known[t]!==s&&a.push(e._known[t]),a.length>i)));t++);return 0===a.length?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"success\"):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Unaccounted for Features. Not in Feature Collection\"))}_refineSetBlock(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(e)}_stat(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)({calculated:!1})}_canDoAggregates(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1)}relationshipMetaData(){return[]}static _cloneAttr(e){const t={};for(const r in e)t[r]=e[r];return t}nativeCapabilities(){return{title:this._layer.title,canQueryRelated:!1,source:this,capabilities:this._layer.capabilities,databaseType:this._databaseType,requestStandardised:!0}}static create(e,t){let r=e.layerDefinition.objectIdField;const i=e.layerDefinition.typeIdField?e.layerDefinition.typeIdField:\"\",l=[];if(e.layerDefinition.types)for(const t of e.layerDefinition.types)l.push(_layers_support_FeatureType_js__WEBPACK_IMPORTED_MODULE_8__.default.fromJSON(t));let n=e.layerDefinition.geometryType;void 0===n&&(n=e.featureSet.geometryType||\"\");let o=e.featureSet.features;const u=t.toJSON();if(\"\"===r||void 0===r){let t=!1;for(const s of e.layerDefinition.fields)if(\"oid\"===s.type||\"esriFieldTypeOID\"===s.type){r=s.name,t=!0;break}if(!1===t){let t=\"FID\",s=!0,i=0;for(;s;){let r=!0;for(const s of e.layerDefinition.fields)if(s.name===t){r=!1;break}!0===r?s=!1:(i++,t=\"FID\"+i.toString())}e.layerDefinition.fields.push({type:\"esriFieldTypeOID\",name:t,alias:t});const a=[];for(let r=0;r<o.length;r++)a.push({geometry:e.featureSet.features[r].geometry,attributes:e.featureSet.features[r].attributes?this._cloneAttr(e.featureSet.features[r].attributes):{}}),a[r].attributes[t]=r;o=a,r=t}}const h=[];for(const t of e.layerDefinition.fields)t instanceof _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_3__.default?h.push(t):h.push(_layers_support_Field_js__WEBPACK_IMPORTED_MODULE_3__.default.fromJSON(t));let c=n;switch(c){case\"esriGeometryPoint\":c=\"point\";break;case\"esriGeometryPolyline\":c=\"polyline\";break;case\"esriGeometryPolygon\":c=\"polygon\";break;case\"esriGeometryExtent\":c=\"extent\";break;case\"esriGeometryMultipoint\":c=\"multipoint\"}for(const e of o)e.geometry&&e.geometry instanceof _geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.default==!1&&(e.geometry.type=c,void 0===e.geometry.spatialReference&&(e.geometry.spatialReference=u));const f={outFields:[\"*\"],source:o,fields:h,types:l,typeIdField:i,objectIdField:r,spatialReference:t};f.geometryType=c||\"point\";const _=new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_10__.default(f);return new y({layer:_,spatialReference:t,isTable:null===c||\"\"===c})}queryAttachments(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)([])}getFeatureByObjectId(e){const t=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_9__.default;return t.where=this.objectIdField+\"=\"+e.toString(),this._layer.queryFeatures(t).then((e=>1===e.features.length?e.features[0]:null))}getOwningSystemUrl(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"\")}getIdentityUser(){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"\")}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (y);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerRelated.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerRelated.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/IdSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/IdSet.js\");\n/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/FeatureSet.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js\");\n/* harmony import */ var _tasks_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../tasks/support/RelationshipQuery.js */ \"./node_modules/@arcgis/core/tasks/support/RelationshipQuery.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_4__.default{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.sources.FeatureLayerRelated\",this._findObjectId=-1,this._requestStandardised=!1,this._removeGeometry=!1,this._overrideFields=null,this.featureObjectId=null,this.relatedLayer=null,this.relationship=null,e.spatialReference&&(this.spatialReference=e.spatialReference),this._transparent=!0,this._maxProcessing=1e3,this._layer=e.layer,this._wset=null,this._findObjectId=e.objectId,this.featureObjectId=e.objectId,this.relationship=e.relationship,this.relatedLayer=e.relatedLayer,void 0!==e.outFields&&(this._overrideFields=e.outFields),void 0!==e.includeGeometry&&(this._removeGeometry=!1===e.includeGeometry)}_maxQueryRate(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_2__.defaultMaxRecords}end(){return this._layer}optimisePagingFeatureQueries(){}load(){return null===this._loadPromise&&(this._loadPromise=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.create)(((e,i)=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.all)([this._layer.load(),this.relatedLayer.load()]).then((()=>{this._initialiseFeatureSet(),e(this)}),i)}))),this._loadPromise}nativeCapabilities(){return this.relatedLayer.nativeCapabilities()}_initialiseFeatureSet(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this.relatedLayer.geometryType,this.fields=this.relatedLayer.fields.slice(0),null!==this._overrideFields)if(1===this._overrideFields.length&&\"*\"===this._overrideFields[0])this._overrideFields=null;else{const e=[],t=[];for(const i of this.fields)if(\"oid\"===i.type)e.push(i),t.push(i.name);else for(const r of this._overrideFields)if(r.toLowerCase()===i.name.toLowerCase()){e.push(i),t.push(i.name);break}this.fields=e,this._overrideFields=t}const e=this._layer.nativeCapabilities();e&&(this._databaseType=e.databaseType,this._requestStandardised=e.requestStandardised),this.objectIdField=this.relatedLayer.objectIdField,this.globalIdField=this.relatedLayer.globalIdField,this.hasM=this.relatedLayer.supportsM,this.hasZ=this.relatedLayer.supportsZ,this.typeIdField=this.relatedLayer.typeIdField,this.types=this.relatedLayer.types}databaseType(){return this.relatedLayer.databaseType().then((()=>(this._databaseType=this.relatedLayer._databaseType,this._databaseType)))}isTable(){return this.relatedLayer.isTable()}_isInFeatureSet(){return _support_shared_js__WEBPACK_IMPORTED_MODULE_2__.IdState.InFeatureSet}_candidateIdTransform(e){return e}_getSet(e){return null===this._wset?this._ensureLoaded().then((()=>this._getFilteredSet(\"\",null,null,null,e))).then((e=>(this._wset=e,e))):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(this._wset)}_changeFeature(e){const t={};for(const i of this.fields)t[i.name]=e.attributes[i.name];return new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__.default({geometry:!0===this._removeGeometry?null:e.geometry,attributes:t})}_getFilteredSet(e,t,i,r,s){return this.databaseType().then((()=>{if(this.isTable()&&t&&null!==e&&\"\"!==e){return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__.default([],[],!0,null)}const a=this._layer.nativeCapabilities();if(!1===a.canQueryRelated){return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__.default([],[],!0,null)}if(a.capabilities.queryRelated&&a.capabilities.queryRelated.supportsPagination)return this._getFilteredSetUsingPaging(e,t,i,r,s);let n=\"\",d=!1;null!==r&&a.capabilities&&a.capabilities.queryRelated&&!0===a.capabilities.queryRelated.supportsOrderBy&&(n=r.constructClause(),d=!0);const u=new _tasks_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_5__.default;u.objectIds=[this._findObjectId];const h=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this.relatedLayer.fields?this.relatedLayer.fields.map((e=>e.name)):[\"*\"]);u.outFields=h,u.relationshipId=this.relationship.id,u.where=\"1=1\";let c=!0;return!0===this._removeGeometry&&(c=!1),u.returnGeometry=c,this._requestStandardised&&(u.sqlFormat=\"standard\"),u.outSpatialReference=this.spatialReference,u.orderByFields=\"\"!==n?n.split(\",\"):null,a.source.queryRelatedFeatures(u).then((r=>{this._checkCancelled(s);const a=r[this._findObjectId]?r[this._findObjectId].features:[],n=[];for(let e=0;e<a.length;e++)this._featureCache[a[e].attributes[this._layer.objectIdField]]=a[e],n.push(a[e].attributes[this._layer.objectIdField]);const o=t&&null!==e&&\"\"!==e,u=null!=i;return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__.default(o||u?n:[],o||u?[]:n,d,null)}))}))}_fieldsIncludingObjectId(e){if(null===e)return[this.objectIdField];const t=e.slice(0);if(t.indexOf(\"*\")>-1)return t;let i=!1;for(const e of t)if(e.toUpperCase()===this.objectIdField.toUpperCase()){i=!0;break}return!1===i&&t.push(this.objectIdField),t}_getFilteredSetUsingPaging(e,t,i,s,a){try{let r=\"\",n=!1;const d=this._layer.nativeCapabilities();return null!==s&&d&&d.capabilities.queryRelated&&!0===d.capabilities.queryRelated.supportsOrderBy&&(r=s.constructClause(),n=!0),this.databaseType().then((()=>{let s=this._maxQueryRate();const o=d.capabilities.query.maxRecordCount;void 0!==o&&o<s&&(s=o);const u=t&&null!==e&&\"\"!==e,h=null!=i;let c=null,p=!0;!0===this._removeGeometry&&(p=!1);const y=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this.relatedLayer.fields?this.relatedLayer.fields.map((e=>e.name)):[\"*\"]);return c=new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__.default(u||h?[\"GETPAGES\"]:[],u||h?[]:[\"GETPAGES\"],n,{outFields:y.join(\",\"),resultRecordCount:s,resultOffset:0,objectIds:[this._findObjectId],where:\"1=1\",orderByFields:r,returnGeometry:p,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}}),this._expandPagedSet(c,s,0,0,a).then((()=>c))}))}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}_expandPagedSet(e,t,i,r,s){return this._expandPagedSetFeatureSet(e,t,i,r,s)}_clonePageDefinition(e){return null===e?null:!0!==e.groupbypage?{groupbypage:!1,outFields:e.outFields,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,where:e.where,objectIds:e.objectIds,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}:{groupbypage:!0,outFields:e.outFields,resultRecordCount:e.resultRecordCount,useOIDpagination:e.useOIDpagination,generatedOid:e.generatedOid,groupByFieldsForStatistics:e.groupByFieldsForStatistics,resultOffset:e.resultOffset,outStatistics:e.outStatistics,geometry:e.geometry,where:e.where,objectIds:e.objectIds,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}}_getPhysicalPage(e,t,i){try{const t=e.pagesDefinition.internal.lastRetrieved,r=t,s=e.pagesDefinition.internal.lastPage,a=this._layer.nativeCapabilities(),n=new _tasks_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_5__.default;return!0===this._requestStandardised&&(n.sqlFormat=\"standard\"),n.relationshipId=this.relationship.id,n.objectIds=e.pagesDefinition.objectIds,n.resultOffset=e.pagesDefinition.internal.lastPage,n.resultRecordCount=e.pagesDefinition.resultRecordCount,n.outFields=e.pagesDefinition.outFields.split(\",\"),n.where=e.pagesDefinition.where,n.orderByFields=\"\"!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(\",\"):null,n.returnGeometry=e.pagesDefinition.returnGeometry,n.outSpatialReference=this.spatialReference,a.source.queryRelatedFeatures(n).then((a=>{if(this._checkCancelled(i),e.pagesDefinition.internal.lastPage!==s)return 0;const n=a[this._findObjectId]?a[this._findObjectId].features:[];for(let t=0;t<n.length;t++)e.pagesDefinition.internal.set[r+t]=n[t].attributes[this._layer.objectIdField];for(let e=0;e<n.length;e++)this._featureCache[n[e].attributes[this._layer.objectIdField]]=n[e];const l=!a[this._findObjectId]||!1===a[this._findObjectId].exceededTransferLimit;return n.length!==e.pagesDefinition.resultRecordCount&&l&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=t+n.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,n.length}))}catch(e){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(e)}}_getFeatures(e,t,s,a){const n=[];-1!==t&&void 0===this._featureCache[t]&&n.push(t);const l=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(e,l))return this._expandPagedSet(e,l,0,0,a).then((()=>this._getFeatures(e,t,s,a)));let d=0;for(let i=e._lastFetchedIndex;i<e._known.length&&(d++,d<=s&&(e._lastFetchedIndex+=1),!(\"GETPAGES\"!==e._known[i]&&void 0===this._featureCache[e._known[i]]&&(e._known[i]!==t&&n.push(e._known[i]),n.length>s)))&&!(d>=s&&0===n.length);i++);return 0===n.length?(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(\"success\"):(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.reject)(new Error(\"Unaccounted for Features. Not in Feature Collection\"))}_refineSetBlock(e,t,r){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(e)}_stat(e,t,r,s,a,n,l){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)({calculated:!1})}get gdbVersion(){return this.relatedLayer.gdbVersion}_canDoAggregates(e,t,r,s,a){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.resolve)(!1)}relationshipMetaData(){return this.relatedLayer.relationshipMetaData()}serviceUrl(){return this.relatedLayer.serviceUrl()}queryAttachments(e,t,i,r){return this.relatedLayer.queryAttachments(e,t,i,r)}getFeatureByObjectId(e,t){return this.relatedLayer.getFeatureByObjectId(e,t)}getOwningSystemUrl(){return this.relatedLayer.getOwningSystemUrl()}getIdentityUser(){return this.relatedLayer.getIdentityUser()}});\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerRelated.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,e){return t===e?0:null===t?-1:null===e?1:t<e?-1:1}class e{constructor(t){const e=t.split(\",\");this._fields=[],this._directions=[];for(let t=0;t<e.length;t++){const s=e[t].match(/\\S+/g);this._fields.push(s[0]),2===s.length?\"asc\"===s[1].toLowerCase()?this._directions.push(1):this._directions.push(0):this._directions.push(1)}}constructClause(){let t=\"\";for(let e=0;e<this._fields.length;e++)0!==e&&(t+=\",\"),t+=this._fields[e],1===this._directions[e]?t+=\" ASC\":t+=\" DESC\";return t}order(e){e.sort(((e,s)=>{for(let i=0;i<this._fields.length;i++){const r=this.featureValue(e.feature,this._fields[i],i),l=this.featureValue(s.feature,this._fields[i],i);let o=0;if(o=1===this._directions[i]?t(r,l):-1*t(r,l),0!==o)return o}return 0}))}scanForField(t){for(let e=0;e<this._fields.length;e++)if(this._fields[e].toLowerCase().trim()===t.toLowerCase().trim())return!0;return!1}replaceFields(t){let s=\"\";for(let e=0;e<this._fields.length;e++){0!==e&&(s+=\",\");let i=this._fields[e];for(const e of t)if(i.toLowerCase()===e.field.toLowerCase()){i=e.newfield;break}s+=i,1===this._directions[e]?s+=\" ASC\":s+=\" DESC\"}return new e(s)}featureValue(t,e,s){const i=t.attributes[e];if(void 0!==i)return i;for(const i in t.attributes)if(e.toLowerCase()===i.toLowerCase())return this._fields[s]=i,t.attributes[i];return null}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (e);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/featureset/support/StatsField.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/support/StatsField.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shared.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/shared.js\");\n/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ \"./node_modules/@arcgis/core/core/sql/WhereClause.js\");\n/* harmony import */ var _sqlUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sqlUtils.js */ \"./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass n{clone(){const e=new n;return e.field=this.field,e.tofieldname=this.tofieldname,e.typeofstat=this.typeofstat,e.workingexpr=this.workingexpr,e}static parseStatField(a,i,s){const o=new n;o.field=a;const l=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_1__.WhereClause.create(i,s),p=function(n){if(\"function\"===n.parseTree.type){if(0===n.parseTree.args.value.length)return{name:n.parseTree.name,expr:null};if(n.parseTree.args.value.length>1)throw new Error(\"Statistic does not have 1 or 0 Parameters\");const a=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_1__.WhereClause.create((0,_sqlUtils_js__WEBPACK_IMPORTED_MODULE_2__.toWhereClauseFromTree)(n.parseTree.args.value[0],_shared_js__WEBPACK_IMPORTED_MODULE_0__.FeatureServiceDatabaseType.Standardised,n.parameters),n.fieldsIndex);return{name:n.parseTree.name,expr:a}}return null}(l);if(null===p)throw new Error(\"Invalid Statistic Function\");const c=p.name.toUpperCase().trim();if(\"MIN\"===c){if(o.typeofstat=\"MIN\",o.workingexpr=p.expr,null===l)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"MAX\"===c){if(o.typeofstat=\"MAX\",o.workingexpr=p.expr,null===l)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"COUNT\"===c)o.typeofstat=\"COUNT\",o.workingexpr=p.expr;else if(\"STDEV\"===c){if(o.typeofstat=\"STDDEV\",o.workingexpr=p.expr,null===l)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"SUM\"===c){if(o.typeofstat=\"SUM\",o.workingexpr=p.expr,null===l)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"MEAN\"===c){if(o.typeofstat=\"AVG\",o.workingexpr=p.expr,null===l)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"AVG\"===c){if(o.typeofstat=\"AVG\",o.workingexpr=p.expr,null===l)throw new Error(\"Invalid Statistic Function Parameters\")}else{if(\"VAR\"!==c)throw new Error(\"Invalid Statistic Function\");if(o.typeofstat=\"VAR\",o.workingexpr=p.expr,null===l)throw new Error(\"Invalid Statistic Function Parameters\")}return o}toStatisticsName(){switch(this.typeofstat.toUpperCase()){case\"MIN\":return\"min\";case\"MAX\":return\"max\";case\"SUM\":return\"sum\";case\"COUNT\":return\"count\";case\"VAR\":return\"var\";case\"STDDEV\":return\"stddev\";case\"AVG\":return\"avg\";default:return\"count\"}}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (n);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/arcade/featureset/support/StatsField.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/core/MemCache.js":
/*!****************************************************!*\
  !*** ./node_modules/@arcgis/core/core/MemCache.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MIN_PRIORITY\": () => (/* binding */ e),\n/* harmony export */   \"MemCache\": () => (/* binding */ s),\n/* harmony export */   \"MemCacheStorage\": () => (/* binding */ i)\n/* harmony export */ });\n/* harmony import */ var _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PooledArray.js */ \"./node_modules/@arcgis/core/core/PooledArray.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst e=-3;class s{constructor(t,e,s){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=\":\",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0)}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}put(t,e,s,i=0){this._storage.put(this._namespace+t,e,s,i)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,s){this._storage.updateSize(this._namespace+t,e,s)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class i{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__.default}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs=this._removeFuncs.filter((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,s,i){const h=this._db.get(t);if(h&&(this._size-=h.size,this._db.delete(t),h.entry!==e&&this._notifyRemoved(t,h.entry)),s>this._maxSize)return void this._notifyRemoved(t,e);if(void 0===e)return void console.warn(\"Refusing to cache undefined entry \");if(!s||s<0)return void console.warn(\"Refusing to cache entry with invalid size \"+s);const r=1+Math.max(i,-3)- -3;this._db.set(t,{entry:e,size:s,lifetime:r,lives:r}),this._size+=s,this._checkSizeLimit()}updateSize(t,e,s){const i=this._db.get(t);i&&i.entry===e&&(this._size-=i.size,s>this._maxSize?this._notifyRemoved(t,e):(i.size=s,this._size+=s,this._checkSizeLimit()))}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+\"/\"+Math.round(this._maxSize/1048576)+\"MB\",\"Hit rate\":Math.round(100*this._getHitRate())+\"%\",Entries:this._db.size.toString()},e={},s=new Array;this._db.forEach(((t,i)=>{const h=t.lifetime;s[h]=(s[h]||0)+t.size,this._users.forAll((s=>{const h=s.namespace;if(i.startsWith(h)){const s=e[h]||0;e[h]=s+t.size}}))}));const i={};this._users.forAll((t=>{const s=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const h=e[s]||0;e[s]=h,i[s]=Math.round(100*t.hitRate)+\"%\"}else i[s]=\"0%\"}));const h=Object.keys(e);h.forEach((t=>e[t]=e[t]/this._size*100)),h.sort(((t,s)=>e[s]-e[t])),h.forEach((s=>t[s]=Math.round(e[s])+\"% / \"+i[s]));for(let e=s.length-1;e>=0;--e){const i=s[e];i&&(t[\"Priority \"+(e+-3-1)]=Math.round(i/this.size*100)+\"%\")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,s)=>{s.startsWith(t)&&(this._size-=e.size,this._db.delete(s),this._notifyRemoved(s,e.entry))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemoved(e,t.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(t,e){this._removeFuncs.forEach((s=>{t.startsWith(s[0])&&s[1](e)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db)if(this._db.delete(t),e.lives<=1?(this._size-=e.size,this._notifyRemoved(t,e.entry)):(--e.lives,this._db.set(t,e)),this._size<=.9*this.maxSize)return}}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/core/MemCache.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"diff\": () => (/* binding */ y),\n/* harmony export */   \"hasDiff\": () => (/* binding */ p),\n/* harmony export */   \"hasDiffAny\": () => (/* binding */ a),\n/* harmony export */   \"isEmpty\": () => (/* binding */ m)\n/* harmony export */ });\n/* harmony import */ var _maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"./node_modules/@arcgis/core/core/accessorSupport/utils.js\");\n/* harmony import */ var _Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Accessor.js */ \"./node_modules/@arcgis/core/core/Accessor.js\");\n/* harmony import */ var _Collection_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Collection.js */ \"./node_modules/@arcgis/core/core/Collection.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst f=[\"esri.Color\",\"esri.portal.Portal\",\"esri.symbols.support.Symbol3DAnchorPosition2D\",\"esri.symbols.support.Symbol3DAnchorPosition3D\"];function i(t){return t instanceof _Accessor_js__WEBPACK_IMPORTED_MODULE_2__.default}function c(t){return t instanceof _Collection_js__WEBPACK_IMPORTED_MODULE_3__.default?Object.keys(t.items):i(t)?(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getProperties)(t).keys():t?Object.keys(t):[]}function u(t,e){return t instanceof _Collection_js__WEBPACK_IMPORTED_MODULE_3__.default?t.items[e]:t[e]}function l(t){return t?t.declaredClass:null}function s(t,n){const o=t.diff;if(o&&\"function\"==typeof o)return o(t,n);const r=c(t),p=c(n);if(0===r.length&&0===p.length)return;if(!r.length||!p.length||function(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}(t,n))return{type:\"complete\",oldValue:t,newValue:n};const a=p.filter((t=>-1===r.indexOf(t))),y=r.filter((t=>-1===p.indexOf(t))),m=r.filter((e=>p.indexOf(e)>-1&&u(t,e)!==u(n,e))).concat(a,y).sort(),d=l(t);if(d&&f.indexOf(d)>-1&&m.length)return{type:\"complete\",oldValue:t,newValue:n};let b;const h=i(t)&&i(n);for(const r of m){const f=u(t,r),i=u(n,r);let c;(h||\"function\"!=typeof f&&\"function\"!=typeof i)&&(f!==i&&(null==f&&null==i||(c=o&&o[r]&&\"function\"==typeof o[r]?o[r](f,i):\"object\"==typeof f&&\"object\"==typeof i&&l(f)===l(i)?s(f,i):{type:\"complete\",oldValue:f,newValue:i},(0,_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(c)&&((0,_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(b)?b.diff[r]=c:b={type:\"partial\",diff:{[r]:c}}))))}return b}function p(e,n){if((0,_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(e))return!1;const o=n.split(\".\");let r=e;for(const t of o){if(\"complete\"===r.type)return!0;if(\"partial\"!==r.type)return!1;{const e=r.diff[t];if(!e)return!1;r=e}}return!0}function a(t,e){for(const n of e)if(p(t,n))return!0;return!1}function y(t,e){if(\"function\"!=typeof t&&\"function\"!=typeof e&&(t||e))return!t||!e||\"object\"==typeof t&&\"object\"==typeof e&&l(t)!==l(e)?{type:\"complete\",oldValue:t,newValue:e}:s(t,e)}function m(e){if((0,_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(e))return!0;switch(e.type){case\"complete\":return!1;case\"collection\":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case\"partial\":for(const t in e.diff){if(!m(e.diff[t]))return!1}return!0}}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/normalizeUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/normalizeUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getDenormalizedExtent\": () => (/* binding */ X),\n/* harmony export */   \"normalizeCentralMeridian\": () => (/* binding */ P),\n/* harmony export */   \"normalizeMapX\": () => (/* binding */ U),\n/* harmony export */   \"straightLineDensify\": () => (/* binding */ M)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config.js */ \"./node_modules/@arcgis/core/config.js\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Error.js */ \"./node_modules/@arcgis/core/core/Error.js\");\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./spatialReferenceUtils.js */ \"./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js\");\n/* harmony import */ var _SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/* harmony import */ var _webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./webMercatorUtils.js */ \"./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js\");\n/* harmony import */ var _Polygon_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Polygon.js */ \"./node_modules/@arcgis/core/geometry/Polygon.js\");\n/* harmony import */ var _Polyline_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Polyline.js */ \"./node_modules/@arcgis/core/geometry/Polyline.js\");\n/* harmony import */ var _tasks_geometry_cut_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../tasks/geometry/cut.js */ \"./node_modules/@arcgis/core/tasks/geometry/cut.js\");\n/* harmony import */ var _tasks_geometry_simplify_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../tasks/geometry/simplify.js */ \"./node_modules/@arcgis/core/tasks/geometry/simplify.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst m=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.default.getLogger(\"esri.geometry.support.normalizeUtils\"),g={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_9__.default({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__.default.WebMercator}),minus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_9__.default({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__.default.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_9__.default({paths:[[[180,-180],[180,180]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__.default.WGS84}),minus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_9__.default({paths:[[[-180,-180],[-180,180]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__.default.WGS84})}};function x(e){return\"polygon\"===e.type}function y(e){return\"polyline\"===e[0].type}function w(e){return x(e)?e.rings:e.paths}function R(e,t){return Math.ceil((e-t)/(2*t))}function d(e,t){const n=w(e);for(const e of n)for(const n of e)n[0]+=t;return e}function j(e){const t=[];let n=0,s=0;for(let o=0;o<e.length;o++){const r=e[o];let i=null;for(let e=0;e<r.length;e++)i=r[e],t.push(i),0===e?(n=i[0],s=n):(n=Math.min(n,i[0]),s=Math.max(s,i[0]));i&&t.push([(n+s)/2,0])}return t}function M(e,t){if(!(e instanceof _Polyline_js__WEBPACK_IMPORTED_MODULE_9__.default||e instanceof _Polygon_js__WEBPACK_IMPORTED_MODULE_8__.default)){const e=\"straightLineDensify: the input geometry is neither polyline nor polygon\";throw m.error(e),new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__.default(e)}const n=w(e),s=[];for(const e of n){const n=[];s.push(n),n.push([e[0][0],e[0][1]]);for(let s=0;s<e.length-1;s++){const o=e[s][0],r=e[s][1],i=e[s+1][0],f=e[s+1][1],l=Math.sqrt((i-o)*(i-o)+(f-r)*(f-r)),c=(f-r)/l,p=(i-o)/l,a=l/t;if(a>1){for(let e=1;e<=a-1;e++){const s=e*t,i=p*s+o,f=c*s+r;n.push([i,f])}const e=(l+Math.floor(a-1)*t)/2,s=p*e+o,i=c*e+r;n.push([s,i])}n.push([i,f])}}return x(e)?new _Polygon_js__WEBPACK_IMPORTED_MODULE_8__.default({rings:s,spatialReference:e.spatialReference}):new _Polyline_js__WEBPACK_IMPORTED_MODULE_9__.default({paths:s,spatialReference:e.spatialReference})}function L(e,t,n){if(t){const t=M(e,1e6);e=(0,_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__.webMercatorToGeographic)(t,!0)}return n&&(e=d(e,n)),e}function b(e,t,n){if(Array.isArray(e)){const s=e[0];if(s>t){const n=R(s,t);e[0]=s+n*(-2*t)}else if(s<n){const t=R(s,n);e[0]=s+t*(-2*n)}}else{const s=e.x;if(s>t){const n=R(s,t);e=e.clone().offset(n*(-2*t),0)}else if(s<n){const t=R(s,n);e=e.clone().offset(t*(-2*n),0)}}return e}async function P(s,o,f){if(!Array.isArray(s))return P([s],o);const c=o?o.url:_config_js__WEBPACK_IMPORTED_MODULE_0__.default.geometryServiceUrl;let m,x,j,M,X,U,W,k,A=0;const S=[],v=[];for(const e of s)if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.isNone)(e))v.push(e);else if(m||(m=e.spatialReference,x=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.getInfo)(m),j=m.isWebMercator,U=j?102100:4326,M=g[U].maxX,X=g[U].minX,W=g[U].plus180Line,k=g[U].minus180Line),x)if(\"mesh\"===e.type)v.push(e);else if(\"point\"===e.type)v.push(b(e.clone(),M,X));else if(\"multipoint\"===e.type){const t=e.clone();t.points=t.points.map((e=>b(e,M,X))),v.push(t)}else if(\"extent\"===e.type){const t=e.clone()._normalize(!1,!1,x);v.push(t.rings?new _Polygon_js__WEBPACK_IMPORTED_MODULE_8__.default(t):t)}else if(e.extent){const t=e.extent,n=R(t.xmin,X)*(2*M);let s=0===n?e.clone():d(e.clone(),n);t.offset(n,0),t.intersects(W)&&t.xmax!==M?(A=t.xmax>A?t.xmax:A,s=L(s,j),S.push(s),v.push(\"cut\")):t.intersects(k)&&t.xmin!==X?(A=t.xmax*(2*M)>A?t.xmax*(2*M):A,s=L(s,j,360),S.push(s),v.push(\"cut\")):v.push(s)}else v.push(e.clone());else v.push(e);let z=R(A,M),G=-90;const I=z,q=new _Polyline_js__WEBPACK_IMPORTED_MODULE_9__.default;for(;z>0;){const e=360*z-180;q.addPath([[e,G],[e,-1*G]]),G*=-1,z--}if(S.length>0&&I>0){const e=function(e,t){let n=-1;for(let s=0;s<t.cutIndexes.length;s++){const o=t.cutIndexes[s],r=t.geometries[s],i=w(r);for(let e=0;e<i.length;e++){const t=i[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const s=t[e][0];n=s>n?s:n}n=Number(n.toFixed(9));const s=-360*R(n,180);for(let n=0;n<t.length;n++){const t=r.getPoint(e,n);r.setPoint(e,n,t.clone().offset(s,0))}return!0}}))}if(o===n){if(\"polygon\"===e[0].type)for(const t of w(r))e[o]=e[o].addRing(t);else if(y(e))for(const t of w(r))e[o]=e[o].addPath(t)}else n=o,e[o]=r}return e}(S,await (0,_tasks_geometry_cut_js__WEBPACK_IMPORTED_MODULE_10__.cut)(c,S,q,f)),t=[],o=[];for(let r=0;r<v.length;r++){const i=v[r];if(\"cut\"!==i)o.push(i);else{const i=e.shift(),f=s[r];(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.isSome)(f)&&\"polygon\"===f.type&&f.rings&&f.rings.length>1&&i.rings.length>=f.rings.length?(t.push(i),o.push(\"simplify\")):o.push(j?(0,_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__.geographicToWebMercator)(i):i)}}if(!t.length)return o;const r=await (0,_tasks_geometry_simplify_js__WEBPACK_IMPORTED_MODULE_11__.simplify)(c,t,f),i=[];for(let e=0;e<o.length;e++){const t=o[e];\"simplify\"!==t?i.push(t):i.push(j?(0,_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__.geographicToWebMercator)(r.shift()):r.shift())}return i}const D=[];for(let e=0;e<v.length;e++){const t=v[e];if(\"cut\"!==t)D.push(t);else{const e=S.shift();D.push(!0===j?(0,_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__.geographicToWebMercator)(e):e)}}return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.resolve)(D)}function X(e){if(!e)return null;const t=e.extent;if(!t)return null;const n=e.spatialReference&&(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.getInfo)(e.spatialReference);if(!n)return t;const[s,o]=n.valid,r=2*o,{width:f}=t;let l,{xmin:c,xmax:p}=t;if([c,p]=[p,c],\"extent\"===e.type||0===f||f<=o||f>r||c<s||p>o)return t;switch(e.type){case\"polygon\":if(!(e.rings.length>1))return t;l=j(e.rings);break;case\"polyline\":if(!(e.paths.length>1))return t;l=j(e.paths);break;case\"multipoint\":l=e.points}const a=t.clone();for(let e=0;e<l.length;e++){let t=l[e][0];t<0?(t+=o,p=Math.max(t,p)):(t-=o,c=Math.min(t,c))}return a.xmin=c,a.xmax=p,a.width<f?(a.xmin-=o,a.xmax-=o,a):t}function U(e,t){const n=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.getInfo)(t);if(n){const[t,s]=n.valid,o=s-t;if(e<t)for(;e<t;)e+=o;if(e>s)for(;e>s;)e-=o}return e}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/geometry/support/normalizeUtils.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/layers/mixins/CustomParametersMixin.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/mixins/CustomParametersMixin.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CustomParametersMixin\": () => (/* binding */ e)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ \"./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/uuid.js */ \"./node_modules/@arcgis/core/core/uuid.js\");\n/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../portal/support/resourceExtension.js */ \"./node_modules/@arcgis/core/portal/support/resourceExtension.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst e=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({json:{write:!0,origins:{\"web-scene\":{write:!1}}}})],t.prototype,\"customParameters\",void 0),t=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)(\"esri.layers.mixins.CustomParametersMixin\")],t),t};\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/layers/mixins/CustomParametersMixin.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/FeatureTemplate.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/FeatureTemplate.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/lang.js */ \"./node_modules/@arcgis/core/core/lang.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ \"./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\");\n/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/jsonMap.js */ \"./node_modules/@arcgis/core/core/jsonMap.js\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\");\n/* harmony import */ var _core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/writer.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/uuid.js */ \"./node_modules/@arcgis/core/core/uuid.js\");\n/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../portal/support/resourceExtension.js */ \"./node_modules/@arcgis/core/portal/support/resourceExtension.js\");\n/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/JSONSupport.js */ \"./node_modules/@arcgis/core/core/JSONSupport.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst a=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_6__.JSONMap({esriFeatureEditToolAutoCompletePolygon:\"auto-complete-polygon\",esriFeatureEditToolCircle:\"circle\",esriFeatureEditToolEllipse:\"ellipse\",esriFeatureEditToolFreehand:\"freehand\",esriFeatureEditToolLine:\"line\",esriFeatureEditToolNone:\"none\",esriFeatureEditToolPoint:\"point\",esriFeatureEditToolPolygon:\"polygon\",esriFeatureEditToolRectangle:\"rectangle\",esriFeatureEditToolArrow:\"arrow\",esriFeatureEditToolTriangle:\"triangle\",esriFeatureEditToolLeftArrow:\"left-arrow\",esriFeatureEditToolRightArrow:\"right-arrow\",esriFeatureEditToolUpArrow:\"up-arrow\",esriFeatureEditToolDownArrow:\"down-arrow\"});let n=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_12__.JSONSupport{constructor(o){super(o),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}writeDrawingTool(o,r){r.drawingTool=a.toJSON(o)}writePrototype(o,t){t.prototype=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.fixJson)((0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(o),!0)}writeThumbnail(o,t){t.thumbnail=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.fixJson)((0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(o))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{write:!0}})],n.prototype,\"name\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{write:!0}})],n.prototype,\"description\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{read:a.read,write:a.write}})],n.prototype,\"drawingTool\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_8__.writer)(\"drawingTool\")],n.prototype,\"writeDrawingTool\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{write:!0}})],n.prototype,\"prototype\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_8__.writer)(\"prototype\")],n.prototype,\"writePrototype\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{write:!0}})],n.prototype,\"thumbnail\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_8__.writer)(\"thumbnail\")],n.prototype,\"writeThumbnail\",null),n=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)(\"esri.layers.support.FeatureTemplate\")],n);var u=n;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (u);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/layers/support/FeatureTemplate.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/FeatureType.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/FeatureType.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/lang.js */ \"./node_modules/@arcgis/core/core/lang.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ \"./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\");\n/* harmony import */ var _core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/reader.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\");\n/* harmony import */ var _core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/writer.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/uuid.js */ \"./node_modules/@arcgis/core/core/uuid.js\");\n/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../portal/support/resourceExtension.js */ \"./node_modules/@arcgis/core/portal/support/resourceExtension.js\");\n/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/JSONSupport.js */ \"./node_modules/@arcgis/core/core/JSONSupport.js\");\n/* harmony import */ var _CodedValueDomain_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./CodedValueDomain.js */ \"./node_modules/@arcgis/core/layers/support/CodedValueDomain.js\");\n/* harmony import */ var _InheritedDomain_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./InheritedDomain.js */ \"./node_modules/@arcgis/core/layers/support/InheritedDomain.js\");\n/* harmony import */ var _RangeDomain_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./RangeDomain.js */ \"./node_modules/@arcgis/core/layers/support/RangeDomain.js\");\n/* harmony import */ var _domains_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./domains.js */ \"./node_modules/@arcgis/core/layers/support/domains.js\");\n/* harmony import */ var _FeatureTemplate_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./FeatureTemplate.js */ \"./node_modules/@arcgis/core/layers/support/FeatureTemplate.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet l=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_12__.JSONSupport{constructor(o){super(o),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(o){const r={};for(const e in o)if(o.hasOwnProperty(e)){const t=o[e];switch(t.type){case\"range\":r[e]=_RangeDomain_js__WEBPACK_IMPORTED_MODULE_15__.default.fromJSON(t);break;case\"codedValue\":r[e]=_CodedValueDomain_js__WEBPACK_IMPORTED_MODULE_13__.default.fromJSON(t);break;case\"inherited\":r[e]=_InheritedDomain_js__WEBPACK_IMPORTED_MODULE_14__.default.fromJSON(t)}}return r}writeDomains(o,e){const t={};for(const r in o)o.hasOwnProperty(r)&&(t[r]=o[r]&&o[r].toJSON());(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.fixJson)(t),e.domains=t}readTemplates(o){return o&&o.map((o=>new _FeatureTemplate_js__WEBPACK_IMPORTED_MODULE_17__.default(o)))}writeTemplates(o,r){r.templates=o&&o.map((o=>o.toJSON()))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{write:!0}})],l.prototype,\"id\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{write:!0}})],l.prototype,\"name\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{write:!0}})],l.prototype,\"domains\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_6__.reader)(\"domains\")],l.prototype,\"readDomains\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_8__.writer)(\"domains\")],l.prototype,\"writeDomains\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{write:!0}})],l.prototype,\"templates\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_6__.reader)(\"templates\")],l.prototype,\"readTemplates\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_8__.writer)(\"templates\")],l.prototype,\"writeTemplates\",null),l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)(\"esri.layers.support.FeatureType\")],l);var u=l;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (u);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/layers/support/FeatureType.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/support/defaultsJSON.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/support/defaultsJSON.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"defaultColor\": () => (/* binding */ e),\n/* harmony export */   \"defaultOutlineColor\": () => (/* binding */ i),\n/* harmony export */   \"defaultPointSymbolJSON\": () => (/* binding */ l),\n/* harmony export */   \"defaultPolygonSymbolJSON\": () => (/* binding */ S),\n/* harmony export */   \"defaultPolylineSymbolJSON\": () => (/* binding */ o),\n/* harmony export */   \"defaultTextSymbolJSON\": () => (/* binding */ t),\n/* harmony export */   \"errorPointSymbolJSON\": () => (/* binding */ r),\n/* harmony export */   \"errorPolygonSymbolJSON\": () => (/* binding */ y),\n/* harmony export */   \"errorPolylineSymbolJSON\": () => (/* binding */ s)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst e=[252,146,31,255],i=[153,153,153,255],l={type:\"esriSMS\",style:\"esriSMSCircle\",size:6,color:e,outline:{type:\"esriSLS\",style:\"esriSLSSolid\",width:.75,color:[153,153,153,255]}},o={type:\"esriSLS\",style:\"esriSLSSolid\",width:.75,color:e},S={type:\"esriSFS\",style:\"esriSFSSolid\",color:[252,146,31,196],outline:{type:\"esriSLS\",style:\"esriSLSSolid\",width:.75,color:[255,255,255,191]}},t={type:\"esriTS\",color:[255,255,255,255],font:{family:\"arial-unicode-ms\",size:10,weight:\"bold\"},horizontalAlignment:\"center\",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:\"\",xoffset:0,yoffset:0,angle:0},r={type:\"esriSMS\",style:\"esriSMSCircle\",color:[0,0,0,255],outline:null,size:10.5},s={type:\"esriSLS\",style:\"esriSLSSolid\",color:[0,0,0,255],width:1.5},y={type:\"esriSFS\",style:\"esriSFSSolid\",color:[0,0,0,255],outline:null};\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/symbols/support/defaultsJSON.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/tasks/Task.js":
/*!*************************************************!*\
  !*** ./node_modules/@arcgis/core/tasks/Task.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/accessorSupport/ensureType.js */ \"./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/accessorSupport/decorators/property.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/accessorSupport/decorators/subclass.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/uuid.js */ \"./node_modules/@arcgis/core/core/uuid.js\");\n/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../portal/support/resourceExtension.js */ \"./node_modules/@arcgis/core/portal/support/resourceExtension.js\");\n/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/Accessor.js */ \"./node_modules/@arcgis/core/core/Accessor.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet p=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_9__.default{constructor(...r){super(...r),this.requestOptions=null,this.url=null}normalizeCtorArgs(r,o){return\"string\"!=typeof r?r:{url:r,...o}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(r){return r?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__.urlToObject)(r):null}_encode(r,o,e){const s={};for(const t in r){if(\"declaredClass\"===t)continue;const p=r[t];if(null!=p&&\"function\"!=typeof p)if(Array.isArray(p)){s[t]=[];for(let r=0;r<p.length;r++)s[t][r]=this._encode(p[r])}else if(\"object\"==typeof p)if(p.toJSON){const r=p.toJSON(e&&e[t]);s[t]=o?r:JSON.stringify(r)}else s[t]=o?p:JSON.stringify(p);else s[t]=p}return s}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0,dependsOn:[\"url\"]})],p.prototype,\"parsedUrl\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],p.prototype,\"requestOptions\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:String})],p.prototype,\"url\",void 0),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)(\"esri.tasks.Task\")],p);var i=p;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (i);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/tasks/Task.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/tasks/geometry/cut.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/tasks/geometry/cut.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"cut\": () => (/* binding */ o)\n/* harmony export */ });\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/support/jsonUtils.js */ \"./node_modules/@arcgis/core/geometry/support/jsonUtils.js\");\n/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry.js */ \"./node_modules/@arcgis/core/geometry.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nasync function o(o,i,n,m){const p=\"string\"==typeof o?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.urlToObject)(o):o,a=i[0].spatialReference,u={...m,query:{...p.query,f:\"json\",sr:JSON.stringify(a),target:JSON.stringify({geometryType:(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__.getJsonType)(i[0]),geometries:i}),cutter:JSON.stringify(n)}},c=await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__.default)(p.path+\"/cut\",u),{cutIndexes:f,geometries:g=[]}=c.data;return{cutIndexes:f,geometries:g.map((e=>{const t=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__.fromJSON)(e);return t.spatialReference=a,t}))}}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/tasks/geometry/cut.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/tasks/geometry/simplify.js":
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/tasks/geometry/simplify.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"simplify\": () => (/* binding */ i)\n/* harmony export */ });\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/support/jsonUtils.js */ \"./node_modules/@arcgis/core/geometry/support/jsonUtils.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../request.js */ \"./node_modules/@arcgis/core/request.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nasync function i(i,n,f){const m=\"string\"==typeof i?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.urlToObject)(i):i,p=n[0].spatialReference,a=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__.getJsonType)(n[0]),u={...f,query:{...m.query,f:\"json\",sr:p.wkid?p.wkid:JSON.stringify(p),geometries:JSON.stringify(s(n))}};return function(r,t,o){const i=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__.getGeometryType)(t);return r.map((r=>{const t=i.fromJSON(r);return t.spatialReference=o,t}))}((await (0,_request_js__WEBPACK_IMPORTED_MODULE_2__.default)(m.path+\"/simplify\",u)).data,a,p)}function s(r){return{geometryType:(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__.getJsonType)(r[0]),geometries:r.map((r=>r.toJSON()))}}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/tasks/geometry/simplify.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/tasks/operations/queryZScale.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/tasks/operations/queryZScale.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"applyFeatureSetZUnitScaling\": () => (/* binding */ t)\n/* harmony export */ });\n/* harmony import */ var _zscale_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./zscale.js */ \"./node_modules/@arcgis/core/tasks/operations/zscale.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,o,r){if(!r||!r.features||!r.hasZ)return;const f=(0,_zscale_js__WEBPACK_IMPORTED_MODULE_0__.getGeometryZScaler)(r.geometryType,o,t.outSpatialReference);if(f)for(const e of r.features)f(e.geometry)}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/tasks/operations/queryZScale.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/tasks/operations/zscale.js":
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/tasks/operations/zscale.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getGeometryZScaler\": () => (/* binding */ o),\n/* harmony export */   \"unapplyEditsZUnitScaling\": () => (/* binding */ i)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/support/spatialReferenceUtils.js */ \"./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js\");\n/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/unitUtils.js */ \"./node_modules/@arcgis/core/core/unitUtils.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction o(o,r,i){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(r)||(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(i)||i.vcsWkid||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__.equals)(r,i))return null;const s=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.getMetersPerVerticalUnitForSR)(r)/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.getMetersPerVerticalUnitForSR)(i);if(1===s)return null;switch(o){case\"point\":case\"esriGeometryPoint\":return n=>{return t=s,void((e=n)&&null!=e.z&&(e.z*=t));var e,t};case\"polyline\":case\"esriGeometryPolyline\":return n=>function(n,e){if(!n)return;for(const t of n.paths)for(const n of t)n.length>2&&(n[2]*=e)}(n,s);case\"polygon\":case\"esriGeometryPolygon\":return n=>function(n,e){if(!n)return;for(const t of n.rings)for(const n of t)n.length>2&&(n[2]*=e)}(n,s);case\"multipoint\":case\"esriGeometryMultipoint\":return n=>function(n,e){if(!n)return;for(const t of n.points)t.length>2&&(t[2]*=e)}(n,s);default:return null}}function r(n,e,t){if(null==n.hasM||n.hasZ)for(const n of e)for(const e of n)e.length>2&&(e[2]*=t)}function i(n,e,o){if(!n&&!e||!o)return;const r=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.getMetersPerVerticalUnitForSR)(o);s(n,o,r),s(e,o,r)}function s(n,e,t){if(n)for(const o of n)f(o.geometry,e,t)}function f(n,o,i){if(!n||!n.spatialReference||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__.equals)(n.spatialReference,o))return;const s=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.getMetersPerVerticalUnitForSR)(n.spatialReference)/i;if(1!==s)if(\"x\"in n)null!=n.z&&(n.z*=s);else if(\"rings\"in n)r(n,n.rings,s);else if(\"paths\"in n)r(n,n.paths,s);else if(\"points\"in n&&(null==n.hasM||n.hasZ))for(const e of n.points)e.length>2&&(e[2]*=s)}\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/tasks/operations/zscale.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/tasks/support/FeatureSet.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/tasks/support/FeatureSet.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ \"./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\");\n/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/jsonMap.js */ \"./node_modules/@arcgis/core/core/jsonMap.js\");\n/* harmony import */ var _core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/reader.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\");\n/* harmony import */ var _core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/writer.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/urlUtils.js */ \"./node_modules/@arcgis/core/core/urlUtils.js\");\n/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../core/uuid.js */ \"./node_modules/@arcgis/core/core/uuid.js\");\n/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../portal/support/resourceExtension.js */ \"./node_modules/@arcgis/core/portal/support/resourceExtension.js\");\n/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../core/JSONSupport.js */ \"./node_modules/@arcgis/core/core/JSONSupport.js\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ \"./node_modules/@arcgis/core/geometry/SpatialReference.js\");\n/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../geometry/support/jsonUtils.js */ \"./node_modules/@arcgis/core/geometry/support/jsonUtils.js\");\n/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../geometry.js */ \"./node_modules/@arcgis/core/geometry.js\");\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../layers/support/Field.js */ \"./node_modules/@arcgis/core/layers/support/Field.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst h=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_6__.JSONMap({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryEnvelope:\"extent\",mesh:\"mesh\",\"\":null});let d=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_13__.JSONSupport{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,r){const o=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_14__.default.fromJSON(r.spatialReference),s=[];for(let r=0;r<e.length;r++){const i=e[r],n=_Graphic_js__WEBPACK_IMPORTED_MODULE_17__.default.fromJSON(i),p=i.geometry&&i.geometry.spatialReference;(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.isSome)(n.geometry)&&!p&&(n.geometry.spatialReference=o),s.push(n)}return s}writeGeometryType(e,r,o,s){if(e)return void h.write(e,r,o,s);const{features:i}=this;if(i)for(const e of i)if(e&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.isSome)(e.geometry))return void h.write(e.geometry.type,r,o,s)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_15__.fromJSON)(e);return!r&&t.spatialReference&&(o.spatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_14__.default.fromJSON(t.spatialReference)),o}writeSpatialReference(e,r){if(e)return void(r.spatialReference=e.toJSON());const{features:o}=this;if(o)for(const e of o)e&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.isSome)(e.geometry)&&e.geometry.spatialReference&&(r.spatialReference=e.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,o],translate:[s,i]}=e,n=this.features,p=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-s)/t)),(e=>Math.round((i-e)/o)));for(let e=0,t=n.length;e<t;e++)p((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.unwrap)(n[e].geometry))||(n.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:r,transform:o}=this;if(!o)return this;const{translate:[s,i],scale:[n,p]}=o,l=this._getHydrationFunction(e,(e=>e*n+s),(e=>i-e*p));for(const{geometry:e}of r)(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.isSome)(e)&&l(e);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const i=[];for(let n=0,p=e.length;n<p;n++){const p=e[n];if(n>0){const e=t(p[0]),n=r(p[1]);e===o&&n===s||(i.push([e-o,n-s]),o=e,s=n)}else o=t(p[0]),s=r(p[1]),i.push([o,s])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return\"point\"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):\"polyline\"===e||\"polygon\"===e?e=>{const o=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_15__.isPolygon)(e)?e.rings:e.paths,s=[];for(let e=0,i=o.length;e<i;e++){const i=o[e],n=this._quantizePoints(i,t,r);n&&s.push(n)}return s.length>0?((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_15__.isPolygon)(e)?e.rings=s:e.paths=s,e):null}:\"multipoint\"===e?e=>{let o;return o=this._quantizePoints(e.points,t,r),o.length>0?(e.points=o,e):null}:\"extent\"===e?e=>e:null}_getHydrationFunction(e,t,r){return\"point\"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:\"polyline\"===e||\"polygon\"===e?e=>{const o=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_15__.isPolygon)(e)?e.rings:e.paths;let s,i;for(let e=0,n=o.length;e<n;e++){const n=o[e];for(let e=0,o=n.length;e<o;e++){const o=n[e];e>0?(s+=o[0],i+=o[1]):(s=o[0],i=o[1]),o[0]=t(s),o[1]=r(i)}}}:\"extent\"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:\"multipoint\"===e?e=>{const o=e.points;let s,i;for(let e=0,n=o.length;e<n;e++){const n=o[e];e>0?(s+=n[0],i+=n[1]):(s=n[0],i=n[1]),n[0]=t(s),n[1]=r(i)}}:void 0}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:String,json:{write:!0}})],d.prototype,\"displayFieldName\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"exceededTransferLimit\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:[_Graphic_js__WEBPACK_IMPORTED_MODULE_17__.default],json:{write:!0}})],d.prototype,\"features\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__.reader)(\"features\")],d.prototype,\"readFeatures\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:[_layers_support_Field_js__WEBPACK_IMPORTED_MODULE_18__.default],json:{write:!0}})],d.prototype,\"fields\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:[\"point\",\"multipoint\",\"polyline\",\"polygon\",\"extent\",\"mesh\"],json:{read:{reader:h.read}}})],d.prototype,\"geometryType\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__.writer)(\"geometryType\")],d.prototype,\"writeGeometryType\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasM\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasZ\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({types:_geometry_js__WEBPACK_IMPORTED_MODULE_16__.geometryTypes,json:{write:!0}})],d.prototype,\"queryGeometry\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__.reader)(\"queryGeometry\")],d.prototype,\"readQueryGeometry\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_14__.default,json:{write:!0}})],d.prototype,\"spatialReference\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__.writer)(\"spatialReference\")],d.prototype,\"writeSpatialReference\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({json:{write:!0}})],d.prototype,\"transform\",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)(\"esri.tasks.support.FeatureSet\")],d),d.prototype.toJSON.isDefaultToJSON=!0,d||(d={});var g=d;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (g);\n\n\n//# sourceURL=webpack://imaps/./node_modules/@arcgis/core/tasks/support/FeatureSet.js?");

/***/ })

}]);